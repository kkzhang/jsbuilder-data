cc.v2fzero=function(){return{x:0,y:0}};cc.v2f=function(a,b){return{x:a,y:b}};cc.v2fadd=function(a,b){return cc.v2f(a.x+b.x,a.y+b.y)};cc.v2fsub=function(a,b){return cc.v2f(a.x-b.x,a.y-b.y)};cc.v2fmult=function(a,b){return cc.v2f(a.x*b,a.y*b)};cc.v2fperp=function(a){return cc.v2f(-a.y,a.x)};cc.v2fneg=function(a){return cc.v2f(-a.x,-a.y)};cc.v2fdot=function(a,b){return a.x*b.x+a.y*b.y};cc.v2fforangle=function(a){return cc.v2f(Math.cos(a),Math.sin(a))};
cc.v2fnormalize=function(a){a=cc.pNormalize(cc.p(a.x,a.y));return cc.v2f(a.x,a.y)};cc.__v2f=function(a){return cc.v2f(a.x,a.y)};cc.__t=function(a){return{u:a.x,v:a.y}};
cc.DrawNodeCanvas=cc.Node.extend({_buffer:null,_blendFunc:null,_lineWidth:1,_drawColor:null,_className:"DrawNodeCanvas",ctor:function(){cc.Node.prototype.ctor.call(this);this._buffer=[];this._drawColor=cc.color(255,255,255,255);this._blendFunc=new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST);this.init()},getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(a,b){void 0===b?(this._blendFunc.src=a.src,this._blendFunc.dst=a.dst):(this._blendFunc.src=a,this._blendFunc.dst=b)},setLineWidth:function(a){this._lineWidth=
a},getLineWidth:function(){return this._lineWidth},setDrawColor:function(a){var b=this._drawColor;b.r=a.r;b.g=a.g;b.b=a.b;b.a=null==a.a?255:a.a},getDrawColor:function(){return cc.color(this._drawColor.r,this._drawColor.g,this._drawColor.b,this._drawColor.a)},drawRect:function(a,b,d,c,e){c=c||this._lineWidth;e=e||this.getDrawColor();null==e.a&&(e.a=255);a=[a,cc.p(b.x,a.y),b,cc.p(a.x,b.y)];b=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);b.verts=a;b.lineWidth=c;b.lineColor=e;b.isClosePolygon=!0;b.isStroke=
!0;b.lineCap="butt";if(b.fillColor=d)null==d.a&&(d.a=255),b.isFill=!0;this._buffer.push(b)},drawCircle:function(a,b,d,c,e,g,h){g=g||this._lineWidth;h=h||this.getDrawColor();null==h.a&&(h.a=255);for(var f=2*Math.PI/c,k=[],l=0;l<=c;l++){var m=l*f,p=b*Math.cos(m+d)+a.x,m=b*Math.sin(m+d)+a.y;k.push(cc.p(p,m))}e&&k.push(cc.p(a.x,a.y));a=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);a.verts=k;a.lineWidth=g;a.lineColor=h;a.isClosePolygon=!0;a.isStroke=!0;this._buffer.push(a)},drawQuadBezier:function(a,
b,d,c,e,g){e=e||this._lineWidth;g=g||this.getDrawColor();null==g.a&&(g.a=255);for(var h=[],f=0,k=0;k<c;k++){var l=Math.pow(1-f,2)*a.x+2*(1-f)*f*b.x+f*f*d.x,m=Math.pow(1-f,2)*a.y+2*(1-f)*f*b.y+f*f*d.y;h.push(cc.p(l,m));f+=1/c}h.push(cc.p(d.x,d.y));a=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);a.verts=h;a.lineWidth=e;a.lineColor=g;a.isStroke=!0;a.lineCap="round";this._buffer.push(a)},drawCubicBezier:function(a,b,d,c,e,g,h){g=g||this._lineWidth;h=h||this.getDrawColor();null==h.a&&(h.a=255);for(var f=
[],k=0,l=0;l<e;l++){var m=Math.pow(1-k,3)*a.x+3*Math.pow(1-k,2)*k*b.x+3*(1-k)*k*k*d.x+k*k*k*c.x,p=Math.pow(1-k,3)*a.y+3*Math.pow(1-k,2)*k*b.y+3*(1-k)*k*k*d.y+k*k*k*c.y;f.push(cc.p(m,p));k+=1/e}f.push(cc.p(c.x,c.y));a=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);a.verts=f;a.lineWidth=g;a.lineColor=h;a.isStroke=!0;a.lineCap="round";this._buffer.push(a)},drawCatmullRom:function(a,b,d,c){this.drawCardinalSpline(a,0.5,b,d,c)},drawCardinalSpline:function(a,b,d,c,e){c=c||this._lineWidth;e=e||this.getDrawColor();
null==e.a&&(e.a=255);for(var g=[],h,f,k=1/a.length,l=0;l<d+1;l++)f=l/d,1==f?(h=a.length-1,f=1):(h=0|f/k,f=(f-k*h)/k),h=cc.cardinalSplineAt(cc.getControlPointAt(a,h-1),cc.getControlPointAt(a,h-0),cc.getControlPointAt(a,h+1),cc.getControlPointAt(a,h+2),b,f),g.push(h);a=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);a.verts=g;a.lineWidth=c;a.lineColor=e;a.isStroke=!0;a.lineCap="round";this._buffer.push(a)},drawDot:function(a,b,d){d=d||this.getDrawColor();null==d.a&&(d.a=255);var c=new cc._DrawNodeElement(cc.DrawNode.TYPE_DOT);
c.verts=[a];c.lineWidth=b;c.fillColor=d;this._buffer.push(c)},drawDots:function(a,b,d){if(a&&0!=a.length){d=d||this.getDrawColor();null==d.a&&(d.a=255);for(var c=0,e=a.length;c<e;c++)this.drawDot(a[c],b,d)}},drawSegment:function(a,b,d,c){d=d||this._lineWidth;c=c||this.getDrawColor();null==c.a&&(c.a=255);var e=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);e.verts=[a,b];e.lineWidth=2*d;e.lineColor=c;e.isStroke=!0;e.lineCap="round";this._buffer.push(e)},drawPoly_:function(a,b,d,c){d=d||this._lineWidth;
c=c||this.getDrawColor();null==c.a&&(c.a=255);var e=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);e.verts=a;e.fillColor=b;e.lineWidth=d;e.lineColor=c;e.isClosePolygon=!0;e.isStroke=!0;e.lineCap="round";b&&(e.isFill=!0);this._buffer.push(e)},drawPoly:function(a,b,d,c){for(var e=[],g=0;g<a.length;g++)e.push(cc.p(a[g].x,a[g].y));return this.drawPoly_(e,b,d,c)},draw:function(a){a=a||cc._renderContext;this._blendFunc&&(this._blendFunc.src==cc.SRC_ALPHA&&this._blendFunc.dst==cc.ONE)&&(a.globalCompositeOperation=
"lighter");for(var b=0;b<this._buffer.length;b++){var d=this._buffer[b];switch(d.type){case cc.DrawNode.TYPE_DOT:this._drawDot(a,d);break;case cc.DrawNode.TYPE_SEGMENT:this._drawSegment(a,d);break;case cc.DrawNode.TYPE_POLY:this._drawPoly(a,d)}}},_drawDot:function(a,b){var d=b.fillColor,c=b.verts[0],e=b.lineWidth,g=cc.view.getScaleX(),h=cc.view.getScaleY();a.fillStyle="rgba("+(0|d.r)+","+(0|d.g)+","+(0|d.b)+","+d.a/255+")";a.beginPath();a.arc(c.x*g,-c.y*h,e*g,0,2*Math.PI,!1);a.closePath();a.fill()},
_drawSegment:function(a,b){var d=b.lineColor,c=b.verts[0],e=b.verts[1],g=b.lineWidth,h=b.lineCap,f=cc.view.getScaleX(),k=cc.view.getScaleY();a.strokeStyle="rgba("+(0|d.r)+","+(0|d.g)+","+(0|d.b)+","+d.a/255+")";a.lineWidth=g*f;a.beginPath();a.lineCap=h;a.moveTo(c.x*f,-c.y*k);a.lineTo(e.x*f,-e.y*k);a.stroke()},_drawPoly:function(a,b){var d=b.verts,c=b.lineCap,e=b.fillColor,g=b.lineWidth,h=b.lineColor,f=b.isClosePolygon,k=b.isFill,l=b.isStroke;if(null!=d){var m=d[0],p=cc.view.getScaleX(),q=cc.view.getScaleY();
a.lineCap=c;e&&(a.fillStyle="rgba("+(0|e.r)+","+(0|e.g)+","+(0|e.b)+","+e.a/255+")");g&&(a.lineWidth=g*p);h&&(a.strokeStyle="rgba("+(0|h.r)+","+(0|h.g)+","+(0|h.b)+","+h.a/255+")");a.beginPath();a.moveTo(m.x*p,-m.y*q);c=1;for(e=d.length;c<e;c++)a.lineTo(d[c].x*p,-d[c].y*q);f&&a.closePath();k&&a.fill();l&&a.stroke()}},clear:function(){this._buffer.length=0}});
cc.DrawNodeWebGL=cc.Node.extend({_bufferCapacity:0,_buffer:null,_trianglesArrayBuffer:null,_trianglesWebBuffer:null,_trianglesReader:null,_lineWidth:1,_drawColor:null,_blendFunc:null,_dirty:!1,_className:"DrawNodeWebGL",getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(a,b){void 0===b?(this._blendFunc.src=a.src,this._blendFunc.dst=a.dst):(this._blendFunc.src=a,this._blendFunc.dst=b)},ctor:function(){cc.Node.prototype.ctor.call(this);this._buffer=[];this._blendFunc=new cc.BlendFunc(cc.BLEND_SRC,
cc.BLEND_DST);this._drawColor=cc.color(255,255,255,255);this.init()},init:function(){return cc.Node.prototype.init.call(this)?(this.shaderProgram=cc.shaderCache.programForKey(cc.SHADER_POSITION_LENGTHTEXTURECOLOR),this._ensureCapacity(64),this._trianglesWebBuffer=cc._renderContext.createBuffer(),this._dirty=!0):!1},setLineWidth:function(a){this._lineWidth=a},getLineWidth:function(){return this._lineWidth},setDrawColor:function(a){var b=this._drawColor;b.r=a.r;b.g=a.g;b.b=a.b;b.a=a.a},getDrawColor:function(){return cc.color(this._drawColor.r,
this._drawColor.g,this._drawColor.b,this._drawColor.a)},drawRect:function(a,b,d,c,e){c=c||this._lineWidth;e=e||this.getDrawColor();null==e.a&&(e.a=255);a=[a,cc.p(b.x,a.y),b,cc.p(a.x,b.y)];null==d?this._drawSegments(a,c,e,!0):this.drawPoly(a,d,c,e)},drawCircle:function(a,b,d,c,e,g,h){g=g||this._lineWidth;h=h||this.getDrawColor();null==h.a&&(h.a=255);var f=2*Math.PI/c,k=[],l;for(l=0;l<=c;l++){var m=l*f,p=b*Math.cos(m+d)+a.x,m=b*Math.sin(m+d)+a.y;k.push(cc.p(p,m))}e&&k.push(cc.p(a.x,a.y));g*=0.5;l=0;
for(a=k.length;l<a-1;l++)this.drawSegment(k[l],k[l+1],g,h)},drawQuadBezier:function(a,b,d,c,e,g){e=e||this._lineWidth;g=g||this.getDrawColor();null==g.a&&(g.a=255);for(var h=[],f=0,k=0;k<c;k++){var l=Math.pow(1-f,2)*a.x+2*(1-f)*f*b.x+f*f*d.x,m=Math.pow(1-f,2)*a.y+2*(1-f)*f*b.y+f*f*d.y;h.push(cc.p(l,m));f+=1/c}h.push(cc.p(d.x,d.y));this._drawSegments(h,e,g,!1)},drawCubicBezier:function(a,b,d,c,e,g,h){g=g||this._lineWidth;h=h||this.getDrawColor();null==h.a&&(h.a=255);for(var f=[],k=0,l=0;l<e;l++){var m=
Math.pow(1-k,3)*a.x+3*Math.pow(1-k,2)*k*b.x+3*(1-k)*k*k*d.x+k*k*k*c.x,p=Math.pow(1-k,3)*a.y+3*Math.pow(1-k,2)*k*b.y+3*(1-k)*k*k*d.y+k*k*k*c.y;f.push(cc.p(m,p));k+=1/e}f.push(cc.p(c.x,c.y));this._drawSegments(f,g,h,!1)},drawCatmullRom:function(a,b,d,c){this.drawCardinalSpline(a,0.5,b,d,c)},drawCardinalSpline:function(a,b,d,c,e){c=c||this._lineWidth;e=e||this.getDrawColor();null==e.a&&(e.a=255);for(var g=[],h,f,k=1/a.length,l=0;l<d+1;l++)f=l/d,1==f?(h=a.length-1,f=1):(h=0|f/k,f=(f-k*h)/k),h=cc.cardinalSplineAt(cc.getControlPointAt(a,
h-1),cc.getControlPointAt(a,h-0),cc.getControlPointAt(a,h+1),cc.getControlPointAt(a,h+2),b,f),g.push(h);c*=0.5;a=0;for(b=g.length;a<b-1;a++)this.drawSegment(g[a],g[a+1],c,e)},_render:function(){var a=cc._renderContext;cc.glEnableVertexAttribs(cc.VERTEX_ATTRIB_FLAG_POS_COLOR_TEX);a.bindBuffer(a.ARRAY_BUFFER,this._trianglesWebBuffer);this._dirty&&(a.bufferData(a.ARRAY_BUFFER,this._trianglesArrayBuffer,a.STREAM_DRAW),this._dirty=!1);var b=cc.V2F_C4B_T2F.BYTES_PER_ELEMENT;a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,
2,a.FLOAT,!1,b,0);a.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR,4,a.UNSIGNED_BYTE,!0,b,8);a.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,a.FLOAT,!1,b,12);a.drawArrays(a.TRIANGLES,0,3*this._buffer.length);cc.incrementGLDraws(1)},_ensureCapacity:function(a){var b=this._buffer;if(b.length+a>this._bufferCapacity){var d=cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT;this._bufferCapacity+=Math.max(this._bufferCapacity,a);if(null==b||0===b.length)this._buffer=[],this._trianglesArrayBuffer=new ArrayBuffer(d*
this._bufferCapacity),this._trianglesReader=new Uint8Array(this._trianglesArrayBuffer);else{a=[];for(var c=new ArrayBuffer(d*this._bufferCapacity),e=0;e<b.length;e++)a[e]=new cc.V2F_C4B_T2F_Triangle(b[e].a,b[e].b,b[e].c,c,e*d);this._trianglesReader=new Uint8Array(c);this._trianglesArrayBuffer=c;this._buffer=a}}},draw:function(){cc.glBlendFunc(this._blendFunc.src,this._blendFunc.dst);this._shaderProgram.use();this._shaderProgram.setUniformsForBuiltins();this._render()},drawDot:function(a,b,d){d=d||
this.getDrawColor();null==d.a&&(d.a=255);var c={r:0|d.r,g:0|d.g,b:0|d.b,a:0|d.a};d={vertices:{x:a.x-b,y:a.y-b},colors:c,texCoords:{u:-1,v:-1}};var e={vertices:{x:a.x-b,y:a.y+b},colors:c,texCoords:{u:-1,v:1}},g={vertices:{x:a.x+b,y:a.y+b},colors:c,texCoords:{u:1,v:1}};a={vertices:{x:a.x+b,y:a.y-b},colors:c,texCoords:{u:1,v:-1}};this._ensureCapacity(6);this._buffer.push(new cc.V2F_C4B_T2F_Triangle(d,e,g,this._trianglesArrayBuffer,this._buffer.length*cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT));this._buffer.push(new cc.V2F_C4B_T2F_Triangle(d,
g,a,this._trianglesArrayBuffer,this._buffer.length*cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT));this._dirty=!0},drawDots:function(a,b,d){if(a&&0!=a.length){d=d||this.getDrawColor();null==d.a&&(d.a=255);for(var c=0,e=a.length;c<e;c++)this.drawDot(a[c],b,d)}},drawSegment:function(a,b,d,c){c=c||this.getDrawColor();null==c.a&&(c.a=255);d=d||0.5*this._lineWidth;this._ensureCapacity(18);c={r:0|c.r,g:0|c.g,b:0|c.b,a:0|c.a};var e=cc.__v2f(a),g=cc.__v2f(b);b=cc.v2fnormalize(cc.v2fperp(cc.v2fsub(g,e)));a=cc.v2fperp(b);
var h=cc.v2fmult(b,d),f=cc.v2fmult(a,d);d=cc.v2fsub(g,cc.v2fadd(h,f));var k=cc.v2fadd(g,cc.v2fsub(h,f)),l=cc.v2fsub(g,h),g=cc.v2fadd(g,h),m=cc.v2fsub(e,h),p=cc.v2fadd(e,h),q=cc.v2fsub(e,cc.v2fsub(h,f)),e=cc.v2fadd(e,cc.v2fadd(h,f)),h=cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT,f=this._trianglesArrayBuffer,n=this._buffer;n.push(new cc.V2F_C4B_T2F_Triangle({vertices:d,colors:c,texCoords:cc.__t(cc.v2fneg(cc.v2fadd(b,a)))},{vertices:k,colors:c,texCoords:cc.__t(cc.v2fsub(b,a))},{vertices:l,colors:c,texCoords:cc.__t(cc.v2fneg(b))},
f,n.length*h));n.push(new cc.V2F_C4B_T2F_Triangle({vertices:g,colors:c,texCoords:cc.__t(b)},{vertices:k,colors:c,texCoords:cc.__t(cc.v2fsub(b,a))},{vertices:l,colors:c,texCoords:cc.__t(cc.v2fneg(b))},f,n.length*h));n.push(new cc.V2F_C4B_T2F_Triangle({vertices:g,colors:c,texCoords:cc.__t(b)},{vertices:m,colors:c,texCoords:cc.__t(cc.v2fneg(b))},{vertices:l,colors:c,texCoords:cc.__t(cc.v2fneg(b))},f,n.length*h));n.push(new cc.V2F_C4B_T2F_Triangle({vertices:g,colors:c,texCoords:cc.__t(b)},{vertices:m,
colors:c,texCoords:cc.__t(cc.v2fneg(b))},{vertices:p,colors:c,texCoords:cc.__t(b)},f,n.length*h));n.push(new cc.V2F_C4B_T2F_Triangle({vertices:q,colors:c,texCoords:cc.__t(cc.v2fsub(a,b))},{vertices:m,colors:c,texCoords:cc.__t(cc.v2fneg(b))},{vertices:p,colors:c,texCoords:cc.__t(b)},f,n.length*h));n.push(new cc.V2F_C4B_T2F_Triangle({vertices:q,colors:c,texCoords:cc.__t(cc.v2fsub(a,b))},{vertices:e,colors:c,texCoords:cc.__t(cc.v2fadd(b,a))},{vertices:p,colors:c,texCoords:cc.__t(b)},f,n.length*h));this._dirty=
!0},drawPoly:function(a,b,d,c){if(null==b)this._drawSegments(a,d,c,!0);else{null==b.a&&(b.a=255);null==c.a&&(c.a=255);d=d||this._lineWidth;d*=0.5;b={r:0|b.r,g:0|b.g,b:0|b.b,a:0|b.a};c={r:0|c.r,g:0|c.g,b:0|c.b,a:0|c.a};var e=[],g,h,f,k,l=a.length;for(g=0;g<l;g++){h=cc.__v2f(a[(g-1+l)%l]);f=cc.__v2f(a[g]);k=cc.__v2f(a[(g+1)%l]);var m=cc.v2fnormalize(cc.v2fperp(cc.v2fsub(f,h)));f=cc.v2fnormalize(cc.v2fperp(cc.v2fsub(k,f)));m=cc.v2fmult(cc.v2fadd(m,f),1/(cc.v2fdot(m,f)+1));e[g]={offset:m,n:f}}m=0<d;this._ensureCapacity(3*
(3*l-2));var p=cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT,q=this._trianglesArrayBuffer,n=this._buffer,r=!1==m?0.5:0;for(g=0;g<l-2;g++)h=cc.v2fsub(cc.__v2f(a[0]),cc.v2fmult(e[0].offset,r)),f=cc.v2fsub(cc.__v2f(a[g+1]),cc.v2fmult(e[g+1].offset,r)),k=cc.v2fsub(cc.__v2f(a[g+2]),cc.v2fmult(e[g+2].offset,r)),n.push(new cc.V2F_C4B_T2F_Triangle({vertices:h,colors:b,texCoords:cc.__t(cc.v2fzero())},{vertices:f,colors:b,texCoords:cc.__t(cc.v2fzero())},{vertices:k,colors:b,texCoords:cc.__t(cc.v2fzero())},q,n.length*
p));for(g=0;g<l;g++){r=(g+1)%l;h=cc.__v2f(a[g]);f=cc.__v2f(a[r]);k=e[g].n;var s=e[g].offset,t=e[r].offset,r=m?cc.v2fsub(h,cc.v2fmult(s,d)):cc.v2fsub(h,cc.v2fmult(s,0.5)),u=m?cc.v2fsub(f,cc.v2fmult(t,d)):cc.v2fsub(f,cc.v2fmult(t,0.5));h=m?cc.v2fadd(h,cc.v2fmult(s,d)):cc.v2fadd(h,cc.v2fmult(s,0.5));f=m?cc.v2fadd(f,cc.v2fmult(t,d)):cc.v2fadd(f,cc.v2fmult(t,0.5));m?(n.push(new cc.V2F_C4B_T2F_Triangle({vertices:r,colors:c,texCoords:cc.__t(cc.v2fneg(k))},{vertices:u,colors:c,texCoords:cc.__t(cc.v2fneg(k))},
{vertices:f,colors:c,texCoords:cc.__t(k)},q,n.length*p)),n.push(new cc.V2F_C4B_T2F_Triangle({vertices:r,colors:c,texCoords:cc.__t(cc.v2fneg(k))},{vertices:h,colors:c,texCoords:cc.__t(k)},{vertices:f,colors:c,texCoords:cc.__t(k)},q,n.length*p))):(n.push(new cc.V2F_C4B_T2F_Triangle({vertices:r,colors:b,texCoords:cc.__t(cc.v2fzero())},{vertices:u,colors:b,texCoords:cc.__t(cc.v2fzero())},{vertices:f,colors:b,texCoords:cc.__t(k)},q,n.length*p)),n.push(new cc.V2F_C4B_T2F_Triangle({vertices:r,colors:b,texCoords:cc.__t(cc.v2fzero())},
{vertices:h,colors:b,texCoords:cc.__t(k)},{vertices:f,colors:b,texCoords:cc.__t(k)},q,n.length*p)))}this._dirty=!0}},_drawSegments:function(a,b,d,c){b=b||this._lineWidth;d=d||this._drawColor;null==d.a&&(d.a=255);b*=0.5;if(!(0>=b)){d={r:0|d.r,g:0|d.g,b:0|d.b,a:0|d.a};var e=[],g,h,f,k,l=a.length;for(g=0;g<l;g++){h=cc.__v2f(a[(g-1+l)%l]);f=cc.__v2f(a[g]);k=cc.__v2f(a[(g+1)%l]);var m=cc.v2fnormalize(cc.v2fperp(cc.v2fsub(f,h)));f=cc.v2fnormalize(cc.v2fperp(cc.v2fsub(k,f)));k=cc.v2fmult(cc.v2fadd(m,f),
1/(cc.v2fdot(m,f)+1));e[g]={offset:k,n:f}}this._ensureCapacity(3*(3*l-2));k=cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT;var m=this._trianglesArrayBuffer,p=this._buffer;c=c?l:l-1;for(g=0;g<c;g++){var q=(g+1)%l;h=cc.__v2f(a[g]);f=cc.__v2f(a[q]);var n=e[g].n,r=e[g].offset,s=e[q].offset,q=cc.v2fsub(h,cc.v2fmult(r,b)),t=cc.v2fsub(f,cc.v2fmult(s,b));h=cc.v2fadd(h,cc.v2fmult(r,b));f=cc.v2fadd(f,cc.v2fmult(s,b));p.push(new cc.V2F_C4B_T2F_Triangle({vertices:q,colors:d,texCoords:cc.__t(cc.v2fneg(n))},{vertices:t,
colors:d,texCoords:cc.__t(cc.v2fneg(n))},{vertices:f,colors:d,texCoords:cc.__t(n)},m,p.length*k));p.push(new cc.V2F_C4B_T2F_Triangle({vertices:q,colors:d,texCoords:cc.__t(cc.v2fneg(n))},{vertices:h,colors:d,texCoords:cc.__t(n)},{vertices:f,colors:d,texCoords:cc.__t(n)},m,p.length*k))}this._dirty=!0}},clear:function(){this._buffer.length=0;this._dirty=!0}});cc.DrawNode=cc._renderType==cc._RENDER_TYPE_WEBGL?cc.DrawNodeWebGL:cc.DrawNodeCanvas;cc.DrawNode.create=function(){return new cc.DrawNode};
cc._DrawNodeElement=function(a,b,d,c,e,g,h,f,k){this.type=a;this.verts=b||null;this.fillColor=d||null;this.lineWidth=c||0;this.lineColor=e||null;this.lineCap=g||"butt";this.isClosePolygon=h||!1;this.isFill=f||!1;this.isStroke=k||!1};cc.DrawNode.TYPE_DOT=0;cc.DrawNode.TYPE_SEGMENT=1;cc.DrawNode.TYPE_POLY=2;