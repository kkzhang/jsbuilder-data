!function(){gaf.Sprite.WebGLRenderCmd=function(a){cc.Sprite.WebGLRenderCmd.call(this,a),this._defualtShader=cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURECOLOR),this._customShader=gaf._Shaders.Alpha,this._tintMult=null,this._tintOffset=null,this._ctxMatrixBody=null,this._ctxMatrixAppendix=null};var a=gaf.Sprite.WebGLRenderCmd.prototype=Object.create(cc.Sprite.WebGLRenderCmd.prototype);a.constructor=gaf.Sprite.WebGLRenderCmd,a._identityVec=[1,1,1,1],a._zeroVec=[0,0,0,0],a._identityMat=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a._disableCtx=function(){this.setShaderProgram(this._defualtShader)},a._enableCtx=function(){this.setShaderProgram(this._customShader)},a._applyCtxState=function(a){var b=a._cascadeColorMult;this._tintMult=[b.r/255,b.g/255,b.b/255,b.a/255];var c=a._cascadeColorOffset;this._tintOffset=[c.r/255,c.g/255,c.b/255,c.a/255];var d=a._filterStack;if(d&&d.length>0&&d[0].type===gaf.EFFECT_COLOR_MATRIX){var e=d[0].colorMatrix;this._ctxMatrixBody=[e.rr,e.rg,e.rb,e.ra,e.gr,e.gg,e.gb,e.ga,e.br,e.bg,e.bb,e.ba,e.ar,e.ag,e.ab,e.aa],this._ctxMatrixAppendix=[e.r/255,e.g/255,e.b/255,e.a/255]}else this._ctxMatrixBody=null,this._ctxMatrixAppendix=null},a._setUniforms=function(){this._shaderProgram===this._customShader&&(this._shaderProgram.use(),this._shaderProgram.setUniformLocationWith4fv(gaf._Uniforms.ColorTransformMult,this._tintMult,1),this._shaderProgram.setUniformLocationWith4fv(gaf._Uniforms.ColorTransformOffset,this._tintOffset,1),this._ctxMatrixBody&&this._ctxMatrixAppendix?(this._shaderProgram.setUniformLocationWithMatrix4fv(gaf._Uniforms.ColorMatrixBody,this._ctxMatrixBody,1),this._shaderProgram.setUniformLocationWith4fv(gaf._Uniforms.ColorMatrixAppendix,this._ctxMatrixAppendix,1)):(this._shaderProgram.setUniformLocationWithMatrix4fv(gaf._Uniforms.ColorMatrixBody,this._identityMat,1),this._shaderProgram.setUniformLocationWith4fv(gaf._Uniforms.ColorMatrixAppendix,this._zeroVec,1)))},a.rendering=function(a){this._setUniforms(),cc.Sprite.WebGLRenderCmd.prototype.rendering.call(this,a)}}();