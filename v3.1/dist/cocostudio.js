!function(a){function b(a){function b(a,c,d){if("undefined"==typeof a&&(a=b.DEFAULT_CAPACITY),"undefined"==typeof c&&(c=b.DEFAULT_ENDIAN),"undefined"==typeof d&&(d=b.DEFAULT_NOASSERT),!d){if(a|=0,0>a)throw RangeError("Illegal capacity");c=!!c,d=!!d}this.buffer=0===a?f:new ArrayBuffer(a),this.view=0===a?null:new DataView(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=a,this.littleEndian="undefined"!=typeof c?!!c:!1,this.noAssert=!!d}function c(a){var b=0;return function(){return b<a.length?a.charCodeAt(b++):null}}function d(){var a=[],b=[];return function(){return 0===arguments.length?b.join("")+g.apply(String,a):(1024<a.length+arguments.length&&(b.push(g.apply(String,a)),a.length=0),void Array.prototype.push.apply(a,arguments))}}b.VERSION="3.4.0",b.LITTLE_ENDIAN=!0,b.BIG_ENDIAN=!1,b.DEFAULT_CAPACITY=16,b.DEFAULT_ENDIAN=b.BIG_ENDIAN,b.DEFAULT_NOASSERT=!1,b.Long=a||null;var e=b.prototype,f=new ArrayBuffer(0),g=String.fromCharCode;b.allocate=function(a,c,d){return new b(a,c,d)},b.concat=function(a,c,d,e){("boolean"==typeof c||"string"!=typeof c)&&(e=d,d=c,c=void 0);for(var f,g=0,h=0,i=a.length;i>h;++h)b.isByteBuffer(a[h])||(a[h]=b.wrap(a[h],c)),f=a[h].limit-a[h].offset,f>0&&(g+=f);if(0===g)return new b(0,d,e);for(c=new b(g,d,e),e=new Uint8Array(c.buffer),h=0;i>h;)d=a[h++],f=d.limit-d.offset,0>=f||(e.set(new Uint8Array(d.buffer).subarray(d.offset,d.limit),c.offset),c.offset+=f);return c.limit=c.offset,c.offset=0,c},b.isByteBuffer=function(a){return!0===(a&&a instanceof b)},b.type=function(){return ArrayBuffer},b.wrap=function(a,c,d,f){if("string"!=typeof c&&(f=d,d=c,c=void 0),"string"==typeof a)switch("undefined"==typeof c&&(c="utf8"),c){case"base64":return b.fromBase64(a,d);case"hex":return b.fromHex(a,d);case"binary":return b.fromBinary(a,d);case"utf8":return b.fromUTF8(a,d);case"debug":return b.fromDebug(a,d);default:throw Error("Unsupported encoding: "+c)}if(null===a||"object"!=typeof a)throw TypeError("Illegal buffer");if(b.isByteBuffer(a))return c=e.clone.call(a),c.markedOffset=-1,c;if(a instanceof Uint8Array)c=new b(0,d,f),0<a.length&&(c.buffer=a.buffer,c.offset=a.byteOffset,c.limit=a.byteOffset+a.length,c.view=0<a.length?new DataView(a.buffer):null);else if(a instanceof ArrayBuffer)c=new b(0,d,f),0<a.byteLength&&(c.buffer=a,c.offset=0,c.limit=a.byteLength,c.view=0<a.byteLength?new DataView(a):null);else{if("[object Array]"!==Object.prototype.toString.call(a))throw TypeError("Illegal buffer");for(c=new b(a.length,d,f),c.limit=a.length,i=0;i<a.length;++i)c.view.setUint8(i,a[i])}return c},e.writeInt8=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=1;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),this.view.setInt8(b-1,a),c&&(this.offset+=1),this},e.writeByte=e.writeInt8,e.readInt8=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}return a=this.view.getInt8(a),b&&(this.offset+=1),a},e.readByte=e.readInt8,e.writeUint8=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=1;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),this.view.setUint8(b-1,a),c&&(this.offset+=1),this},e.readUint8=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}return a=this.view.getUint8(a),b&&(this.offset+=1),a},e.writeInt16=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=2;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),this.view.setInt16(b-2,a,this.littleEndian),c&&(this.offset+=2),this},e.writeShort=e.writeInt16,e.readInt16=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+2) <= "+this.buffer.byteLength)}return a=this.view.getInt16(a,this.littleEndian),b&&(this.offset+=2),a},e.readShort=e.readInt16,e.writeUint16=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=2;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),this.view.setUint16(b-2,a,this.littleEndian),c&&(this.offset+=2),this},e.readUint16=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+2) <= "+this.buffer.byteLength)}return a=this.view.getUint16(a,this.littleEndian),b&&(this.offset+=2),a},e.writeInt32=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),this.view.setInt32(b-4,a,this.littleEndian),c&&(this.offset+=4),this},e.writeInt=e.writeInt32,e.readInt32=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}return a=this.view.getInt32(a,this.littleEndian),b&&(this.offset+=4),a},e.readInt=e.readInt32,e.writeUint32=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal value: "+a+" (not an integer)");if(a>>>=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),this.view.setUint32(b-4,a,this.littleEndian),c&&(this.offset+=4),this},e.readUint32=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}return a=this.view.getUint32(a,this.littleEndian),b&&(this.offset+=4),a},a&&(e.writeInt64=function(b,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"==typeof b)b=a.fromNumber(b);else if(!(b&&b instanceof a))throw TypeError("Illegal value: "+b+" (not an integer or Long)");if("number"!=typeof c||0!==c%1)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,0>c||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}"number"==typeof b&&(b=a.fromNumber(b)),c+=8;var e=this.buffer.byteLength;return c>e&&this.resize((e*=2)>c?e:c),c-=8,this.littleEndian?(this.view.setInt32(c,b.low,!0),this.view.setInt32(c+4,b.high,!0)):(this.view.setInt32(c,b.high,!1),this.view.setInt32(c+4,b.low,!1)),d&&(this.offset+=8),this},e.writeLong=e.writeInt64,e.readInt64=function(b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+8) <= "+this.buffer.byteLength)}return b=this.littleEndian?new a(this.view.getInt32(b,!0),this.view.getInt32(b+4,!0),!1):new a(this.view.getInt32(b+4,!1),this.view.getInt32(b,!1),!1),c&&(this.offset+=8),b},e.readLong=e.readInt64,e.writeUint64=function(b,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"==typeof b)b=a.fromNumber(b);else if(!(b&&b instanceof a))throw TypeError("Illegal value: "+b+" (not an integer or Long)");if("number"!=typeof c||0!==c%1)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,0>c||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}"number"==typeof b&&(b=a.fromNumber(b)),c+=8;var e=this.buffer.byteLength;return c>e&&this.resize((e*=2)>c?e:c),c-=8,this.littleEndian?(this.view.setInt32(c,b.low,!0),this.view.setInt32(c+4,b.high,!0)):(this.view.setInt32(c,b.high,!1),this.view.setInt32(c+4,b.low,!1)),d&&(this.offset+=8),this},e.readUint64=function(b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+8) <= "+this.buffer.byteLength)}return b=this.littleEndian?new a(this.view.getInt32(b,!0),this.view.getInt32(b+4,!0),!0):new a(this.view.getInt32(b+4,!1),this.view.getInt32(b,!1),!0),c&&(this.offset+=8),b}),e.writeFloat32=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a)throw TypeError("Illegal value: "+a+" (not a number)");if("number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=4;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),this.view.setFloat32(b-4,a,this.littleEndian),c&&(this.offset+=4),this},e.writeFloat=e.writeFloat32,e.readFloat32=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}return a=this.view.getFloat32(a,this.littleEndian),b&&(this.offset+=4),a},e.readFloat=e.readFloat32,e.writeFloat64=function(a,b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof a)throw TypeError("Illegal value: "+a+" (not a number)");if("number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}b+=8;var d=this.buffer.byteLength;return b>d&&this.resize((d*=2)>b?d:b),this.view.setFloat64(b-8,a,this.littleEndian),c&&(this.offset+=8),this},e.writeDouble=e.writeFloat64,e.readFloat64=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+8) <= "+this.buffer.byteLength)}return a=this.view.getFloat64(a,this.littleEndian),b&&(this.offset+=8),a},e.readDouble=e.readFloat64,b.MAX_VARINT32_BYTES=5,b.calculateVarint32=function(a){return a>>>=0,128>a?1:16384>a?2:2097152>a?3:268435456>a?4:5},b.zigZagEncode32=function(a){return((a|=0)<<1^a>>31)>>>0},b.zigZagDecode32=function(a){return a>>>1^-(1&a)|0},e.writeVarint32=function(a,c){var d="undefined"==typeof c;if(d&&(c=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof c||0!==c%1)throw TypeError("Illegal offset: "+c+" (not an integer)");if(c>>>=0,0>c||c+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+c+" (+0) <= "+this.buffer.byteLength)}var e=b.calculateVarint32(a);c+=e;var f=this.buffer.byteLength;return c>f&&this.resize((f*=2)>c?f:c),c-=e,this.view.setUint8(c,e=128|a),a>>>=0,a>=128?(e=a>>7|128,this.view.setUint8(c+1,e),a>=16384?(e=a>>14|128,this.view.setUint8(c+2,e),a>=2097152?(e=a>>21|128,this.view.setUint8(c+3,e),a>=268435456?(this.view.setUint8(c+4,a>>28&15),e=5):(this.view.setUint8(c+3,127&e),e=4)):(this.view.setUint8(c+2,127&e),e=3)):(this.view.setUint8(c+1,127&e),e=2)):(this.view.setUint8(c,127&e),e=1),d?(this.offset+=e,this):e},e.writeVarint32ZigZag=function(a,c){return this.writeVarint32(b.zigZagEncode32(a),c)},e.readVarint32=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c,d=0,e=0;do{if(c=a+d,!this.noAssert&&c>this.limit)throw a=Error("Truncated"),a.truncated=!0,a;c=this.view.getUint8(c),5>d&&(e|=(127&c)<<7*d>>>0),++d}while(128===(128&c));return e|=0,b?(this.offset+=d,e):{value:e,length:d}},e.readVarint32ZigZag=function(a){return a=this.readVarint32(a),"object"==typeof a?a.value=b.zigZagDecode32(a.value):a=b.zigZagDecode32(a),a},a&&(b.MAX_VARINT64_BYTES=10,b.calculateVarint64=function(b){"number"==typeof b&&(b=a.fromNumber(b));var c=b.toInt()>>>0,d=b.shiftRightUnsigned(28).toInt()>>>0;return b=b.shiftRightUnsigned(56).toInt()>>>0,0==b?0==d?16384>c?128>c?1:2:2097152>c?3:4:16384>d?128>d?5:6:2097152>d?7:8:128>b?9:10},b.zigZagEncode64=function(b){return"number"==typeof b?b=a.fromNumber(b,!1):!1!==b.unsigned&&(b=b.toSigned()),b.shiftLeft(1).xor(b.shiftRight(63)).toUnsigned()},b.zigZagDecode64=function(b){return"number"==typeof b?b=a.fromNumber(b,!1):!1!==b.unsigned&&(b=b.toSigned()),b.shiftRightUnsigned(1).xor(b.and(a.ONE).toSigned().negate()).toSigned()},e.writeVarint64=function(c,d){var e="undefined"==typeof d;if(e&&(d=this.offset),!this.noAssert){if("number"==typeof c)c=a.fromNumber(c);else if(!(c&&c instanceof a))throw TypeError("Illegal value: "+c+" (not an integer or Long)");if("number"!=typeof d||0!==d%1)throw TypeError("Illegal offset: "+d+" (not an integer)");if(d>>>=0,0>d||d+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+d+" (+0) <= "+this.buffer.byteLength)}"number"==typeof c?c=a.fromNumber(c,!1):!1!==c.unsigned&&(c=c.toSigned());var f=b.calculateVarint64(c),g=c.toInt()>>>0,h=c.shiftRightUnsigned(28).toInt()>>>0,i=c.shiftRightUnsigned(56).toInt()>>>0;d+=f;var j=this.buffer.byteLength;switch(d>j&&this.resize((j*=2)>d?j:d),d-=f,f){case 10:this.view.setUint8(d+9,i>>>7&1);case 9:this.view.setUint8(d+8,9!==f?128|i:127&i);case 8:this.view.setUint8(d+7,8!==f?h>>>21|128:h>>>21&127);case 7:this.view.setUint8(d+6,7!==f?h>>>14|128:h>>>14&127);case 6:this.view.setUint8(d+5,6!==f?h>>>7|128:h>>>7&127);case 5:this.view.setUint8(d+4,5!==f?128|h:127&h);case 4:this.view.setUint8(d+3,4!==f?g>>>21|128:g>>>21&127);case 3:this.view.setUint8(d+2,3!==f?g>>>14|128:g>>>14&127);case 2:this.view.setUint8(d+1,2!==f?g>>>7|128:g>>>7&127);case 1:this.view.setUint8(d,1!==f?128|g:127&g)}return e?(this.offset+=f,this):f},e.writeVarint64ZigZag=function(a,c){return this.writeVarint64(b.zigZagEncode64(a),c)},e.readVarint64=function(b){var c="undefined"==typeof b;if(c&&(b=this.offset),!this.noAssert){if("number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+1) <= "+this.buffer.byteLength)}var d=b,e=0,f=0,g=0,h=0,h=this.view.getUint8(b++),e=127&h;if(128&h&&(h=this.view.getUint8(b++),e|=(127&h)<<7,128&h&&(h=this.view.getUint8(b++),e|=(127&h)<<14,128&h&&(h=this.view.getUint8(b++),e|=(127&h)<<21,128&h&&(h=this.view.getUint8(b++),f=127&h,128&h&&(h=this.view.getUint8(b++),f|=(127&h)<<7,128&h&&(h=this.view.getUint8(b++),f|=(127&h)<<14,128&h&&(h=this.view.getUint8(b++),f|=(127&h)<<21,128&h&&(h=this.view.getUint8(b++),g=127&h,128&h&&(h=this.view.getUint8(b++),g|=(127&h)<<7,128&h))))))))))throw Error("Buffer overrun");return e=a.fromBits(e|f<<28,f>>>4|g<<24,!1),c?(this.offset=b,e):{value:e,length:b-d}},e.readVarint64ZigZag=function(c){return(c=this.readVarint64(c))&&c.value instanceof a?c.value=b.zigZagDecode64(c.value):c=b.zigZagDecode64(c),c}),e.writeCString=function(a,b){var d="undefined"==typeof b;d&&(b=this.offset);var e,f=a.length;if(!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");for(e=0;f>e;++e)if(0===a.charCodeAt(e))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}e=b,f=j.a(c(a))[1],b+=f+1;var g=this.buffer.byteLength;return b>g&&this.resize((g*=2)>b?g:b),b-=f+1,j.c(c(a),function(a){this.view.setUint8(b++,a)}.bind(this)),this.view.setUint8(b++,0),d?(this.offset=b-e,this):f},e.readCString=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c,e=a,f=-1;return j.b(function(){if(0===f)return null;if(a>=this.limit)throw RangeError("Illegal range: Truncated data, "+a+" < "+this.limit);return 0===(f=this.view.getUint8(a++))?null:f}.bind(this),c=d(),!0),b?(this.offset=a,c()):{string:c(),length:a-e}},e.writeIString=function(a,b){var d="undefined"==typeof b;if(d&&(b=this.offset),!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if("number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}var e,f=b;e=j.a(c(a),this.noAssert)[1],b+=4+e;var g=this.buffer.byteLength;if(b>g&&this.resize((g*=2)>b?g:b),b-=4+e,this.view.setUint32(b,e,this.littleEndian),b+=4,j.c(c(a),function(a){this.view.setUint8(b++,a)}.bind(this)),b!==f+4+e)throw RangeError("Illegal range: Truncated data, "+b+" == "+(b+4+e));return d?(this.offset=b,this):b-f},e.readIString=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+4) <= "+this.buffer.byteLength)}var c=0,e=a,c=this.view.getUint32(a,this.littleEndian);a+=4;var f=a+c;return j.b(function(){return f>a?this.view.getUint8(a++):null}.bind(this),c=d(),this.noAssert),c=c(),b?(this.offset=a,c):{string:c,length:a-e}},b.METRICS_CHARS="c",b.METRICS_BYTES="b",e.writeUTF8String=function(a,b){var d="undefined"==typeof b;if(d&&(b=this.offset),!this.noAssert){if("number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: "+b+" (not an integer)");if(b>>>=0,0>b||b+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+b+" (+0) <= "+this.buffer.byteLength)}var e,f=b;e=j.a(c(a))[1],b+=e;var g=this.buffer.byteLength;return b>g&&this.resize((g*=2)>b?g:b),b-=e,j.c(c(a),function(a){this.view.setUint8(b++,a)}.bind(this)),d?(this.offset=b,this):b-f},e.writeString=e.writeUTF8String,b.calculateUTF8Chars=function(a){return j.a(c(a))[0]},b.calculateUTF8Bytes=function(a){return j.a(c(a))[1]},e.readUTF8String=function(a,c,e){"number"==typeof c&&(e=c,c=void 0);var f="undefined"==typeof e;if(f&&(e=this.offset),"undefined"==typeof c&&(c=b.METRICS_CHARS),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal length: "+a+" (not an integer)");if(a|=0,"number"!=typeof e||0!==e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var g,h=0,i=e;if(c===b.METRICS_CHARS){if(g=d(),j.g(function(){return a>h&&e<this.limit?this.view.getUint8(e++):null}.bind(this),function(a){++h,j.e(a,g)}.bind(this)),h!==a)throw RangeError("Illegal range: Truncated data, "+h+" == "+a);return f?(this.offset=e,g()):{string:g(),length:e-i}}if(c===b.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof e||0!==e%1)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+a>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+a+") <= "+this.buffer.byteLength)}var k=e+a;if(j.b(function(){return k>e?this.view.getUint8(e++):null}.bind(this),g=d(),this.noAssert),e!==k)throw RangeError("Illegal range: Truncated data, "+e+" == "+k);return f?(this.offset=e,g()):{string:g(),length:e-i}}throw TypeError("Unsupported metrics: "+c)},e.readString=e.readUTF8String,e.writeVString=function(a,d){var e="undefined"==typeof d;if(e&&(d=this.offset),!this.noAssert){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if("number"!=typeof d||0!==d%1)throw TypeError("Illegal offset: "+d+" (not an integer)");if(d>>>=0,0>d||d+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+d+" (+0) <= "+this.buffer.byteLength)}var f,g,h=d;f=j.a(c(a),this.noAssert)[1],g=b.calculateVarint32(f),d+=g+f;var i=this.buffer.byteLength;if(d>i&&this.resize((i*=2)>d?i:d),d-=g+f,d+=this.writeVarint32(f,d),j.c(c(a),function(a){this.view.setUint8(d++,a)}.bind(this)),d!==h+f+g)throw RangeError("Illegal range: Truncated data, "+d+" == "+(d+f+g));return e?(this.offset=d,this):d-h},e.readVString=function(a){var b="undefined"==typeof a;if(b&&(a=this.offset),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+1) <= "+this.buffer.byteLength)}var c=this.readVarint32(a),e=a;a+=c.length;var c=c.value,f=a+c,c=d();return j.b(function(){return f>a?this.view.getUint8(a++):null}.bind(this),c,this.noAssert),c=c(),b?(this.offset=a,c):{string:c,length:a-e}},e.append=function(a,c,d){("number"==typeof c||"string"!=typeof c)&&(d=c,c=void 0);var e="undefined"==typeof d;if(e&&(d=this.offset),!this.noAssert){if("number"!=typeof d||0!==d%1)throw TypeError("Illegal offset: "+d+" (not an integer)");if(d>>>=0,0>d||d+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+d+" (+0) <= "+this.buffer.byteLength)}if(a instanceof b||(a=b.wrap(a,c)),c=a.limit-a.offset,0>=c)return this;d+=c;var f=this.buffer.byteLength;return d>f&&this.resize((f*=2)>d?f:d),new Uint8Array(this.buffer,d-c).set(new Uint8Array(a.buffer).subarray(a.offset,a.limit)),a.offset+=c,e&&(this.offset+=c),this},e.appendTo=function(a,b){return a.append(this,b),this},e.assert=function(a){return this.noAssert=!a,this},e.capacity=function(){return this.buffer.byteLength},e.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},e.clone=function(a){var c=new b(0,this.littleEndian,this.noAssert);return a?(a=new ArrayBuffer(this.buffer.byteLength),new Uint8Array(a).set(this.buffer),c.buffer=a,c.view=new DataView(a)):(c.buffer=this.buffer,c.view=this.view),c.offset=this.offset,c.markedOffset=this.markedOffset,c.limit=this.limit,c},e.compact=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal end: Not an integer");if(b>>>=0,0>a||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}if(0===a&&b===this.buffer.byteLength)return this;var c=b-a;if(0===c)return this.buffer=f,this.view=null,0<=this.markedOffset&&(this.markedOffset-=a),this.limit=this.offset=0,this;var d=new ArrayBuffer(c);return new Uint8Array(d).set(new Uint8Array(this.buffer).subarray(a,b)),this.buffer=d,this.view=new DataView(d),0<=this.markedOffset&&(this.markedOffset-=a),this.offset=0,this.limit=c,this},e.copy=function(a,c){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof c&&(c=this.limit),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof c||0!==c%1)throw TypeError("Illegal end: Not an integer");if(c>>>=0,0>a||a>c||c>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+c+" <= "+this.buffer.byteLength)}if(a===c)return new b(0,this.littleEndian,this.noAssert);var d=c-a,e=new b(d,this.littleEndian,this.noAssert);return e.offset=0,e.limit=d,0<=e.markedOffset&&(e.markedOffset-=a),this.copyTo(e,0,a,c),e},e.copyTo=function(a,c,d,e){var f,g;if(!this.noAssert&&!b.isByteBuffer(a))throw TypeError("Illegal target: Not a ByteBuffer");if(c=(g="undefined"==typeof c)?a.offset:0|c,d=(f="undefined"==typeof d)?this.offset:0|d,e="undefined"==typeof e?this.limit:0|e,0>c||c>a.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+c+" <= "+a.buffer.byteLength);if(0>d||e>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+d+" <= "+this.buffer.byteLength);var h=e-d;return 0===h?a:(a.ensureCapacity(c+h),new Uint8Array(a.buffer).set(new Uint8Array(this.buffer).subarray(d,e),c),f&&(this.offset+=h),g&&(a.offset+=h),this)},e.ensureCapacity=function(a){var b=this.buffer.byteLength;return a>b?this.resize((b*=2)>a?b:a):this},e.fill=function(a,b,c){var d="undefined"==typeof b;if(d&&(b=this.offset),"string"==typeof a&&0<a.length&&(a=a.charCodeAt(0)),"undefined"==typeof b&&(b=this.offset),"undefined"==typeof c&&(c=this.limit),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal value: "+a+" (not an integer)");if(a|=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal begin: Not an integer");if(b>>>=0,"number"!=typeof c||0!==c%1)throw TypeError("Illegal end: Not an integer");if(c>>>=0,0>b||b>c||c>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+b+" <= "+c+" <= "+this.buffer.byteLength)}if(b>=c)return this;for(;c>b;)this.view.setUint8(b++,a);return d&&(this.offset=b),this},e.flip=function(){return this.limit=this.offset,this.offset=0,this},e.mark=function(a){if(a="undefined"==typeof a?this.offset:a,!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal offset: "+a+" (not an integer)");if(a>>>=0,0>a||a+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+a+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=a,this},e.order=function(a){if(!this.noAssert&&"boolean"!=typeof a)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!a,this},e.LE=function(a){return this.littleEndian="undefined"!=typeof a?!!a:!0,this},e.BE=function(a){return this.littleEndian="undefined"!=typeof a?!a:!1,this},e.prepend=function(a,c,d){("number"==typeof c||"string"!=typeof c)&&(d=c,c=void 0);var e="undefined"==typeof d;if(e&&(d=this.offset),!this.noAssert){if("number"!=typeof d||0!==d%1)throw TypeError("Illegal offset: "+d+" (not an integer)");if(d>>>=0,0>d||d+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+d+" (+0) <= "+this.buffer.byteLength)}if(a instanceof b||(a=b.wrap(a,c)),c=a.limit-a.offset,0>=c)return this;var f,g=c-d;if(g>0){var h=new ArrayBuffer(this.buffer.byteLength+g);f=new Uint8Array(h),f.set(new Uint8Array(this.buffer).subarray(d,this.buffer.byteLength),c),this.buffer=h,this.view=new DataView(h),this.offset+=g,0<=this.markedOffset&&(this.markedOffset+=g),this.limit+=g,d+=g}else f=new Uint8Array(this.buffer);return f.set(new Uint8Array(a.buffer).subarray(a.offset,a.limit),d-c),a.offset=a.limit,e&&(this.offset-=c),this},e.prependTo=function(a,b){return a.prepend(this,b),this},e.printDebug=function(a){"function"!=typeof a&&(a=console.log.bind(console)),a(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},e.remaining=function(){return this.limit-this.offset},e.reset=function(){return 0<=this.markedOffset?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},e.resize=function(a){if(!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal capacity: "+a+" (not an integer)");if(a|=0,0>a)throw RangeError("Illegal capacity: 0 <= "+a)}return this.buffer.byteLength<a&&(a=new ArrayBuffer(a),new Uint8Array(a).set(new Uint8Array(this.buffer)),this.buffer=a,this.view=new DataView(a)),this},e.reverse=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal end: Not an integer");if(b>>>=0,0>a||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}return a===b?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(a,b)),this.view=new DataView(this.buffer),this)},e.skip=function(a){if(!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal length: "+a+" (not an integer)");a|=0}var b=this.offset+a;if(!this.noAssert&&(0>b||b>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+a+" <= "+this.buffer.byteLength);return this.offset=b,this},e.slice=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal end: Not an integer");if(b>>>=0,0>a||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}var c=this.clone();return c.offset=a,c.limit=b,c},e.toBuffer=function(a){var b=this.offset,c=this.limit;if(b>c)var d=b,b=c,c=d;if(!this.noAssert){if("number"!=typeof b||0!==b%1)throw TypeError("Illegal offset: Not an integer");if(b>>>=0,"number"!=typeof c||0!==c%1)throw TypeError("Illegal limit: Not an integer");if(c>>>=0,0>b||b>c||c>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+b+" <= "+c+" <= "+this.buffer.byteLength)}return a||0!==b||c!==this.buffer.byteLength?b===c?f:(a=new ArrayBuffer(c-b),new Uint8Array(a).set(new Uint8Array(this.buffer).subarray(b,c),0),a):this.buffer},e.toArrayBuffer=e.toBuffer,e.toString=function(a,b,c){if("undefined"==typeof a)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof a&&(c=b=a="utf8"),a){case"utf8":return this.toUTF8(b,c);case"base64":return this.toBase64(b,c);case"hex":return this.toHex(b,c);case"binary":return this.toBinary(b,c);case"debug":return this.toDebug();case"columns":return this.m();default:throw Error("Unsupported encoding: "+a)}};var h=function(){for(var a={},b=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],c=[],d=0,e=b.length;e>d;++d)c[b[d]]=d;
return a.i=function(a,c){for(var d,e;null!==(d=a());)c(b[d>>2&63]),e=(3&d)<<4,null!==(d=a())?(e|=d>>4&15,c(b[63&(e|d>>4&15)]),e=(15&d)<<2,null!==(d=a())?(c(b[63&(e|d>>6&3)]),c(b[63&d])):(c(b[63&e]),c(61))):(c(b[63&e]),c(61),c(61))},a.h=function(a,b){function d(a){throw Error("Illegal character code: "+a)}for(var e,f,g;null!==(e=a());)if(f=c[e],"undefined"==typeof f&&d(e),null!==(e=a())&&(g=c[e],"undefined"==typeof g&&d(e),b(f<<2>>>0|(48&g)>>4),null!==(e=a()))){if(f=c[e],"undefined"==typeof f){if(61===e)break;d(e)}if(b((15&g)<<4>>>0|(60&f)>>2),null!==(e=a())){if(g=c[e],"undefined"==typeof g){if(61===e)break;d(e)}b((3&f)<<6>>>0|g)}}},a.test=function(a){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)},a}();e.toBase64=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal end: Not an integer");if(b>>>=0,0>a||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}var c;return h.i(function(){return b>a?this.view.getUint8(a++):null}.bind(this),c=d()),c()},b.fromBase64=function(a,d,e){if(!e){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if(0!==a.length%4)throw TypeError("Illegal str: Length not a multiple of 4")}var f=new b(a.length/4*3,d,e),g=0;return h.h(c(a),function(a){f.view.setUint8(g++,a)}),f.limit=g,f},b.btoa=function(a){return b.fromBinary(a).toBase64()},b.atob=function(a){return b.fromBase64(a).toBinary()},e.toBinary=function(a,b){if(a="undefined"==typeof a?this.offset:a,b="undefined"==typeof b?this.limit:b,!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal end: Not an integer");if(b>>>=0,0>a||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}if(a===b)return"";for(var c=[],d=[];b>a;)c.push(this.view.getUint8(a++)),1024<=c.length&&(d.push(String.fromCharCode.apply(String,c)),c=[]);return d.join("")+String.fromCharCode.apply(String,c)},b.fromBinary=function(a,c,d){if(!d&&"string"!=typeof a)throw TypeError("Illegal str: Not a string");for(var e=0,f=a.length,g=new b(f,c,d);f>e;){if(c=a.charCodeAt(e),!d&&c>255)throw RangeError("Illegal charCode at "+e+": 0 <= "+c+" <= 255");g.view.setUint8(e++,c)}return g.limit=f,g},e.toDebug=function(a){for(var b,c=-1,d=this.buffer.byteLength,e="",f="",g="";d>c;){if(-1!==c&&(b=this.view.getUint8(c),e=16>b?e+("0"+b.toString(16).toUpperCase()):e+b.toString(16).toUpperCase(),a&&(f+=b>32&&127>b?String.fromCharCode(b):".")),++c,a&&c>0&&0===c%16&&c!==d){for(;51>e.length;)e+=" ";g+=e+f+"\n",e=f=""}e=c===this.offset&&c===this.limit?e+(c===this.markedOffset?"!":"|"):c===this.offset?e+(c===this.markedOffset?"[":"<"):c===this.limit?e+(c===this.markedOffset?"]":">"):e+(c===this.markedOffset?"'":a||0!==c&&c!==d?" ":"")}if(a&&" "!==e){for(;51>e.length;)e+=" ";g+=e+f+"\n"}return a?g:e},b.fromDebug=function(a,c,d){var e=a.length;c=new b((e+1)/3|0,c,d);for(var f,g=0,h=0,i=!1,j=!1,k=!1,l=!1,m=!1;e>g;){switch(f=a.charAt(g++)){case"!":if(!d){if(j||k||l){m=!0;break}j=k=l=!0}c.offset=c.markedOffset=c.limit=h,i=!1;break;case"|":if(!d){if(j||l){m=!0;break}j=l=!0}c.offset=c.limit=h,i=!1;break;case"[":if(!d){if(j||k){m=!0;break}j=k=!0}c.offset=c.markedOffset=h,i=!1;break;case"<":if(!d){if(j){m=!0;break}j=!0}c.offset=h,i=!1;break;case"]":if(!d){if(l||k){m=!0;break}l=k=!0}c.limit=c.markedOffset=h,i=!1;break;case">":if(!d){if(l){m=!0;break}l=!0}c.limit=h,i=!1;break;case"'":if(!d){if(k){m=!0;break}k=!0}c.markedOffset=h,i=!1;break;case" ":i=!1;break;default:if(!d&&i){m=!0;break}if(f=parseInt(f+a.charAt(g++),16),!d&&(isNaN(f)||0>f||f>255))throw TypeError("Illegal str: Not a debug encoded string");c.view.setUint8(h++,f),i=!0}if(m)throw TypeError("Illegal str: Invalid symbol at "+g)}if(!d){if(!j||!l)throw TypeError("Illegal str: Missing offset or limit");if(h<c.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+h+" < "+e)}return c},e.toHex=function(a,b){if(a="undefined"==typeof a?this.offset:a,b="undefined"==typeof b?this.limit:b,!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal end: Not an integer");if(b>>>=0,0>a||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}for(var c,d=Array(b-a);b>a;)c=this.view.getUint8(a++),16>c?d.push("0",c.toString(16)):d.push(c.toString(16));return d.join("")},b.fromHex=function(a,c,d){if(!d){if("string"!=typeof a)throw TypeError("Illegal str: Not a string");if(0!==a.length%2)throw TypeError("Illegal str: Length not a multiple of 2")}var e=a.length;c=new b(e/2|0,c);for(var f,g=0,h=0;e>g;g+=2){if(f=parseInt(a.substring(g,g+2),16),!d&&(!isFinite(f)||0>f||f>255))throw TypeError("Illegal str: Contains non-hex characters");c.view.setUint8(h++,f)}return c.limit=h,c};var j=function(){var a={k:1114111,j:function(a,b){var c=null;for("number"==typeof a&&(c=a,a=function(){return null});null!==c||null!==(c=a());)128>c?b(127&c):(2048>c?b(c>>6&31|192):(65536>c?b(c>>12&15|224):(b(c>>18&7|240),b(c>>12&63|128)),b(c>>6&63|128)),b(63&c|128)),c=null},g:function(a,b){function c(a){a=a.slice(0,a.indexOf(null));var b=Error(a.toString());throw b.name="TruncatedError",b.bytes=a,b}for(var d,e,f,g;null!==(d=a());)if(0===(128&d))b(d);else if(192===(224&d))null===(e=a())&&c([d,e]),b((31&d)<<6|63&e);else if(224===(240&d))null!==(e=a())&&null!==(f=a())||c([d,e,f]),b((15&d)<<12|(63&e)<<6|63&f);else{if(240!==(248&d))throw RangeError("Illegal starting byte: "+d);null!==(e=a())&&null!==(f=a())&&null!==(g=a())||c([d,e,f,g]),b((7&d)<<18|(63&e)<<12|(63&f)<<6|63&g)}},d:function(a,b){for(var c,d=null;null!==(c=null!==d?d:a());)c>=55296&&57343>=c&&null!==(d=a())&&d>=56320&&57343>=d?(b(1024*(c-55296)+d-56320+65536),d=null):b(c);null!==d&&b(d)},e:function(a,b){var c=null;for("number"==typeof a&&(c=a,a=function(){return null});null!==c||null!==(c=a());)65535>=c?b(c):(c-=65536,b((c>>10)+55296),b(c%1024+56320)),c=null},c:function(b,c){a.d(b,function(b){a.j(b,c)})},b:function(b,c){a.g(b,function(b){a.e(b,c)})},f:function(a){return 128>a?1:2048>a?2:65536>a?3:4},l:function(b){for(var c,d=0;null!==(c=b());)d+=a.f(c);return d},a:function(b){var c=0,d=0;return a.d(b,function(b){++c,d+=a.f(b)}),[c,d]}};return a}();return e.toUTF8=function(a,b){if("undefined"==typeof a&&(a=this.offset),"undefined"==typeof b&&(b=this.limit),!this.noAssert){if("number"!=typeof a||0!==a%1)throw TypeError("Illegal begin: Not an integer");if(a>>>=0,"number"!=typeof b||0!==b%1)throw TypeError("Illegal end: Not an integer");if(b>>>=0,0>a||a>b||b>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+a+" <= "+b+" <= "+this.buffer.byteLength)}var c;try{j.b(function(){return b>a?this.view.getUint8(a++):null}.bind(this),c=d())}catch(e){if(a!==b)throw RangeError("Illegal range: Truncated data, "+a+" != "+b)}return c()},b.fromUTF8=function(a,d,e){if(!e&&"string"!=typeof a)throw TypeError("Illegal str: Not a string");var f=new b(j.a(c(a),!0)[1],d,e),g=0;return j.c(c(a),function(a){f.view.setUint8(g++,a)}),f.limit=g,f},b}"undefined"!=typeof module&&module.exports?module.exports=b(require("long")):"function"==typeof define&&define.amd?define("ByteBuffer",["Long"],function(a){return b(a)}):(a.dcodeIO=a.dcodeIO||{}).ByteBuffer=b(a.dcodeIO.Long)}(this),function(){!function(a){function b(a,b,c){this.low=0|a,this.high=0|b,this.unsigned=!!c}b.isLong=function(a){return!0===(a&&a instanceof b)};var c={},d={};b.fromInt=function(a,e){var f;if(e){if(a>>>=0,a>=0&&256>a&&(f=d[a]))return f;f=new b(a,0>(0|a)?-1:0,!0),a>=0&&256>a&&(d[a]=f)}else{if(a|=0,a>=-128&&128>a&&(f=c[a]))return f;f=new b(a,0>a?-1:0,!1),a>=-128&&128>a&&(c[a]=f)}return f},b.fromNumber=function(a,c){return c=!!c,isNaN(a)||!isFinite(a)?b.ZERO:!c&&-g>=a?b.MIN_VALUE:!c&&a+1>=g?b.MAX_VALUE:c&&a>=f?b.MAX_UNSIGNED_VALUE:0>a?b.fromNumber(-a,c).negate():new b(a%e|0,a/e|0,c)},b.fromBits=function(a,c,d){return new b(a,c,d)},b.fromString=function(a,c,d){if(0===a.length)throw Error("number format error: empty string");if("NaN"===a||"Infinity"===a||"+Infinity"===a||"-Infinity"===a)return b.ZERO;if("number"==typeof c&&(d=c,c=!1),d=d||10,2>d||d>36)throw Error("radix out of range: "+d);var e;if(0<(e=a.indexOf("-")))throw Error('number format error: interior "-" character: '+a);if(0===e)return b.fromString(a.substring(1),c,d).negate();e=b.fromNumber(Math.pow(d,8));for(var f=b.ZERO,g=0;g<a.length;g+=8){var h=Math.min(8,a.length-g),i=parseInt(a.substring(g,g+h),d);8>h?(h=b.fromNumber(Math.pow(d,h)),f=f.multiply(h).add(b.fromNumber(i))):(f=f.multiply(e),f=f.add(b.fromNumber(i)))}return f.unsigned=c,f},b.fromValue=function(a){return"number"==typeof a?b.fromNumber(a):"string"==typeof a?b.fromString(a):b.isLong(a)?a:new b(a.low,a.high,a.unsigned)};var e=4294967296,f=e*e,g=f/2,h=b.fromInt(16777216);b.ZERO=b.fromInt(0),b.UZERO=b.fromInt(0,!0),b.ONE=b.fromInt(1),b.UONE=b.fromInt(1,!0),b.NEG_ONE=b.fromInt(-1),b.MAX_VALUE=b.fromBits(-1,2147483647,!1),b.MAX_UNSIGNED_VALUE=b.fromBits(-1,-1,!0),b.MIN_VALUE=b.fromBits(0,-2147483648,!1),b.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},b.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*e+(this.low>>>0):this.high*e+(this.low>>>0)},b.prototype.toString=function(a){if(a=a||10,2>a||a>36)throw RangeError("radix out of range: "+a);if(this.isZero())return"0";var c;if(this.isNegative()){if(this.equals(b.MIN_VALUE)){c=b.fromNumber(a);var d=this.div(c);return c=d.multiply(c).subtract(this),d.toString(a)+c.toInt().toString(a)}return"-"+this.negate().toString(a)}d=b.fromNumber(Math.pow(a,6),this.unsigned),c=this;for(var e="";;){var f=c.div(d),g=(c.subtract(f.multiply(d)).toInt()>>>0).toString(a);if(c=f,c.isZero())return g+e;for(;6>g.length;)g="0"+g;e=""+g+e}},b.prototype.getHighBits=function(){return this.high},b.prototype.getHighBitsUnsigned=function(){return this.high>>>0},b.prototype.getLowBits=function(){return this.low},b.prototype.getLowBitsUnsigned=function(){return this.low>>>0},b.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(b.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var a=0!=this.high?this.high:this.low,c=31;c>0&&0==(a&1<<c);c--);return 0!=this.high?c+33:c+1},b.prototype.isZero=function(){return 0===this.high&&0===this.low},b.prototype.isNegative=function(){return!this.unsigned&&0>this.high},b.prototype.isPositive=function(){return this.unsigned||0<=this.high},b.prototype.isOdd=function(){return 1===(1&this.low)},b.prototype.equals=function(a){return b.isLong(a)||(a=b.fromValue(a)),this.unsigned!==a.unsigned&&this.high>>>31!==a.high>>>31?!1:this.high===a.high&&this.low===a.low},b.prototype.notEquals=function(a){return b.isLong(a)||(a=b.fromValue(a)),!this.equals(a)},b.prototype.lessThan=function(a){return b.isLong(a)||(a=b.fromValue(a)),0>this.compare(a)},b.prototype.lessThanOrEqual=function(a){return b.isLong(a)||(a=b.fromValue(a)),0>=this.compare(a)},b.prototype.greaterThan=function(a){return b.isLong(a)||(a=b.fromValue(a)),0<this.compare(a)},b.prototype.greaterThanOrEqual=function(a){return 0<=this.compare(a)},b.prototype.compare=function(a){if(this.equals(a))return 0;var b=this.isNegative(),c=a.isNegative();return b&&!c?-1:!b&&c?1:this.unsigned?a.high>>>0>this.high>>>0||a.high===this.high&&a.low>>>0>this.low>>>0?-1:1:this.subtract(a).isNegative()?-1:1},b.prototype.negate=function(){return!this.unsigned&&this.equals(b.MIN_VALUE)?b.MIN_VALUE:this.not().add(b.ONE)},b.prototype.add=function(a){b.isLong(a)||(a=b.fromValue(a));var c,d=this.high>>>16,e=65535&this.high,f=this.low>>>16,g=a.high>>>16,h=65535&a.high,i=a.low>>>16;return c=0+((65535&this.low)+(65535&a.low)),a=0+(c>>>16),a+=f+i,f=0+(a>>>16),f+=e+h,e=0+(f>>>16),e=e+(d+g)&65535,b.fromBits((65535&a)<<16|65535&c,e<<16|65535&f,this.unsigned)},b.prototype.subtract=function(a){return b.isLong(a)||(a=b.fromValue(a)),this.add(a.negate())},b.prototype.multiply=function(a){if(this.isZero())return b.ZERO;if(b.isLong(a)||(a=b.fromValue(a)),a.isZero())return b.ZERO;if(this.equals(b.MIN_VALUE))return a.isOdd()?b.MIN_VALUE:b.ZERO;if(a.equals(b.MIN_VALUE))return this.isOdd()?b.MIN_VALUE:b.ZERO;if(this.isNegative())return a.isNegative()?this.negate().multiply(a.negate()):this.negate().multiply(a).negate();if(a.isNegative())return this.multiply(a.negate()).negate();if(this.lessThan(h)&&a.lessThan(h))return b.fromNumber(this.toNumber()*a.toNumber(),this.unsigned);var c=this.high>>>16,d=65535&this.high,e=this.low>>>16,f=65535&this.low,g=a.high>>>16,i=65535&a.high,j=a.low>>>16;a=65535&a.low;var k,l,m,n;return n=0+f*a,m=0+(n>>>16),m+=e*a,l=0+(m>>>16),m=(65535&m)+f*j,l+=m>>>16,m&=65535,l+=d*a,k=0+(l>>>16),l=(65535&l)+e*j,k+=l>>>16,l&=65535,l+=f*i,k+=l>>>16,l&=65535,k=k+(c*a+d*j+e*i+f*g)&65535,b.fromBits(m<<16|65535&n,k<<16|l,this.unsigned)},b.prototype.div=function(a){if(b.isLong(a)||(a=b.fromValue(a)),a.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?b.UZERO:b.ZERO;var c,d,e;if(this.equals(b.MIN_VALUE))return a.equals(b.ONE)||a.equals(b.NEG_ONE)?b.MIN_VALUE:a.equals(b.MIN_VALUE)?b.ONE:(c=this.shiftRight(1).div(a).shiftLeft(1),c.equals(b.ZERO)?a.isNegative()?b.ONE:b.NEG_ONE:(d=this.subtract(a.multiply(c)),e=c.add(d.div(a))));if(a.equals(b.MIN_VALUE))return this.unsigned?b.UZERO:b.ZERO;if(this.isNegative())return a.isNegative()?this.negate().div(a.negate()):this.negate().div(a).negate();if(a.isNegative())return this.div(a.negate()).negate();for(e=b.ZERO,d=this;d.greaterThanOrEqual(a);){c=Math.max(1,Math.floor(d.toNumber()/a.toNumber()));for(var f=Math.ceil(Math.log(c)/Math.LN2),f=48>=f?1:Math.pow(2,f-48),g=b.fromNumber(c),h=g.multiply(a);h.isNegative()||h.greaterThan(d);)c-=f,g=b.fromNumber(c,this.unsigned),h=g.multiply(a);g.isZero()&&(g=b.ONE),e=e.add(g),d=d.subtract(h)}return e},b.prototype.modulo=function(a){return b.isLong(a)||(a=b.fromValue(a)),this.subtract(this.div(a).multiply(a))},b.prototype.not=function(){return b.fromBits(~this.low,~this.high,this.unsigned)},b.prototype.and=function(a){return b.isLong(a)||(a=b.fromValue(a)),b.fromBits(this.low&a.low,this.high&a.high,this.unsigned)},b.prototype.or=function(a){return b.isLong(a)||(a=b.fromValue(a)),b.fromBits(this.low|a.low,this.high|a.high,this.unsigned)},b.prototype.xor=function(a){return b.isLong(a)||(a=b.fromValue(a)),b.fromBits(this.low^a.low,this.high^a.high,this.unsigned)},b.prototype.shiftLeft=function(a){return b.isLong(a)&&(a=a.toInt()),0===(a&=63)?this:32>a?b.fromBits(this.low<<a,this.high<<a|this.low>>>32-a,this.unsigned):b.fromBits(0,this.low<<a-32,this.unsigned)},b.prototype.shiftRight=function(a){return b.isLong(a)&&(a=a.toInt()),0===(a&=63)?this:32>a?b.fromBits(this.low>>>a|this.high<<32-a,this.high>>a,this.unsigned):b.fromBits(this.high>>a-32,0<=this.high?0:-1,this.unsigned)},b.prototype.shiftRightUnsigned=function(a){if(b.isLong(a)&&(a=a.toInt()),a&=63,0===a)return this;var c=this.high;return 32>a?b.fromBits(this.low>>>a|c<<32-a,c>>>a,this.unsigned):32===a?b.fromBits(c,0,this.unsigned):b.fromBits(c>>>a-32,0,this.unsigned)},b.prototype.toSigned=function(){return this.unsigned?new b(this.low,this.high,!1):this},b.prototype.toUnsigned=function(){return this.unsigned?this:new b(this.low,this.high,!0)},"undefined"!=typeof module&&module.exports?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):(a.dcodeIO=a.dcodeIO||{}).Long=b}(this)}(),function(a){function b(a){var b={VERSION:"3.7.0",WIRE_TYPES:{}};return b.WIRE_TYPES.VARINT=0,b.WIRE_TYPES.BITS64=1,b.WIRE_TYPES.LDELIM=2,b.WIRE_TYPES.STARTGROUP=3,b.WIRE_TYPES.ENDGROUP=4,b.WIRE_TYPES.BITS32=5,b.PACKABLE_WIRE_TYPES=[b.WIRE_TYPES.VARINT,b.WIRE_TYPES.BITS64,b.WIRE_TYPES.BITS32],b.TYPES={int32:{name:"int32",wireType:b.WIRE_TYPES.VARINT},uint32:{name:"uint32",wireType:b.WIRE_TYPES.VARINT},sint32:{name:"sint32",wireType:b.WIRE_TYPES.VARINT},int64:{name:"int64",wireType:b.WIRE_TYPES.VARINT},uint64:{name:"uint64",wireType:b.WIRE_TYPES.VARINT},sint64:{name:"sint64",wireType:b.WIRE_TYPES.VARINT},bool:{name:"bool",wireType:b.WIRE_TYPES.VARINT},"double":{name:"double",wireType:b.WIRE_TYPES.BITS64},string:{name:"string",wireType:b.WIRE_TYPES.LDELIM},bytes:{name:"bytes",wireType:b.WIRE_TYPES.LDELIM},fixed32:{name:"fixed32",wireType:b.WIRE_TYPES.BITS32},sfixed32:{name:"sfixed32",wireType:b.WIRE_TYPES.BITS32},fixed64:{name:"fixed64",wireType:b.WIRE_TYPES.BITS64},sfixed64:{name:"sfixed64",wireType:b.WIRE_TYPES.BITS64},"float":{name:"float",wireType:b.WIRE_TYPES.BITS32},"enum":{name:"enum",wireType:b.WIRE_TYPES.VARINT},message:{name:"message",wireType:b.WIRE_TYPES.LDELIM},group:{name:"group",wireType:b.WIRE_TYPES.STARTGROUP}},b.ID_MIN=1,b.ID_MAX=536870911,b.ByteBuffer=a,b.Long=a.Long||null,b.convertFieldsToCamelCase=!1,b.populateAccessors=!0,b.Util=function(){Object.create||(Object.create=function(a){function b(){}if(1<arguments.length)throw Error("Object.create polyfill only accepts the first parameter.");return b.prototype=a,new b});var a={IS_NODE:!1};try{a.IS_NODE="function"==typeof require&&"function"==typeof require("fs").readFileSync&&"function"==typeof require("path").resolve}catch(b){}return a.XHR=function(){for(var a=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=null,c=0;c<a.length;c++){try{b=a[c]()}catch(d){continue}break}if(!b)throw Error("XMLHttpRequest is not supported");return b},a.fetch=function(b,c){if(c&&"function"!=typeof c&&(c=null),a.IS_NODE)if(c)require("fs").readFile(b,function(a,b){c(a?null:""+b)});else try{return require("fs").readFileSync(b)}catch(d){return null}else{var e=a.XHR();if(e.open("GET",b,c?!0:!1),e.setRequestHeader("Accept","text/plain"),"function"==typeof e.overrideMimeType&&e.overrideMimeType("text/plain"),!c)return e.send(null),200==e.status||0==e.status&&"string"==typeof e.responseText?e.responseText:null;e.onreadystatechange=function(){4==e.readyState&&c(200==e.status||0==e.status&&"string"==typeof e.responseText?e.responseText:null)},4!=e.readyState&&e.send(null)}},a.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},a}(),b.Lang={OPEN:"{",CLOSE:"}",OPTOPEN:"[",OPTCLOSE:"]",OPTEND:",",EQUAL:"=",END:";",STRINGOPEN:'"',STRINGCLOSE:'"',STRINGOPEN_SQ:"'",STRINGCLOSE_SQ:"'",COPTOPEN:"(",COPTCLOSE:")",DELIM:/[\s\{\}=;\[\],'"\(\)]/g,RULE:/^(?:required|optional|repeated)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+|([0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?))$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0x[0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^[0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?$/,ID:/^(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/['"]([^'"\\]*(\\.[^"\\]*)*)['"]/g,BOOL:/^(?:true|false)$/i},b.DotProto=function(a,b){var c={},d=function(a){this.source=""+a,this.index=0,this.line=1,this.stack=[],this.readingString=!1,this.stringEndsWith=b.STRINGCLOSE},e=d.prototype;e._readString=function(){b.STRING.lastIndex=this.index-1;var a;if(null!==(a=b.STRING.exec(this.source)))return a=a[1],this.index=b.STRING.lastIndex,this.stack.push(this.stringEndsWith),a;throw Error("Unterminated string at line "+this.line+", index "+this.index)},e.next=function(){if(0<this.stack.length)return this.stack.shift();if(this.index>=this.source.length)return null;if(this.readingString)return this.readingString=!1,this._readString();var a,c;do{for(a=!1;b.WHITESPACE.test(c=this.source.charAt(this.index));)if(this.index++,"\n"===c&&this.line++,this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if("/"===this.source.charAt(++this.index)){for(;"\n"!==this.source.charAt(this.index);)if(this.index++,this.index==this.source.length)return null;this.index++,this.line++,a=!0}else{if("*"!==this.source.charAt(this.index))throw Error("Unterminated comment at line "+this.line+": /"+this.source.charAt(this.index));for(c="";"*/"!==c+(c=this.source.charAt(this.index));)if(this.index++,"\n"===c&&this.line++,this.index===this.source.length)return null;this.index++,a=!0}}while(a);if(this.index===this.source.length)return null;if(a=this.index,b.DELIM.lastIndex=0,b.DELIM.test(this.source.charAt(a)))++a;else for(++a;a<this.source.length&&!b.DELIM.test(this.source.charAt(a));)a++;return a=this.source.substring(this.index,this.index=a),a===b.STRINGOPEN?(this.readingString=!0,this.stringEndsWith=b.STRINGCLOSE):a===b.STRINGOPEN_SQ&&(this.readingString=!0,this.stringEndsWith=b.STRINGCLOSE_SQ),a},e.peek=function(){if(0===this.stack.length){var a=this.next();if(null===a)return null;this.stack.push(a)}return this.stack[0]},e.toString=function(){return"Tokenizer("+this.index+"/"+this.source.length+" at line "+this.line+")"},c.Tokenizer=d;var e=function(a){this.tn=new d(a)},f=e.prototype;return f.parse=function(){for(var a,b={name:"[ROOT]","package":null,messages:[],enums:[],imports:[],options:{},services:[]},c=!0;a=this.tn.next();)switch(a){case"package":if(!c||null!==b["package"])throw Error("Unexpected package at line "+this.tn.line);b["package"]=this._parsePackage(a);break;case"import":if(!c)throw Error("Unexpected import at line "+this.tn.line);b.imports.push(this._parseImport(a));break;case"message":this._parseMessage(b,null,a),c=!1;break;case"enum":this._parseEnum(b,a),c=!1;break;case"option":if(!c)throw Error("Unexpected option at line "+this.tn.line);this._parseOption(b,a);break;case"service":this._parseService(b,a);break;case"extend":this._parseExtend(b,a);break;case"syntax":this._parseIgnoredStatement(b,a);break;default:throw Error("Unexpected token at line "+this.tn.line+": "+a)}return delete b.name,b},f._parseNumber=function(a){var c=1;if("-"==a.charAt(0)&&(c=-1,a=a.substring(1)),b.NUMBER_DEC.test(a))return c*parseInt(a,10);if(b.NUMBER_HEX.test(a))return c*parseInt(a.substring(2),16);if(b.NUMBER_OCT.test(a))return c*parseInt(a.substring(1),8);if(b.NUMBER_FLT.test(a))return c*parseFloat(a);throw Error("Illegal number at line "+this.tn.line+": "+(0>c?"-":"")+a)},f._parseString=function(){var a,c="";do{if(this.tn.next(),c+=this.tn.next(),a=this.tn.next(),a!==this.tn.stringEndsWith)throw Error("Illegal end of string at line "+this.tn.line+": "+a);a=this.tn.peek()}while(a===b.STRINGOPEN||a===b.STRINGOPEN_SQ);return c},f._parseId=function(a,c){var d=-1,e=1;if("-"==a.charAt(0)&&(e=-1,a=a.substring(1)),b.NUMBER_DEC.test(a))d=parseInt(a);else if(b.NUMBER_HEX.test(a))d=parseInt(a.substring(2),16);else{if(!b.NUMBER_OCT.test(a))throw Error("Illegal id at line "+this.tn.line+": "+(0>e?"-":"")+a);d=parseInt(a.substring(1),8)}if(d=e*d|0,!c&&0>d)throw Error("Illegal id at line "+this.tn.line+": "+(0>e?"-":"")+a);return d},f._parsePackage=function(a){if(a=this.tn.next(),!b.TYPEREF.test(a))throw Error("Illegal package name at line "+this.tn.line+": "+a);var c=a;if(a=this.tn.next(),a!=b.END)throw Error("Illegal end of package at line "+this.tn.line+": "+a);return c},f._parseImport=function(a){if(a=this.tn.peek(),"public"===a&&(this.tn.next(),a=this.tn.peek()),a!==b.STRINGOPEN&&a!==b.STRINGOPEN_SQ)throw Error("Illegal start of import at line "+this.tn.line+": "+a);var c=this._parseString();if(a=this.tn.next(),a!==b.END)throw Error("Illegal end of import at line "+this.tn.line+": "+a);return c},f._parseOption=function(a,c){c=this.tn.next();var d=!1;if(c==b.COPTOPEN&&(d=!0,c=this.tn.next()),!b.TYPEREF.test(c)&&!/google\.protobuf\./.test(c))throw Error("Illegal option name in message "+a.name+" at line "+this.tn.line+": "+c);var e=c;if(c=this.tn.next(),d){if(c!==b.COPTCLOSE)throw Error("Illegal end in message "+a.name+", option "+e+" at line "+this.tn.line+": "+c);e="("+e+")",c=this.tn.next(),b.FQTYPEREF.test(c)&&(e+=c,c=this.tn.next())}if(c!==b.EQUAL)throw Error("Illegal operator in message "+a.name+", option "+e+" at line "+this.tn.line+": "+c);if(c=this.tn.peek(),c===b.STRINGOPEN||c===b.STRINGOPEN_SQ)d=this._parseString();else if(this.tn.next(),b.NUMBER.test(c))d=this._parseNumber(c,!0);else if(b.BOOL.test(c))d="true"===c;else{if(!b.TYPEREF.test(c))throw Error("Illegal option value in message "+a.name+", option "+e+" at line "+this.tn.line+": "+c);d=c}if(c=this.tn.next(),c!==b.END)throw Error("Illegal end of option in message "+a.name+", option "+e+" at line "+this.tn.line+": "+c);a.options[e]=d},f._parseIgnoredStatement=function(a,c){for(var d;;){if(d=this.tn.next(),null===d)throw Error("Unexpected EOF in "+a.name+", "+c+" at line "+this.tn.line);if(d===b.END)break}},f._parseService=function(a,c){if(c=this.tn.next(),!b.NAME.test(c))throw Error("Illegal service name at line "+this.tn.line+": "+c);var d=c,e={name:d,rpc:{},options:{}};if(c=this.tn.next(),c!==b.OPEN)throw Error("Illegal start of service "+d+" at line "+this.tn.line+": "+c);do if(c=this.tn.next(),"option"===c)this._parseOption(e,c);else if("rpc"===c)this._parseServiceRPC(e,c);else if(c!==b.CLOSE)throw Error("Illegal type of service "+d+" at line "+this.tn.line+": "+c);while(c!==b.CLOSE);a.services.push(e)},f._parseServiceRPC=function(a,c){var d=c;if(c=this.tn.next(),!b.NAME.test(c))throw Error("Illegal method name in service "+a.name+" at line "+this.tn.line+": "+c);var e=c,f={request:null,response:null,options:{}};if(c=this.tn.next(),c!==b.COPTOPEN)throw Error("Illegal start of request type in service "+a.name+"#"+e+" at line "+this.tn.line+": "+c);if(c=this.tn.next(),!b.TYPEREF.test(c))throw Error("Illegal request type in service "+a.name+"#"+e+" at line "+this.tn.line+": "+c);if(f.request=c,c=this.tn.next(),c!=b.COPTCLOSE)throw Error("Illegal end of request type in service "+a.name+"#"+e+" at line "+this.tn.line+": "+c);if(c=this.tn.next(),"returns"!==c.toLowerCase())throw Error("Illegal delimiter in service "+a.name+"#"+e+" at line "+this.tn.line+": "+c);if(c=this.tn.next(),c!=b.COPTOPEN)throw Error("Illegal start of response type in service "+a.name+"#"+e+" at line "+this.tn.line+": "+c);if(c=this.tn.next(),f.response=c,c=this.tn.next(),c!==b.COPTCLOSE)throw Error("Illegal end of response type in service "+a.name+"#"+e+" at line "+this.tn.line+": "+c);if(c=this.tn.next(),c===b.OPEN){do if(c=this.tn.next(),"option"===c)this._parseOption(f,c);else if(c!==b.CLOSE)throw Error("Illegal start of option inservice "+a.name+"#"+e+" at line "+this.tn.line+": "+c);while(c!==b.CLOSE);this.tn.peek()===b.END&&this.tn.next()}else if(c!==b.END)throw Error("Illegal delimiter in service "+a.name+"#"+e+" at line "+this.tn.line+": "+c);"undefined"==typeof a[d]&&(a[d]={}),a[d][e]=f},f._parseMessage=function(a,c,d){var e={},f="group"===d;if(d=this.tn.next(),!b.NAME.test(d))throw Error("Illegal "+(f?"group":"message")+" name"+(a?" in message "+a.name:"")+" at line "+this.tn.line+": "+d);if(e.name=d,f){if(d=this.tn.next(),d!==b.EQUAL)throw Error("Illegal id assignment after group "+e.name+" at line "+this.tn.line+": "+d);d=this.tn.next();try{c.id=this._parseId(d)}catch(g){throw Error("Illegal field id value for group "+e.name+"#"+c.name+" at line "+this.tn.line+": "+d)}e.isGroup=!0}if(e.fields=[],e.enums=[],e.messages=[],e.options={},e.oneofs={},d=this.tn.next(),d===b.OPTOPEN&&c&&(this._parseFieldOptions(e,c,d),d=this.tn.next()),d!==b.OPEN)throw Error("Illegal start of "+(f?"group":"message")+" "+e.name+" at line "+this.tn.line+": "+d);for(;;){if(d=this.tn.next(),d===b.CLOSE){d=this.tn.peek(),d===b.END&&this.tn.next();break}if(b.RULE.test(d))this._parseMessageField(e,d);else if("oneof"===d)this._parseMessageOneOf(e,d);else if("enum"===d)this._parseEnum(e,d);else if("message"===d)this._parseMessage(e,null,d);else if("option"===d)this._parseOption(e,d);else if("extensions"===d)e.extensions=this._parseExtensions(e,d);else{if("extend"!==d)throw Error("Illegal token in message "+e.name+" at line "+this.tn.line+": "+d);this._parseExtend(e,d)}}return a.messages.push(e),e},f._parseMessageField=function(a,c){var d={},e=null;if(d.rule=c,d.options={},c=this.tn.next(),"group"===c){if(e=this._parseMessage(a,d,c),!/^[A-Z]/.test(e.name))throw Error("Group names must start with a capital letter");d.type=e.name,d.name=e.name.toLowerCase(),c=this.tn.peek(),c===b.END&&this.tn.next()}else{if(!b.TYPE.test(c)&&!b.TYPEREF.test(c))throw Error("Illegal field type in message "+a.name+" at line "+this.tn.line+": "+c);if(d.type=c,c=this.tn.next(),!b.NAME.test(c))throw Error("Illegal field name in message "+a.name+" at line "+this.tn.line+": "+c);if(d.name=c,c=this.tn.next(),c!==b.EQUAL)throw Error("Illegal token in field "+a.name+"#"+d.name+" at line "+this.tn.line+": "+c);c=this.tn.next();try{d.id=this._parseId(c)}catch(f){throw Error("Illegal field id in message "+a.name+"#"+d.name+" at line "+this.tn.line+": "+c)}if(c=this.tn.next(),c===b.OPTOPEN&&(this._parseFieldOptions(a,d,c),c=this.tn.next()),c!==b.END)throw Error("Illegal delimiter in message "+a.name+"#"+d.name+" at line "+this.tn.line+": "+c)}return a.fields.push(d),d},f._parseMessageOneOf=function(a,c){if(c=this.tn.next(),!b.NAME.test(c))throw Error("Illegal oneof name in message "+a.name+" at line "+this.tn.line+": "+c);var d,e=c,f=[];if(c=this.tn.next(),c!==b.OPEN)throw Error("Illegal start of oneof "+e+" at line "+this.tn.line+": "+c);for(;this.tn.peek()!==b.CLOSE;)d=this._parseMessageField(a,"optional"),d.oneof=e,f.push(d.id);this.tn.next(),a.oneofs[e]=f},f._parseFieldOptions=function(a,c,d){for(var e=!0;;){if(d=this.tn.next(),d===b.OPTCLOSE)break;if(d===b.OPTEND){if(e)throw Error("Illegal start of options in message "+a.name+"#"+c.name+" at line "+this.tn.line+": "+d);d=this.tn.next()}this._parseFieldOption(a,c,d),e=!1}},f._parseFieldOption=function(a,c,d){var e=!1;if(d===b.COPTOPEN&&(d=this.tn.next(),e=!0),!b.TYPEREF.test(d))throw Error("Illegal field option in "+a.name+"#"+c.name+" at line "+this.tn.line+": "+d);var f=d;if(d=this.tn.next(),e){if(d!==b.COPTCLOSE)throw Error("Illegal delimiter in "+a.name+"#"+c.name+" at line "+this.tn.line+": "+d);f="("+f+")",d=this.tn.next(),b.FQTYPEREF.test(d)&&(f+=d,d=this.tn.next())}if(d!==b.EQUAL)throw Error("Illegal token in "+a.name+"#"+c.name+" at line "+this.tn.line+": "+d);if(d=this.tn.peek(),d===b.STRINGOPEN||d===b.STRINGOPEN_SQ)a=this._parseString();else if(b.NUMBER.test(d,!0))a=this._parseNumber(this.tn.next(),!0);else if(b.BOOL.test(d))a="true"===this.tn.next().toLowerCase();else{if(!b.TYPEREF.test(d))throw Error("Illegal value in message "+a.name+"#"+c.name+", option "+f+" at line "+this.tn.line+": "+d);a=this.tn.next()}c.options[f]=a},f._parseEnum=function(a,c){var d={};if(c=this.tn.next(),!b.NAME.test(c))throw Error("Illegal enum name in message "+a.name+" at line "+this.tn.line+": "+c);if(d.name=c,c=this.tn.next(),c!==b.OPEN)throw Error("Illegal start of enum "+d.name+" at line "+this.tn.line+": "+c);for(d.values=[],d.options={};;){if(c=this.tn.next(),c===b.CLOSE){c=this.tn.peek(),c===b.END&&this.tn.next();break}if("option"==c)this._parseOption(d,c);else{if(!b.NAME.test(c))throw Error("Illegal name in enum "+d.name+" at line "+this.tn.line+": "+c);this._parseEnumValue(d,c)}}a.enums.push(d)},f._parseEnumValue=function(a,c){var d={};if(d.name=c,c=this.tn.next(),c!==b.EQUAL)throw Error("Illegal token in enum "+a.name+" at line "+this.tn.line+": "+c);c=this.tn.next();try{d.id=this._parseId(c,!0)}catch(e){throw Error("Illegal id in enum "+a.name+" at line "+this.tn.line+": "+c)}if(a.values.push(d),c=this.tn.next(),c===b.OPTOPEN&&(this._parseFieldOptions(a,{options:{}},c),c=this.tn.next()),c!==b.END)throw Error("Illegal delimiter in enum "+a.name+" at line "+this.tn.line+": "+c)
},f._parseExtensions=function(c,d){var e=[];if(d=this.tn.next(),e.push("min"===d?a.ID_MIN:"max"===d?a.ID_MAX:this._parseNumber(d)),d=this.tn.next(),"to"!==d)throw Error("Illegal extensions delimiter in message "+c.name+" at line "+this.tn.line+": "+d);if(d=this.tn.next(),e.push("min"===d?a.ID_MIN:"max"===d?a.ID_MAX:this._parseNumber(d)),d=this.tn.next(),d!==b.END)throw Error("Illegal extensions delimiter in message "+c.name+" at line "+this.tn.line+": "+d);return e},f._parseExtend=function(a,c){if(c=this.tn.next(),!b.TYPEREF.test(c))throw Error("Illegal message name at line "+this.tn.line+": "+c);var d={};if(d.ref=c,d.fields=[],c=this.tn.next(),c!==b.OPEN)throw Error("Illegal start of extend "+d.name+" at line "+this.tn.line+": "+c);for(;;){if(c=this.tn.next(),c===b.CLOSE){c=this.tn.peek(),c==b.END&&this.tn.next();break}if(!b.RULE.test(c))throw Error("Illegal token in extend "+d.name+" at line "+this.tn.line+": "+c);this._parseMessageField(d,c)}return a.messages.push(d),d},f.toString=function(){return"Parser"},c.Parser=e,c}(b,b.Lang),b.Reflect=function(b){function c(a,d){var e=d.readVarint32(),f=7&e,e=e>>3;switch(f){case b.WIRE_TYPES.VARINT:do e=d.readUint8();while(128===(128&e));break;case b.WIRE_TYPES.BITS64:d.offset+=8;break;case b.WIRE_TYPES.LDELIM:e=d.readVarint32(),d.offset+=e;break;case b.WIRE_TYPES.STARTGROUP:c(e,d);break;case b.WIRE_TYPES.ENDGROUP:if(e===a)return!1;throw Error("Illegal GROUPEND after unknown group: "+e+" ("+a+" expected)");case b.WIRE_TYPES.BITS32:d.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+a+": "+f)}return!0}function d(a,c){if(a&&"number"==typeof a.low&&"number"==typeof a.high&&"boolean"==typeof a.unsigned&&a.low===a.low&&a.high===a.high)return new b.Long(a.low,a.high,"undefined"==typeof c?a.unsigned:c);if("string"==typeof a)return b.Long.fromString(a,c||!1,10);if("number"==typeof a)return b.Long.fromNumber(a,c||!1);throw Error("not convertible to Long")}var e={},f=function(a,b,c){this.builder=a,this.parent=b,this.name=c},g=f.prototype;g.fqn=function(){for(var a=this.name,b=this;;){if(b=b.parent,null==b)break;a=b.name+"."+a}return a},g.toString=function(a){return(a?this.className+" ":"")+this.fqn()},g.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},e.T=f;var h=function(a,b,c,d){f.call(this,a,b,c),this.className="Namespace",this.children=[],this.options=d||{}},g=h.prototype=Object.create(f.prototype);g.getChildren=function(a){if(a=a||null,null==a)return this.children.slice();for(var b=[],c=0,d=this.children.length;d>c;++c)this.children[c]instanceof a&&b.push(this.children[c]);return b},g.addChild=function(a){var b;if(b=this.getChild(a.name))if(b instanceof i.Field&&b.name!==b.originalName&&null===this.getChild(b.originalName))b.name=b.originalName;else{if(!(a instanceof i.Field&&a.name!==a.originalName&&null===this.getChild(a.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+a.name);a.name=a.originalName}this.children.push(a)},g.getChild=function(a){for(var b="number"==typeof a?"id":"name",c=0,d=this.children.length;d>c;++c)if(this.children[c][b]===a)return this.children[c];return null},g.resolve=function(a,b){var c=a.split("."),d=this,f=0;if(""===c[f]){for(;null!==d.parent;)d=d.parent;f++}do{do{if(d=d.getChild(c[f]),!(d&&d instanceof e.T)||b&&d instanceof e.Message.Field){d=null;break}f++}while(f<c.length);if(null!=d)break;if(null!==this.parent)return this.parent.resolve(a,b)}while(null!=d);return d},g.build=function(){for(var a,b={},c=this.children,d=0,e=c.length;e>d;++d)a=c[d],a instanceof h&&(b[a.name]=a.build());return Object.defineProperty&&Object.defineProperty(b,"$options",{value:this.buildOpt()}),b},g.buildOpt=function(){for(var a={},b=Object.keys(this.options),c=0,d=b.length;d>c;++c)a[b[c]]=this.options[b[c]];return a},g.getOption=function(a){return"undefined"==typeof a?this.options:"undefined"!=typeof this.options[a]?this.options[a]:null},e.Namespace=h;var i=function(a,c,d,e,f){h.call(this,a,c,d,e),this.className="Message",this.extensions=[b.ID_MIN,b.ID_MAX],this.clazz=null,this.isGroup=!!f,this._fieldsByName=this._fieldsById=this._fields=null},j=i.prototype=Object.create(h.prototype);j.build=function(c){if(this.clazz&&!c)return this.clazz;c=function(b,c){function d(b,c){var e,f={};for(e in b)b.hasOwnProperty(e)&&(null===b[e]||"object"!=typeof b[e]?f[e]=b[e]:b[e]instanceof a?c&&(f[e]=b.toBuffer()):f[e]=d(b[e],c));return f}var e=c.getChildren(b.Reflect.Message.Field),f=c.getChildren(b.Reflect.Message.OneOf),g=function(c){b.Builder.Message.call(this);for(var d=0,g=f.length;g>d;++d)this[f[d].name]=null;for(d=0,g=e.length;g>d;++d){var h=e[d];this[h.name]=h.repeated?[]:null,h.required&&null!==h.defaultValue&&(this[h.name]=h.defaultValue)}if(0<arguments.length)if(1!==arguments.length||"object"!=typeof c||"function"==typeof c.encode||b.Util.isArray(c)||c instanceof a||c instanceof ArrayBuffer||b.Long&&c instanceof b.Long)for(d=0,g=arguments.length;g>d;++d)this.$set(e[d].name,arguments[d]);else for(h=Object.keys(c),d=0,g=h.length;g>d;++d)this.$set(h[d],c[h[d]])},h=g.prototype=Object.create(b.Builder.Message.prototype);h.add=function(a,d,e){var f=c._fieldsByName[a];if(!e){if(!f)throw Error(this+"#"+a+" is undefined");if(!(f instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+f.toString(!0));if(!f.repeated)throw Error(this+"#"+a+" is not a repeated field")}null===this[f.name]&&(this[f.name]=[]),this[f.name].push(e?d:f.verifyValue(d,!0))},h.$add=h.add,h.set=function(a,d,e){if(a&&"object"==typeof a){for(var f in a)a.hasOwnProperty(f)&&this.$set(f,a[f],e);return this}if(f=c._fieldsByName[a],e)this[f.name]=d;else{if(!f)throw Error(this+"#"+a+" is not a field: undefined");if(!(f instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+f.toString(!0));this[f.name]=d=f.verifyValue(d)}return f.oneof&&(null!==d?(null!==this[f.oneof.name]&&(this[this[f.oneof.name]]=null),this[f.oneof.name]=f.name):f.oneof.name===a&&(this[f.oneof.name]=null)),this},h.$set=h.set,h.get=function(a,d){if(d)return this[a];var e=c._fieldsByName[a];if(!(e&&e instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: undefined");if(!(e instanceof b.Reflect.Message.Field))throw Error(this+"#"+a+" is not a field: "+e.toString(!0));return this[e.name]},h.$get=h.get;for(var i=0;i<e.length;i++){var j=e[i];j instanceof b.Reflect.Message.ExtensionField||c.builder.options.populateAccessors&&function(a){var b=a.originalName.replace(/(_[a-zA-Z])/g,function(a){return a.toUpperCase().replace("_","")}),b=b.substring(0,1).toUpperCase()+b.substring(1),d=a.originalName.replace(/([A-Z])/g,function(a){return"_"+a}),e=function(b,c){return this[a.name]=c?b:a.verifyValue(b),this},f=function(){return this[a.name]};null===c.getChild("set"+b)&&(h["set"+b]=e),null===c.getChild("set_"+d)&&(h["set_"+d]=e),null===c.getChild("get"+b)&&(h["get"+b]=f),null===c.getChild("get_"+d)&&(h["get_"+d]=f)}(j)}return h.encode=function(b,d){"boolean"==typeof b&&(d=b,b=void 0);var e=!1;b||(b=new a,e=!0);var f=b.littleEndian;try{return c.encode(this,b.LE(),d),(e?b.flip():b).LE(f)}catch(g){throw b.LE(f),g}},h.calculate=function(){return c.calculate(this)},h.encodeDelimited=function(b){var d=!1;b||(b=new a,d=!0);var e=(new a).LE();return c.encode(this,e).flip(),b.writeVarint32(e.remaining()),b.append(e),d?b.flip():b},h.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toArrayBuffer()),a}},h.toArrayBuffer=h.encodeAB,h.encodeNB=function(){try{return this.encode().toBuffer()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toBuffer()),a}},h.toBuffer=h.encodeNB,h.encode64=function(){try{return this.encode().toBase64()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toBase64()),a}},h.toBase64=h.encode64,h.encodeHex=function(){try{return this.encode().toHex()}catch(a){throw a.encoded&&(a.encoded=a.encoded.toHex()),a}},h.toHex=h.encodeHex,h.toRaw=function(a){return d(this,!!a)},g.decode=function(b,d){"string"==typeof b&&(b=a.wrap(b,d?d:"base64")),b=b instanceof a?b:a.wrap(b);var e=b.littleEndian;try{var f=c.decode(b.LE());return b.LE(e),f}catch(g){throw b.LE(e),g}},g.decodeDelimited=function(b,d){if("string"==typeof b&&(b=a.wrap(b,d?d:"base64")),b=b instanceof a?b:a.wrap(b),1>b.remaining())return null;var e=b.offset,f=b.readVarint32();if(b.remaining()<f)return b.offset=e,null;try{var g=c.decode(b.slice(b.offset,b.offset+f).LE());return b.offset+=f,g}catch(h){throw b.offset+=f,h}},g.decode64=function(a){return g.decode(a,"base64")},g.decodeHex=function(a){return g.decode(a,"hex")},h.toString=function(){return c.toString()},Object.defineProperty&&(Object.defineProperty(g,"$options",{value:c.buildOpt()}),Object.defineProperty(h,"$type",{get:function(){return c}})),g}(b,this),this._fields=[],this._fieldsById={},this._fieldsByName={};for(var d,e=0,f=this.children.length;f>e;e++)if(d=this.children[e],d instanceof l)c[d.name]=d.build();else if(d instanceof i)c[d.name]=d.build();else if(d instanceof i.Field)d.build(),this._fields.push(d),this._fieldsById[d.id]=d,this._fieldsByName[d.name]=d;else if(!(d instanceof i.OneOf||d instanceof m))throw Error("Illegal reflect child of "+this.toString(!0)+": "+children[e].toString(!0));return this.clazz=c},j.encode=function(a,b,c){for(var d,e,f=null,g=0,h=this._fields.length;h>g;++g)d=this._fields[g],e=a[d.name],d.required&&null===e?null===f&&(f=d):d.encode(c?e:d.verifyValue(e),b);if(null!==f)throw a=Error("Missing at least one required field for "+this.toString(!0)+": "+f),a.encoded=b,a;return b},j.calculate=function(a){for(var b,c,d=0,e=0,f=this._fields.length;f>e;++e){if(b=this._fields[e],c=a[b.name],b.required&&null===c)throw Error("Missing at least one required field for "+this.toString(!0)+": "+b);d+=b.calculate(c)}return d},j.decode=function(a,d,e){d="number"==typeof d?d:-1;for(var f,g,h,i=a.offset,j=new this.clazz;a.offset<i+d||-1===d&&0<a.remaining();){if(f=a.readVarint32(),g=7&f,h=f>>3,g===b.WIRE_TYPES.ENDGROUP){if(h!==e)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+h+" ("+(e?e+" expected":"not a group")+")");break}if(f=this._fieldsById[h])f.repeated&&!f.options.packed?j[f.name].push(f.decode(g,a)):(j[f.name]=f.decode(g,a),f.oneof&&(null!==this[f.oneof.name]&&(this[this[f.oneof.name]]=null),j[f.oneof.name]=f.name));else switch(g){case b.WIRE_TYPES.VARINT:a.readVarint32();break;case b.WIRE_TYPES.BITS32:a.offset+=4;break;case b.WIRE_TYPES.BITS64:a.offset+=8;break;case b.WIRE_TYPES.LDELIM:f=a.readVarint32(),a.offset+=f;break;case b.WIRE_TYPES.STARTGROUP:for(;c(h,a););break;default:throw Error("Illegal wire type for unknown field "+h+" in "+this.toString(!0)+"#decode: "+g)}}for(a=0,d=this._fields.length;d>a;++a)if(f=this._fields[a],null===j[f.name]){if(f.required)throw a=Error("Missing at least one required field for "+this.toString(!0)+": "+f.name),a.decoded=j,a;null!==f.defaultValue&&(j[f.name]=f.defaultValue)}return j},e.Message=i;var k=function(a,b,c,d,e,g,h,j){f.call(this,a,b,e),this.className="Message.Field",this.required="required"===c,this.repeated="repeated"===c,this.type=d,this.resolvedType=null,this.id=g,this.options=h||{},this.defaultValue=null,this.oneof=j||null,this.originalName=this.name,!this.builder.options.convertFieldsToCamelCase||this instanceof i.ExtensionField||(this.name=k._toCamelCase(this.name))};k._toCamelCase=function(a){return a.replace(/_([a-zA-Z])/g,function(a,b){return b.toUpperCase()})},j=k.prototype=Object.create(f.prototype),j.build=function(){this.defaultValue="undefined"!=typeof this.options["default"]?this.verifyValue(this.options["default"]):null},j.verifyValue=function(c,e){e=e||!1;var f=function(a,b){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+a+" ("+b+")")}.bind(this);if(null===c)return this.required&&f(typeof c,"required"),null;var g;if(this.repeated&&!e){for(b.Util.isArray(c)||(c=[c]),f=[],g=0;g<c.length;g++)f.push(this.verifyValue(c[g],!0));return f}switch(!this.repeated&&b.Util.isArray(c)&&f(typeof c,"no array expected"),this.type){case b.TYPES.int32:case b.TYPES.sint32:case b.TYPES.sfixed32:return("number"!=typeof c||c===c&&0!==c%1)&&f(typeof c,"not an integer"),c>4294967295?0|c:c;case b.TYPES.uint32:case b.TYPES.fixed32:return("number"!=typeof c||c===c&&0!==c%1)&&f(typeof c,"not an integer"),0>c?c>>>0:c;case b.TYPES.int64:case b.TYPES.sint64:case b.TYPES.sfixed64:if(b.Long)try{return d(c,!1)}catch(h){f(typeof c,h.message)}else f(typeof c,"requires Long.js");case b.TYPES.uint64:case b.TYPES.fixed64:if(b.Long)try{return d(c,!0)}catch(i){f(typeof c,i.message)}else f(typeof c,"requires Long.js");case b.TYPES.bool:return"boolean"!=typeof c&&f(typeof c,"not a boolean"),c;case b.TYPES["float"]:case b.TYPES["double"]:return"number"!=typeof c&&f(typeof c,"not a number"),c;case b.TYPES.string:return"string"==typeof c||c&&c instanceof String||f(typeof c,"not a string"),""+c;case b.TYPES.bytes:return c&&c instanceof a?c:a.wrap(c);case b.TYPES["enum"]:var j=this.resolvedType.getChildren(l.Value);for(g=0;g<j.length;g++)if(j[g].name==c||j[g].id==c)return j[g].id;f(c,"not a valid enum value");case b.TYPES.group:case b.TYPES.message:if(c&&"object"==typeof c||f(typeof c,"object expected"),c instanceof this.resolvedType.clazz)return c;if(c instanceof b.Builder.Message){f={};for(g in c)c.hasOwnProperty(g)&&(f[g]=c[g]);c=f}return new this.resolvedType.clazz(c)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+c+" (undefined type "+this.type+")")},j.encode=function(c,d){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===c||this.repeated&&0==c.length)return d;try{if(this.repeated){var e;if(this.options.packed&&0<=b.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)){d.writeVarint32(this.id<<3|b.WIRE_TYPES.LDELIM),d.ensureCapacity(d.offset+=1);var f=d.offset;for(e=0;e<c.length;e++)this.encodeValue(c[e],d);var g=d.offset-f,h=a.calculateVarint32(g);if(h>1){var i=d.slice(f,d.offset),f=f+(h-1);d.offset=f,d.append(i)}d.writeVarint32(g,f-h)}else for(e=0;e<c.length;e++)d.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(c[e],d)}else d.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(c,d)}catch(j){throw Error("Illegal value for "+this.toString(!0)+": "+c+" ("+j+")")}return d},j.encodeValue=function(c,d){if(null===c)return d;switch(this.type){case b.TYPES.int32:0>c?d.writeVarint64(c):d.writeVarint32(c);break;case b.TYPES.uint32:d.writeVarint32(c);break;case b.TYPES.sint32:d.writeVarint32ZigZag(c);break;case b.TYPES.fixed32:d.writeUint32(c);break;case b.TYPES.sfixed32:d.writeInt32(c);break;case b.TYPES.int64:case b.TYPES.uint64:d.writeVarint64(c);break;case b.TYPES.sint64:d.writeVarint64ZigZag(c);break;case b.TYPES.fixed64:d.writeUint64(c);break;case b.TYPES.sfixed64:d.writeInt64(c);break;case b.TYPES.bool:d.writeVarint32("string"==typeof c?"false"===c.toLowerCase()?0:!!c:c?1:0);break;case b.TYPES["enum"]:d.writeVarint32(c);break;case b.TYPES["float"]:d.writeFloat32(c);break;case b.TYPES["double"]:d.writeFloat64(c);break;case b.TYPES.string:d.writeVString(c);break;case b.TYPES.bytes:if(0>c.remaining())throw Error("Illegal value for "+this.toString(!0)+": "+c.remaining()+" bytes remaining");var e=c.offset;d.writeVarint32(c.remaining()),d.append(c),c.offset=e;break;case b.TYPES.message:e=(new a).LE(),this.resolvedType.encode(c,e),d.writeVarint32(e.offset),d.append(e.flip());break;case b.TYPES.group:this.resolvedType.encode(c,d),d.writeVarint32(this.id<<3|b.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+c+" (unknown type)")}return d},j.calculate=function(c){if(c=this.verifyValue(c),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===c||this.repeated&&0==c.length)return 0;var d=0;try{if(this.repeated){var e,f;if(this.options.packed&&0<=b.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)){for(d+=a.calculateVarint32(this.id<<3|b.WIRE_TYPES.LDELIM),e=f=0;e<c.length;e++)f+=this.calculateValue(c[e]);d+=a.calculateVarint32(f),d+=f}else for(e=0;e<c.length;e++)d+=a.calculateVarint32(this.id<<3|this.type.wireType),d+=this.calculateValue(c[e])}else d+=a.calculateVarint32(this.id<<3|this.type.wireType),d+=this.calculateValue(c)}catch(g){throw Error("Illegal value for "+this.toString(!0)+": "+c+" ("+g+")")}return d},j.calculateValue=function(c){if(null===c)return 0;switch(this.type){case b.TYPES.int32:return 0>c?a.calculateVarint64(c):a.calculateVarint32(c);case b.TYPES.uint32:return a.calculateVarint32(c);case b.TYPES.sint32:return a.calculateVarint32(a.zigZagEncode32(c));case b.TYPES.fixed32:case b.TYPES.sfixed32:case b.TYPES["float"]:return 4;case b.TYPES.int64:case b.TYPES.uint64:return a.calculateVarint64(c);case b.TYPES.sint64:return a.calculateVarint64(a.zigZagEncode64(c));case b.TYPES.fixed64:case b.TYPES.sfixed64:return 8;case b.TYPES.bool:return 1;case b.TYPES["enum"]:return a.calculateVarint32(c);case b.TYPES["double"]:return 8;case b.TYPES.string:return c=a.calculateUTF8Bytes(c),a.calculateVarint32(c)+c;case b.TYPES.bytes:if(0>c.remaining())throw Error("Illegal value for "+this.toString(!0)+": "+c.remaining()+" bytes remaining");return a.calculateVarint32(c.remaining())+c.remaining();case b.TYPES.message:return c=this.resolvedType.calculate(c),a.calculateVarint32(c)+c;case b.TYPES.group:return c=this.resolvedType.calculate(c),c+a.calculateVarint32(this.id<<3|b.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+c+" (unknown type)")},j.decode=function(a,c,d){if(a!=this.type.wireType&&(d||a!=b.WIRE_TYPES.LDELIM||!this.repeated))throw Error("Illegal wire type for field "+this.toString(!0)+": "+a+" ("+this.type.wireType+" expected)");if(a==b.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&0<=b.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)&&!d){for(a=c.readVarint32(),a=c.offset+a,d=[];c.offset<a;)d.push(this.decode(this.type.wireType,c,!0));return d}switch(this.type){case b.TYPES.int32:return 0|c.readVarint32();case b.TYPES.uint32:return c.readVarint32()>>>0;case b.TYPES.sint32:return 0|c.readVarint32ZigZag();case b.TYPES.fixed32:return c.readUint32()>>>0;case b.TYPES.sfixed32:return 0|c.readInt32();case b.TYPES.int64:return c.readVarint64();case b.TYPES.uint64:return c.readVarint64().toUnsigned();case b.TYPES.sint64:return c.readVarint64ZigZag();case b.TYPES.fixed64:return c.readUint64();case b.TYPES.sfixed64:return c.readInt64();case b.TYPES.bool:return!!c.readVarint32();case b.TYPES["enum"]:return c.readVarint32();case b.TYPES["float"]:return c.readFloat();case b.TYPES["double"]:return c.readDouble();case b.TYPES.string:return c.readVString();case b.TYPES.bytes:if(a=c.readVarint32(),c.remaining()<a)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+a+" required but got only "+c.remaining());return d=c.clone(),d.limit=d.offset+a,c.offset+=a,d;case b.TYPES.message:return a=c.readVarint32(),this.resolvedType.decode(c,a);case b.TYPES.group:return this.resolvedType.decode(c,-1,this.id)}throw Error("[INTERNAL] Illegal wire type for "+this.toString(!0)+": "+a)},e.Message.Field=k,j=function(a,b,c,d,e,f,g){k.call(this,a,b,c,d,e,f,g)},j.prototype=Object.create(k.prototype),e.Message.ExtensionField=j,e.Message.OneOf=function(a,b,c){f.call(this,a,b,c),this.fields=[]};var l=function(a,b,c,d){h.call(this,a,b,c,d),this.className="Enum",this.object=null};(l.prototype=Object.create(h.prototype)).build=function(){for(var a={},b=this.getChildren(l.Value),c=0,d=b.length;d>c;++c)a[b[c].name]=b[c].id;return Object.defineProperty&&Object.defineProperty(a,"$options",{value:this.buildOpt()}),this.object=a},e.Enum=l,j=function(a,b,c,d){f.call(this,a,b,c),this.className="Enum.Value",this.id=d},j.prototype=Object.create(f.prototype),e.Enum.Value=j;var m=function(a,b,c,d){f.call(this,a,b,c),this.field=d};m.prototype=Object.create(f.prototype),e.Extension=m,j=function(a,b,c,d){h.call(this,a,b,c,d),this.className="Service",this.clazz=null},(j.prototype=Object.create(h.prototype)).build=function(a){return this.clazz&&!a?this.clazz:this.clazz=function(a,b){var c=function(b){a.Builder.Service.call(this),this.rpcImpl=b||function(a,b,c){setTimeout(c.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},d=c.prototype=Object.create(a.Builder.Service.prototype);Object.defineProperty&&(Object.defineProperty(c,"$options",{value:b.buildOpt()}),Object.defineProperty(d,"$options",{value:c.$options}));for(var e=b.getChildren(a.Reflect.Service.RPCMethod),f=0;f<e.length;f++)(function(a){d[a.name]=function(c,d){try{c&&c instanceof a.resolvedRequestType.clazz?this.rpcImpl(a.fqn(),c,function(c,e){if(c)d(c);else{try{e=a.resolvedResponseType.clazz.decode(e)}catch(f){}e&&e instanceof a.resolvedResponseType.clazz?d(null,e):d(Error("Illegal response type received in service method "+b.name+"#"+a.name))}}):setTimeout(d.bind(this,Error("Illegal request type provided to service method "+b.name+"#"+a.name)),0)}catch(e){setTimeout(d.bind(this,e),0)}},c[a.name]=function(b,d,e){new c(b)[a.name](d,e)},Object.defineProperty&&(Object.defineProperty(c[a.name],"$options",{value:a.buildOpt()}),Object.defineProperty(d[a.name],"$options",{value:c[a.name].$options}))})(e[f]);return c}(b,this)},e.Service=j;var n=function(a,b,c,d){f.call(this,a,b,c),this.className="Service.Method",this.options=d||{}};return(n.prototype=Object.create(f.prototype)).buildOpt=g.buildOpt,e.Service.Method=n,g=function(a,b,c,d,e,f){n.call(this,a,b,c,f),this.className="Service.RPCMethod",this.requestName=d,this.responseName=e,this.resolvedResponseType=this.resolvedRequestType=null},g.prototype=Object.create(n.prototype),e.Service.RPCMethod=g,e}(b),b.Builder=function(a,b,c){var d=function(a){this.ptr=this.ns=new c.Namespace(this,null,""),this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=a||{}},e=d.prototype;return e.reset=function(){this.ptr=this.ns},e.define=function(a,d){if("string"!=typeof a||!b.TYPEREF.test(a))throw Error("Illegal package: "+a);var e,f=a.split(".");for(e=0;e<f.length;e++)if(!b.NAME.test(f[e]))throw Error("Illegal package: "+f[e]);for(e=0;e<f.length;e++)null===this.ptr.getChild(f[e])&&this.ptr.addChild(new c.Namespace(this,this.ptr,f[e],d)),this.ptr=this.ptr.getChild(f[e]);return this},d.isValidMessage=function(c){if("string"!=typeof c.name||!b.NAME.test(c.name)||"undefined"!=typeof c.values||"undefined"!=typeof c.rpc)return!1;var e;if("undefined"!=typeof c.fields){if(!a.Util.isArray(c.fields))return!1;var f,g=[];for(e=0;e<c.fields.length;e++){if(!d.isValidMessageField(c.fields[e]))return!1;if(f=parseInt(c.fields[e].id,10),0<=g.indexOf(f))return!1;g.push(f)}}if("undefined"!=typeof c.enums){if(!a.Util.isArray(c.enums))return!1;for(e=0;e<c.enums.length;e++)if(!d.isValidEnum(c.enums[e]))return!1}if("undefined"!=typeof c.messages){if(!a.Util.isArray(c.messages))return!1;for(e=0;e<c.messages.length;e++)if(!d.isValidMessage(c.messages[e])&&!d.isValidExtend(c.messages[e]))return!1}return"undefined"==typeof c.extensions||a.Util.isArray(c.extensions)&&2===c.extensions.length&&"number"==typeof c.extensions[0]&&"number"==typeof c.extensions[1]?!0:!1},d.isValidMessageField=function(a){if("string"!=typeof a.rule||"string"!=typeof a.name||"string"!=typeof a.type||"undefined"==typeof a.id||!(b.RULE.test(a.rule)&&b.NAME.test(a.name)&&b.TYPEREF.test(a.type)&&b.ID.test(""+a.id)))return!1;if("undefined"!=typeof a.options){if("object"!=typeof a.options)return!1;for(var c,d=Object.keys(a.options),e=0;e<d.length;e++)if("string"!=typeof(c=d[e])||"string"!=typeof a.options[c]&&"number"!=typeof a.options[c]&&"boolean"!=typeof a.options[c])return!1}return!0},d.isValidEnum=function(c){if("string"!=typeof c.name||!b.NAME.test(c.name)||"undefined"==typeof c.values||!a.Util.isArray(c.values)||0==c.values.length)return!1;for(var d=0;d<c.values.length;d++)if("object"!=typeof c.values[d]||"string"!=typeof c.values[d].name||"undefined"==typeof c.values[d].id||!b.NAME.test(c.values[d].name)||!b.NEGID.test(""+c.values[d].id))return!1;return!0},e.create=function(b){if(!b)return this;if(a.Util.isArray(b)||(b=[b]),0==b.length)return this;var e=[];for(e.push(b);0<e.length;){if(b=e.pop(),!a.Util.isArray(b))throw Error("Not a valid namespace: "+JSON.stringify(b));for(;0<b.length;){var f=b.shift();if(d.isValidMessage(f)){var g=new c.Message(this,this.ptr,f.name,f.options,f.isGroup),h={};if(f.oneofs)for(var i=Object.keys(f.oneofs),j=0,k=i.length;k>j;++j)g.addChild(h[i[j]]=new c.Message.OneOf(this,g,i[j]));if(f.fields&&0<f.fields.length)for(j=0,k=f.fields.length;k>j;++j){if(i=f.fields[j],null!==g.getChild(i.id))throw Error("Duplicate field id in message "+g.name+": "+i.id);if(i.options)for(var l=Object.keys(i.options),m=0,n=l.length;n>m;++m){if("string"!=typeof l[m])throw Error("Illegal field option name in message "+g.name+"#"+i.name+": "+l[m]);if("string"!=typeof i.options[l[m]]&&"number"!=typeof i.options[l[m]]&&"boolean"!=typeof i.options[l[m]])throw Error("Illegal field option value in message "+g.name+"#"+i.name+"#"+l[m]+": "+i.options[l[m]])}if(l=null,"string"==typeof i.oneof&&(l=h[i.oneof],"undefined"==typeof l))throw Error("Illegal oneof in message "+g.name+"#"+i.name+": "+i.oneof);i=new c.Message.Field(this,g,i.rule,i.type,i.name,i.id,i.options,l),l&&l.fields.push(i),g.addChild(i)}if(h=[],"undefined"!=typeof f.enums&&0<f.enums.length)for(j=0;j<f.enums.length;j++)h.push(f.enums[j]);if(f.messages&&0<f.messages.length)for(j=0;j<f.messages.length;j++)h.push(f.messages[j]);f.extensions&&(g.extensions=f.extensions,g.extensions[0]<a.ID_MIN&&(g.extensions[0]=a.ID_MIN),g.extensions[1]>a.ID_MAX&&(g.extensions[1]=a.ID_MAX)),this.ptr.addChild(g),0<h.length&&(e.push(b),b=h,this.ptr=g)}else if(d.isValidEnum(f)){for(g=new c.Enum(this,this.ptr,f.name,f.options),j=0;j<f.values.length;j++)g.addChild(new c.Enum.Value(this,g,f.values[j].name,f.values[j].id));this.ptr.addChild(g)}else if(d.isValidService(f)){g=new c.Service(this,this.ptr,f.name,f.options);for(j in f.rpc)f.rpc.hasOwnProperty(j)&&g.addChild(new c.Service.RPCMethod(this,g,j,f.rpc[j].request,f.rpc[j].response,f.rpc[j].options));this.ptr.addChild(g)}else{if(!d.isValidExtend(f))throw Error("Not a valid definition: "+JSON.stringify(f));if(g=this.ptr.resolve(f.ref))for(j=0;j<f.fields.length;j++){if(null!==g.getChild(f.fields[j].id))throw Error("Duplicate extended field id in message "+g.name+": "+f.fields[j].id);if(f.fields[j].id<g.extensions[0]||f.fields[j].id>g.extensions[1])throw Error("Illegal extended field id in message "+g.name+": "+f.fields[j].id+" ("+g.extensions.join(" to ")+" expected)");h=f.fields[j].name,this.options.convertFieldsToCamelCase&&(h=c.Message.Field._toCamelCase(f.fields[j].name)),i=new c.Message.ExtensionField(this,g,f.fields[j].rule,f.fields[j].type,this.ptr.fqn()+"."+h,f.fields[j].id,f.fields[j].options),h=new c.Extension(this,this.ptr,f.fields[j].name,i),i.extension=h,this.ptr.addChild(h),g.addChild(i)}else if(!/\.?google\.protobuf\./.test(f.ref))throw Error("Extended message "+f.ref+" is not defined")}}this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},e["import"]=function(b,c){if("string"==typeof c){if(a.Util.IS_NODE&&(c=require("path").resolve(c)),!0===this.files[c])return this.reset(),this;this.files[c]=!0}if(b.imports&&0<b.imports.length){var d,e="/",f=!1;"object"==typeof c?(this.importRoot=c.root,f=!0,d=this.importRoot,c=c.file,(0<=d.indexOf("\\")||0<=c.indexOf("\\"))&&(e="\\")):"string"==typeof c?this.importRoot?d=this.importRoot:0<=c.indexOf("/")?(d=c.replace(/\/[^\/]*$/,""),""===d&&(d="/")):0<=c.indexOf("\\")?(d=c.replace(/\\[^\\]*$/,""),e="\\"):d=".":d=null;for(var g=0;g<b.imports.length;g++)if("string"==typeof b.imports[g]){if(!d)throw Error("Cannot determine import root: File name is unknown");var h=b.imports[g];if(!/^google\/protobuf\//.test(h)&&(h=d+e+h,!0!==this.files[h])){/\.proto$/i.test(h)&&!a.DotProto&&(h=h.replace(/\.proto$/,".json"));var i=a.Util.fetch(h);if(null===i)throw Error("Failed to import '"+h+"' in '"+c+"': File not found");/\.json$/i.test(h)?this["import"](JSON.parse(i+""),h):this["import"](new a.DotProto.Parser(i+"").parse(),h)}}else c?/\.(\w+)$/.test(c)?this["import"](b.imports[g],c.replace(/^(.+)\.(\w+)$/,function(a,b,c){return b+"_import"+g+"."+c})):this["import"](b.imports[g],c+"_import"+g):this["import"](b.imports[g]);f&&(this.importRoot=null)}return b.messages&&(b["package"]&&this.define(b["package"],b.options),this.create(b.messages),this.reset()),b.enums&&(b["package"]&&this.define(b["package"],b.options),this.create(b.enums),this.reset()),b.services&&(b["package"]&&this.define(b["package"],b.options),this.create(b.services),this.reset()),b["extends"]&&(b["package"]&&this.define(b["package"],b.options),this.create(b["extends"]),this.reset()),this},d.isValidService=function(a){return!("string"!=typeof a.name||!b.NAME.test(a.name)||"object"!=typeof a.rpc)},d.isValidExtend=function(c){if("string"!=typeof c.ref||!b.TYPEREF.test(c.ref))return!1;var e;if("undefined"!=typeof c.fields){if(!a.Util.isArray(c.fields))return!1;var f,g=[];for(e=0;e<c.fields.length;e++){if(!d.isValidMessageField(c.fields[e]))return!1;if(f=parseInt(c.id,10),0<=g.indexOf(f))return!1;g.push(f)}}return!0},e.resolveAll=function(){var d;if(null!=this.ptr&&"object"!=typeof this.ptr.type){if(this.ptr instanceof c.Namespace){d=this.ptr.children;for(var e=0,f=d.length;f>e;++e)this.ptr=d[e],this.resolveAll()}else if(this.ptr instanceof c.Message.Field)if(b.TYPE.test(this.ptr.type))this.ptr.type=a.TYPES[this.ptr.type];else{if(!b.TYPEREF.test(this.ptr.type))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(d=(this.ptr instanceof c.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0),!d)throw Error("Unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=d,d instanceof c.Enum)this.ptr.type=a.TYPES["enum"];else{if(!(d instanceof c.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=d.isGroup?a.TYPES.group:a.TYPES.message}}else if(!(this.ptr instanceof a.Reflect.Enum.Value))if(this.ptr instanceof a.Reflect.Service.Method){if(!(this.ptr instanceof a.Reflect.Service.RPCMethod))throw Error("Illegal service type in "+this.ptr.toString(!0));if(d=this.ptr.parent.resolve(this.ptr.requestName),!(d&&d instanceof a.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=d,d=this.ptr.parent.resolve(this.ptr.responseName),!(d&&d instanceof a.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=d}else if(!(this.ptr instanceof a.Reflect.Message.OneOf||this.ptr instanceof a.Reflect.Extension))throw Error("Illegal object in namespace: "+typeof this.ptr+":"+this.ptr);this.reset()}},e.build=function(a){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null==this.result&&(this.result=this.ns.build()),a){a=a.split(".");for(var b=this.result,c=0;c<a.length;c++){if(!b[a[c]]){b=null;break}b=b[a[c]]}return b}return this.result},e.lookup=function(a){return a?this.ns.resolve(a):this.ns},e.toString=function(){return"Builder"},d.Message=function(){},d.Service=function(){},d}(b,b.Lang,b.Reflect),b.loadProto=function(a,c,d){return("string"==typeof c||c&&"string"==typeof c.file&&"string"==typeof c.root)&&(d=c,c=void 0),b.loadJson(new b.DotProto.Parser(a).parse(),c,d)},b.protoFromString=b.loadProto,b.loadProtoFile=function(a,c,d){if(c&&"object"==typeof c?(d=c,c=null):c&&"function"==typeof c||(c=null),c)return b.Util.fetch("string"==typeof a?a:a.root+"/"+a.file,function(e){if(null===e)c(Error("Failed to fetch file"));else try{c(null,b.loadProto(e,d,a))}catch(f){c(f)}});var e=b.Util.fetch("object"==typeof a?a.root+"/"+a.file:a);
return null===e?null:b.loadProto(e,d,a)},b.protoFromFile=b.loadProtoFile,b.newBuilder=function(a){return a=a||{},"undefined"==typeof a.convertFieldsToCamelCase&&(a.convertFieldsToCamelCase=b.convertFieldsToCamelCase),"undefined"==typeof a.populateAccessors&&(a.populateAccessors=b.populateAccessors),new b.Builder(a)},b.loadJson=function(a,c,d){return("string"==typeof c||c&&"string"==typeof c.file&&"string"==typeof c.root)&&(d=c,c=null),c&&"object"==typeof c||(c=b.newBuilder()),"string"==typeof a&&(a=JSON.parse(a)),c["import"](a,d),c.resolveAll(),c.build(),c},b.loadJsonFile=function(a,c,d){if(c&&"object"==typeof c?(d=c,c=null):c&&"function"==typeof c||(c=null),c)return b.Util.fetch("string"==typeof a?a:a.root+"/"+a.file,function(e){if(null===e)c(Error("Failed to fetch file"));else try{c(null,b.loadJson(JSON.parse(e),d,a))}catch(f){c(f)}});var e=b.Util.fetch("object"==typeof a?a.root+"/"+a.file:a);return null===e?null:b.loadJson(JSON.parse(e),d,a)},b}"undefined"!=typeof module&&module.exports?module.exports=b(require("bytebuffer")):"function"==typeof define&&define.amd?define(["ByteBuffer"],b):(a.dcodeIO=a.dcodeIO||{}).ProtoBuf=b(a.dcodeIO.ByteBuffer)}(this),cc.Component=cc.Class.extend({_owner:null,_name:"",_enabled:!0,ctor:function(){this._owner=null,this._name="",this._enabled=!0},init:function(){return!0},onEnter:function(){},onExit:function(){},update:function(){},serialize:function(){},isEnabled:function(){return this._enabled},setEnabled:function(a){this._enabled=a},getName:function(){return this._name},setName:function(a){this._name=a},setOwner:function(a){this._owner=a},getOwner:function(){return this._owner}}),cc.Component.create=function(){return new cc.Component},ccui.LayoutComponent_ReferencePoint={BOTTOM_LEFT:0,TOP_LEFT:1,BOTTOM_RIGHT:2,TOP_RIGHT:3},ccui.LayoutComponent_PositionType={Position:0,RelativePosition:1,PreRelativePosition:2,PreRelativePositionEnable:3},ccui.LayoutComponent_SizeType={Size:0,PreSize:1,PreSizeEnable:2},ccui.LayoutComponent=cc.Component.extend({_percentContentSize:null,_usingPercentContentSize:!1,_referencePoint:ccui.LayoutComponent_ReferencePoint.BOTTOM_LEFT,_relativePosition:null,_percentPosition:null,_usingPercentPosition:!1,_actived:!0,init:function(){var a=!0;do if(!cc.Component.prototype.init.call(this)){a=!1;break}while(0);return a},isUsingPercentPosition:function(){return this._usingPercentPosition},setUsingPercentPosition:function(a){this._usingPercentPosition=a,this.RefreshLayoutPosition(ccui.LayoutComponent_PositionType.PreRelativePositionEnable,cc.p(0,0))},getPercentPosition:function(){return this._percentPosition},setPercentPosition:function(a){this.RefreshLayoutPosition(ccui.LayoutComponent_PositionType.PreRelativePosition,a)},getRelativePosition:function(){return this._relativePosition},setRelativePosition:function(a){this.RefreshLayoutPosition(ccui.LayoutComponent_PositionType.RelativePosition,a)},setReferencePoint:function(a){this._referencePoint=a,this.RefreshLayoutPosition(ccui.LayoutComponent_PositionType.RelativePosition,this._relativePosition)},getReferencePoint:function(){return this._referencePoint},getOwnerPosition:function(){return this.getOwner().getPosition()},setOwnerPosition:function(a){this.RefreshLayoutPosition(ccui.LayoutComponent_PositionType.Position,a)},RefreshLayoutPosition:function(a,b){var c=this.getOwner().getParent(),d=b;if(null!=c&&this._actived){var e=c.getContentSize();a==ccui.LayoutComponent_PositionType.PreRelativePosition?(this._percentPosition=b,d=cc.p(this._percentPosition.x*e.width,this._percentPosition.y*e.height)):a==ccui.LayoutComponent_PositionType.PreRelativePositionEnable&&(this._usingPercentPosition&&(0!=e.width?this._percentPosition.x=this._relativePosition.x/e.width:(this._percentPosition.x=0,this._relativePosition.x=0),0!=e.height?this._percentPosition.y=this._relativePosition.y/e.height:(this._percentPosition.y=0,this._relativePosition.y=0)),d=this._relativePosition);var f=d;switch(this._referencePoint){case ccui.LayoutComponent_ReferencePoint.TOP_LEFT:f.y=e.height-f.y;break;case ccui.LayoutComponent_ReferencePoint.BOTTOM_RIGHT:f.x=e.width-f.x;break;case ccui.LayoutComponent_ReferencePoint.TOP_RIGHT:f.x=e.width-f.x,f.y=e.height-f.y}switch(a){case ccui.LayoutComponent_PositionType.Position:this.getOwner().setPosition(d),this._relativePosition=f,this._percentPosition=0!=e.width&&0!=e.height?cc.p(this._relativePosition.x/e.width,this._relativePosition.y/e.height):cc.p(0,0);break;case ccui.LayoutComponent_PositionType.RelativePosition:this.getOwner().setPosition(f),this._relativePosition=d,this._percentPosition=0!=e.width&&0!=e.height?cc.p(this._relativePosition.x/e.width,this._relativePosition.y/e.height):cc.p(0,0);break;case ccui.LayoutComponent_PositionType.PreRelativePosition:this.getOwner().setPosition(f),this._relativePosition=d;break;case ccui.LayoutComponent_PositionType.PreRelativePositionEnable:this.getOwner().setPosition(f),this._relativePosition=d}}else switch(a){case ccui.LayoutComponent_PositionType.Position:this.getOwner().setPosition(d),this._referencePoint==ccui.LayoutComponent_ReferencePoint.BOTTOM_LEFT&&(this._relativePosition=d);break;case ccui.LayoutComponent_PositionType.RelativePosition:this._relativePosition=d;break;case ccui.LayoutComponent_PositionType.PreRelativePosition:this._percentPosition=d}},getOwnerContentSize:function(){return this.getOwner().getContentSize()},setOwnerContentSize:function(a){this.RefreshLayoutSize(ccui.LayoutComponent_SizeType.Size,a)},getPercentContentSize:function(){return this._percentContentSize},setPercentContentSize:function(a){this.RefreshLayoutSize(ccui.LayoutComponent_SizeType.PreSize,a)},isUsingPercentContentSize:function(){return this._usingPercentContentSize},setUsingPercentContentSize:function(a){this._usingPercentContentSize=a,this.RefreshLayoutSize(ccui.LayoutComponent_SizeType.PreSizeEnable,cc.p(0,0))},RefreshLayoutSize:function(a,b){var c=this.getOwner().getParent();if(null!=c&&this._actived){var d=c.getContentSize();switch(a){case ccui.LayoutComponent_SizeType.Size:this._percentContentSize=0!=d.width&&0!=d.height?cc.p(b.x/d.width,b.y/d.height):cc.p(0,0),this.getOwner().setContentSize(cc.size(b.x,b.y));break;case ccui.LayoutComponent_SizeType.PreSize:cc.p_percentContentSize=b,this._usingPercentContentSize&&this.getOwner().setContentSize(cc.size(b.x*d.width,b.y*d.height));break;case ccui.LayoutComponent_SizeType.PreSizeEnable:if(this._usingPercentContentSize){var e=this.getOwner().getContentSize();0!=d.width?this._percentContentSize.x=e.width/d.width:(this._percentContentSize.x=0,e.width=0),0!=d.height?this._percentContentSize.y=e.height/d.height:(this._percentContentSize.y=0,e.height=0),this.getOwner().setContentSize(e)}}}else switch(a){case ccui.LayoutComponent_SizeType.Size:this.getOwner().setContentSize(cc.size(b.x,b.y));break;case ccui.LayoutComponent_SizeType.PreSize:this._percentContentSize=b}},SetActiveEnable:function(a){this._actived=a}}),cc.ComponentContainer=cc.Class.extend({_components:null,_owner:null,ctor:function(a){this._components=null,this._owner=a},getComponent:function(a){if(!a)throw"cc.ComponentContainer.getComponent(): name should be non-null";return a=a.trim(),this._components||(this._components={}),this._components[a]},add:function(a){if(!a)throw"cc.ComponentContainer.add(): component should be non-null";if(a.getOwner())return cc.log("cc.ComponentContainer.add(): Component already added. It can't be added again"),!1;null==this._components&&(this._components={},this._owner.scheduleUpdate());var b=this._components[a.getName()];return b?(cc.log("cc.ComponentContainer.add(): Component already added. It can't be added again"),!1):(a.setOwner(this._owner),this._components[a.getName()]=a,a.onEnter(),!0)},remove:function(a){if(!a)throw"cc.ComponentContainer.remove(): name should be non-null";return this._components?a instanceof cc.Component?this._removeByComponent(a):(a=a.trim(),this._removeByComponent(this._components[a])):!1},_removeByComponent:function(a){return a?(a.onExit(),a.setOwner(null),delete this._components[a.getName()],!0):!1},removeAll:function(){if(this._components){var a=this._components;for(var b in a){var c=a[b];c.onExit(),c.setOwner(null),delete a[b]}this._owner.unscheduleUpdate(),this._components=null}},_alloc:function(){this._components={}},visit:function(a){if(this._components){var b=this._components;for(var c in b)b[c].update(a)}},isEmpty:function(){return this._components?0==this._components.length:!0}});var ccs=ccs||{};ccs.Class=ccs.Class||cc.Class,ccs.Class.extend=ccs.Class.extend||cc.Class.extend,ccs.Node=ccs.Node||cc.Node,ccs.Node.extend=ccs.Node.extend||cc.Node.extend,ccs.Sprite=ccs.Sprite||cc.Sprite,ccs.Sprite.extend=ccs.Sprite.extend||cc.Sprite.extend,ccs.Component=ccs.Component||cc.Component,ccs.Component.extend=ccs.Component.extend||cc.Component.extend,ccs.cocostudioVersion="v1.3.0.0";var CSParseBinary="\npackage protocolbuffers;\n\noption optimize_for = LITE_RUNTIME; \n\nmessage CSParseBinary\n{\n    optional string version = 1; \n    optional string cocos2dVersion = 2;\n	optional string editorType = 3;\n    optional float dataScale = 4;\n    optional int32 designHeight = 5;\n    optional int32 designWidth = 6;    \n    repeated string textures = 7;\n    repeated string texturesPng = 8;\n    optional NodeTree nodeTree = 9;\n    optional NodeAction action = 10;\n}\n\n\n// nodeTree\nmessage NodeTree\n{\n    optional string classname = 1;\n    optional string name = 2;\n\n    repeated NodeTree children = 3;\n\n    optional WidgetOptions widgetOptions = 4;\n    optional ButtonOptions buttonOptions = 5;\n    optional CheckBoxOptions checkBoxOptions = 6;\n    optional ImageViewOptions imageViewOptions = 7;\n    \n    optional TextAtlasOptions textAtlasOptions = 8;\n    optional TextBMFontOptions textBMFontOptions = 9;\n    optional TextOptions textOptions = 10;\n    optional LoadingBarOptions loadingBarOptions = 11;\n    optional SliderOptions sliderOptions = 12;\n    optional TextFieldOptions textFieldOptions = 13;\n    optional ScrollViewOptions scrollViewOptions = 14;\n    optional PageViewOptions pageViewOptions = 15;\n    optional ListViewOptions listViewOptions = 16;\n    optional PanelOptions PanelOptions = 17;\n\n    optional SpriteOptions spriteOptions = 18;\n    optional TMXTiledMapOptions tmxTiledMapOptions = 19;\n    optional ParticleSystemOptions particleSystemOptions = 20;\n    optional ProjectNodeOptions projectNodeOptions = 21;\n}\n\n\n// WidgetOptions\nmessage WidgetOptions\n{\n    optional float x = 1;\n    optional float y = 2;\n    optional float scaleX = 3;\n    optional float scaleY = 4;\n    optional float rotation = 5;\n    optional bool flipX = 6;\n    optional bool flipY = 7;\n    optional int32 colorB = 8;\n    optional int32 colorG = 9;\n    optional int32 colorR = 10;\n    optional int32 opacity = 11;\n    optional bool touchAble = 12;\n    optional bool visible = 13;\n    optional int32 zorder = 14;\n    optional string classType = 15;\n    optional float width = 16;\n    optional float height = 17;\n    optional int32 positionType = 18;\n    optional float positionPercentX = 19;\n    optional float positionPercentY = 20;\n    optional int32 sizeType = 21;\n    optional float sizePercentX = 22;\n    optional float sizePercentY = 23;\n    optional bool useMergedTexture = 24;\n    optional int32 actionTag = 25;\n    optional int32 tag = 26;\n    optional float anchorPointX = 27;\n    optional float anchorPointY = 28;\n    optional bool ignoreSize = 29;\n    optional float rotationSkewX = 30;\n    optional float rotationSkewY = 31;\n    optional LayoutParameter layoutParameter = 32;\n    optional string customProperty = 33;\n    optional string frameEvent = 34;   \n    optional string name = 35;\n    optional int32 Alpha = 37;\n    repeated ComponentOptions componentOptions = 36;\n}\n\n// LayoutParameter\nmessage LayoutParameter\n{\n    optional int32 type = 1;\n    optional int32 gravity = 2;\n    optional string relativeName = 3;\n    optional string relativeToName = 4;\n    optional int32 align = 5;\n    optional int32 marginLeft = 6;\n    optional int32 marginTop = 7;\n    optional int32 marginRight = 8;\n    optional int32 marginDown = 9;\n    optional int32 layoutEageType = 10;\n    optional int32 layoutNormalHorizontal = 11;\n    optional int32 layoutNormalVertical = 12;\n    optional int32 layoutParentHorizontal = 13;\n    optional int32 layoutParentVertical = 14;\n}\n\n// ButtonOptions\nmessage ButtonOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string normal = 3;\n    optional string pressed = 4;\n    optional string disabled = 5;\n    optional ResourceData normalData = 6;\n    optional ResourceData pressedData = 7;\n    optional ResourceData disabledData = 8;\n    optional string text = 9;\n    optional string fontName = 10;\n    optional int32 fontSize = 11;\n    optional int32 textColorR = 12;\n    optional int32 textColorG = 13;\n    optional int32 textColorB = 14;\n    optional float capInsetsX = 15;\n    optional float capInsetsY = 16;\n    optional float capInsetsWidth = 17;\n    optional float capInsetsHeight = 18;\n    optional float scale9Width = 19;\n    optional float scale9Height = 20;\n    optional bool  scale9Enable = 21; \n    optional bool  displaystate = 22;\n    optional ResourceData   fontResource = 23;\n}\n\nmessage ResourceData\n{\n    optional string path = 1;\n    optional string plistFile = 2;\n    optional int32 resourceType = 3;\n}\n\n// CheckBoxOptions\nmessage CheckBoxOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string backGroundBox = 3;\n    optional string backGroundBoxSelected = 4;\n    optional string backGroundBoxDisabled = 5;\n    optional string frontCross = 6;\n    optional string frontCrossDisabled = 7;\n    optional ResourceData backGroundBoxData = 8;\n    optional ResourceData backGroundBoxSelectedData = 9;\n    optional ResourceData frontCrossData = 10;\n    optional ResourceData backGroundBoxDisabledData = 11;\n    optional ResourceData frontCrossDisabledData = 12;\n    optional bool selectedState = 13;\n	optional bool displaystate = 14;\n}\n\n// ImageOptions\nmessage ImageViewOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string fileName = 3;\n    optional ResourceData fileNameData = 4;\n    optional float capInsetsX = 5;\n    optional float capInsetsY = 6;\n    optional float capInsetsHeight = 7;\n    optional float capInsetsWidth = 8;\n    optional float scale9Width = 9;\n    optional float scale9Height = 10;\n    optional bool scale9Enable = 11;\n	optional bool flippedX = 12;\n	optional bool flippedY = 13;\n}\n\n// TextAtlasOptions\nmessage TextAtlasOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string stringValue = 3;\n    optional string charMapFile = 4;\n    optional ResourceData charMapFileData = 5;\n    optional string startCharMap = 6;\n    optional int32 itemWidth = 7;\n    optional int32 itemHeight = 8;\n}\n\n// TextBMFontOptions\nmessage TextBMFontOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string text = 3;\n    optional ResourceData fileNameData = 4;\n}\n\n// TextOptions\nmessage TextOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string fontName = 3;\n    optional ResourceData fontFile = 4;\n    optional int32 fontSize = 5;\n    optional string text = 6;\n    optional float areaWidth = 7;\n    optional float areaHeight = 8;\n    optional int32 hAlignment = 9;\n    optional int32 vAlignment = 10;\n    optional bool touchScaleEnable = 11;\n	optional ResourceData fontResource = 12;\n	optional bool IsCustomSize = 13;\n}\n\n// LoadingBarOptions\nmessage LoadingBarOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string texture = 3;\n    optional ResourceData textureData = 4;\n    optional int32 percent = 5;\n    optional int32 direction = 6;\n    optional float capInsetsX = 7;\n    optional float capInsetsY = 8;\n    optional float capInsetsWidth = 9;\n    optional float capInsetsHeight = 10;\n    optional bool scale9Enable = 11;\n	optional float scale9Width = 12;\n    optional float scale9Height = 13;\n}\n\n// ListViewOptions\nmessage ListViewOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string backGroundImage = 3;\n    optional ResourceData backGroundImageData = 4;\n    optional int32 bgColorR = 5;\n    optional int32 bgColorG = 6;\n    optional int32 bgColorB = 7;\n    optional int32 bgStartColorR = 8;\n    optional int32 bgStartColorG = 9;\n    optional int32 bgStartColorB = 10;\n    optional int32 bgEndColorR = 11;\n    optional int32 bgEndColorG = 12;\n    optional int32 bgEndColorB = 13;\n    optional int32 colorType = 14;\n    optional int32 bgColorOpacity = 15;\n    optional float vectorX = 16;\n    optional float vectorY = 17;\n    optional float capInsetsX = 18;\n    optional float capInsetsY = 19;\n    optional float capInsetsWidth = 20;\n    optional float capInsetsHeight = 21;\n    optional bool backGroundScale9Enable = 22;\n    optional float innerWidth = 23;\n    optional float innerHeight = 24;\n    optional bool clipAble = 25;\n    optional bool bounceEnable = 26;\n    optional int32 direction = 27;\n    optional int32 gravity = 28;\n    optional int32 itemMargin = 29;\n	optional float scale9Width = 30;\n    optional float scale9Height = 31;\n}\n\n// PageViewOptions\nmessage PageViewOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string backGroundImage = 3;\n    optional ResourceData backGroundImageData = 4;\n    optional bool clipAble = 5;\n    optional int32 bgColorR = 6;\n    optional int32 bgColorG = 7;\n    optional int32 bgColorB = 8;\n    optional int32 bgStartColorR = 9;\n    optional int32 bgStartColorG = 10;\n    optional int32 bgStartColorB = 11;\n    optional int32 bgEndColorR = 12;\n    optional int32 bgEndColorG = 13;\n    optional int32 bgEndColorB = 14;\n    optional int32 colorType = 15;\n    optional int32 bgColorOpacity = 16;\n    optional float vectorX = 17;\n    optional float vectorY = 18;\n    optional float capInsetsX = 19;\n    optional float capInsetsY = 20;\n    optional float capInsetsWidth = 21;\n    optional float capInsetsHeight = 22;\n    optional bool backGroundScale9Enable = 23;\n	optional float scale9Width = 24;\n    optional float scale9Height = 25;\n}\n\n// PanelOptions\nmessage PanelOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string backGroundImage = 3;\n    optional ResourceData backGroundImageData = 4;\n    optional bool clipAble = 5;\n    optional int32 bgColorR = 6;\n    optional int32 bgColorG = 7;\n    optional int32 bgColorB = 8;\n    optional int32 bgStartColorR = 9;\n    optional int32 bgStartColorG = 10;\n    optional int32 bgStartColorB = 11;\n    optional int32 bgEndColorR = 12;\n    optional int32 bgEndColorG = 13;\n    optional int32 bgEndColorB = 14;\n    optional int32 colorType = 15;\n    optional int32 bgColorOpacity = 16;\n    optional float vectorX = 17;\n    optional float vectorY = 18;\n    optional float capInsetsX = 19;\n    optional float capInsetsY = 20;\n    optional float capInsetsWidth = 21;\n    optional float capInsetsHeight = 22;\n    optional bool backGroundScale9Enable = 23;\n    optional int32 layoutType = 24;\n    optional bool adaptScreen = 25;\n	optional float scale9Width = 26;\n    optional float scale9Height = 27;\n}\n\n// ScrollViewOptions\nmessage ScrollViewOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string backGroundImage = 3;\n    optional ResourceData backGroundImageData = 4;\n    optional int32 bgColorR = 5;\n    optional int32 bgColorG = 6;\n    optional int32 bgColorB = 7;\n    optional int32 bgStartColorR = 8;\n    optional int32 bgStartColorG = 9;\n    optional int32 bgStartColorB = 10;\n    optional int32 bgEndColorR = 11;\n    optional int32 bgEndColorG = 12;\n    optional int32 bgEndColorB = 13;\n    optional int32 colorType = 14;\n    optional int32 bgColorOpacity = 15;\n    optional float vectorX = 16;\n    optional float vectorY = 17;\n    optional float capInsetsX = 18;\n    optional float capInsetsY = 19;\n    optional float capInsetsWidth = 20;\n    optional float capInsetsHeight = 21;\n    optional bool backGroundScale9Enable = 22;\n    optional float innerWidth = 23;\n    optional float innerHeight = 24;\n    optional int32 direction = 25;\n    optional bool clipAble = 26;\n    optional bool bounceEnable = 27;\n    optional int32 layoutType = 28;\n	optional float scale9Width = 29;\n    optional float scale9Height = 30;\n}\n\n// SliderOptions\nmessage SliderOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string barFileName = 3;\n    optional string ballNormal = 4;\n    optional string ballPressed = 5;\n    optional string ballDisabled = 6;\n    optional ResourceData barFileNameData = 7;\n    optional ResourceData ballNormalData = 8;\n    optional ResourceData ballPressedData = 9;\n    optional ResourceData ballDisabledData = 10;\n    optional ResourceData progressBarData = 11;\n    optional int32 percent = 12;\n    optional float capInsetsX = 13;\n    optional float capInsetsY = 14;\n    optional float capInsetsWidth = 15;\n    optional float capInsetsHeight = 16;\n    optional float barCapInsetsX = 17;\n    optional float barCapInsetsY = 18;\n    optional float barCapInsetsWidth = 19;\n    optional float barCapInsetsHeight = 20;\n    optional float progressBarCapInsetsX = 21;\n    optional float progressBarCapInsetsY = 22;\n    optional float progressBarCapInsetsWidth = 23;\n    optional float progressBarCapInsetsHeight = 24;\n    optional float scale9Width = 25;\n    optional float scale9Height = 26;\n    optional bool scale9Enable = 27;\n    optional float slidBallAnchorPointX = 28;\n    optional float slidBallAnchorPointY = 29;\n    optional float length = 30;\n	optional bool  displaystate = 31;\n}\n\n// SpriteOptions\nmessage SpriteOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional bool touchAble = 3;\n    optional int32 positionType = 4;\n    optional float positionPercentX = 5;\n    optional float positionPercentY = 6;\n    optional int32 sizeType = 7;\n    optional float sizePercentX = 8;\n    optional float sizePercentY = 9;\n    optional bool useMergedTexture = 10;\n    optional bool ignoreSize = 11;\n    optional LayoutParameter layoutParameter = 12;\n    optional string customProperty = 13;\n    optional string fileName = 14;\n	optional bool flippedX = 15;\n	optional bool flippedY = 16;\n	\n    optional ResourceData fileNameData = 17;\n}\n\n// TextFieldOptions\nmessage TextFieldOptions\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string fontName = 3;\n    optional ResourceData fontFile = 4;\n    optional int32 fontSize = 5;\n    optional string text = 6;\n    optional string placeHolder = 7;\n    optional bool passwordEnable = 8;\n    optional string passwordStyleText = 9;\n    optional bool maxLengthEnable = 10;\n    optional int32 maxLength = 11;\n    optional float areaWidth = 12;\n    optional float areaHeight = 13;\n	optional float anchorPointX = 15;\n    optional float anchorPointY = 16;\n	optional ResourceData fontResource = 14;\n	optional bool IsCustomSize = 17;\n}\n\n// TMXTiledMapOptions\nmessage TMXTiledMapOptions\n{\n    optional string tmxFile = 1;\n    optional string tmxString = 2;\n    optional string resourcePath = 3;\n\n    optional ResourceData fileNameData = 4;\n}\n\n// ParticleSystemOptions\nmessage ParticleSystemOptions\n{\n    optional string plistFile = 1;\n    optional int32 totalParticles = 2;  \n\n    optional ResourceData fileNameData = 3;\n}\n\n// ProjectNodeOptions\nmessage ProjectNodeOptions\n{\n    optional string fileName = 1;\n}\n\n// ComponentOptions\nmessage ComponentOptions\n{\n    optional string type = 1;\n\n    optional ComAudioOptions comAudioOptions = 2;\n}\n\n// ComAudioOptions\nmessage ComAudioOptions\n{\n    optional string name = 1;\n    optional bool enabled = 2;\n    optional bool loop = 3;\n    optional int32 volume = 4;\n    optional ResourceData fileNameData = 5;\n}\n\n\n// action\nmessage NodeAction\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional int32 duration = 3;\n    optional float speed = 4;\n\n    repeated TimeLine timelines = 5;\n}\n\n// Timeline\nmessage TimeLine\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional string frameType = 3;\n    optional int32 actionTag = 4;\n    repeated Frame frames = 5;\n}\n\n//Frames\nmessage Frame\n{\n    optional TimeLineBoolFrame visibleFrame = 5;\n    optional TimeLineIntFrame zOrderFrame = 6;\n    optional TimeLinePointFrame rotationSkewFrame = 7;\n    optional TimeLineStringFrame eventFrame = 8;\n    optional TimeLinePointFrame anchorPointFrame = 9;\n    optional TimeLinePointFrame positionFrame = 10;\n    optional TimeLinePointFrame scaleFrame = 11;\n    optional TimeLineColorFrame colorFrame = 12;\n    optional TimeLineTextureFrame textureFrame = 13;\n}\n\n//VisibleFrame\nmessage TimeLineBoolFrame\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional int32 frameIndex = 3;\n    optional bool tween = 4;\n    optional bool value = 5;\n}\n\n//ZOrderFrame RotationFrame\nmessage TimeLineIntFrame\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional int32 frameIndex = 3;\n    optional bool tween = 4;\n    optional int32 value = 5;\n}\n\n//EventFrame\nmessage TimeLineStringFrame\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional int32 frameIndex = 3;\n    optional bool tween = 4;\n    optional string value = 5;\n}\n\n//AnchorPointFrame PositionFrame ScaleFrame\nmessage TimeLinePointFrame\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional int32 frameIndex = 3;\n    optional bool tween = 4;\n    optional float x = 5;\n	optional float y = 6;\n}\n\n//ColorFrame\nmessage TimeLineColorFrame\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional int32 frameIndex = 3;\n    optional bool tween = 4;\n    optional int32 alpha = 5;\n    optional int32 red = 6;\n    optional int32 green = 7;\n    optional int32 blue = 8;\n}\n\n//TextureFrame\nmessage TimeLineTextureFrame\n{\n    optional string name = 1;\n    optional string classname = 2;\n    optional int32 frameIndex = 3;\n    optional bool tween = 4;\n    optional string filePath = 5;\n	optional string plistFile = 6;\n}";ccui.CSLoaderStatic={ClassName_Node:"Node",ClassName_SubGraph:"SubGraph",ClassName_Sprite:"Sprite",ClassName_Particle:"Particle",ClassName_TMXTiledMap:"TMXTiledMap",ClassName_Panel:"Panel",ClassName_Button:"Button",ClassName_CheckBox:"CheckBox",ClassName_ImageView:"ImageView",ClassName_TextAtlas:"TextAtlas",ClassName_LabelAtlas:"LabelAtlas",ClassName_LabelBMFont:"LabelBMFont",ClassName_TextBMFont:"TextBMFont",ClassName_Text:"Text",ClassName_LoadingBar:"LoadingBar",ClassName_TextField:"TextField",ClassName_Slider:"Slider",ClassName_Layout:"Layout",ClassName_ScrollView:"ScrollView",ClassName_ListView:"ListView",ClassName_PageView:"PageView",ClassName_Widget:"Widget",ClassName_Label:"Label",ClassName_ComAudio:"ComAudio",NODE:"nodeTree",CHILDREN:"children",CLASSNAME:"classname",FILE_PATH:"fileName",PLIST_FILE:"plistFile",TMX_FILE:"tmxFile",TMX_STRING:"tmxString",RESOURCE_PATH:"resourcePath",COMPONENTS:"components",COMPONENT_TYPE:"componentType",COMPONENT_NAME:"componentName",COMPONENT_ENABLED:"componentEnabled",COMPONENT_AUDIO_FILE_PATH:"comAudioFilePath",COMPONENT_LOOP:"comAudioloop",TAG:"tag",ACTION_TAG:"actionTag",OPTIONS:"options",WIDTH:"width",HEIGHT:"height",X:"x",Y:"y",SCALE_X:"scaleX",SCALE_Y:"scaleY",SKEW_X:"skewX",SKEW_Y:"skewY",ROTATION:"rotation",ROTATION_SKEW_X:"rotationSkewX",ROTATION_SKEW_Y:"rotationSkewY",ANCHOR_X:"anchorPointX",ANCHOR_Y:"anchorPointY",ALPHA:"opacity",RED:"colorR",GREEN:"colorG",BLUE:"colorB",ZORDER:"ZOrder",PARTICLE_NUM:"particleNum",FLIPX:"flipX",FLIPY:"flipY",VISIBLE:"visible",TEXTURES:"textures",TEXTURES_PNG:"texturesPng",MONO_COCOS2D_VERSION:"cocos2dVersion"},ccs.csLoader={_recordJsonPath:!0,_jsonPath:"",_recordProtocolBuffersPath:!1,_protocolBuffersPath:"",_monoCocos2dxVersion:"",init:function(){this._funcs={},this._componentFuncs={},this._funcs[ccui.CSLoaderStatic.ClassName_Node]=ccs.csLoader.loadSimpleNode.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_SubGraph]=ccs.csLoader.loadSubGraph.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_Sprite]=ccs.csLoader.loadSprite.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_Particle]=ccs.csLoader.loadParticle.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_TMXTiledMap]=ccs.csLoader.loadTMXTiledMap.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_LabelAtlas]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_LabelBMFont]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_Panel]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_Button]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_CheckBox]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_ImageView]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_TextAtlas]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_TextBMFont]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_Text]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_LoadingBar]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_TextField]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_Slider]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_Layout]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_ScrollView]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_ListView]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_PageView]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_Widget]=ccs.csLoader.loadWidget.bind(this),this._funcs[ccui.CSLoaderStatic.ClassName_Label]=ccs.csLoader.loadWidget.bind(this),this._componentFuncs[ccui.CSLoaderStatic.ClassName_ComAudio]=ccs.csLoader.loadComAudio.bind(this)},createNode:function(a){var b=a,c=b.lastIndexOf("."),d=b.substr(c+1,b.length),e=ccs.csLoader;return"csb"==d?e.createNodeFromProtocolBuffers(a):"json"==d||"ExportJson"==d?e.createNodeFromJson(a):null},createTimeline:function(a){var b=a,c=b.lastIndexOf("."),d=b.substr(c+1,b.length),e=ccs.actionTimelineCache;return"csb"==d?e.createActionFromProtocolBuffers(a):"json"==d||"ExportJson"==d?e.createActionFromJson(a):null},createNodeFromJson:function(a){if(this._recordJsonPath){var b=a.substr(0,a.lastIndexOf("/")+1);ccs.uiReader.setFilePath(b),this._jsonPath=b}else ccs.uiReader.setFilePath(""),this._jsonPath="";return this.loadNodeWithFile(a)},loadNodeWithFile:function(a){var b=cc.loader.getRes(a),c=this.loadNodeWithContent(b);return ccs.actionTimelineCache.loadAnimationActionWithContent(a,b),c},loadNodeWithContent:function(a){this._monoCocos2dxVersion=a[ccui.CSLoaderStatic.MONO_COCOS2D_VERSION]||a.version;for(var b=a[ccui.CSLoaderStatic.TEXTURES],c=a[ccui.CSLoaderStatic.TEXTURES_PNG],d=b.length,e=0;d>e;e++){var f=b[e],g=c[e];f=this._jsonPath+f,g=this._jsonPath+g,cc.spriteFrameCache.addSpriteFrames(f,g)}var h=a[ccui.CSLoaderStatic.NODE];return this.loadNode(h)},setRecordJsonPath:function(a){this._recordJsonPath=a},isRecordJsonPath:function(){return this._recordJsonPath
},setJsonPath:function(a){this._jsonPath=a},getJsonPath:function(){return this._jsonPath},createNodeFromProtocolBuffers:function(a){if(this._recordProtocolBuffersPath){var b=a.substr(0,a.lastIndexOf("/")+1);ccs.uiReader.setFilePath(b),this._protocolBuffersPath=b}else ccs.uiReader.setFilePath(""),this._protocolBuffersPath="";return this.nodeFromProtocolBuffersFile(a)},nodeFromProtocolBuffersFile:function(a){for(var b=cc.loader.getRes(a),c=PBP.CSParseBinary.decode(b),d=c.textures.length,e=0;d>e;++e){var f=c.textures[e],g=c.texturesPng[e];f=this._protocolBuffersPath+f,g=this._protocolBuffersPath+g,cc.spriteFrameCache.addSpriteFrames(f,g)}var h=c.designWidth,i=c.designHeight;if(0>=h||0>=i){cc.log("Read design size error!\n");var j=cc.director.getWinSize();ccs.uiReader.storeFileDesignSize(a,j)}else ccs.uiReader.storeFileDesignSize(a,cc.size(h,i));return this.nodeFromProtocolBuffers(c.nodeTree)},nodeFromProtocolBuffers:function(a){var b,c=null,d=a.classname;if("Node"==d){c=new ccs.Node;var e=a.widgetOptions;this.setPropsForNodeFromProtocolBuffers(c,e),b=e}else if("SingleNode"==d){c=new ccs.Node;var e=a.widgetOptions;this.setPropsForSingleNodeFromProtocolBuffers(c,e),b=e}else if("Sprite"==d){c=new cc.Sprite;var f=a.widgetOptions,e=a.spriteOptions;this.setPropsForSpriteFromProtocolBuffers(c,e,f),b=f}else if("ProjectNode"==d){var f=a.widgetOptions,e=a.projectNodeOptions,g=e.filename();if(""!=g){c=this.createNodeFromProtocolBuffers(this._protocolBuffersPath+g),this.setPropsForProjectNodeFromProtocolBuffers(c,e,f);var h=ccs.ActionTimelineCache.createActionFromProtocolBuffers(this._protocolBuffersPath+g);h&&(c.runAction(h),h.gotoFrameAndPlay(0))}b=f}else if("Particle"==d){var f=a.widgetOptions,e=a.particleSystemOptions;c=this.createParticleFromProtocolBuffers(e,f),b=f}else if("GameMap"==d){var f=a.widgetOptions,e=a.tmxTiledMapOptions;c=this.createTMXTiledMapFromProtocolBuffers(e,f),b=f}else if("SimpleAudio"==d){c=new cc.Node;var e=a.widgetOptions;this.setPropsForSimpleAudioFromProtocolBuffers(c,e),b=e}else if(this.isWidget(d)){var i=this.getGUIClassName(d),j=i;j+="Reader";var k=ccs.objectFactory.createObject(i),l=ccs.objectFactory.createObject(j);l.setPropsFromProtocolBuffers(k,a);var m=a.widgetOptions,n=m.actionTag;k.setUserObject(new ccs.ActionTimelineData(n)),c=k}else if(this.isCustomWidget(d)){var k=ccs.objectFactory.createObject(d),j=this.getWidgetReaderClassName(k),l=ccs.objectFactory.createObject(j);if(l&&k){var o=new ccs.WidgetPropertiesReader0300;o.setPropsForAllWidgetFromProtocolBuffers(l,k,a);var m=a.widgetOptions,p=m.customProperty;o.setPropsForAllCustomWidgetFromJsonDictionary(d,k,p)}else cc.log("Widget or WidgetReader doesn't exists!!!  Please check your protocol buffers file.");var m=a.widgetOptions,n=m.actionTag;k.setUserObject(new ccs.ActionTimelineData(n)),c=k}if(b)for(var q=b.componentOptions.length,r=0;q>r;++r){var s=b.componentOptions[r],t=this.createComponentFromProtocolBuffers(s);t&&c.addComponent(t)}for(var u=a.children.length,r=0;u>r;++r){var v=a.children[r],w=this.nodeFromProtocolBuffers(v);if(w){var x=c,y=c;if(x instanceof ccui.PageView){var z=w;z instanceof ccui.Layout&&x.addPage(z)}else if(y instanceof ccui.ListView){var k=w;k instanceof ccui.Widget&&y.pushBackCustomItem(k)}else c.addChild(w)}}return c},setRecordProtocolBuffersPath:function(a){this._recordProtocolBuffersPath=a},isRecordProtocolBuffersPath:function(){return this._recordProtocolBuffersPath},setProtocolBuffersPath:function(a){this._protocolBuffersPath=a},getProtocolBuffersPath:function(){return this._protocolBuffersPath},loadNode:function(a){var b=null,c=a[ccui.CSLoaderStatic.CLASSNAME],d=this._funcs[c];if(null!=d){var e=a[ccui.CSLoaderStatic.OPTIONS];if(b=d(e))for(var f=e[ccui.CSLoaderStatic.COMPONENTS],g=e[ccui.CSLoaderStatic.COMPONENTS]||0,h=0;g>h;++h){var i=f[ccui.CSLoaderStatic.COMPONENTS][h],j=this.loadComponent(i);j&&b.addComponent(j)}}if(b)for(var k=a[ccui.CSLoaderStatic.CHILDREN].length||0,h=0;k>h;h++){var i=a[ccui.CSLoaderStatic.CHILDREN][h],l=this.loadNode(i);if(l){var m=b,n=b;if(m instanceof ccui.PageView){var o=l;o instanceof ccui.Layout&&m.addPage(o)}else if(n instanceof ccui.ListView){var p=l;p instanceof ccui.Widget&&n.pushBackCustomItem(p)}else{if("3.x"!=this._monoCocos2dxVersion){var p=l,q=b;if(p instanceof ccui.Widget&&q instanceof ccui.Widget&&!(q instanceof ccui.Layout))if(p.getPositionType()==ccui.Widget.POSITION_PERCENT)p.setPositionPercent(cc.p(p.getPositionPercent().x+q.getAnchorPoint().x,p.getPositionPercent().y+q.getAnchorPoint().y)),p.setPosition(cc.p(p.getPositionX()+q.getAnchorPointInPoints().x,p.getPositionY()+q.getAnchorPointInPoints().y));else{var r=q.getContentSize();p.setPosition(cc.p(p.getPositionX()+r.width*q.getAnchorPoint().x,p.getPositionY()+r.height*q.getAnchorPoint().y))}}b.addChild(l)}}}else cc.log("Not supported NodeType: %s",c);return b},locateNodeWithMulresPosition:function(){},initNode:function(a,b){var c=null!=b[ccui.CSLoaderStatic.WIDTH]?b[ccui.CSLoaderStatic.WIDTH]:0,d=null!=b[ccui.CSLoaderStatic.HEIGHT]?b[ccui.CSLoaderStatic.HEIGHT]:0,e=null!=b[ccui.CSLoaderStatic.X]?b[ccui.CSLoaderStatic.X]:0,f=null!=b[ccui.CSLoaderStatic.Y]?b[ccui.CSLoaderStatic.Y]:0,g=null!=b[ccui.CSLoaderStatic.SCALE_X]?b[ccui.CSLoaderStatic.SCALE_X]:1,h=null!=b[ccui.CSLoaderStatic.SCALE_Y]?b[ccui.CSLoaderStatic.SCALE_Y]:1,i=null!=b[ccui.CSLoaderStatic.ROTATION]?b[ccui.CSLoaderStatic.ROTATION]:0,j=null!=b[ccui.CSLoaderStatic.ROTATION_SKEW_X]?b[ccui.CSLoaderStatic.ROTATION_SKEW_X]:0,k=null!=b[ccui.CSLoaderStatic.ROTATION_SKEW_Y]?b[ccui.CSLoaderStatic.ROTATION_SKEW_Y]:0,l=null!=b[ccui.CSLoaderStatic.SKEW_X]?b[ccui.CSLoaderStatic.SKEW_X]:0,m=null!=b[ccui.CSLoaderStatic.SKEW_Y]?b[ccui.CSLoaderStatic.SKEW_Y]:0,n=null!=b[ccui.CSLoaderStatic.ANCHOR_X]?b[ccui.CSLoaderStatic.ANCHOR_X]:.5,o=null!=b[ccui.CSLoaderStatic.ANCHOR_Y]?b[ccui.CSLoaderStatic.ANCHOR_Y]:.5,p=null!=b[ccui.CSLoaderStatic.ALPHA]?b[ccui.CSLoaderStatic.ALPHA]:255,q=null!=b[ccui.CSLoaderStatic.RED]?b[ccui.CSLoaderStatic.RED]:255,r=null!=b[ccui.CSLoaderStatic.GREEN]?b[ccui.CSLoaderStatic.GREEN]:255,s=null!=b[ccui.CSLoaderStatic.BLUE]?b[ccui.CSLoaderStatic.BLUE]:255,t=null!=b[ccui.CSLoaderStatic.ZORDER]?b[ccui.CSLoaderStatic.ZORDER]:0,u=null!=b[ccui.CSLoaderStatic.TAG]?b[ccui.CSLoaderStatic.TAG]:0,v=null!=b[ccui.CSLoaderStatic.ACTION_TAG]?b[ccui.CSLoaderStatic.ACTION_TAG]:0,w=null!=b[ccui.CSLoaderStatic.VISIBLE]?b[ccui.CSLoaderStatic.VISIBLE]:!0;(0!=e||0!=f)&&a.setPosition(cc.p(e,f)),1!=g&&a.setScaleX(g),1!=h&&a.setScaleY(h),0!=i&&a.setRotation(i),0!=j&&a.setRotationX(j),0!=k&&a.setRotationY(k),0!=l&&a.setSkewX(l),0!=m&&a.setSkewY(m),(.5!=n||.5!=o)&&a.setAnchorPoint(cc.p(n,o)),(0!=c||0!=d)&&a.setContentSize(cc.size(c,d)),0!=t&&a.setLocalZOrder(t),1!=w&&a.setVisible(w),255!=p&&a.setOpacity(p),(255!=q||255!=r||255!=s)&&a.setColor(cc.color(q,r,s)),a.setTag(u),a.setUserObject(new ccs.ActionTimelineData(v))},loadSimpleNode:function(a){var b=new ccs.Node;return this.initNode(b,a),b},loadSubGraph:function(a){var b=a[ccui.CSLoaderStatic.FILE_PATH],c=null;return c=b&&""!=b?this.createNode(b):new ccs.Node,this.initNode(c,a),c},loadSprite:function(a){var b=a[ccui.CSLoaderStatic.FILE_PATH],c=null;if(null!=b){var d=b,e=cc.spriteFrameCache.getSpriteFrame(d);e?c=ccs.Sprite.createWithSpriteFrame(e):(d=this._jsonPath+d,c=new ccs.Sprite(d)),c||(c=new cc.Sprite,cc.log("filePath is empty. Create a sprite with no texture"))}else c=new ccs.Sprite;this.initNode(c,a);var f=a[ccui.CSLoaderStatic.FLIPX],g=a[ccui.CSLoaderStatic.FLIPY];return 0!=f&&c.setFlippedX(f),0!=g&&c.setFlippedY(g),c},loadParticle:function(a){var b=a[ccui.CSLoaderStatic.PLIST_FILE],c=a[ccui.CSLoaderStatic.PARTICLE_NUM],d=new cc.ParticleSystemQuad(b);return d.setTotalParticles(c),this.initNode(d,a),d},loadTMXTiledMap:function(a){var b=a[ccui.CSLoaderStatic.TMX_FILE],c=a[ccui.CSLoaderStatic.TMX_STRING],d=a[ccui.CSLoaderStatic.RESOURCE_PATH],e=null;return b&&""!=b?e=new cc.TMXTiledMap(b):c&&""!=c&&d&&""!=d&&(e=new cc.TMXTiledMap(c,d)),e},loadWidget:function(a){var b=a[ccui.CSLoaderStatic.CLASSNAME];if(null==b)return null;var c=b,d=new ccs.WidgetPropertiesReader0300,e=null;if(this.isWidget(c)){var f=this.getGUIClassName(c);f+="Reader";var g=this.getGUIClassName(c);e=ccs.objectFactory.createObject(g);var h=ccs.objectFactory.createObject(f);d.setPropsForAllWidgetFromJsonDictionary(h,e,a)}else if(this.isCustomWidget(c)){e=ccs.objectFactory.createObject(c);var f=this.getWidgetReaderClassName(e),h=ccs.objectFactory.createObject(f);if(h&&e){d.setPropsForAllWidgetFromJsonDictionary(h,e,a);var i=a.customProperty;d.setPropsForAllCustomWidgetFromJsonDictionary(c,e,i)}else cc.log("Widget or WidgetReader doesn't exists!!!  Please check your protocol buffers file.")}if(e){var j=a[ccui.CSLoaderStatic.ROTATION_SKEW_X],k=a[ccui.CSLoaderStatic.ROTATION_SKEW_Y],l=a[ccui.CSLoaderStatic.SKEW_X],m=a[ccui.CSLoaderStatic.SKEW_Y];0!=j&&e.setRotationX(j),0!=k&&e.setRotationY(k),0!=l&&e.setSkewX(l),0!=m&&e.setSkewY(m);var n=a[ccui.CSLoaderStatic.ACTION_TAG];e.setUserObject(new ccs.ActionTimelineData(n))}return e},loadComponent:function(a){var b=null,c=a[ccui.CSLoaderStatic.COMPONENT_TYPE],d=this._componentFuncs[c];return null!=d&&(b=d(a)),b},loadComAudio:function(a){var b=new ccs.ComAudio,c=a[ccui.CSLoaderStatic.COMPONENT_NAME],d=a[ccui.CSLoaderStatic.COMPONENT_ENABLED];b.setName(c),b.setEnabled(d);var e=a[ccui.CSLoaderStatic.COMPONENT_AUDIO_FILE_PATH],f=a[ccui.CSLoaderStatic.COMPONENT_LOOP];return b.setFile(e),b.setLoop(f),b},setPropsForNodeFromProtocolBuffers:function(a,b){var c=b,d=c.name,e=c.x,f=c.y,g=c.scaleX,h=c.scaleY,i=c.rotation,j=null!==c.rotationSkewX?c.rotationSkewX:0,k=null!==c.rotationSkewY?c.rotationSkewY:0,l=null!==c.anchorPointX?c.anchorPointX:.5,m=null!==c.anchorPointY?c.anchorPointY:.5,n=c.zorder,o=c.tag,p=c.actionTag,q=c.visible;a.setName(d),(0!=e||0!=f)&&a.setPosition(cc.p(e,f)),1!=g&&a.setScaleX(g),1!=h&&a.setScaleY(h),0!=i&&a.setRotation(i),0!=j&&a.setRotationX(j),0!=k&&a.setRotationY(k),(.5!=l||.5!=m)&&a.setAnchorPoint(cc.p(l,m)),0!=n&&a.setLocalZOrder(n),1!=q&&a.setVisible(q),a.setTag(o),a.setUserObject(new ccs.ActionTimelineData(p)),a.setCascadeColorEnabled(!0),a.setCascadeOpacityEnabled(!0)},setPropsForSingleNodeFromProtocolBuffers:function(a,b){this.setPropsForNodeFromProtocolBuffers(a,b)},setPropsForSpriteFromProtocolBuffers:function(a,b,c){var d=a,e=b,f=e.fileNameData,g=f.resourceType;switch(g){case 0:var h=this._protocolBuffersPath+f.path;""!=h&&d.setTexture(h);break;case 1:cc.spriteFrameCache.addSpriteFrames(this._protocolBuffersPath+f.plistFile);var h=f.path;""!=h&&d.setSpriteFrame(h)}this.setPropsForNodeFromProtocolBuffers(d,c);var i=null!==c.Alpha?c.Alpha:255,j=null!==c.colorR?c.colorR:255,k=null!==c.colorG?c.colorG:255,l=null!==c.colorB?c.colorB:255;255!=i&&d.setOpacity(i),(255!=j||255!=k||255!=l)&&d.setColor(cc.color(j,k,l));var m=b.flippedX,n=b.flippedY;m&&d.setFlippedX(m),n&&d.setFlippedY(n)},createParticleFromProtocolBuffers:function(a,b){var c=null,d=a,e=d.fileNameData,f=e.resourceType;switch(f){case 0:var g=this._protocolBuffersPath+e.path;""!=g&&(c=new cc.ParticleSystemQuad(g))}return c&&this.setPropsForNodeFromProtocolBuffers(c,b),c},createTMXTiledMapFromProtocolBuffers:function(a,b){var c=null,d=a,e=d.fileNameData,f=e.resourceType;switch(f){case 0:var g=this._protocolBuffersPath+e.path,h=g;h&&""!=h&&(c=new cc.TMXTiledMap(h))}return c&&this.setPropsForNodeFromProtocolBuffers(c,b),c},setPropsForProjectNodeFromProtocolBuffers:function(a,b,c){this.setPropsForNodeFromProtocolBuffers(a,c)},setPropsForSimpleAudioFromProtocolBuffers:function(a,b){this.setPropsForNodeFromProtocolBuffers(a,b)},createComponentFromProtocolBuffers:function(a){var b=null,c=a.type;if("ComAudio"==c){b=new ccs.ComAudio;var d=a.comAudioOptions;this.setPropsForComAudioFromProtocolBuffers(b,d)}return b},setPropsForComponentFromProtocolBuffers:function(a,b){var c=b.type;if("ComAudio"==c){a=new ccs.ComAudio;var d=b.comAudioOptions;this.setPropsForComAudioFromProtocolBuffers(a,d)}},setPropsForComAudioFromProtocolBuffers:function(a,b){var c=b,d=a,e=c.fileNameData,f=e.resourceType;switch(f){case 0:var g=this._protocolBuffersPath+e.path;d.setFile(g)}var h=c.loop;d.setLoop(h),d.setName(c.name),d.setLoop(c.loop)},isWidget:function(a){return a==ccui.CSLoaderStatic.ClassName_Panel||a==ccui.CSLoaderStatic.ClassName_Button||a==ccui.CSLoaderStatic.ClassName_CheckBox||a==ccui.CSLoaderStatic.ClassName_ImageView||a==ccui.CSLoaderStatic.ClassName_TextAtlas||a==ccui.CSLoaderStatic.ClassName_LabelAtlas||a==ccui.CSLoaderStatic.ClassName_LabelBMFont||a==ccui.CSLoaderStatic.ClassName_TextBMFont||a==ccui.CSLoaderStatic.ClassName_Text||a==ccui.CSLoaderStatic.ClassName_LoadingBar||a==ccui.CSLoaderStatic.ClassName_TextField||a==ccui.CSLoaderStatic.ClassName_Slider||a==ccui.CSLoaderStatic.ClassName_Layout||a==ccui.CSLoaderStatic.ClassName_ScrollView||a==ccui.CSLoaderStatic.ClassName_ListView||a==ccui.CSLoaderStatic.ClassName_PageView||a==ccui.CSLoaderStatic.ClassName_Widget||a==ccui.CSLoaderStatic.ClassName_Label},isCustomWidget:function(a){var b=ccs.objectFactory.createObject(a);return b?!0:!1},getGUIClassName:function(a){var b=a;return"Panel"==a?b="Layout":"TextArea"==a?b="Text":"TextButton"==a?b="Button":"Label"==a?b="Text":"LabelAtlas"==a?b="TextAtlas":"LabelBMFont"==a&&(b="TextBMFont"),b},getWidgetReaderClassName:function(a){var b;return a instanceof ccui.Button?b="ButtonReader":a instanceof ccui.CheckBox?b="CheckBoxReader":a instanceof ccui.ImageView?b="ImageViewReader":a instanceof ccui.TextAtlas?b="TextAtlasReader":a instanceof ccui.TextBMFont?b="TextBMFontReader":a instanceof ccui.Text?b="TextReader":a instanceof ccui.LoadingBar?b="LoadingBarReader":a instanceof ccui.Slider?b="SliderReader":a instanceof ccui.TextField?b="TextFieldReader":a instanceof ccui.ListView?b="ListViewReader":a instanceof ccui.PageView?b="PageViewReader":a instanceof ccui.ScrollView?b="ScrollViewReader":a instanceof ccui.Layout?b="LayoutReader":a instanceof ccui.Widget&&(b="WidgetReader"),b}},ccs.csLoader.init(),ccs.VERSION_COMBINED=.3,ccs.VERSION_CHANGE_ROTATION_RANGE=1,ccs.VERSION_COLOR_READING=1.1,ccs.MAX_VERTEXZ_VALUE=5e6,ccs.ARMATURE_MAX_CHILD=50,ccs.ARMATURE_MAX_ZORDER=100,ccs.ARMATURE_MAX_COUNT=ccs.MAX_VERTEXZ_VALUE/ccs.ARMATURE_MAX_CHILD/ccs.ARMATURE_MAX_ZORDER,ccs.AUTO_ADD_SPRITE_FRAME_NAME_PREFIX=!1,ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT=!1,ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX=!1,ccs.armatureVersion=function(){return"v1.1.0.0"},ccs.CONST_VERSION="version",ccs.CONST_VERSION_2_0=2,ccs.CONST_VERSION_COMBINED=.3,ccs.CONST_ARMATURES="armatures",ccs.CONST_ARMATURE="armature",ccs.CONST_BONE="b",ccs.CONST_DISPLAY="d",ccs.CONST_ANIMATIONS="animations",ccs.CONST_ANIMATION="animation",ccs.CONST_MOVEMENT="mov",ccs.CONST_FRAME="f",ccs.CONST_TEXTURE_ATLAS="TextureAtlas",ccs.CONST_SUB_TEXTURE="SubTexture",ccs.CONST_SKELETON="skeleton",ccs.CONST_A_NAME="name",ccs.CONST_A_DURATION="dr",ccs.CONST_A_FRAME_INDEX="fi",ccs.CONST_A_DURATION_TO="to",ccs.CONST_A_DURATION_TWEEN="drTW",ccs.CONST_A_LOOP="lp",ccs.CONST_A_MOVEMENT_SCALE="sc",ccs.CONST_A_MOVEMENT_DELAY="dl",ccs.CONST_A_DISPLAY_INDEX="dI",ccs.CONST_A_PLIST="plist",ccs.CONST_A_PARENT="parent",ccs.CONST_A_SKEW_X="kX",ccs.CONST_A_SKEW_Y="kY",ccs.CONST_A_SCALE_X="cX",ccs.CONST_A_SCALE_Y="cY",ccs.CONST_A_Z="z",ccs.CONST_A_EVENT="evt",ccs.CONST_A_SOUND="sd",ccs.CONST_A_SOUND_EFFECT="sdE",ccs.CONST_A_TWEEN_EASING="twE",ccs.CONST_A_EASING_PARAM="twEP",ccs.CONST_A_TWEEN_ROTATE="twR",ccs.CONST_A_IS_ARMATURE="isArmature",ccs.CONST_A_DISPLAY_TYPE="displayType",ccs.CONST_A_MOVEMENT="mov",ccs.CONST_A_X="x",ccs.CONST_A_Y="y",ccs.CONST_A_COCOS2DX_X="cocos2d_x",ccs.CONST_A_COCOS2DX_Y="cocos2d_y",ccs.CONST_A_WIDTH="width",ccs.CONST_A_HEIGHT="height",ccs.CONST_A_PIVOT_X="pX",ccs.CONST_A_PIVOT_Y="pY",ccs.CONST_A_COCOS2D_PIVOT_X="cocos2d_pX",ccs.CONST_A_COCOS2D_PIVOT_Y="cocos2d_pY",ccs.CONST_A_BLEND_TYPE="bd",ccs.CONST_A_BLEND_SRC="bd_src",ccs.CONST_A_BLEND_DST="bd_dst",ccs.CONST_A_ALPHA="a",ccs.CONST_A_RED="r",ccs.CONST_A_GREEN="g",ccs.CONST_A_BLUE="b",ccs.CONST_A_ALPHA_OFFSET="aM",ccs.CONST_A_RED_OFFSET="rM",ccs.CONST_A_GREEN_OFFSET="gM",ccs.CONST_A_BLUE_OFFSET="bM",ccs.CONST_A_COLOR_TRANSFORM="colorTransform",ccs.CONST_A_TWEEN_FRAME="tweenFrame",ccs.CONST_CONTOUR="con",ccs.CONST_CONTOUR_VERTEX="con_vt",ccs.CONST_FL_NAN="NaN",ccs.CONST_FRAME_DATA="frame_data",ccs.CONST_MOVEMENT_BONE_DATA="mov_bone_data",ccs.CONST_MOVEMENT_DATA="mov_data",ccs.CONST_ANIMATION_DATA="animation_data",ccs.CONST_DISPLAY_DATA="display_data",ccs.CONST_SKIN_DATA="skin_data",ccs.CONST_BONE_DATA="bone_data",ccs.CONST_ARMATURE_DATA="armature_data",ccs.CONST_CONTOUR_DATA="contour_data",ccs.CONST_TEXTURE_DATA="texture_data",ccs.CONST_VERTEX_POINT="vertex",ccs.CONST_COLOR_INFO="color",ccs.CONST_CONFIG_FILE_PATH="config_file_path",ccs.CONST_CONTENT_SCALE="content_scale",ccs.DataInfo=function(){this.asyncStruct=null,this.configFileQueue=[],this.contentScale=1,this.filename="",this.baseFilePath="",this.flashToolVersion=0,this.cocoStudioVersion=0},ccs.dataReaderHelper={ConfigType:{DragonBone_XML:0,CocoStudio_JSON:1,CocoStudio_Binary:2},_configFileList:[],_flashToolVersion:ccs.CONST_VERSION_2_0,_positionReadScale:1,_asyncRefCount:0,_asyncRefTotalCount:0,_dataQueue:null,setPositionReadScale:function(a){this._positionReadScale=a},getPositionReadScale:function(){return this._positionReadScale},addDataFromFile:function(a){if(-1==this._configFileList.indexOf(a)){this._configFileList.push(a);var b=this._initBaseFilePath(a),c=cc.path.extname(a).toLowerCase(),d=new ccs.DataInfo;d.filename=a,d.basefilePath=b,".xml"==c?ccs.dataReaderHelper.addDataFromXML(a,d):".json"==c||".exportjson"==c?ccs.dataReaderHelper.addDataFromJson(a,d):".csb"==c&&ccs.dataReaderHelper.addDataFromBinaryCache(a,d)}},addDataFromFileAsync:function(a,b,c,d,e){if(-1!=this._configFileList.indexOf(c))return void(e&&d&&(0==this._asyncRefTotalCount&&0==this._asyncRefCount?this._asyncCallBack(d,e,1):this._asyncCallBack(d,e,(this._asyncRefTotalCount-this._asyncRefCount)/this._asyncRefTotalCount)));this._asyncRefTotalCount++,this._asyncRefCount++;var f=this,g=function(){f.addDataFromFile(c),f._asyncRefCount--,f._asyncCallBack(d,e,(f._asyncRefTotalCount-f._asyncRefCount)/f._asyncRefTotalCount)};cc.director.getScheduler().scheduleCallbackForTarget(this,g,.1,!1)},removeConfigFile:function(a){for(var b=this._configFileList,c=b.length,d=b[c],e=0;c>e;e++)b[e]==a&&(d=e);d!=b[c]&&cc.arrayRemoveObject(b,a)},addDataFromCache:function(a,b){if(!a)return void cc.log("XML error  or  XML is empty.");b.flashToolVersion=parseFloat(a.getAttribute(ccs.CONST_VERSION));var c,d=a.querySelectorAll(ccs.CONST_SKELETON+" > "+ccs.CONST_ARMATURES+" >  "+ccs.CONST_ARMATURE),e=ccs.armatureDataManager;for(c=0;c<d.length;c++){var f=this.decodeArmature(d[c],b);e.addArmatureData(f.name,f,b.filename)}var g=a.querySelectorAll(ccs.CONST_SKELETON+" > "+ccs.CONST_ANIMATIONS+" >  "+ccs.CONST_ANIMATION);for(c=0;c<g.length;c++){var h=this.decodeAnimation(g[c],b);e.addAnimationData(h.name,h,b.filename)}var i=a.querySelectorAll(ccs.CONST_SKELETON+" > "+ccs.CONST_TEXTURE_ATLAS+" >  "+ccs.CONST_SUB_TEXTURE);for(c=0;c<i.length;c++){var j=this.decodeTexture(i[c],b);e.addTextureData(j.name,j,b.filename)}},decodeArmature:function(a,b){var c=new ccs.ArmatureData;c.init(),c.name=a.getAttribute(ccs.CONST_A_NAME);for(var d=a.querySelectorAll(ccs.CONST_ARMATURE+" > "+ccs.CONST_BONE),e=0;e<d.length;e++){var f=d[e],g=f.getAttribute(ccs.CONST_A_PARENT),h=null;if(g)for(var i=0;i<d.length&&(h=d[i],g!=d[i].getAttribute(ccs.CONST_A_NAME));i++);var j=this.decodeBone(f,h,b);c.addBoneData(j)}return c},decodeArmatureFromJSON:function(a,b){var c=new ccs.ArmatureData;c.init();var d=a[ccs.CONST_A_NAME];d&&(c.name=d),b.cocoStudioVersion=c.dataVersion=a[ccs.CONST_VERSION]||.1;for(var e=a[ccs.CONST_BONE_DATA],f=0;f<e.length;f++){var g=this.decodeBoneFromJson(e[f],b);c.addBoneData(g)}return c},decodeBone:function(a,b,c){var d=new ccs.BoneData;d.init(),d.name=a.getAttribute(ccs.CONST_A_NAME),d.parentName=a.getAttribute(ccs.CONST_A_PARENT)||"",d.zOrder=parseInt(a.getAttribute(ccs.CONST_A_Z))||0;for(var e=a.querySelectorAll(ccs.CONST_BONE+" > "+ccs.CONST_DISPLAY),f=0;f<e.length;f++){var g=e[f],h=this.decodeBoneDisplay(g,c);d.addDisplayData(h)}return d},decodeBoneFromJson:function(a,b){var c=new ccs.BoneData;c.init(),this.decodeNodeFromJson(c,a,b),c.name=a[ccs.CONST_A_NAME]||"",c.parentName=a[ccs.CONST_A_PARENT]||"";for(var d=a[ccs.CONST_DISPLAY_DATA]||[],e=0;e<d.length;e++){var f=this.decodeBoneDisplayFromJson(d[e],b);c.addDisplayData(f)}return c},decodeBoneDisplay:function(a){var b=parseFloat(a.getAttribute(ccs.CONST_A_IS_ARMATURE))||0,c=null;1==b?(c=new ccs.ArmatureDisplayData,c.displayType=ccs.DISPLAY_TYPE_ARMATURE):(c=new ccs.SpriteDisplayData,c.displayType=ccs.DISPLAY_TYPE_SPRITE);var d=a.getAttribute(ccs.CONST_A_NAME)||"";return d&&(c.displayName=d),c},decodeBoneDisplayFromJson:function(a,b){var c=a[ccs.CONST_A_DISPLAY_TYPE]||ccs.DISPLAY_TYPE_SPRITE,d=null;switch(c){case ccs.DISPLAY_TYPE_SPRITE:d=new ccs.SpriteDisplayData;var e=a[ccs.CONST_A_NAME];null!=e&&(d.displayName=e);var f=a[ccs.CONST_SKIN_DATA]||[],g=f[0];if(g){var h=d.skinData;h.x=g[ccs.CONST_A_X]*this._positionReadScale,h.y=g[ccs.CONST_A_Y]*this._positionReadScale,h.scaleX=null==g[ccs.CONST_A_SCALE_X]?1:g[ccs.CONST_A_SCALE_X],h.scaleY=null==g[ccs.CONST_A_SCALE_Y]?1:g[ccs.CONST_A_SCALE_Y],h.skewX=null==g[ccs.CONST_A_SKEW_X]?1:g[ccs.CONST_A_SKEW_X],h.skewY=null==g[ccs.CONST_A_SKEW_Y]?1:g[ccs.CONST_A_SKEW_Y],h.x*=b.contentScale,h.y*=b.contentScale}break;case ccs.DISPLAY_TYPE_ARMATURE:d=new ccs.ArmatureDisplayData;var e=a[ccs.CONST_A_NAME];null!=e&&(d.displayName=a[ccs.CONST_A_NAME]);break;case ccs.DISPLAY_TYPE_PARTICLE:d=new ccs.ParticleDisplayData;var i=a[ccs.CONST_A_PLIST];null!=i&&(d.displayName=b.asyncStruct?b.asyncStruct.basefilePath+i:b.basefilePath+i);break;default:d=new ccs.SpriteDisplayData}return d.displayType=c,d},decodeAnimation:function(a,b){var c=new ccs.AnimationData,d=a.getAttribute(ccs.CONST_A_NAME),e=ccs.armatureDataManager.getArmatureData(d);c.name=d;for(var f=a.querySelectorAll(ccs.CONST_ANIMATION+" > "+ccs.CONST_MOVEMENT),g=null,h=0;h<f.length;h++){g=f[h];var i=this.decodeMovement(g,e,b);c.addMovement(i)}return c},decodeAnimationFromJson:function(a,b){var c=new ccs.AnimationData,d=a[ccs.CONST_A_NAME];d&&(c.name=a[ccs.CONST_A_NAME]);for(var e=a[ccs.CONST_MOVEMENT_DATA]||[],f=0;f<e.length;f++){var g=this.decodeMovementFromJson(e[f],b);c.addMovement(g)}return c},decodeMovement:function(a,b,c){var d=new ccs.MovementData;d.name=a.getAttribute(ccs.CONST_A_NAME);var e,f,g,h,i=0;e=a.getAttribute(ccs.CONST_A_DURATION),d.duration=null==e?0:parseFloat(e),f=a.getAttribute(ccs.CONST_A_DURATION_TO),d.durationTo=null==f?0:parseFloat(f),g=a.getAttribute(ccs.CONST_A_DURATION_TWEEN),d.durationTween=null==g?0:parseFloat(g),h=a.getAttribute(ccs.CONST_A_LOOP),d.loop=h?Boolean(parseFloat(h)):!0;var j=a.getAttribute(ccs.CONST_A_TWEEN_EASING);j&&(j!=ccs.CONST_FL_NAN?(i=null==j?0:parseFloat(j),d.tweenEasing=2==i?ccs.TweenType.sineEaseInOut:i):d.tweenEasing=ccs.TweenType.linear);for(var k=a.querySelectorAll(ccs.CONST_MOVEMENT+" > "+ccs.CONST_BONE),l=null,m=0;m<k.length;m++){l=k[m];var n=l.getAttribute(ccs.CONST_A_NAME);if(!d.getMovementBoneData(n)){var o=b.getBoneData(n),p=o.parentName,q=null;if(""!=p)for(var r=0;r<k.length&&(q=k[r],p!=q.getAttribute(ccs.CONST_A_NAME));r++);var s=this.decodeMovementBone(l,q,o,c);d.addMovementBoneData(s)}}return d},decodeMovementFromJson:function(a,b){var c=new ccs.MovementData;c.loop=null==a[ccs.CONST_A_LOOP]?!1:a[ccs.CONST_A_LOOP],c.durationTween=a[ccs.CONST_A_DURATION_TWEEN]||0,c.durationTo=a[ccs.CONST_A_DURATION_TO]||0,c.duration=a[ccs.CONST_A_DURATION]||0,c.scale=null==a[ccs.CONST_A_DURATION]?1:null==a[ccs.CONST_A_MOVEMENT_SCALE]?1:a[ccs.CONST_A_MOVEMENT_SCALE],c.tweenEasing=null==a[ccs.CONST_A_TWEEN_EASING]?ccs.TweenType.linear:a[ccs.CONST_A_TWEEN_EASING];var d=a[ccs.CONST_A_NAME];d&&(c.name=d);for(var e=a[ccs.CONST_MOVEMENT_BONE_DATA]||[],f=0;f<e.length;f++){var g=this.decodeMovementBoneFromJson(e[f],b);c.addMovementBoneData(g)}return c},decodeMovementBone:function(a,b,c,d){var e=new ccs.MovementBoneData;e.init();var f,g;a&&(f=parseFloat(a.getAttribute(ccs.CONST_A_MOVEMENT_SCALE))||0,e.scale=f,g=parseFloat(a.getAttribute(ccs.CONST_A_MOVEMENT_DELAY))||0,g>0&&(g-=1),e.delay=g);var h=0,i=0,j=0,k=null,l=[];if(null!=b){for(var m=b.querySelectorAll(ccs.CONST_BONE+" > "+ccs.CONST_FRAME),n=0;n<m.length;n++)l.push(m[n]);h=l.length}e.name=a.getAttribute(ccs.CONST_A_NAME);for(var o=a.querySelectorAll(ccs.CONST_BONE+" > "+ccs.CONST_FRAME),p=0,q=0,r=0;r<o.length;r++){var s=o[r];if(b)for(;h>p&&(k?i>q||q>=i+j:!0);)k=l[p],i+=j,j=parseFloat(k.getAttribute(ccs.CONST_A_DURATION)),p++;var t=this.decodeFrame(s,k,c,d);e.addFrameData(t),t.frameID=q,q+=t.duration,e.duration=q}for(var u=e.frameList,v=Math.PI,n=u.length-1;n>=0;n--)if(n>0){var w=u[n].skewX-u[n-1].skewX,x=u[n].skewY-u[n-1].skewY;(-v>w||w>v)&&(u[n-1].skewX=0>w?u[n-1].skewX-2*v:u[n-1].skewX+2*v),(-v>x||x>v)&&(u[n-1].skewY=0>x?u[n-1].skewY-2*v:u[n-1].skewY+2*v)}var y=new ccs.FrameData;return y.copy(e.frameList[e.frameList.length-1]),y.frameID=e.duration,e.addFrameData(y),e},decodeMovementBoneFromJson:function(a,b){var c=new ccs.MovementBoneData;c.init(),c.delay=a[ccs.CONST_A_MOVEMENT_DELAY]||0;var d=a[ccs.CONST_A_NAME];d&&(c.name=d);for(var e=a[ccs.CONST_FRAME_DATA]||[],f=e.length,g=0;f>g;g++){var h=a[ccs.CONST_FRAME_DATA][g],i=this.decodeFrameFromJson(h,b);c.addFrameData(i),b.cocoStudioVersion<ccs.CONST_VERSION_COMBINED&&(i.frameID=c.duration,c.duration+=i.duration)}if(b.cocoStudioVersion<ccs.VERSION_CHANGE_ROTATION_RANGE)for(var j=c.frameList,k=Math.PI,g=j.length-1;g>=0;g--)if(g>0){var l=j[g].skewX-j[g-1].skewX,m=j[g].skewY-j[g-1].skewY;(-k>l||l>k)&&(j[g-1].skewX=0>l?j[g-1].skewX-2*k:j[g-1].skewX+2*k),(-k>m||m>k)&&(j[g-1].skewY=0>m?j[g-1].skewY-2*k:j[g-1].skewY+2*k)}if(b.cocoStudioVersion<ccs.CONST_VERSION_COMBINED&&c.frameList.length>0){var i=new ccs.FrameData;i.copy(c.frameList[c.frameList.length-1]),c.addFrameData(i),i.frameID=c.duration}return c},decodeFrame:function(a,b,c,d){var e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=new ccs.FrameData;q.strMovement=a.getAttribute(ccs.CONST_A_MOVEMENT)||"",q.movement=q.strMovement,q.strEvent=a.getAttribute(ccs.CONST_A_EVENT)||"",q.event=q.strEvent,q.strSound=a.getAttribute(ccs.CONST_A_SOUND)||"",q.sound=q.strSound,q.strSoundEffect=a.getAttribute(ccs.CONST_A_SOUND_EFFECT)||"",q.soundEffect=q.strSoundEffect;var r=a.getAttribute(ccs.CONST_A_TWEEN_FRAME);if(q.isTween=!(void 0!=r&&"false"==r),d.flashToolVersion>=ccs.CONST_VERSION_2_0?(e=a.getAttribute(ccs.CONST_A_COCOS2DX_X),e&&(q.x=parseFloat(e),q.x*=this._positionReadScale),f=a.getAttribute(ccs.CONST_A_COCOS2DX_Y),f&&(q.y=-parseFloat(f),q.y*=this._positionReadScale)):(e=a.getAttribute(ccs.CONST_A_X),e&&(q.x=parseFloat(e),q.x*=this._positionReadScale),f=a.getAttribute(ccs.CONST_A_Y),f&&(q.y=-parseFloat(f),q.y*=this._positionReadScale)),g=a.getAttribute(ccs.CONST_A_SCALE_X),null!=g&&(q.scaleX=parseFloat(g)),h=a.getAttribute(ccs.CONST_A_SCALE_Y),null!=h&&(q.scaleY=parseFloat(h)),i=a.getAttribute(ccs.CONST_A_SKEW_X),null!=i&&(q.skewX=cc.degreesToRadians(parseFloat(i))),j=a.getAttribute(ccs.CONST_A_SKEW_Y),null!=j&&(q.skewY=cc.degreesToRadians(-parseFloat(j))),l=a.getAttribute(ccs.CONST_A_DURATION),null!=l&&(q.duration=parseFloat(l)),m=a.getAttribute(ccs.CONST_A_DISPLAY_INDEX),null!=m&&(q.displayIndex=parseFloat(m)),n=a.getAttribute(ccs.CONST_A_Z),null!=n&&(q.zOrder=parseInt(n)),k=a.getAttribute(ccs.CONST_A_TWEEN_ROTATE),null!=k&&(q.tweenRotate=parseFloat(k)),p=a.getAttribute(ccs.CONST_A_BLEND_TYPE),null!=p){var s=q.blendFunc;switch(p){case ccs.BLEND_TYPE_NORMAL:s.src=cc.BLEND_SRC,s.dst=cc.BLEND_DST;break;case ccs.BLEND_TYPE_ADD:s.src=cc.SRC_ALPHA,s.dst=cc.ONE;break;case ccs.BLEND_TYPE_MULTIPLY:s.src=cc.DST_COLOR,s.dst=cc.ONE_MINUS_SRC_ALPHA;break;case ccs.BLEND_TYPE_SCREEN:s.src=cc.ONE,s.dst=cc.ONE_MINUS_DST_COLOR;break;default:q.blendFunc.src=cc.BLEND_SRC,q.blendFunc.dst=cc.BLEND_DST}}var t=a.querySelectorAll(ccs.CONST_FRAME+" > "+ccs.CONST_A_COLOR_TRANSFORM);if(t&&t.length>0){t=t[0];var u,v,w,x,y,z,A,B;u=parseFloat(t.getAttribute(ccs.CONST_A_ALPHA))||0,v=parseFloat(t.getAttribute(ccs.CONST_A_RED))||0,w=parseFloat(t.getAttribute(ccs.CONST_A_GREEN))||0,x=parseFloat(t.getAttribute(ccs.CONST_A_BLUE))||0,y=parseFloat(t.getAttribute(ccs.CONST_A_ALPHA_OFFSET))||0,z=parseFloat(t.getAttribute(ccs.CONST_A_RED_OFFSET))||0,A=parseFloat(t.getAttribute(ccs.CONST_A_GREEN_OFFSET))||0,B=parseFloat(t.getAttribute(ccs.CONST_A_BLUE_OFFSET))||0,q.a=2.55*y+u,q.r=2.55*z+v,q.g=2.55*A+w,q.b=2.55*B+x,q.isUseColorInfo=!0}var C=a.getAttribute(ccs.CONST_A_TWEEN_EASING);if(null!=C&&(C!=ccs.CONST_FL_NAN?(o=a.getAttribute(ccs.CONST_A_TWEEN_EASING),o&&(q.tweenEasing=2==o?ccs.TweenType.sineEaseInOut:o)):q.tweenEasing=ccs.TweenType.linear),b){var D=new ccs.BaseData;d.flashToolVersion>=ccs.CONST_VERSION_2_0?(D.x=parseFloat(b.getAttribute(ccs.CONST_A_COCOS2DX_X)),D.y=parseFloat(b.getAttribute(ccs.CONST_A_COCOS2DX_Y))):(D.x=parseFloat(b.getAttribute(ccs.CONST_A_X)),D.y=parseFloat(b.getAttribute(ccs.CONST_A_Y))),D.skewX=parseFloat(b.getAttribute(ccs.CONST_A_SKEW_X)),D.skewY=parseFloat(b.getAttribute(ccs.CONST_A_SKEW_Y)),D.y=-D.y,D.skewX=cc.degreesToRadians(D.skewX),D.skewY=cc.degreesToRadians(-D.skewY),ccs.TransformHelp.transformFromParent(q,D)}return q},decodeFrameFromJson:function(a,b){var c=new ccs.FrameData;this.decodeNodeFromJson(c,a,b),c.tweenEasing=a[ccs.CONST_A_TWEEN_EASING]||ccs.TweenType.linear,c.displayIndex=a[ccs.CONST_A_DISPLAY_INDEX];var d=null==a[ccs.CONST_A_BLEND_SRC]?cc.BLEND_SRC:a[ccs.CONST_A_BLEND_SRC],e=null==a[ccs.CONST_A_BLEND_DST]?cc.BLEND_DST:a[ccs.CONST_A_BLEND_DST];c.blendFunc.src=d,c.blendFunc.dst=e,c.isTween=null==a[ccs.CONST_A_TWEEN_FRAME]?!0:a[ccs.CONST_A_TWEEN_FRAME];var f=a[ccs.CONST_A_EVENT];null!=f&&(c.strEvent=f,c.event=f),b.cocoStudioVersion<ccs.CONST_VERSION_COMBINED?c.duration=null==a[ccs.CONST_A_DURATION]?1:a[ccs.CONST_A_DURATION]:c.frameID=a[ccs.CONST_A_FRAME_INDEX];for(var g=a[ccs.CONST_A_EASING_PARAM]||[],h=0;h<g.length;h++)c.easingParams[h]=g[h];return c},decodeTexture:function(a,b){var c=new ccs.TextureData;c.init(),a.getAttribute(ccs.CONST_A_NAME)&&(c.name=a.getAttribute(ccs.CONST_A_NAME));var d,e;b.flashToolVersion>=ccs.CONST_VERSION_2_0?(d=parseFloat(a.getAttribute(ccs.CONST_A_COCOS2D_PIVOT_X))||0,e=parseFloat(a.getAttribute(ccs.CONST_A_COCOS2D_PIVOT_Y))||0):(d=parseFloat(a.getAttribute(ccs.CONST_A_PIVOT_X))||0,e=parseFloat(a.getAttribute(ccs.CONST_A_PIVOT_Y))||0);var f=parseFloat(a.getAttribute(ccs.CONST_A_WIDTH))||0,g=parseFloat(a.getAttribute(ccs.CONST_A_HEIGHT))||0,h=d/f,i=(g-e)/g;c.pivotX=h,c.pivotY=i;for(var j=a.querySelectorAll(ccs.CONST_SUB_TEXTURE+" > "+ccs.CONST_CONTOUR),k=0;k<j.length;k++)c.addContourData(this.decodeContour(j[k],b));return c},decodeTextureFromJson:function(a){var b=new ccs.TextureData;b.init();var c=a[ccs.CONST_A_NAME];null!=c&&(b.name=c),b.width=a[ccs.CONST_A_WIDTH]||0,b.height=a[ccs.CONST_A_HEIGHT]||0,b.pivotX=a[ccs.CONST_A_PIVOT_X]||0,b.pivotY=a[ccs.CONST_A_PIVOT_Y]||0;for(var d=a[ccs.CONST_CONTOUR_DATA]||[],e=0;e<d.length;e++)b.contourDataList.push(this.decodeContourFromJson(d[e]));return b},decodeContour:function(a){var b=new ccs.ContourData;b.init();for(var c,d=a.querySelectorAll(ccs.CONST_CONTOUR+" > "+ccs.CONST_CONTOUR_VERTEX),e=0;e<d.length;e++){c=d[e];var f=cc.p(0,0);f.x=parseFloat(c.getAttribute(ccs.CONST_A_X))||0,f.y=parseFloat(c.getAttribute(ccs.CONST_A_Y))||0,f.y=-f.y,b.vertexList.push(f)}return b},decodeContourFromJson:function(a){var b=new ccs.ContourData;b.init();for(var c=a[ccs.CONST_VERTEX_POINT]||[],d=c.length,e=0;d>e;e++){var f=c[e],g=cc.p(0,0);g.x=f[ccs.CONST_A_X]||0,g.y=f[ccs.CONST_A_Y]||0,b.vertexList.push(g)}return b},addDataFromJsonCache:function(a,b){b.contentScale=null==a[ccs.CONST_CONTENT_SCALE]?1:a[ccs.CONST_CONTENT_SCALE];var c,d,e=a[ccs.CONST_ARMATURE_DATA]||[];for(c=0;c<e.length;c++)d=this.decodeArmatureFromJSON(e[c],b),ccs.armatureDataManager.addArmatureData(d.name,d,b.filename);
var f,g=a[ccs.CONST_ANIMATION_DATA]||[];for(c=0;c<g.length;c++)f=this.decodeAnimationFromJson(g[c],b),ccs.armatureDataManager.addAnimationData(f.name,f,b.filename);var h,i=a[ccs.CONST_TEXTURE_DATA]||[];for(c=0;c<i.length;c++)h=this.decodeTextureFromJson(i[c],b),ccs.armatureDataManager.addTextureData(h.name,h,b.filename);var j=null==b.asyncStruct?ccs.armatureDataManager.isAutoLoadSpriteFile():b.asyncStruct.autoLoadSpriteFile;if(j){var k,l,m,n,o=a[ccs.CONST_CONFIG_FILE_PATH]||[];for(c=0;c<o.length;c++)k=o[c],l=k.lastIndexOf("."),k=k.substring(0,l),m=b.basefilePath+k+".plist",n=b.basefilePath+k+".png",ccs.armatureDataManager.addSpriteFrameFromFile(m,n,b.filename)}d=null,f=null},decodeNodeFromJson:function(a,b,c){a.x=b[ccs.CONST_A_X]*this._positionReadScale,a.y=b[ccs.CONST_A_Y]*this._positionReadScale,a.x*=c.contentScale,a.y*=c.contentScale,a.zOrder=b[ccs.CONST_A_Z],a.skewX=b[ccs.CONST_A_SKEW_X]||0,a.skewY=b[ccs.CONST_A_SKEW_Y]||0,a.scaleX=null==b[ccs.CONST_A_SCALE_X]?1:b[ccs.CONST_A_SCALE_X],a.scaleY=null==b[ccs.CONST_A_SCALE_Y]?1:b[ccs.CONST_A_SCALE_Y];var d;c.cocoStudioVersion<ccs.VERSION_COLOR_READING?(d=b[0],d&&(a.a=null==d[ccs.CONST_A_ALPHA]?255:d[ccs.CONST_A_ALPHA],a.r=null==d[ccs.CONST_A_RED]?255:d[ccs.CONST_A_RED],a.g=null==d[ccs.CONST_A_GREEN]?255:d[ccs.CONST_A_GREEN],a.b=null==d[ccs.CONST_A_BLUE]?255:d[ccs.CONST_A_BLUE],a.isUseColorInfo=!0)):(d=b[ccs.CONST_COLOR_INFO]||null,d&&(a.a=null==d[ccs.CONST_A_ALPHA]?255:d[ccs.CONST_A_ALPHA],a.r=null==d[ccs.CONST_A_RED]?255:d[ccs.CONST_A_RED],a.g=null==d[ccs.CONST_A_GREEN]?255:d[ccs.CONST_A_GREEN],a.b=null==d[ccs.CONST_A_BLUE]?255:d[ccs.CONST_A_BLUE],a.isUseColorInfo=!0))},clear:function(){this._configFileList=[],this._asyncRefCount=0,this._asyncRefTotalCount=0},_asyncCallBack:function(a,b,c){a&&cc.isFunction(a)&&a.call(b,c),b&&a&&"string"==typeof a&&b[a](c)},_initBaseFilePath:function(a){var b=a,c=b.lastIndexOf("/");return b=c>-1?b.substr(0,c+1):""},addDataFromXML:function(a,b){var c=cc.loader.getRes(a);if(!c)throw"Please load the resource first : "+a;var d=cc.saxParser.parse(c),e=d.documentElement;e&&this.addDataFromCache(e,b)},addDataFromJson:function(a,b){var c=cc.loader.getRes(a);this.addDataFromJsonCache(c,b)}},ccs.spriteFrameCacheHelper={_textureAtlasDic:{},_imagePaths:[],addSpriteFrameFromFile:function(a,b){cc.spriteFrameCache.addSpriteFrames(a,b)},getTextureAtlasWithTexture:function(a){return null},clear:function(){this._textureAtlasDic={},this._imagePaths=[]}},ccs.TransformHelp=ccs.TransformHelp||ccs.Class.extend({}),ccs.TransformHelp.helpMatrix1=cc.affineTransformMake(1,0,0,1,0,0),ccs.TransformHelp.helpMatrix2=cc.affineTransformMake(1,0,0,1,0,0),ccs.TransformHelp.helpPoint1=cc.p(0,0),ccs.TransformHelp.helpPoint2=cc.p(0,0),ccs.TransformHelp.helpParentNode={},ccs.TransformHelp.transformFromParent=function(a,b){this.nodeToMatrix(a,this.helpMatrix1),this.nodeToMatrix(b,this.helpMatrix2),this.helpMatrix2=cc.affineTransformInvert(this.helpMatrix2),this.helpMatrix1=cc.affineTransformConcat(this.helpMatrix1,this.helpMatrix2),this.matrixToNode(this.helpMatrix1,a)},ccs.TransformHelp.transformToParent=function(a,b){this.nodeToMatrix(a,this.helpMatrix1),this.nodeToMatrix(b,this.helpMatrix2),this.helpMatrix1=cc.affineTransformConcat(this.helpMatrix1,this.helpMatrix2),this.matrixToNode(this.helpMatrix1,a)},ccs.TransformHelp.transformFromParentWithoutScale=function(a,b){for(var c in b)this.helpParentNode[c]=b[c];this.helpParentNode.scaleX=1,this.helpParentNode.scaleY=1,this.nodeToMatrix(a,this.helpMatrix1),this.nodeToMatrix(this.helpParentNode,this.helpMatrix2),this.helpMatrix2=cc.affineTransformInvert(this.helpMatrix2),this.helpMatrix1=cc.affineTransformConcat(this.helpMatrix1,this.helpMatrix2),this.matrixToNode(this.helpMatrix1,a)},ccs.TransformHelp.transformToParentWithoutScale=function(a,b){for(var c in b)this.helpParentNode[c]=b[c];this.helpParentNode.scaleX=1,this.helpParentNode.scaleY=1,this.nodeToMatrix(a,this.helpMatrix1),this.nodeToMatrix(this.helpParentNode,this.helpMatrix2),this.helpMatrix1=cc.affineTransformConcat(this.helpMatrix1,this.helpMatrix2),this.matrixToNode(this.helpMatrix1,a)},ccs.TransformHelp.nodeToMatrix=function(a,b){if(a.skewX==-a.skewY){var c=Math.sin(a.skewX),d=Math.cos(a.skewX);b.a=a.scaleX*d,b.b=a.scaleX*-c,b.c=a.scaleY*c,b.d=a.scaleY*d}else b.a=a.scaleX*Math.cos(a.skewY),b.b=a.scaleX*Math.sin(a.skewY),b.c=a.scaleY*Math.sin(a.skewX),b.d=a.scaleY*Math.cos(a.skewX);b.tx=a.x,b.ty=a.y},ccs.TransformHelp.matrixToNode=function(a,b){this.helpPoint1.x=0,this.helpPoint1.y=1,this.helpPoint1=cc.pointApplyAffineTransform(this.helpPoint1,a),this.helpPoint1.x-=a.tx,this.helpPoint1.y-=a.ty,this.helpPoint2.x=1,this.helpPoint2.y=0,this.helpPoint2=cc.pointApplyAffineTransform(this.helpPoint2,a),this.helpPoint2.x-=a.tx,this.helpPoint2.y-=a.ty,b.skewX=-(Math.atan2(this.helpPoint1.y,this.helpPoint1.x)-1.5707964),b.skewY=Math.atan2(this.helpPoint2.y,this.helpPoint2.x),b.scaleX=Math.sqrt(a.a*a.a+a.b*a.b),b.scaleY=Math.sqrt(a.c*a.c+a.d*a.d),b.x=a.tx,b.y=a.ty},ccs.TransformHelp.nodeConcat=function(a,b){a.x+=b.x,a.y+=b.y,a.skewX+=b.skewX,a.skewY+=b.skewY,a.scaleX+=b.scaleX,a.scaleY+=b.scaleY},ccs.TransformHelp.nodeSub=function(a,b){a.x-=b.x,a.y-=b.y,a.skewX-=b.skewX,a.skewY-=b.skewY,a.scaleX-=b.scaleX,a.scaleY-=b.scaleY},ccs.TweenType={customEasing:-1,linear:0,sineEaseIn:1,sineEaseOut:2,sineEaseInOut:3,quadEaseIn:4,quadEaseOut:5,quadEaseInOut:6,cubicEaseIn:7,cubicEaseOut:8,cubicEaseInOut:9,quartEaseIn:10,quartEaseOut:11,quartEaseInOut:12,quintEaseIn:13,quintEaseOut:14,quintEaseInOut:15,expoEaseIn:16,expoEaseOut:17,expoEaseInOut:18,circEaseIn:19,eircEaseOut:20,circEaseInOut:21,elasticEaseIn:22,elasticEaseOut:23,elasticEaseInOut:24,backEaseIn:25,backEaseOut:26,backEaseInOut:27,bounceEaseIn:28,bounceEaseOut:29,bounceEaseInOut:30,tweenEasingMax:1e4},ccs.TweenFunction=ccs.TweenFunction||ccs.Class.extend({}),ccs.DOUBLE_PI=ccs.M_PI_X_2=2*Math.PI,ccs.HALF_PI=ccs.M_PI_2=Math.PI/2,ccs.M_PI=Math.PI,ccs.TweenFunction.tweenTo=function(a,b,c){var d=0;switch(b){case ccs.TweenType.customEasing:d=this.customEase(a,c);break;case ccs.TweenType.linear:d=this.linear(a);break;case ccs.TweenType.sineEaseIn:d=this.sineEaseIn(a);break;case ccs.TweenType.sineEaseOut:d=this.sineEaseOut(a);break;case ccs.TweenType.sineEaseInOut:d=this.sineEaseInOut(a);break;case ccs.TweenType.quadEaseIn:d=this.quadEaseIn(a);break;case ccs.TweenType.quadEaseOut:d=this.quadEaseOut(a);break;case ccs.TweenType.quadEaseInOut:d=this.quadEaseInOut(a);break;case ccs.TweenType.cubicEaseIn:d=this.cubicEaseIn(a);break;case ccs.TweenType.cubicEaseOut:d=this.cubicEaseOut(a);break;case ccs.TweenType.cubicEaseInOut:d=this.cubicEaseInOut(a);break;case ccs.TweenType.quartEaseIn:d=this.quartEaseIn(a);break;case ccs.TweenType.quartEaseOut:d=this.quartEaseOut(a);break;case ccs.TweenType.quartEaseInOut:d=this.quartEaseInOut(a);break;case ccs.TweenType.quintEaseIn:d=this.quintEaseIn(a);break;case ccs.TweenType.quintEaseOut:d=this.quintEaseOut(a);break;case ccs.TweenType.quintEaseInOut:d=this.quintEaseInOut(a);break;case ccs.TweenType.expoEaseIn:d=this.expoEaseIn(a);break;case ccs.TweenType.expoEaseOut:d=this.expoEaseOut(a);break;case ccs.TweenType.expoEaseInOut:d=this.expoEaseInOut(a);break;case ccs.TweenType.circEaseIn:d=this.circEaseIn(a);break;case ccs.TweenType.eircEaseOut:d=this.circEaseOut(a);break;case ccs.TweenType.circEaseInOut:d=this.circEaseInOut(a);break;case ccs.TweenType.elasticEaseIn:var e=.3;null!=c&&c.length>0&&(e=c[0]),d=this.elasticEaseIn(a,e);break;case ccs.TweenType.elasticEaseOut:var e=.3;null!=c&&c.length>0&&(e=c[0]),d=this.elasticEaseOut(a,e);break;case ccs.TweenType.elasticEaseInOut:var e=.3;null!=c&&c.length>0&&(e=c[0]),d=this.elasticEaseInOut(a,e);break;case ccs.TweenType.backEaseIn:d=this.backEaseIn(a);break;case ccs.TweenType.backEaseOut:d=this.backEaseOut(a);break;case ccs.TweenType.backEaseInOut:d=this.backEaseInOut(a);break;case ccs.TweenType.bounceEaseIn:d=this.bounceEaseIn(a);break;case ccs.TweenType.bounceEaseOut:d=this.bounceEaseOut(a);break;case ccs.TweenType.bounceEaseInOut:d=this.bounceEaseInOut(a);break;default:d=this.sineEaseInOut(a)}return d},ccs.TweenFunction.linear=function(a){return a},ccs.TweenFunction.sineEaseIn=function(a){return-1*Math.cos(a*ccs.HALF_PI)+1},ccs.TweenFunction.sineEaseOut=function(a){return Math.sin(a*ccs.HALF_PI)},ccs.TweenFunction.sineEaseInOut=function(a){return-.5*(Math.cos(ccs.M_PI*a)-1)},ccs.TweenFunction.quadEaseIn=function(a){return a*a},ccs.TweenFunction.quadEaseOut=function(a){return-1*a*(a-2)},ccs.TweenFunction.quadEaseInOut=function(a){return a=2*a,1>a?.5*a*a:(--a,-.5*(a*(a-2)-1))},ccs.TweenFunction.cubicEaseIn=function(a){return a*a*a},ccs.TweenFunction.cubicEaseOut=function(a){return a-=1,a*a*a+1},ccs.TweenFunction.cubicEaseInOut=function(a){return a=2*a,1>a?.5*a*a*a:(a-=2,.5*(a*a*a+2))},ccs.TweenFunction.quartEaseIn=function(a){return a*a*a*a},ccs.TweenFunction.quartEaseOut=function(a){return a-=1,-(a*a*a*a-1)},ccs.TweenFunction.quartEaseInOut=function(a){return a=2*a,1>a?.5*a*a*a*a:(a-=2,-.5*(a*a*a*a-2))},ccs.TweenFunction.quintEaseIn=function(a){return a*a*a*a*a},ccs.TweenFunction.quintEaseOut=function(a){return a-=1,a*a*a*a*a+1},ccs.TweenFunction.quintEaseInOut=function(a){return a=2*a,1>a?.5*a*a*a*a*a:(a-=2,.5*(a*a*a*a*a+2))},ccs.TweenFunction.expoEaseIn=function(a){return 0==a?0:Math.pow(2,10*(a-1))-.001},ccs.TweenFunction.expoEaseOut=function(a){return 1==a?1:-Math.pow(2,-10*a)+1},ccs.TweenFunction.expoEaseInOut=function(a){return a/=.5,a=1>a?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*(a-1))+2)},ccs.TweenFunction.circEaseIn=function(a){return-1*(Math.sqrt(1-a*a)-1)},ccs.TweenFunction.circEaseOut=function(a){return a-=1,Math.sqrt(1-a*a)},ccs.TweenFunction.circEaseInOut=function(a){return a=2*a,1>a?-.5*(Math.sqrt(1-a*a)-1):(a-=2,.5*(Math.sqrt(1-a*a)+1))},ccs.TweenFunction.elasticEaseIn=function(a,b){var c=.3;b.length>0&&(c=b[0]);var d=0;if(0==a||1==a)d=a;else{var e=c/4;a-=1,d=-Math.pow(2,10*a)*Math.sin((a-e)*ccs.DOUBLE_PI/c)}return d},ccs.TweenFunction.elasticEaseOut=function(a,b){var c=.3;b.length>0&&(c=b[0]);var d=0;if(0==a||1==a)d=a;else{var e=c/4;d=Math.pow(2,-10*a)*Math.sin((a-e)*ccs.DOUBLE_PI/c)+1}return d},ccs.TweenFunction.elasticEaseInOut=function(a,b){var c=.3;b.length>0&&(c=b[0]);var d=0;if(0==a||1==a)d=a;else{a=2*a,c||(c=.3*1.5);var e=c/4;a-=1,d=0>a?-.5*Math.pow(2,10*a)*Math.sin((a-e)*ccs.DOUBLE_PI/c):Math.pow(2,-10*a)*Math.sin((a-e)*ccs.DOUBLE_PI/c)*.5+1}return d},ccs.TweenFunction.backEaseIn=function(a){var b=1.70158;return a*a*((b+1)*a-b)},ccs.TweenFunction.backEaseOut=function(a){var b=1.70158;return a-=1,a*a*((b+1)*a+b)+1},ccs.TweenFunction.backEaseInOut=function(a){var b=2.5949095;return a=2*a,1>a?a*a*((b+1)*a-b)/2:(a-=2,a*a*((b+1)*a+b)/2+1)},ccs.bounceTime=function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?(a-=1.5/2.75,7.5625*a*a+.75):2.5/2.75>a?(a-=2.25/2.75,7.5625*a*a+.9375):(a-=2.625/2.75,7.5625*a*a+.984375)},ccs.TweenFunction.bounceEaseIn=function(a){return 1-ccs.bounceTime(1-a)},ccs.TweenFunction.bounceEaseOut=function(a){return ccs.bounceTime(a)},ccs.TweenFunction.bounceEaseInOut=function(a){var b=0;return.5>a?(a=2*a,b=.5*(1-ccs.bounceTime(1-a))):b=.5*ccs.bounceTime(2*a-1)+.5,b},ccs.TweenFunction.customEase=function(a,b){if(b.length>0){var c=1-a;return b[1]*c*c*c+3*b[3]*a*c*c+3*b[5]*a*a*c+b[7]*a*a*a}return a},ccs.TweenFunction.easeIn=function(a,b){return Math.pow(a,b)},ccs.TweenFunction.easeOut=function(a,b){return Math.pow(a,1/b)},ccs.TweenFunction.easeInOut=function(a,b){return a*=2,1>a?.5*Math.pow(a,b):1-.5*Math.pow(2-a,b)},ccs.TweenFunction.quadraticIn=function(a){return Math.pow(a,2)},ccs.TweenFunction.quadraticOut=function(a){return-a*(a-2)},ccs.TweenFunction.bezieratFunction=function(a,b,c,d,e){return Math.pow(1-e,3)*a+3*e*Math.pow(1-e,2)*b+3*Math.pow(e,2)*(1-e)*c+Math.pow(e,3)*d};var ENABLE_PHYSICS_DETECT=!1;ccs.fmodf=function(a,b){for(;a>b;)a-=b;return a};var CC_SAFE_RELEASE=function(a){a&&a.release&&a.release()};ccs.isSpriteContainPoint=function(a,b,c){var d=a.convertToNodeSpace(b);c&&(c.x=d.x,c.y=d.y);var e=a.getContentSize();return cc.rectContainsPoint(cc.rect(0,0,e.width,e.height),d)},ccs.SPRITE_CONTAIN_POINT=ccs.isSpriteContainPoint,ccs.SPRITE_CONTAIN_POINT_WITH_RETURN=ccs.isSpriteContainPoint,ccs.extBezierTo=function(a,b,c,d,e){var f=cc.p(0,0);return d&&!e&&(f.x=Math.pow(1-a,2)*b.x+2*a*(1-a)*c.x+Math.pow(a,2)*d.x,f.y=Math.pow(1-a,2)*b.y+2*a*(1-a)*c.y+Math.pow(a,2)*d.y),e&&(f.x=b.x*Math.pow(1-a,3)+3*a*c.x*Math.pow(1-a,2)+3*d.x*Math.pow(a,2)*(1-a)+e.x*Math.pow(a,3),f.y=b.y*Math.pow(1-a,3)+3*a*c.y*Math.pow(1-a,2)+3*d.y*Math.pow(a,2)*(1-a)+e.y*Math.pow(a,3)),f},ccs.extCircleTo=function(a,b,c,d,e){var f=cc.p(0,0);return f.x=b.x+c*Math.cos(d+e*a),f.y=b.y+c*Math.sin(d+e*a),f},ccs.RelativeData=function(){this.plistFiles=[],this.armatures=[],this.animations=[],this.textures=[]},ccs.armatureDataManager={_animationDatas:{},_armatureDatas:{},_textureDatas:{},_autoLoadSpriteFile:!1,_relativeDatas:{},s_sharedArmatureDataManager:null,removeArmatureFileInfo:function(a){var b=this.getRelativeData(a);if(b){var c,d;for(c=0;c<b.armatures.length;c++)d=b.armatures[c],this.removeArmatureData(d);for(c=0;c<b.animations.length;c++)d=b.animations[c],this.removeAnimationData(d);for(c=0;c<b.textures.length;c++)d=b.textures[c],this.removeTextureData(d);for(c=0;c<b.plistFiles.length;c++)d=b.plistFiles[c],cc.spriteFrameCache.removeSpriteFramesFromFile(d);delete this._relativeDatas[a],ccs.dataReaderHelper.removeConfigFile(a)}},addArmatureData:function(a,b,c){var d=this.getRelativeData(c);d&&d.armatures.push(a),this._armatureDatas[a]=b},getArmatureData:function(a){var b=null;return this._armatureDatas&&(b=this._armatureDatas[a]),b},removeArmatureData:function(a){this._armatureDatas[a]&&delete this._armatureDatas[a]},addAnimationData:function(a,b,c){var d=this.getRelativeData(c);d&&d.animations.push(a),this._animationDatas[a]=b},getAnimationData:function(a){var b=null;return this._animationDatas[a]&&(b=this._animationDatas[a]),b},removeAnimationData:function(a){this._animationDatas[a]&&delete this._animationDatas[a]},addTextureData:function(a,b,c){var d=this.getRelativeData(c);d&&d.textures.push(a),this._textureDatas[a]=b},getTextureData:function(a){var b=null;return this._textureDatas&&(b=this._textureDatas[a]),b},removeTextureData:function(a){this._textureDatas[a]&&delete this._textureDatas[a]},addArmatureFileInfo:function(){var a,b,c;switch(arguments.length){case 1:c=arguments[0],this.addRelativeData(c),this._autoLoadSpriteFile=!0,ccs.dataReaderHelper.addDataFromFile(c);break;case 3:a=arguments[0],b=arguments[1],c=arguments[2],this.addRelativeData(c),this._autoLoadSpriteFile=!1,ccs.dataReaderHelper.addDataFromFile(c),this.addSpriteFrameFromFile(b,a)}},addArmatureFileInfoAsync:function(){var a,b,c,d,e;switch(arguments.length){case 3:c=arguments[0],d=arguments[2],e=arguments[1],this.addRelativeData(c),this._autoLoadSpriteFile=!0,ccs.dataReaderHelper.addDataFromFileAsync("","",c,e,d);break;case 5:a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[4],e=arguments[3],this.addRelativeData(c),this._autoLoadSpriteFile=!1,ccs.dataReaderHelper.addDataFromFileAsync(a,b,c,e,d),this.addSpriteFrameFromFile(b,a)}},addSpriteFrameFromFile:function(a,b,c){var d=this.getRelativeData(c);d&&d.plistFiles.push(a),ccs.spriteFrameCacheHelper.addSpriteFrameFromFile(a,b)},isAutoLoadSpriteFile:function(){return this._autoLoadSpriteFile},getArmatureDatas:function(){return this._armatureDatas},getAnimationDatas:function(){return this._animationDatas},getTextureDatas:function(){return this._textureDatas},addRelativeData:function(a){this._relativeDatas[a]||(this._relativeDatas[a]=new ccs.RelativeData)},getRelativeData:function(a){return this._relativeDatas[a]},clear:function(){this._animationDatas={},this._armatureDatas={},this._textureDatas={},ccs.spriteFrameCacheHelper.clear(),ccs.dataReaderHelper.clear()}},ccs.BLEND_TYPE_NORMAL=0,ccs.BLEND_TYPE_LAYER=1,ccs.BLEND_TYPE_DARKEN=2,ccs.BLEND_TYPE_MULTIPLY=3,ccs.BLEND_TYPE_LIGHTEN=4,ccs.BLEND_TYPE_SCREEN=5,ccs.BLEND_TYPE_OVERLAY=6,ccs.BLEND_TYPE_HIGHLIGHT=7,ccs.BLEND_TYPE_ADD=8,ccs.BLEND_TYPE_SUBTRACT=9,ccs.BLEND_TYPE_DIFFERENCE=10,ccs.BLEND_TYPE_INVERT=11,ccs.BLEND_TYPE_ALPHA=12,ccs.BLEND_TYPE_ERASE=13,ccs.DISPLAY_TYPE_SPRITE=0,ccs.DISPLAY_TYPE_ARMATURE=1,ccs.DISPLAY_TYPE_PARTICLE=2,ccs.DISPLAY_TYPE_MAX=3,ccs.BaseData=ccs.Class.extend({x:0,y:0,zOrder:0,skewX:0,skewY:0,scaleX:1,scaleY:1,tweenRotate:0,isUseColorInfo:!1,r:255,g:255,b:255,a:255,ctor:function(){this.x=0,this.y=0,this.zOrder=0,this.skewX=0,this.skewY=0,this.scaleX=1,this.scaleY=1,this.tweenRotate=0,this.isUseColorInfo=!1,this.r=255,this.g=255,this.b=255,this.a=255},copy:function(a){this.x=a.x,this.y=a.y,this.zOrder=a.zOrder,this.scaleX=a.scaleX,this.scaleY=a.scaleY,this.skewX=a.skewX,this.skewY=a.skewY,this.tweenRotate=a.tweenRotate,this.isUseColorInfo=a.isUseColorInfo,this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a},setColor:function(a){this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a},getColor:function(){return cc.color(this.r,this.g,this.b,this.a)},subtract:function(a,b,c){this.x=b.x-a.x,this.y=b.y-a.y,this.scaleX=b.scaleX-a.scaleX,this.scaleY=b.scaleY-a.scaleY,this.skewX=b.skewX-a.skewX,this.skewY=b.skewY-a.skewY,this.isUseColorInfo||a.isUseColorInfo||b.isUseColorInfo?(this.a=b.a-a.a,this.r=b.r-a.r,this.g=b.g-a.g,this.b=b.b-a.b,this.isUseColorInfo=!0):(this.a=this.r=this.g=this.b=0,this.isUseColorInfo=!1),c&&(this.skewX>ccs.M_PI&&(this.skewX-=ccs.DOUBLE_PI),this.skewX<-ccs.M_PI&&(this.skewX+=ccs.DOUBLE_PI),this.skewY>ccs.M_PI&&(this.skewY-=ccs.DOUBLE_PI),this.skewY<-ccs.M_PI&&(this.skewY+=ccs.DOUBLE_PI)),b.tweenRotate&&(this.skewX+=b.tweenRotate*ccs.PI*2,this.skewY-=b.tweenRotate*ccs.PI*2)}}),ccs.DisplayData=ccs.Class.extend({displayType:ccs.DISPLAY_TYPE_MAX,displayName:"",ctor:function(){this.displayType=ccs.DISPLAY_TYPE_MAX},changeDisplayToTexture:function(a){var b=a,c=b.lastIndexOf(".");return-1!=c&&(b=b.substring(0,c)),b},copy:function(a){this.displayName=a.displayName,this.displayType=a.displayType}}),ccs.SpriteDisplayData=ccs.DisplayData.extend({skinData:null,ctor:function(){this.skinData=new ccs.BaseData,this.displayType=ccs.DISPLAY_TYPE_SPRITE},copy:function(a){ccs.DisplayData.prototype.copy.call(this,a),this.skinData=a.skinData}}),ccs.ArmatureDisplayData=ccs.DisplayData.extend({ctor:function(){this.displayName="",this.displayType=ccs.DISPLAY_TYPE_ARMATURE}}),ccs.ParticleDisplayData=ccs.DisplayData.extend({ctor:function(){this.displayType=ccs.DISPLAY_TYPE_PARTICLE}}),ccs.BoneData=ccs.BaseData.extend({displayDataList:null,name:"",parentName:"",boneDataTransform:null,ctor:function(){this.displayDataList=[],this.name="",this.parentName="",this.boneDataTransform=null},init:function(){return this.displayDataList.length=0,!0},addDisplayData:function(a){this.displayDataList.push(a)},getDisplayData:function(a){return this.displayDataList[a]}}),ccs.ArmatureData=ccs.Class.extend({boneDataDic:null,name:"",dataVersion:.1,ctor:function(){this.boneDataDic={},this.name="",this.dataVersion=.1},init:function(){return!0},addBoneData:function(a){this.boneDataDic[a.name]=a},getBoneDataDic:function(){return this.boneDataDic},getBoneData:function(a){return this.boneDataDic[a]}}),ccs.FrameData=ccs.BaseData.extend({duration:0,tweenEasing:0,easingParamNumber:0,easingParams:null,displayIndex:-1,movement:"",event:"",sound:"",soundEffect:"",blendFunc:null,frameID:0,isTween:!0,ctor:function(){ccs.BaseData.prototype.ctor.call(this),this.duration=1,this.tweenEasing=ccs.TweenType.linear,this.easingParamNumber=0,this.easingParams=[],this.displayIndex=0,this.movement="",this.event="",this.sound="",this.soundEffect="",this.blendFunc=new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST),this.frameID=0,this.isTween=!0},copy:function(a){if(ccs.BaseData.prototype.copy.call(this,a),this.duration=a.duration,this.displayIndex=a.displayIndex,this.tweenEasing=a.tweenEasing,this.easingParamNumber=a.easingParamNumber,0!=this.easingParamNumber){this.easingParams.length=0;for(var b=0;b<this.easingParamNumber;b++)this.easingParams[b]=a.easingParams[b]}this.blendFunc=a.blendFunc,this.isTween=a.isTween}}),ccs.MovementBoneData=ccs.Class.extend({delay:0,scale:1,duration:0,frameList:null,name:"",ctor:function(){this.delay=0,this.scale=1,this.duration=0,this.frameList=[],this.name=""},init:function(){return!0},addFrameData:function(a){this.frameList.push(a)},getFrameData:function(a){return this.frameList[a]}}),ccs.MovementData=function(){this.name="",this.duration=0,this.scale=1,this.durationTo=0,this.durationTween=0,this.loop=!0,this.tweenEasing=ccs.TweenType.linear,this.movBoneDataDic={}},ccs.MovementData.prototype.addMovementBoneData=function(a){this.movBoneDataDic[a.name]=a},ccs.MovementData.prototype.getMovementBoneData=function(a){return this.movBoneDataDic[a]},ccs.AnimationData=function(){this.movementDataDic={},this.movementNames=[],this.name=""},ccs.AnimationData.prototype.addMovement=function(a){this.movementDataDic[a.name]=a,this.movementNames.push(a.name)},ccs.AnimationData.prototype.getMovement=function(a){return this.movementDataDic[a]},ccs.AnimationData.prototype.getMovementCount=function(){return Object.keys(this.movementDataDic).length},ccs.ContourVertex2=function(a,b){this.x=a||0,this.y=b||0},ccs.ContourData=function(){this.vertexList=[]},ccs.ContourData.prototype.init=function(){return this.vertexList.length=0,!0},ccs.ContourData.prototype.addVertex=function(a){this.vertexList.push(a)},ccs.TextureData=function(){this.height=0,this.width=0,this.pivotX=.5,this.pivotY=.5,this.name="",this.contourDataList=[]},ccs.TextureData.prototype.init=function(){this.contourDataList.length=0},ccs.TextureData.prototype.addContourData=function(a){this.contourDataList.push(a)},ccs.TextureData.prototype.getContourData=function(a){return this.contourDataList[a]},ccs.DecorativeDisplay=ccs.Class.extend({_display:null,_colliderDetector:null,_displayData:null,ctor:function(){this._display=null,this._colliderDetector=null,this._displayData=null},init:function(){return!0},setDisplay:function(a){a._parent&&(a._parent.removeChild(a),delete a._parent),this._display=a},getDisplay:function(){return this._display},setColliderDetector:function(a){this._colliderDetector=a},getColliderDetector:function(){return this._colliderDetector},setDisplayData:function(a){this._displayData=a},getDisplayData:function(){return this._displayData},release:function(){this._display=null,this._displayData=null,this._colliderDetector=null}}),ccs.DecorativeDisplay.create=function(){return new ccs.DecorativeDisplay},ccs.displayFactory={addDisplay:function(a,b,c){switch(c.displayType){case ccs.DISPLAY_TYPE_SPRITE:this.addSpriteDisplay(a,b,c);break;case ccs.DISPLAY_TYPE_PARTICLE:this.addParticleDisplay(a,b,c);break;case ccs.DISPLAY_TYPE_ARMATURE:this.addArmatureDisplay(a,b,c)}},createDisplay:function(a,b){switch(b.getDisplayData().displayType){case ccs.DISPLAY_TYPE_SPRITE:this.createSpriteDisplay(a,b);break;case ccs.DISPLAY_TYPE_PARTICLE:this.createParticleDisplay(a,b);break;case ccs.DISPLAY_TYPE_ARMATURE:this.createArmatureDisplay(a,b)}},_helpTransform:{a:1,b:0,c:0,d:1,tx:0,ty:0},updateDisplay:function(a,b,c){var d=a.getDisplayRenderNode();if(d){switch(a.getDisplayRenderNodeType()){case ccs.DISPLAY_TYPE_SPRITE:c&&d.updateArmatureTransform();break;case ccs.DISPLAY_TYPE_PARTICLE:this.updateParticleDisplay(a,d,b);break;case ccs.DISPLAY_TYPE_ARMATURE:this.updateArmatureDisplay(a,d,b);break;default:var e=a.getNodeToArmatureTransform();d.setAdditionalTransform(e)}if((ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT||ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX)&&c){var f=a.getDisplayManager().getCurrentDecorativeDisplay(),g=f.getColliderDetector();if(g){var h=f.getDisplay(),i=h.nodeToParentTransform(),j=this._helpTransform;j.a=i.a,j.b=i.b,j.c=i.c,j.d=i.d,j.tx=i.tx,j.ty=i.ty;var k=cc.pointApplyAffineTransform(h.getAnchorPointInPoints(),j);j.tx=k.x,j.ty=k.y;var l=cc.affineTransformConcat(j,a.getArmature().nodeToParentTransform());g.updateTransform(l)}}}},addSpriteDisplay:function(a,b,c){var d=new ccs.SpriteDisplayData;d.copy(c),b.setDisplayData(d),this.createSpriteDisplay(a,b)},createSpriteDisplay:function(a,b){var c=null,d=b.getDisplayData(),e=d.displayName,f=e.lastIndexOf(".");if(-1!=f&&(e=e.substring(0,f)),c=""==e?new ccs.Skin:new ccs.Skin("#"+e+".png"),b.setDisplay(c),null!=c){c.setBone(a),this.initSpriteDisplay(a,b,d.displayName,c);var g=a.getArmature();g&&c.setSkinData(g.getArmatureData().dataVersion>=ccs.CONST_VERSION_COMBINED?d.skinData:a.boneData)}},initSpriteDisplay:function(a,b,c,d){var e=c,f=e.lastIndexOf(".");-1!=f&&(e=e.substring(0,f));var g=ccs.armatureDataManager.getTextureData(e);if(g&&d.setAnchorPoint(cc.p(g.pivotX,g.pivotY)),(ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT||ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX)&&g&&g.contourDataList.length>0){var h=new ccs.ColliderDetector(a);h.addContourDataList(g.contourDataList),b.setColliderDetector(h)}},addArmatureDisplay:function(a,b,c){var d=new ccs.ArmatureDisplayData;d.copy(c),b.setDisplayData(d),this.createArmatureDisplay(a,b)},createArmatureDisplay:function(a,b){var c=b.getDisplayData(),d=new ccs.Armature(c.displayName,a);b.setDisplay(d)},updateArmatureDisplay:function(a,b,c){b&&(b.sortAllChildren(),b.update(c))},addParticleDisplay:function(a,b,c){var d=new ccs.ParticleDisplayData;d.copy(c),b.setDisplayData(d),this.createParticleDisplay(a,b)},createParticleDisplay:function(a,b){var c=b.getDisplayData(),d=new cc.ParticleSystem(c.displayName);d.removeFromParent(),d.cleanup();var e=a.getArmature();e&&d.setParent(a.getArmature()),b.setDisplay(d)},updateParticleDisplay:function(a,b,c){var d=new ccs.BaseData;ccs.TransformHelp.matrixToNode(a.nodeToArmatureTransform(),d),b.setPosition(d.x,d.y),b.setScaleX(d.scaleX),b.setScaleY(d.scaleY),b.update(c)}},ccs.DisplayManager=ccs.Class.extend({_decoDisplayList:null,_currentDecoDisplay:null,_displayRenderNode:null,_displayIndex:null,_forceChangeDisplay:!1,_bone:null,_visible:!0,_displayType:null,ctor:function(a){this._decoDisplayList=[],this._currentDecoDisplay=null,this._displayRenderNode=null,this._displayIndex=null,this._forceChangeDisplay=!1,this._bone=null,this._visible=!0,this._displayType=ccs.DISPLAY_TYPE_MAX,a&&ccs.DisplayManager.prototype.init.call(this,a)},init:function(a){return this._bone=a,this.initDisplayList(a.getBoneData()),!0},addDisplay:function(a,b){var c,d=this._decoDisplayList;if(b>=0&&b<d.length?c=d[b]:(c=new ccs.DecorativeDisplay,d.push(c)),a instanceof ccs.DisplayData)return cc.displayFactory.addDisplay(this._bone,c,a),void(b==this._displayIndex&&(this._displayIndex=-1,this.changeDisplayWithIndex(b,!1)));var e=null;if(a instanceof ccs.Skin){a.setBone(this._bone),e=new ccs.SpriteDisplayData,ccs.displayFactory.initSpriteDisplay(this._bone,c,a.getDisplayName(),a);var f=c.getDisplayData();if(f instanceof ccs.SpriteDisplayData)a.setSkinData(f.skinData),e.skinData=f.skinData;else{for(var g=!1,h=d.length-2;h>=0;h--){var i=d[h],j=i.getDisplayData();if(j instanceof ccs.SpriteDisplayData){g=!0,a.setSkinData(j.skinData),e.skinData=j.skinData;break}}g||a.setSkinData(new ccs.BaseData)}}else if(a instanceof cc.ParticleSystem){e=new ccs.ParticleDisplayData,a.removeFromParent(),a.cleanup();var k=this._bone.getArmature();k&&a.setParent(k)}else a instanceof ccs.Armature?(e=new ccs.ArmatureDisplayData,e.displayName=a.getName(),a.setParentBone(this._bone)):e=new ccs.DisplayData;c.setDisplay(a),c.setDisplayData(e),b==this._displayIndex&&(this._displayIndex=-1,this.changeDisplayWithIndex(b,!1))},_addDisplayOther:function(a,b){var c=null;if(b instanceof ccs.Skin){var d=b;d.setBone(this._bone),c=new ccs.SpriteDisplayData,c.displayName=d.getDisplayName(),ccs.displayFactory.initSpriteDisplay(this._bone,a,d.getDisplayName(),d);var e=a.getDisplayData();if(e instanceof ccs.SpriteDisplayData)d.setSkinData(e.skinData);else{for(var f=!1,g=this._decoDisplayList.length-2;g>=0;g--){var h=this._decoDisplayList[g],i=h.getDisplayData();if(i){f=!0,d.setSkinData(i.skinData),c.skinData=i.skinData;break}}f||d.setSkinData(new ccs.BaseData),d.setSkinData(new ccs.BaseData)}}else b instanceof cc.ParticleSystem?(c=new ccs.ParticleDisplayData,c.displayName=b._plistFile):b instanceof ccs.Armature?(c=new ccs.ArmatureDisplayData,c.displayName=b.getName(),b.setParentBone(this._bone)):c=new ccs.DisplayData;a.setDisplay(b),a.setDisplayData(c)},removeDisplay:function(a){this._decoDisplayList.splice(a,1),a===this._displayIndex&&(this.setCurrentDecorativeDisplay(null),this._displayIndex=-1)},getDecorativeDisplayList:function(){return this._decoDisplayList},changeDisplayWithIndex:function(a,b){return a>=this._decoDisplayList.length?void cc.log("the index value is out of range"):(this._forceChangeDisplay=b,this._displayIndex!=a?(this._displayIndex=a,0>a?void(this._displayRenderNode&&(this._displayRenderNode.removeFromParent(!0),this.setCurrentDecorativeDisplay(null))):void this.setCurrentDecorativeDisplay(this._decoDisplayList[a])):void 0)},changeDisplayWithName:function(a,b){for(var c=this._decoDisplayList,d=0;d<c.length;d++)if(c[d].getDisplayData().displayName==a){this.changeDisplayWithIndex(d,b);break}},setCurrentDecorativeDisplay:function(a){var b=this._currentDecoDisplay;(ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT||ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX)&&b&&b.getColliderDetector()&&b.getColliderDetector().setActive(!1),this._currentDecoDisplay=a,b=this._currentDecoDisplay,(ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT||ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX)&&b&&b.getColliderDetector()&&b.getColliderDetector().setActive(!0);var c=b?b.getDisplay():null,d=this._displayRenderNode,e=this._bone;d&&(d instanceof ccs.Armature&&e.setChildArmature(null),d.removeFromParent(!0)),this._displayRenderNode=c,c?(c instanceof ccs.Armature?(this._bone.setChildArmature(c),c.setParentBone(this._bone)):c instanceof cc.ParticleSystem&&(c instanceof ccs.Armature?(e.setChildArmature(c),c.setParentBone(e)):c instanceof cc.ParticleSystem&&c.resetSystem()),c.setColor(e.getDisplayedColor()),c.setOpacity(e.getDisplayedOpacity()),this._displayRenderNode.setVisible(this._visible),this._displayType=this._currentDecoDisplay.getDisplayData().displayType):this._displayType=ccs.DISPLAY_TYPE_MAX,cc.renderer.childrenOrderDirty=!0},getDisplayRenderNode:function(){return this._displayRenderNode},getDisplayRenderNodeType:function(){return this._displayType},getCurrentDisplayIndex:function(){return this._displayIndex},getCurrentDecorativeDisplay:function(){return this._currentDecoDisplay},getDecorativeDisplayByIndex:function(a){return this._decoDisplayList[a]},initDisplayList:function(a){if(this._decoDisplayList.length=0,a)for(var b=a.displayDataList,c=this._decoDisplayList,d=this._bone,e=0;e<b.length;e++){var f=b[e],g=new ccs.DecorativeDisplay;g.setDisplayData(f),ccs.displayFactory.createDisplay(d,g),c.push(g)}},containPoint:function(a,b){if(!this._visible||this._displayIndex<0)return!1;if(void 0!==b&&(a=cc.p(a,b)),this._currentDecoDisplay.getDisplayData().displayType==ccs.DISPLAY_TYPE_SPRITE){var c=this._currentDecoDisplay.getDisplay();return c=c.getChildByTag(0),ccs.SPRITE_CONTAIN_POINT_WITH_RETURN(c,a)}return!1},setVisible:function(a){this._displayRenderNode&&(this._visible=a,this._displayRenderNode.setVisible(a))},isVisible:function(){return this._visible},getContentSize:function(){return this._displayRenderNode?this._displayRenderNode.getContentSize():cc.size(0,0)},getBoundingBox:function(){return this._displayRenderNode?this._displayRenderNode.getBoundingBox():cc.rect(0,0,0,0)},getAnchorPoint:function(){return this._displayRenderNode?this._displayRenderNode.getAnchorPoint():cc.p(0,0)},getAnchorPointInPoints:function(){return this._displayRenderNode?this._displayRenderNode.getAnchorPointInPoints():cc.p(0,0)},getForceChangeDisplay:function(){return this._forceChangeDisplay},release:function(){this._decoDisplayList=null,this._displayRenderNode&&(this._displayRenderNode.removeFromParent(!0),this._displayRenderNode=null)}}),ccs.DisplayManager.create=function(a){return new ccs.DisplayManager(a)},ccs.Skin=ccs.Sprite.extend({_skinData:null,bone:null,_skinTransform:null,_displayName:"",_armature:null,_className:"Skin",ctor:function(a,b){cc.Sprite.prototype.ctor.call(this),this._skinData=null,this.bone=null,this._displayName="",this._skinTransform=cc.affineTransformIdentity(),this._armature=null,null==a||""==a?ccs.Skin.prototype.init.call(this):"#"==a[0]?ccs.Skin.prototype.initWithSpriteFrameName.call(this,a.substr(1)):ccs.Skin.prototype.initWithFile.call(this,a,b)
},initWithSpriteFrameName:function(a){if(""==a)return!1;var b=cc.spriteFrameCache.getSpriteFrame(a),c=!0;return b?this.initWithSpriteFrame(b):(cc.log("Can't find CCSpriteFrame with %s. Please check your .plist file",a),c=!1),this._displayName=a,c},initWithFile:function(a,b){var c=b?cc.Sprite.prototype.initWithFile.call(this,a,b):cc.Sprite.prototype.initWithFile.call(this,a);return this._displayName=a,c},setSkinData:function(a){this._skinData=a,this.setScaleX(a.scaleX),this.setScaleY(a.scaleY),this.setRotationX(cc.radiansToDegrees(a.skewX)),this.setRotationY(cc.radiansToDegrees(-a.skewY)),this.setPosition(a.x,a.y);var b=this.getNodeToParentTransform?this.getNodeToParentTransform():this.nodeToParentTransform(),c=this._skinTransform;c.a=b.a,c.b=b.b,c.c=b.c,c.d=b.d,c.tx=b.tx,c.ty=b.ty,this.updateArmatureTransform()},getSkinData:function(){return this._skinData},updateArmatureTransform:function(){this._transform=cc.affineTransformConcat(this._skinTransform,this.bone.getNodeToArmatureTransform())},_updateTransformForWebGL:function(){var a=this._quad;if(this._visible){var b=this.getNodeToParentTransform?this.getNodeToParentTransform():this.nodeToParentTransform(),c=this._rect,d=this._offsetPosition.x,e=this._offsetPosition.y,f=d+c.width,g=e+c.height,h=b.tx,i=b.ty,j=b.a,k=b.b,l=b.d,m=-b.c,n=d*j-e*m+h,o=d*k+e*l+i,p=f*j-e*m+h,q=f*k+e*l+i,r=f*j-g*m+h,s=f*k+g*l+i,t=d*j-g*m+h,u=d*k+g*l+i,v=this._vertexZ;cc.SPRITEBATCHNODE_RENDER_SUBPIXEL||(n=0|n,o=0|o,p=0|p,q=0|q,r=0|r,s=0|s,t=0|t,u=0|u),this.SET_VERTEX3F(a.bl.vertices,n,o,v),this.SET_VERTEX3F(a.br.vertices,p,q,v),this.SET_VERTEX3F(a.tl.vertices,t,u,v),this.SET_VERTEX3F(a.tr.vertices,r,s,v)}else a.br.vertices=a.tl.vertices=a.tr.vertices=a.bl.vertices={x:0,y:0,z:0};this._textureAtlas&&this._textureAtlas.updateQuad(a,this._textureAtlas.getTotalQuads()),this._quadDirty=!0},SET_VERTEX3F:function(a,b,c,d){a.x=b,a.y=c,a.z=d},RENDER_IN_SUBPIXEL:function(a){return cc.SPRITEBATCHNODE_RENDER_SUBPIXEL?a:Math.ceil(a)},getNodeToWorldTransform:function(){return cc.affineTransformConcat(this._transform,this.bone.getArmature().getNodeToWorldTransform())},getNodeToWorldTransformAR:function(){var a=this._transform;return this._anchorPointInPoints=cc.pointApplyAffineTransform(this._anchorPointInPoints,a),a.tx=this._anchorPointInPoints.x,a.ty=this._anchorPointInPoints.y,cc.affineTransformConcat(a,this.bone.getArmature().nodeToWorldTransform())},setBone:function(a){this.bone=a;var b=this.bone.getArmature();b&&(this._armature=b)},getBone:function(){return this.bone},getDisplayName:function(){return this._displayName}}),cc._renderType==cc._RENDER_TYPE_WEBGL&&(ccs.Skin.prototype.updateTransform=ccs.Skin.prototype._updateTransformForWebGL);var _p=ccs.Skin.prototype;_p.skinData,cc.defineGetterSetter(_p,"skinData",_p.getSkinData,_p.setSkinData),_p.displayName,cc.defineGetterSetter(_p,"displayName",_p.getDisplayName),_p=null,ccs.Skin.create=function(a,b){return new ccs.Skin(a,b)},ccs.Skin.createWithSpriteFrameName=function(a){return new ccs.Skin("#"+a)},ccs.ANIMATION_TYPE_SINGLE_FRAME=-4,ccs.ANIMATION_TYPE_NO_LOOP=-3,ccs.ANIMATION_TYPE_TO_LOOP_FRONT=-2,ccs.ANIMATION_TYPE_TO_LOOP_BACK=-1,ccs.ANIMATION_TYPE_LOOP_FRONT=0,ccs.ANIMATION_TYPE_LOOP_BACK=1,ccs.ANIMATION_TYPE_MAX=2,ccs.ProcessBase=ccs.Class.extend({_processScale:1,_isComplete:!0,_isPause:!0,_isPlaying:!1,_currentPercent:0,_rawDuration:0,_loopType:0,_tweenEasing:0,animationInternal:null,_currentFrame:0,_durationTween:0,_nextFrameIndex:0,_curFrameIndex:null,_isLoopBack:!1,ctor:function(){this._processScale=1,this._isComplete=!0,this._isPause=!0,this._isPlaying=!1,this._currentFrame=0,this._currentPercent=0,this._durationTween=0,this._rawDuration=0,this._loopType=ccs.ANIMATION_TYPE_LOOP_BACK,this._tweenEasing=ccs.TweenType.linear,this.animationInternal=1/60,this._curFrameIndex=0,this._durationTween=0,this._isLoopBack=!1},pause:function(){this._isPause=!0,this._isPlaying=!1},resume:function(){this._isPause=!1,this._isPlaying=!0},stop:function(){this._isComplete=!0,this._isPlaying=!1},play:function(a,b,c,d){this._isComplete=!1,this._isPause=!1,this._isPlaying=!0,this._currentFrame=0,this._nextFrameIndex=a,this._tweenEasing=d},update:function(a){if(!this._isComplete&&!this._isPause&&!(this._rawDuration<=0||a>1)){var b=void 0===this._nextFrameIndex?0:this._nextFrameIndex,c=this._currentFrame;0>=b?(this._currentPercent=1,c=0):(c+=this._processScale*(a/this.animationInternal),this._currentPercent=c/b,c=ccs.fmodf(c,b)),this._currentFrame=c,this.updateHandler()}},gotoFrame:function(a){var b=this._loopType;b==ccs.ANIMATION_TYPE_NO_LOOP?b=ccs.ANIMATION_TYPE_MAX:b==ccs.ANIMATION_TYPE_TO_LOOP_FRONT&&(b=ccs.ANIMATION_TYPE_LOOP_FRONT),this._loopType=b,this._curFrameIndex=a,this._nextFrameIndex=this._durationTween},getCurrentFrameIndex:function(){return this._curFrameIndex=(this._rawDuration-1)*this._currentPercent,this._curFrameIndex},updateHandler:function(){},isPause:function(){return this._isPause},isComplete:function(){return this._isComplete},getCurrentPercent:function(){return this._currentPercent},getRawDuration:function(){return this._rawDuration},getLoop:function(){return this._loopType},getTweenEasing:function(){return this._tweenEasing},getAnimationInternal:function(){return this.animationInternal},setAnimationInternal:function(a){this.animationInternal=a},getProcessScale:function(){return this._processScale},setProcessScale:function(a){this._processScale=a},isPlaying:function(){return this._isPlaying}});var _p=ccs.ProcessBase.prototype;_p.currentFrameIndex,cc.defineGetterSetter(_p,"currentFrameIndex",_p.getCurrentFrameIndex),_p.paused,cc.defineGetterSetter(_p,"paused",_p.isPause),_p.completed,cc.defineGetterSetter(_p,"completed",_p.isComplete),_p.currentPercent,cc.defineGetterSetter(_p,"currentPercent",_p.getCurrentPercent),_p.rawDuration,cc.defineGetterSetter(_p,"rawDuration",_p.getRawDuration),_p.loop,cc.defineGetterSetter(_p,"loop",_p.getLoop),_p.tweenEasing,cc.defineGetterSetter(_p,"tweenEasing",_p.getTweenEasing),_p.playing,cc.defineGetterSetter(_p,"playing",_p.isPlaying),_p=null,ccs.MovementEventType={start:0,complete:1,loopComplete:2},ccs.AnimationEvent=ccs.Class.extend({_arguments:null,_callFunc:null,_selectorTarget:null,ctor:function(a,b,c){this._data=c,this._callFunc=a,this._selectorTarget=b},call:function(){this._callFunc&&this._callFunc.apply(this._selectorTarget,this._arguments)},setArguments:function(a){this._arguments=a}}),ccs.MovementEvent=function(){this.armature=null,this.movementType=ccs.MovementEventType.start,this.movementID=""},ccs.FrameEvent=function(){this.bone=null,this.frameEventName="",this.originFrameIndex=0,this.currentFrameIndex=0},ccs.ArmatureAnimation=ccs.ProcessBase.extend({_animationData:null,_movementData:null,_armature:null,_movementID:"",_toIndex:0,_tweenList:null,_speedScale:1,_ignoreFrameEvent:!1,_frameEventQueue:null,_movementEventQueue:null,_movementList:null,_onMovementList:!1,_movementListLoop:!1,_movementIndex:0,_movementListDurationTo:-1,_movementEventCallFunc:null,_frameEventCallFunc:null,_movementEventTarget:null,_frameEventTarget:null,_movementEventListener:null,_frameEventListener:null,ctor:function(a){ccs.ProcessBase.prototype.ctor.call(this),this._tweenList=[],this._movementList=[],this._frameEventQueue=[],this._movementEventQueue=[],this._armature=null,a&&ccs.ArmatureAnimation.prototype.init.call(this,a)},init:function(a){return this._armature=a,this._tweenList.length=0,!0},pause:function(){for(var a=this._tweenList,b=0;b<a.length;b++)a[b].pause();ccs.ProcessBase.prototype.pause.call(this)},resume:function(){for(var a=this._tweenList,b=0;b<a.length;b++)a[b].resume();ccs.ProcessBase.prototype.resume.call(this)},stop:function(){for(var a=this._tweenList,b=0;b<a.length;b++)a[b].stop();a.length=0,ccs.ProcessBase.prototype.stop.call(this)},setAnimationScale:function(a){this.setSpeedScale(a)},getAnimationScale:function(){return this.getSpeedScale()},setSpeedScale:function(a){if(a!=this._speedScale){this._speedScale=a,this._processScale=this._movementData?this._speedScale*this._movementData.scale:this._speedScale;var b=this._armature.getBoneDic();for(var c in b){var d=b[c];d.getTween().setProcessScale(this._processScale),d.getChildArmature()&&d.getChildArmature().getAnimation().setSpeedScale(this._processScale)}}},getSpeedScale:function(){return this._speedScale},play:function(a,b,c){cc.assert(this._animationData,"this.animationData can not be null"),this._movementData=this._animationData.getMovement(a),cc.assert(this._movementData,"this._movementData can not be null"),b=void 0===b?-1:b,c=void 0===c?-1:c,this._rawDuration=this._movementData.duration,this._movementID=a,this._processScale=this._speedScale*this._movementData.scale,b=-1==b?this._movementData.durationTo:b;var d=0==this._movementData.durationTween?this._rawDuration:this._movementData.durationTween,e=this._movementData.tweenEasing;c=0>c?this._movementData.loop:c,this._onMovementList=!1,ccs.ProcessBase.prototype.play.call(this,b,d,c,e),0==this._rawDuration?this._loopType=ccs.ANIMATION_TYPE_SINGLE_FRAME:(this._loopType=c?ccs.ANIMATION_TYPE_TO_LOOP_FRONT:ccs.ANIMATION_TYPE_NO_LOOP,this._durationTween=d);var f;this._tweenList=[];var g=this._armature.getBoneDic();for(var h in g){var i=g[h];f=this._movementData.movBoneDataDic[i.getName()];var j=i.getTween();f&&f.frameList.length>0?(this._tweenList.push(j),f.duration=this._movementData.duration,j.play(f,b,d,c,e),j.setProcessScale(this._processScale),i.getChildArmature()&&i.getChildArmature().getAnimation().setSpeedScale(this._processScale)):i.isIgnoreMovementBoneData()||(i.getDisplayManager().changeDisplayWithIndex(-1,!1),j.stop())}this._armature.update(0)},playByIndex:function(a,b,c,d){cc.log("playByIndex is deprecated. Use playWithIndex instead."),this.playWithIndex(a,b,d)},playWithIndex:function(a,b,c){var d=this._animationData.movementNames;cc.assert(a>-1&&a<d.length);var e=d[a];this.play(e,b,c)},playWithNames:function(a,b,c){b=void 0===b?-1:b,c=void 0===c?!0:c,this._movementListLoop=c,this._movementListDurationTo=b,this._onMovementList=!0,this._movementIndex=0,a instanceof Array?this._movementList=a:this._movementList.length=0,this.updateMovementList()},playWithIndexes:function(a,b,c){b=void 0===b?-1:b,c=void 0===c?!0:c,this._movementList.length=0,this._movementListLoop=c,this._movementListDurationTo=b,this._onMovementList=!0,this._movementIndex=0;for(var d=this._animationData.movementNames,e=0;e<a.length;e++){var f=d[a[e]];this._movementList.push(f)}this.updateMovementList()},gotoAndPlay:function(a){if(!this._movementData||0>a||a>=this._movementData.duration)return void cc.log("Please ensure you have played a movement, and the frameIndex is in the range.");var b=this._ignoreFrameEvent;this._ignoreFrameEvent=!0,this._isPlaying=!0,this._isComplete=this._isPause=!1,ccs.ProcessBase.prototype.gotoFrame.call(this,a),this._currentPercent=this._curFrameIndex/(this._movementData.duration-1),this._currentFrame=this._nextFrameIndex*this._currentPercent;for(var c=this._tweenList,d=0;d<c.length;d++)c[d].gotoAndPlay(a);this._armature.update(0),this._ignoreFrameEvent=b},gotoAndPause:function(a){this.gotoAndPlay(a),this.pause()},getMovementCount:function(){return this._animationData.getMovementCount()},update:function(a){ccs.ProcessBase.prototype.update.call(this,a);for(var b=this._tweenList,c=0;c<b.length;c++)b[c].update(a);for(var d,e=this._frameEventQueue;e.length>0;)d=e.shift(),this._ignoreFrameEvent=!0,this._frameEventCallFunc&&this._frameEventCallFunc.call(this._frameEventTarget,d.bone,d.frameEventName,d.originFrameIndex,d.currentFrameIndex),this._frameEventListener&&this._frameEventListener(d.bone,d.frameEventName,d.originFrameIndex,d.currentFrameIndex),this._ignoreFrameEvent=!1;for(var f=this._movementEventQueue;f.length>0;)d=f.shift(),this._movementEventCallFunc&&this._movementEventCallFunc.call(this._movementEventTarget,d.armature,d.movementType,d.movementID),this._movementEventListener&&this._movementEventListener(d.armature,d.movementType,d.movementID)},updateHandler:function(){var a=this._currentPercent;if(a>=1){switch(this._loopType){case ccs.ANIMATION_TYPE_NO_LOOP:if(this._loopType=ccs.ANIMATION_TYPE_MAX,this._currentFrame=(a-1)*this._nextFrameIndex,a=this._currentFrame/this._durationTween,1>a){this._nextFrameIndex=this._durationTween,this.movementEvent(this._armature,ccs.MovementEventType.start,this._movementID);break}break;case ccs.ANIMATION_TYPE_MAX:case ccs.ANIMATION_TYPE_SINGLE_FRAME:a=1,this._isComplete=!0,this._isPlaying=!1,this.movementEvent(this._armature,ccs.MovementEventType.complete,this._movementID),this.updateMovementList();break;case ccs.ANIMATION_TYPE_TO_LOOP_FRONT:this._loopType=ccs.ANIMATION_TYPE_LOOP_FRONT,a=ccs.fmodf(a,1),this._currentFrame=0==this._nextFrameIndex?0:ccs.fmodf(this._currentFrame,this._nextFrameIndex),this._nextFrameIndex=this._durationTween>0?this._durationTween:1,this.movementEvent(this,ccs.MovementEventType.start,this._movementID);break;default:this._currentFrame=ccs.fmodf(this._currentFrame,this._nextFrameIndex),this._toIndex=0,this.movementEvent(this._armature,ccs.MovementEventType.loopComplete,this._movementID)}this._currentPercent=a}},getCurrentMovementID:function(){return this._isComplete?"":this._movementID},setMovementEventCallFunc:function(a,b){1==arguments.length?this._frameEventListener=b:2==arguments.length&&(this._movementEventTarget=b,this._movementEventCallFunc=a)},setFrameEventCallFunc:function(a,b){1==arguments.length?this._frameEventListener=b:2==arguments.length&&(this._frameEventTarget=b,this._frameEventCallFunc=a)},setUserObject:function(a){this._userObject=a},frameEvent:function(a,b,c,d){if(this._frameEventTarget&&this._frameEventCallFunc||this._frameEventListener){var e=new ccs.FrameEvent;e.bone=a,e.frameEventName=b,e.originFrameIndex=c,e.currentFrameIndex=d,this._frameEventQueue.push(e)}},movementEvent:function(a,b,c){if(this._movementEventTarget&&this._movementEventCallFunc||this._movementEventListener){var d=new ccs.MovementEvent;d.armature=a,d.movementType=b,d.movementID=c,this._movementEventQueue.push(d)}},updateMovementList:function(){if(this._onMovementList){var a,b=this._movementList;this._movementListLoop?(a=b[this._movementIndex],this.play(a,a.durationTo,0),this._movementIndex++,this._movementIndex>=b.length&&(this._movementIndex=0)):this._movementIndex<b.length?(a=b[this._movementIndex],this.play(a,a.durationTo,0),this._movementIndex++):this._onMovementList=!1,this._onMovementList=!0}},setAnimationData:function(a){this._animationData!=a&&(this._animationData=a)},getAnimationData:function(){return this._animationData},getUserObject:function(){return this._userObject},isIgnoreFrameEvent:function(){return this._ignoreFrameEvent}});var _p=ccs.ArmatureAnimation.prototype;_p.speedScale,cc.defineGetterSetter(_p,"speedScale",_p.getSpeedScale,_p.setSpeedScale),_p.animationScale,cc.defineGetterSetter(_p,"animationScale",_p.getAnimationScale,_p.setAnimationScale),_p=null,ccs.ArmatureAnimation.create=function(a){return new ccs.ArmatureAnimation(a)},ccs.Tween=ccs.ProcessBase.extend({_tweenData:null,_to:null,_from:null,_between:null,_movementBoneData:null,_bone:null,_frameTweenEasing:0,_betweenDuration:0,_totalDuration:0,_toIndex:0,_fromIndex:0,_animation:null,_passLastFrame:!1,ctor:function(a){ccs.ProcessBase.prototype.ctor.call(this),this._frameTweenEasing=ccs.TweenType.linear,ccs.Tween.prototype.init.call(this,a)},init:function(a){return this._from=new ccs.FrameData,this._between=new ccs.FrameData,this._bone=a,this._tweenData=this._bone.getTweenData(),this._tweenData.displayIndex=-1,this._animation=null!=this._bone&&null!=this._bone.getArmature()?this._bone.getArmature().getAnimation():null,!0},play:function(a,b,c,d,e){ccs.ProcessBase.prototype.play.call(this,b,c,d,e),this._loopType=d?ccs.ANIMATION_TYPE_TO_LOOP_FRONT:ccs.ANIMATION_TYPE_NO_LOOP,this._totalDuration=0,this._betweenDuration=0,this._fromIndex=this._toIndex=0;var f=a!=this._movementBoneData;this.setMovementBoneData(a),this._rawDuration=this._movementBoneData.duration;var g=this._movementBoneData.getFrameData(0);this._tweenData.displayIndex=g.displayIndex,this._bone.getArmature().getArmatureData().dataVersion>=ccs.CONST_VERSION_COMBINED&&(ccs.TransformHelp.nodeSub(this._tweenData,this._bone.getBoneData()),this._tweenData.scaleX+=1,this._tweenData.scaleY+=1),0==this._rawDuration?(this._loopType=ccs.ANIMATION_TYPE_SINGLE_FRAME,0==b?this.setBetween(g,g):this.setBetween(this._tweenData,g),this._frameTweenEasing=ccs.TweenType.linear):this._movementBoneData.frameList.length>1&&(this._durationTween=c*this._movementBoneData.scale,d&&0!=this._movementBoneData.delay?this.setBetween(this._tweenData,this.tweenNodeTo(this.updateFrameData(1-this._movementBoneData.delay),this._between)):f&&0!=b?this.setBetween(this._tweenData,g):this.setBetween(g,g)),this.tweenNodeTo(0)},gotoAndPlay:function(a){ccs.ProcessBase.prototype.gotoFrame.call(this,a),this._totalDuration=0,this._betweenDuration=0,this._fromIndex=this._toIndex=0,this._isPlaying=!0,this._isComplete=this._isPause=!1,this._currentPercent=this._curFrameIndex/(this._rawDuration-1),this._currentFrame=this._nextFrameIndex*this._currentPercent},gotoAndPause:function(a){this.gotoAndPlay(a),this.pause()},updateHandler:function(){var a=this._currentPercent||1,b=this._loopType;if(a>=1)switch(b){case ccs.ANIMATION_TYPE_SINGLE_FRAME:a=1,this._isComplete=!0,this._isPlaying=!1;break;case ccs.ANIMATION_TYPE_NO_LOOP:if(b=ccs.ANIMATION_TYPE_MAX,a=this._durationTween<=0?1:(a-1)*this._nextFrameIndex/this._durationTween,a>=1){a=1,this._isComplete=!0,this._isPlaying=!1;break}this._nextFrameIndex=this._durationTween,this._currentFrame=a*this._nextFrameIndex,this._totalDuration=0,this._betweenDuration=0,this._fromIndex=this._toIndex=0;break;case ccs.ANIMATION_TYPE_TO_LOOP_FRONT:b=ccs.ANIMATION_TYPE_LOOP_FRONT,this._nextFrameIndex=this._durationTween>0?this._durationTween:1,0!=this._movementBoneData.delay?(this._currentFrame=(1-this._movementBoneData.delay)*this._nextFrameIndex,a=this._currentFrame/this._nextFrameIndex):(a=0,this._currentFrame=0),this._totalDuration=0,this._betweenDuration=0,this._fromIndex=this._toIndex=0;break;case ccs.ANIMATION_TYPE_MAX:a=1,this._isComplete=!0,this._isPlaying=!1;break;default:this._currentFrame=ccs.fmodf(this._currentFrame,this._nextFrameIndex)}1>a&&b<ccs.ANIMATION_TYPE_TO_LOOP_BACK&&(a=Math.sin(a*cc.PI/2)),this._currentPercent=a,this._loopType=b,b>ccs.ANIMATION_TYPE_TO_LOOP_BACK&&(a=this.updateFrameData(a)),this._frameTweenEasing!=ccs.TweenType.tweenEasingMax&&this.tweenNodeTo(a)},setBetween:function(a,b,c){void 0===c&&(c=!0);do{if(a.displayIndex<0&&b.displayIndex>=0){this._from.copy(b),this._between.subtract(b,b,c);break}if(b.displayIndex<0&&a.displayIndex>=0){this._from.copy(a),this._between.subtract(b,b,c);break}this._from.copy(a),this._between.subtract(a,b,c)}while(0);a.isTween||(this._tweenData.copy(a),this._tweenData.isTween=!0),this.arriveKeyFrame(a)},arriveKeyFrame:function(a){if(a){var b=this._bone,c=b.getDisplayManager(),d=a.displayIndex;c.getForceChangeDisplay()||c.changeDisplayWithIndex(d,!1),this._tweenData.zOrder=a.zOrder,b.updateZOrder(),this._bone.setBlendFunc(a.blendFunc);var e=b.getChildArmature();e&&""!=a.movement&&e.getAnimation().play(a.movement)}},tweenNodeTo:function(a,b){b||(b=this._tweenData);var c=this._from,d=this._between;return c.isTween||(a=0),b.x=c.x+a*d.x,b.y=c.y+a*d.y,b.scaleX=c.scaleX+a*d.scaleX,b.scaleY=c.scaleY+a*d.scaleY,b.skewX=c.skewX+a*d.skewX,b.skewY=c.skewY+a*d.skewY,this._bone.setTransformDirty(!0),b&&d.isUseColorInfo&&this.tweenColorTo(a,b),b},tweenColorTo:function(a,b){var c=this._from,d=this._between;b.a=c.a+a*d.a,b.r=c.r+a*d.r,b.g=c.g+a*d.g,b.b=c.b+a*d.b,this._bone.updateColor()},updateFrameData:function(a){a>1&&0!=this._movementBoneData.delay&&(a=ccs.fmodf(a,1));var b,c,d=(this._rawDuration-1)*a,e=this._totalDuration,f=this._betweenDuration,g=this._toIndex;if(e>d||d>=e+f){var h=this._movementBoneData.frameList,i=h.length;if(d<h[0].frameID)return b=c=h[0],this.setBetween(b,c),this._currentPercent;if(d>=h[i-1].frameID){if(this._passLastFrame)return b=c=h[i-1],this.setBetween(b,c),this._currentPercent;this._passLastFrame=!0}else this._passLastFrame=!1;do if(this._fromIndex=g,b=h[this._fromIndex],e=b.frameID,g=this._fromIndex+1,g>=i&&(g=0),c=h[g],b.strEvent&&!this._animation.isIgnoreFrameEvent()&&this._animation.frameEvent(this._bone,b.strEvent,b.frameID,d),d==b.frameID||this._passLastFrame&&this._fromIndex==i-1)break;while(d<b.frameID||d>=c.frameID);f=c.frameID-b.frameID,this._frameTweenEasing=b.tweenEasing,this.setBetween(b,c,!1),this._totalDuration=e,this._betweenDuration=f,this._toIndex=g}a=0==f?0:(d-this._totalDuration)/this._betweenDuration;var j=this._frameTweenEasing!=ccs.TweenType.linear?this._frameTweenEasing:this._tweenEasing;return j==ccs.TweenType.tweenEasingMax||j==ccs.TweenType.linear||this._passLastFrame||(a=ccs.TweenFunction.tweenTo(a,j,this._from.easingParams)),a},setAnimation:function(a){this._animation=a},getAnimation:function(){return this._animation},setMovementBoneData:function(a){this._movementBoneData=a}});var _p=ccs.Tween.prototype;_p.animation,cc.defineGetterSetter(_p,"animation",_p.getAnimation,_p.setAnimation),_p=null,ccs.Tween.create=function(a){return new ccs.Tween(a)},ccs.PT_RATIO=32,ccs.ColliderFilter=ccs.Class.extend({_collisionType:0,_group:0,_categoryBits:0,_groupIndex:0,_maskBits:0,ctor:function(a,b){this._collisionType=a||0,this._group=b||0},updateShape:function(a){if(a instanceof cp.Shape)a.collision_type=this._collisionType,a.group=this._group;else if(a instanceof Box2D.b2FilterData){var b=new Box2D.b2FilterData;b.categoryBits=this._categoryBits,b.groupIndex=this._groupIndex,b.maskBits=this._maskBits,a.SetFilterData(b)}}}),ccs.ColliderBody=ccs.Class.extend({shape:null,coutourData:null,colliderFilter:null,_calculatedVertexList:null,ctor:function(a){this.shape=null,this.coutourData=a,this.colliderFilter=new ccs.ColliderFilter,ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX&&(this._calculatedVertexList=[])},getContourData:function(){return this.coutourData},setColliderFilter:function(a){this.colliderFilter=a},getCalculatedVertexList:function(){return this._calculatedVertexList},setB2Fixture:function(a){this._fixture=a},getB2Fixture:function(){return this._fixture},setShape:function(a){this.shape=a},getShape:function(){return this.shape},setContourData:function(a){this.coutourData=a},getColliderFilter:function(){return this.colliderFilter}}),ccs.ColliderDetector=ccs.Class.extend({_colliderBodyList:null,_bone:null,_body:null,_active:!1,_filter:null,helpPoint:cc.p(0,0),ctor:function(a){this._colliderBodyList=[],this._bone=null,this._body=null,this._active=!1,this._filter=null,ccs.ColliderDetector.prototype.init.call(this,a)},init:function(a){return this._colliderBodyList.length=0,a&&(this._bone=a),this._filter=new ccs.ColliderFilter,!0},addContourData:function(a){var b=new ccs.ColliderBody(a);if(this._colliderBodyList.push(b),ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX)for(var c=b.getCalculatedVertexList(),d=a.vertexList,e=0;e<d.length;e++){var f=new ccs.ContourVertex2(0,0);c.push(f)}},addContourDataList:function(a){for(var b=0;b<a.length;b++)this.addContourData(a[b])},removeContourData:function(a){var b,c=[],d=this._colliderBodyList;for(b=0;b<d.length;b++){var e=d[b];e&&e.getContourData()==a&&c.push(e)}for(b=0;b<c.length;b++)cc.arrayRemoveObject(d,c[b])},removeAll:function(){this._colliderBodyList.length=0},setActive:function(a){if(this._active!=a){this._active=a;var b,c=this._body;if(c){var d=null;if(this._active)for(var e=0;e<this._colliderBodyList.length;e++)d=this._colliderBodyList[e],b=d.getShape(),c.space.addShape(b);else for(var e=0;e<this._colliderBodyList.length;e++)d=this._colliderBodyList[e],b=d.getShape(),c.space.removeShape(b)}}},getActive:function(){return this._active},getColliderBodyList:function(){return this._colliderBodyList},setColliderFilter:function(a){this._filter=a;for(var b=this._colliderBodyList,c=0;c<b.length;c++){var d=b[c];d.setColliderFilter(a),d.getShape()&&d.getColliderFilter().updateShape(d.getShape())}},getColliderFilter:function(){return this._filter},updateTransform:function(a){if(this._active)for(var b=null,c=this._body,d=this.helpPoint,e=0;e<this._colliderBodyList.length;e++){b=this._colliderBodyList[e];var f=b.getContourData(),g=null;c&&(g=b.getShape());for(var h=f.vertexList,i=b.getCalculatedVertexList(),j=0;j<h.length;j++){if(d.x=h[j].x,d.y=h[j].y,d=cc.pointApplyAffineTransform(d,a),ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX){var k=cc.p(0,0);k.x=d.x,k.y=d.y,i[j]=k}g&&(g.verts[2*j]=d.x,g.verts[2*j+1]=d.y)}if(g)for(var j=0;j<h.length;j++){var l=g.verts[(j+1)%g.verts.length],m=cp.v.normalize(cp.v.perp(cp.v.sub(l,g.verts[j])));g.planes&&(g.planes[j].n=m,g.planes[j].d=cp.v.dot(m,g.verts[j]))}}},setBody:function(a){this._body=a;for(var b,c=this._colliderBodyList,d=0;d<c.length;d++){b=c[d];for(var e=b.getContourData(),f=[],g=e.vertexList,h=0;h<g.length;h++){var i=g[h];f.push(i.x),f.push(i.y)}var j=new cp.PolyShape(this._body,f,cp.vzero);j.sensor=!0,j.data=this._bone,this._active&&this._body.space.addShape(j),b.setShape(j),b.getColliderFilter().updateShape(j)}},getBody:function(){return this._body}});var _p=ccs.ColliderDetector.prototype;_p.colliderFilter,cc.defineGetterSetter(_p,"colliderFilter",_p.getColliderFilter,_p.setColliderFilter),_p.active,cc.defineGetterSetter(_p,"active",_p.getActive,_p.setActive),_p.body,cc.defineGetterSetter(_p,"body",_p.getBody,_p.setBody),_p=null,ccs.ColliderDetector.create=function(a){return new ccs.ColliderDetector(a)},ccs.Armature=ccs.Node.extend({animation:null,armatureData:null,batchNode:null,_textureAtlas:null,_parentBone:null,_boneDic:null,_topBoneList:null,_armatureIndexDic:null,_offsetPoint:null,version:0,_armatureTransformDirty:!0,_body:null,_blendFunc:null,_className:"Armature",_realAnchorPointInPoints:null,ctor:function(a,b){cc.Node.prototype.ctor.call(this),this._name="",this._topBoneList=[],this._armatureIndexDic={},this._offsetPoint=cc.p(0,0),this._armatureTransformDirty=!0,this._realAnchorPointInPoints=cc.p(0,0),a&&ccs.Armature.prototype.init.call(this,a,b)},_initRendererCmd:function(){cc._renderType===cc._RENDER_TYPE_CANVAS?(this._rendererStartCmd=new cc.CustomRenderCmdCanvas(this,this._startRendererCmdForCanvas),this._rendererEndCmd=new cc.CustomRenderCmdCanvas(this,this._endRendererCmdForCanvas)):this._rendererCmd=new cc.ArmatureRenderCmdWebGL(this)},init:function(a,b){cc.Node.prototype.init.call(this),b&&(this._parentBone=b),this.removeAllChildren(),this.animation=new ccs.ArmatureAnimation,this.animation.init(this),this._boneDic={},this._topBoneList.length=0,this._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST},this._name=a||"";var c,d=ccs.armatureDataManager;if(""!=a){c=d.getAnimationData(a),cc.assert(c,"AnimationData not exist!"),this.animation.setAnimationData(c);var e=d.getArmatureData(a);cc.assert(e,"ArmatureData not exist!"),this.armatureData=e;var f=e.getBoneDataDic();for(var g in f){var h=this.createBone(String(g));do{var i=c.getMovement(c.movementNames[0]);if(!i)break;var j=i.getMovementBoneData(h.getName());if(!j||j.frameList.length<=0)break;var k=j.getFrameData(0);if(!k)break;h.getTweenData().copy(k),h.changeDisplayWithIndex(k.displayIndex,!1)}while(0)}this.update(0),this.updateOffsetPoint()}else this._name="new_armature",this.armatureData=new ccs.ArmatureData,this.armatureData.name=this._name,c=new ccs.AnimationData,c.name=this._name,d.addArmatureData(this._name,this.armatureData),d.addAnimationData(this._name,c),this.animation.setAnimationData(c);return cc._renderType===cc._RENDER_TYPE_WEBGL&&this.setShaderProgram(cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURECOLOR)),this.setCascadeOpacityEnabled(!0),this.setCascadeColorEnabled(!0),!0},createBone:function(a){var b=this.getBone(a);if(b)return b;var c=this.armatureData.getBoneData(a),d=c.parentName,e=null;return d?(this.createBone(d),e=new ccs.Bone(a),this.addBone(e,d)):(e=new ccs.Bone(a),this.addBone(e,"")),e.setBoneData(c),e.getDisplayManager().changeDisplayWithIndex(-1,!1),e},addBone:function(a,b){cc.assert(a,"Argument must be non-nil");var c=this._boneDic;if(a.getName()&&cc.assert(!c[a.getName()],"bone already added. It can't be added again"),b){var d=c[b];d?d.addChildBone(a):this._topBoneList.push(a)}else this._topBoneList.push(a);a.setArmature(this),c[a.getName()]=a,this.addChild(a)},removeBone:function(a,b){cc.assert(a,"bone must be added to the bone dictionary!"),a.setArmature(null),a.removeFromParent(b),cc.arrayRemoveObject(this._topBoneList,a),delete this._boneDic[a.getName()],this.removeChild(a,!0)},getBone:function(a){return this._boneDic[a]},changeBoneParent:function(a,b){cc.assert(a,"bone must be added to the bone dictionary!");var c=a.getParentBone();if(c&&(cc.arrayRemoveObject(c.getChildren(),a),a.setParentBone(null)),b){var d=this._boneDic[b];d?(d.addChildBone(a),cc.arrayRemoveObject(this._topBoneList,a)):this._topBoneList.push(a)}},getBoneDic:function(){return this._boneDic},updateOffsetPoint:function(){var a=this.getBoundingBox();this.setContentSize(a);var b=this._offsetPoint;b.x=-a.x,b.y=-a.y,0!=a.width&&0!=a.height&&this.setAnchorPoint(b.x/a.width,b.y/a.height)},setAnchorPoint:function(a,b){var c,d;void 0!==b?(c=a,d=b):(c=a.x,d=a.y);var e=this._anchorPoint;if(c!=e.x||d!=e.y){var f=this._contentSize;e.x=c,e.y=d,this._anchorPointInPoints.x=f.width*e.x-this._offsetPoint.x,this._anchorPointInPoints.y=f.height*e.y-this._offsetPoint.y,this._realAnchorPointInPoints.x=f.width*e.x,this._realAnchorPointInPoints.y=f.height*e.y,this.setNodeDirty()}},_setAnchorX:function(a){this._anchorPoint.x!==a&&(this._anchorPoint.x=a,this._anchorPointInPoints.x=this._contentSize.width*a-this._offsetPoint.x,this._realAnchorPointInPoints.x=this._contentSize.width*a,this.setNodeDirty())},_setAnchorY:function(a){this._anchorPoint.y!==a&&(this._anchorPoint.y=a,this._anchorPointInPoints.y=this._contentSize.height*a-this._offsetPoint.y,this._realAnchorPointInPoints.y=this._contentSize.height*a,this.setNodeDirty())},getAnchorPointInPoints:function(){return this._realAnchorPointInPoints},getOffsetPoints:function(){return{x:this._offsetPoint.x,y:this._offsetPoint.y}},setAnimation:function(a){this.animation=a},getAnimation:function(){return this.animation},getArmatureTransformDirty:function(){return this._armatureTransformDirty},update:function(a){this.animation.update(a);for(var b=this._topBoneList,c=0;c<b.length;c++)b[c].update(a);this._armatureTransformDirty=!1},draw:function(a){null==this._parentBone&&null==this._batchNode;for(var b=this._children,c=cc.BlendFunc.ALPHA_PREMULTIPLIED,d=cc.BlendFunc.ALPHA_NON_PREMULTIPLIED,e=0,f=b.length;f>e;e++){var g=b[e];if(g&&g.getDisplayRenderNode){var h=g.getDisplayRenderNode();if(null==h)continue;switch(cc._renderType===cc._RENDER_TYPE_WEBGL&&h.setShaderProgram(this._shaderProgram),g.getDisplayRenderNodeType()){case ccs.DISPLAY_TYPE_SPRITE:if(h instanceof ccs.Skin)if(cc._renderType===cc._RENDER_TYPE_WEBGL){h.updateTransform();var i=g.getBlendFunc();h.setBlendFunc(i.src!=c.src||i.dst!=c.dst?g.getBlendFunc():this._blendFunc.src!=c.src||this._blendFunc.dst!=c.dst||h.getTexture().hasPremultipliedAlpha()?this._blendFunc:d),h.draw(a)}else h.visit(a);break;case ccs.DISPLAY_TYPE_ARMATURE:h.draw(a);break;default:h.visit(a)}}else g instanceof cc.Node&&(cc._renderType===cc._RENDER_TYPE_WEBGL&&g.setShaderProgram(this._shaderProgram),g.visit(a))}},onEnter:function(){cc.Node.prototype.onEnter.call(this),this.scheduleUpdate()},onExit:function(){cc.Node.prototype.onExit.call(this),this.unscheduleUpdate()},visit:null,_visitForCanvas:function(a){var b=a||cc._renderContext;this._visible&&(b.save(),this.transform(b),this.sortAllChildren(),this._rendererStartCmd&&cc.renderer.pushRenderCommand(this._rendererStartCmd),this.draw(a),this._rendererEndCmd&&cc.renderer.pushRenderCommand(this._rendererEndCmd),this._cacheDirty=!1,b.restore())},_startRendererCmdForCanvas:function(a,b,c){var d=a||cc._renderContext;d.save(),this.transform(d);var e=this._transformWorld;a.transform(e.a,e.b,e.c,e.d,e.tx*b,-e.ty*c);
for(var f=this._children,g=0,h=f.length;h>g;g++){var i=f[g];if(i&&i.getDisplayRenderNode){var j=i.getDisplayRenderNode();if(null==j)continue;j._transformForRenderer()}}},_endRendererCmdForCanvas:function(a){var b=a||cc._renderContext;this._cacheDirty=!1,b.restore()},_visitForWebGL:function(){if(this._visible){var a=(cc._renderContext,cc.current_stack);a.stack.push(a.top),cc.kmMat4Assign(this._stackMatrix,a.top),a.top=this._stackMatrix,this.transform(),this.sortAllChildren(),cc.renderer.pushRenderCommand(this._rendererCmd),a.top=a.stack.pop()}},getBoundingBox:function(){for(var a,b,c,d=0,e=!0,f=cc.rect(0,0,0,0),g=this._children,h=g.length,i=0;h>i;i++){var j=g[i];if(j){var k=j.getDisplayManager().getBoundingBox();if(0==k.x&&0==k.y&&0==k.width&&0==k.height)continue;e?(a=k.x,b=k.y,c=k.x+k.width,d=k.y+k.height,e=!1):(a=k.x<f.x?k.x:f.x,b=k.y<f.y?k.y:f.y,c=k.x+k.width>f.x+f.width?k.x+k.width:f.x+f.width,d=k.y+k.height>f.y+f.height?k.y+k.height:f.y+f.height),f.x=a,f.y=b,f.width=c-a,f.height=d-b}}return cc.rectApplyAffineTransform(f,this.getNodeToParentTransform())},getBoneAtPoint:function(a,b){for(var c=this._children,d=c.length-1;d>=0;d--){var e=c[d];if(e instanceof ccs.Bone&&e.getDisplayManager().containPoint(a,b))return e}return null},setParentBone:function(a){this._parentBone=a;var b=this._boneDic;for(var c in b)b[c].setArmature(this)},getParentBone:function(){return this._parentBone},drawContour:function(){cc._drawingUtil.setDrawColor(255,255,255,255),cc._drawingUtil.setLineWidth(1);var a=this._boneDic;for(var b in a){var c=a[b],d=c.getColliderDetector();if(d)for(var e=d.getColliderBodyList(),f=0;f<e.length;f++){var g=e[f],h=g.getCalculatedVertexList();cc._drawingUtil.drawPoly(h,h.length,!0)}}},setBody:function(a){if(this._body!=a){this._body=a,this._body.data=this;for(var b,c,d=this._children,e=0;e<d.length;e++)if(b=d[e],b instanceof ccs.Bone)for(var f=b.getDisplayManager().getDecorativeDisplayList(),g=0;g<f.length;g++){c=f[g];var h=c.getColliderDetector();h&&h.setBody(this._body)}}},getShapeList:function(){return this._body?this._body.shapeList:null},getBody:function(){return this._body},setBlendFunc:function(a){this._blendFunc=a},getBlendFunc:function(){return this._blendFunc},setColliderFilter:function(a){var b=this._boneDic;for(var c in b)b[c].setColliderFilter(a)},getArmatureData:function(){return this.armatureData},setArmatureData:function(a){this.armatureData=a},getBatchNode:function(){return this.batchNode},setBatchNode:function(a){this.batchNode=a},getVersion:function(){return this.version},setVersion:function(a){this.version=a},_transformForRenderer:function(){ccs.Node.prototype._transformForRenderer.call(this);for(var a=this._children,b=0,c=a.length;c>b;b++){var d=a[b];if(d&&d.getDisplayRenderNode){var e=d.getDisplayRenderNode();if(null==e)continue;e._transformForRenderer()}}}}),ccs.Armature.prototype.visit=cc._renderType==cc._RENDER_TYPE_WEBGL?ccs.Armature.prototype._visitForWebGL:ccs.Armature.prototype._visitForCanvas;var _p=ccs.Armature.prototype;_p.parentBone,cc.defineGetterSetter(_p,"parentBone",_p.getParentBone,_p.setParentBone),_p.body,cc.defineGetterSetter(_p,"body",_p.getBody,_p.setBody),_p.colliderFilter,cc.defineGetterSetter(_p,"colliderFilter",null,_p.setColliderFilter),_p=null,ccs.Armature.create=function(a,b){return new ccs.Armature(a,b)},ccs.Bone=ccs.Node.extend({_boneData:null,_armature:null,_childArmature:null,_displayManager:null,ignoreMovementBoneData:!1,_tween:null,_tweenData:null,_parentBone:null,_boneTransformDirty:!1,_worldTransform:null,_blendFunc:null,blendDirty:!1,_worldInfo:null,_armatureParentBone:null,_dataVersion:0,_className:"Bone",ctor:function(a){cc.Node.prototype.ctor.call(this),this._tweenData=null,this._parentBone=null,this._armature=null,this._childArmature=null,this._boneData=null,this._tween=null,this._displayManager=null,this.ignoreMovementBoneData=!1,this._worldTransform=cc.affineTransformMake(1,0,0,1,0,0),this._boneTransformDirty=!0,this._blendFunc=new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST),this.blendDirty=!1,this._worldInfo=null,this._armatureParentBone=null,this._dataVersion=0,ccs.Bone.prototype.init.call(this,a)},init:function(a){return a&&(this._name=a),this._tweenData=new ccs.FrameData,this._tween=new ccs.Tween(this),this._displayManager=new ccs.DisplayManager(this),this._worldInfo=new ccs.BaseData,this._boneData=new ccs.BaseData,!0},setBoneData:function(a){cc.assert(a,"_boneData must not be null"),this._boneData!=a&&(this._boneData=a),this.setName(this._boneData.name),this._localZOrder=this._boneData.zOrder,this._displayManager.initDisplayList(a)},getBoneData:function(){return this._boneData},setArmature:function(a){this._armature=a,a?(this._tween.setAnimation(this._armature.getAnimation()),this._dataVersion=this._armature.getArmatureData().dataVersion,this._armatureParentBone=this._armature.getParentBone()):this._armatureParentBone=null},getArmature:function(){return this._armature},update:function(a){if(this._parentBone&&(this._boneTransformDirty=this._boneTransformDirty||this._parentBone.isTransformDirty()),this._armatureParentBone&&!this._boneTransformDirty&&(this._boneTransformDirty=this._armatureParentBone.isTransformDirty()),this._boneTransformDirty){var b=this._tweenData;this._dataVersion>=ccs.CONST_VERSION_COMBINED&&(ccs.TransformHelp.nodeConcat(b,this._boneData),b.scaleX-=1,b.scaleY-=1);var c=this._worldInfo;c.copy(b),c.x=b.x+this._position.x,c.y=b.y+this._position.y,c.scaleX=b.scaleX*this._scaleX,c.scaleY=b.scaleY*this._scaleY,c.skewX=b.skewX+this._skewX+cc.degreesToRadians(this._rotationX),c.skewY=b.skewY+this._skewY-cc.degreesToRadians(this._rotationY),this._parentBone?this._applyParentTransform(this._parentBone):this._armatureParentBone&&this._applyParentTransform(this._armatureParentBone),ccs.TransformHelp.nodeToMatrix(c,this._worldTransform),this._armatureParentBone&&(this._worldTransform=cc.affineTransformConcat(this._worldTransform,this._armature.getNodeToParentTransform()))}ccs.displayFactory.updateDisplay(this,a,this._boneTransformDirty||this._armature.getArmatureTransformDirty());for(var d=0;d<this._children.length;d++){var e=this._children[d];e.update(a)}this._boneTransformDirty=!1},_applyParentTransform:function(a){var b=this._worldInfo,c=a._worldTransform,d=a._worldInfo,e=b.x,f=b.y;b.x=e*c.a+f*c.c+d.x,b.y=e*c.b+f*c.d+d.y,b.scaleX=b.scaleX*d.scaleX,b.scaleY=b.scaleY*d.scaleY,b.skewX=b.skewX+d.skewX,b.skewY=b.skewY+d.skewY},setBlendFunc:function(a,b){var c,d,e=this._blendFunc;void 0===b?(c=a.src,d=a.dst):(c=a,d=b),(e.src!=c||e.dst!=d)&&(e.src=c,e.dst=d,this.blendDirty=!0)},updateDisplayedColor:function(a){this._realColor=cc.color(255,255,255),cc.Node.prototype.updateDisplayedColor.call(this,a),this.updateColor()},updateDisplayedOpacity:function(a){this._realOpacity=255,cc.Node.prototype.updateDisplayedOpacity.call(this,a),this.updateColor()},updateColor:function(){var a=this._displayManager.getDisplayRenderNode();null!=a&&(a.setColor(cc.color(this._displayedColor.r*this._tweenData.r/255,this._displayedColor.g*this._tweenData.g/255,this._displayedColor.b*this._tweenData.b/255)),a.setOpacity(this._displayedOpacity*this._tweenData.a/255))},updateZOrder:function(){if(this._armature.getArmatureData().dataVersion>=ccs.CONST_VERSION_COMBINED){var a=this._tweenData.zOrder+this._boneData.zOrder;this.setLocalZOrder(a)}else this.setLocalZOrder(this._tweenData.zOrder)},addChildBone:function(a){cc.assert(a,"Argument must be non-nil"),cc.assert(!a.parentBone,"child already added. It can't be added again"),this._children.indexOf(a)<0&&(this._children.push(a),a.setParentBone(this))},removeChildBone:function(a,b){if(this._children.length>0&&-1!=this._children.getIndex(a)){if(b)for(var c=a._children,d=0;d<c.length;d++){var e=c[d];a.removeChildBone(e,b)}a.setParentBone(null),a.getDisplayManager().setCurrentDecorativeDisplay(null),cc.arrayRemoveObject(this._children,a)}},removeFromParent:function(a){this._parentBone&&this._parentBone.removeChildBone(this,a)},setParentBone:function(a){this._parentBone=a},getParentBone:function(){return this._parentBone},setChildArmature:function(a){this._childArmature!=a&&(null==a&&this._childArmature&&this._childArmature.setParentBone(null),this._childArmature=a)},getChildArmature:function(){return this._childArmature},getTween:function(){return this._tween},setLocalZOrder:function(a){this._localZOrder!=a&&cc.Node.prototype.setLocalZOrder.call(this,a)},getNodeToArmatureTransform:function(){return this._worldTransform},getNodeToWorldTransform:function(){return cc.affineTransformConcat(this._worldTransform,this._armature.getNodeToWorldTransform())},getDisplayRenderNode:function(){return this._displayManager.getDisplayRenderNode()},getDisplayRenderNodeType:function(){return this._displayManager.getDisplayRenderNodeType()},addDisplay:function(a,b){return b=b||0,this._displayManager.addDisplay(a,b)},removeDisplay:function(a){this._displayManager.removeDisplay(a)},changeDisplayByIndex:function(a,b){cc.log("changeDisplayByIndex is deprecated. Use changeDisplayWithIndex instead."),this.changeDisplayWithIndex(a,b)},changeDisplayByName:function(a,b){cc.log("changeDisplayByName is deprecated. Use changeDisplayWithName instead."),this.changeDisplayWithName(a,b)},changeDisplayWithIndex:function(a,b){this._displayManager.changeDisplayWithIndex(a,b)},changeDisplayWithName:function(a,b){this._displayManager.changeDisplayWithName(a,b)},getColliderDetector:function(){var a=this._displayManager.getCurrentDecorativeDisplay();if(a){var b=a.getColliderDetector();if(b)return b}return null},setColliderFilter:function(a){for(var b=this._displayManager.getDecorativeDisplayList(),c=0;c<b.length;c++){var d=b[c],e=d.getColliderDetector();e&&e.setColliderFilter(a)}},getColliderFilter:function(){var a=this.displayManager.getCurrentDecorativeDisplay();if(a){var b=a.getColliderDetector();if(b)return b.getColliderFilter()}return null},setTransformDirty:function(a){this._boneTransformDirty=a},isTransformDirty:function(){return this._boneTransformDirty},getDisplayManager:function(){return this._displayManager},setIgnoreMovementBoneData:function(a){this._ignoreMovementBoneData=a},isIgnoreMovementBoneData:function(){return this._ignoreMovementBoneData},getBlendFunc:function(){return this._blendFunc},setBlendDirty:function(a){this._blendDirty=a},isBlendDirty:function(){return this._blendDirty},getTweenData:function(){return this._tweenData},getWorldInfo:function(){return this._worldInfo},getChildrenBone:function(){return this._children},nodeToArmatureTransform:function(){return this.getNodeToArmatureTransform()},nodeToWorldTransform:function(){return this.getNodeToWorldTransform()},getColliderBodyList:function(){var a=this.getColliderDetector();return a?a.getColliderBodyList():null},getIgnoreMovementBoneData:function(){return this.isIgnoreMovementBoneData()}});var _p=ccs.Bone.prototype;_p.boneData,cc.defineGetterSetter(_p,"boneData",_p.getBoneData,_p.setBoneData),_p.armature,cc.defineGetterSetter(_p,"armature",_p.getArmature,_p.setArmature),_p.childArmature,cc.defineGetterSetter(_p,"childArmature",_p.getChildArmature,_p.setChildArmature),_p.childrenBone,cc.defineGetterSetter(_p,"childrenBone",_p.getChildrenBone),_p.tween,cc.defineGetterSetter(_p,"tween",_p.getTween),_p.tweenData,cc.defineGetterSetter(_p,"tweenData",_p.getTweenData),_p.colliderFilter,cc.defineGetterSetter(_p,"colliderFilter",_p.getColliderFilter,_p.setColliderFilter),_p=null,ccs.Bone.create=function(a){return new ccs.Bone(a)},ccs.FRAME_TYPE_MOVE=0,ccs.FRAME_TYPE_SCALE=1,ccs.FRAME_TYPE_ROTATE=2,ccs.FRAME_TYPE_TINT=3,ccs.FRAME_TYPE_FADE=4,ccs.FRAME_TYPE_MAX=5,ccs.FrameEaseType={Custom:-1,Linear:0,Sine_EaseIn:1,Sine_EaseOut:2,Sine_EaseInOut:3,Quad_EaseIn:4,Quad_EaseOut:5,Quad_EaseInOut:6,Cubic_EaseIn:7,Cubic_EaseOut:8,Cubic_EaseInOut:9,Quart_EaseIn:10,Quart_EaseOut:11,Quart_EaseInOut:12,Quint_EaseIn:13,Quint_EaseOut:14,Quint_EaseInOut:15,Expo_EaseIn:16,Expo_EaseOut:17,Expo_EaseInOut:18,Circ_EaseIn:19,Circ_EaseOut:20,Circ_EaseInOut:21,Elastic_EaesIn:22,Elastic_EaesOut:23,Elastic_EaesInOut:24,Back_EaseIn:25,Back_EaseOut:26,Back_EaseInOut:27,Bounce_EaseIn:28,Bounce_EaseOut:29,Bounce_EaseInOut:30},ccs.ActionFrame=ccs.Class.extend({frameType:0,easingType:0,frameIndex:0,_Parameter:null,time:0,ctor:function(){this.frameType=0,this.easingType=ccs.FrameEaseType.Linear,this.frameIndex=0,this.time=0},getAction:function(){return cc.log("Need a definition of <getAction> for ActionFrame"),null},_getEasingAction:function(a){if(null===a)return console.error("Action cannot be null!"),null;var b;switch(this.easingType){case ccs.FrameEaseType.Custom:break;case ccs.FrameEaseType.Linear:b=a;break;case ccs.FrameEaseType.Sine_EaseIn:b=a.easing(cc.easeSineIn());break;case ccs.FrameEaseType.Sine_EaseOut:b=a.easing(cc.easeSineOut());break;case ccs.FrameEaseType.Sine_EaseInOut:b=a.easing(cc.easeSineInOut());break;case ccs.FrameEaseType.Quad_EaseIn:b=a.easing(cc.easeQuadraticActionIn());break;case ccs.FrameEaseType.Quad_EaseOut:b=a.easing(cc.easeQuadraticActionOut());break;case ccs.FrameEaseType.Quad_EaseInOut:b=a.easing(cc.easeQuadraticActionInOut());break;case ccs.FrameEaseType.Cubic_EaseIn:b=a.easing(cc.easeCubicActionIn());break;case ccs.FrameEaseType.Cubic_EaseOut:b=a.easing(cc.easeCubicActionOut());break;case ccs.FrameEaseType.Cubic_EaseInOut:b=a.easing(cc.easeCubicActionInOut());break;case ccs.FrameEaseType.Quart_EaseIn:b=a.easing(cc.easeQuarticActionIn());break;case ccs.FrameEaseType.Quart_EaseOut:b=a.easing(cc.easeQuarticActionOut());break;case ccs.FrameEaseType.Quart_EaseInOut:b=a.easing(cc.easeQuarticActionInOut());break;case ccs.FrameEaseType.Quint_EaseIn:b=a.easing(cc.easeQuinticActionIn());break;case ccs.FrameEaseType.Quint_EaseOut:b=a.easing(cc.easeQuinticActionOut());break;case ccs.FrameEaseType.Quint_EaseInOut:b=a.easing(cc.easeQuinticActionInOut());break;case ccs.FrameEaseType.Expo_EaseIn:b=a.easing(cc.easeExponentialIn());break;case ccs.FrameEaseType.Expo_EaseOut:b=a.easing(cc.easeExponentialOut());break;case ccs.FrameEaseType.Expo_EaseInOut:b=a.easing(cc.easeExponentialInOut());break;case ccs.FrameEaseType.Circ_EaseIn:b=a.easing(cc.easeCircleActionIn());break;case ccs.FrameEaseType.Circ_EaseOut:b=a.easing(cc.easeCircleActionOut());break;case ccs.FrameEaseType.Circ_EaseInOut:b=a.easing(cc.easeCircleActionInOut());break;case ccs.FrameEaseType.Elastic_EaesIn:b=a.easing(cc.easeElasticIn());break;case ccs.FrameEaseType.Elastic_EaesOut:b=a.easing(cc.easeElasticOut());break;case ccs.FrameEaseType.Elastic_EaesInOut:b=a.easing(cc.easeElasticInOut());break;case ccs.FrameEaseType.Back_EaseIn:b=a.easing(cc.easeBackIn());break;case ccs.FrameEaseType.Back_EaseOut:b=a.easing(cc.easeBackOut());break;case ccs.FrameEaseType.Back_EaseInOut:b=a.easing(cc.easeBackInOut());break;case ccs.FrameEaseType.Bounce_EaseIn:b=a.easing(cc.easeBounceIn());break;case ccs.FrameEaseType.Bounce_EaseOut:b=a.easing(cc.easeBounceOut());break;case ccs.FrameEaseType.Bounce_EaseInOut:b=a.easing(cc.easeBounceInOut())}return b},setEasingParameter:function(a){this._Parameter=[];for(var b=0;b<a.length;b++)this._Parameter.push(a[b])},setEasingType:function(a){this.easingType=a}}),ccs.ActionMoveFrame=ccs.ActionFrame.extend({_position:null,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this),this._position=cc.p(0,0),this.frameType=ccs.FRAME_TYPE_MOVE},setPosition:function(a,b){void 0===b?(this._position.x=a.x,this._position.y=a.y):(this._position.x=a,this._position.y=b)},getPosition:function(){return this._position},getAction:function(a){return this._getEasingAction(cc.moveTo(a,this._position))}}),ccs.ActionScaleFrame=ccs.ActionFrame.extend({_scaleX:1,_scaleY:1,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this),this._scaleX=1,this._scaleY=1,this.frameType=ccs.FRAME_TYPE_SCALE},setScaleX:function(a){this._scaleX=a},getScaleX:function(){return this._scaleX},setScaleY:function(a){this._scaleY=a},getScaleY:function(){return this._scaleY},getAction:function(a){return this._getEasingAction(cc.scaleTo(a,this._scaleX,this._scaleY))}}),ccs.ActionRotationFrame=ccs.ActionFrame.extend({_rotation:0,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this),this._rotation=0,this.frameType=ccs.FRAME_TYPE_ROTATE},setRotation:function(a){this._rotation=a},getRotation:function(){return this._rotation},getAction:function(a,b){if(void 0===b)return this._getEasingAction(cc.rotateTo(a,this._rotation));if(b instanceof cc.ActionRotationFrame){var c=this._rotation-b._rotation;return this._getEasingAction(cc.rotateBy(a,c))}return this.getAction(a)}}),ccs.ActionFadeFrame=ccs.ActionFrame.extend({_opacity:255,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this),this._opacity=255,this.frameType=ccs.FRAME_TYPE_FADE},setOpacity:function(a){this._opacity=a},getOpacity:function(){return this._opacity},getAction:function(a){return this._getEasingAction(cc.fadeTo(a,this._opacity))}}),ccs.ActionTintFrame=ccs.ActionFrame.extend({_color:null,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this),this._color=cc.color(255,255,255,255),this.frameType=ccs.FRAME_TYPE_TINT},setColor:function(a){var b=this._color;b.r=a.r,b.g=a.g,b.b=a.b},getColor:function(){var a=this._color;return cc.color(a.r,a.g,a.b,a.a)},getAction:function(a){return this._getEasingAction(cc.tintTo(a,this._color.r,this._color.g,this._color.b))}}),ccs.actionManager={_actionDic:{},initWithDictionary:function(a,b,c){for(var d=a,e=d.lastIndexOf("/"),f=d.substr(e+1,d.length),g=b.actionlist,h=[],i=0;i<g.length;i++){var j=new ccs.ActionObject,k=g[i];j.initWithDictionary(k,c),h.push(j)}this._actionDic[f]=h},getActionByName:function(a,b){var c=this._actionDic[a];if(!c)return null;for(var d=0;d<c.length;d++){var e=c[d];if(b==e.getName())return e}return null},playActionByName:function(a,b,c){var d=this.getActionByName(a,b);d&&d.play(c)},releaseActions:function(){this._actionDic={}},clear:function(){this._actionDic={}}},ccs.ActionNode=ccs.Class.extend({_currentFrameIndex:0,_destFrameIndex:0,_unitTime:0,_actionTag:0,_object:null,_actionSpawn:null,_action:null,_frameArray:null,_frameArrayNum:0,ctor:function(){this._currentFrameIndex=0,this._destFrameIndex=0,this._unitTime=.1,this._actionTag=0,this._object=null,this._actionSpawn=null,this._action=null,this._frameArray=[],this._frameArrayNum=ccs.FRAME_TYPE_MAX;for(var a=0;a<this._frameArrayNum;a++)this._frameArray.push([])},initWithDictionary:function(a,b){this.setActionTag(a.ActionTag);for(var c=a.actionframelist,d=0;d<c.length;d++){var e=c[d],f=e.frameid,g=e.tweenType;null==g&&(g=0);for(var h=e.tweenParameter,i=[],j=0;h>j;j++){var k=e.tweenParameter[j];i.push(k)}var l,m;if(void 0!==e.positionx){var n=e.positionx,o=e.positiony;l=new ccs.ActionMoveFrame,l.frameIndex=f,l.setEasingType(g),l.setEasingParameter(i),l.setPosition(n,o),m=this._frameArray[ccs.FRAME_TYPE_MOVE],m.push(l)}if(void 0!==e.scalex){var p=e.scalex,q=e.scaley;l=new ccs.ActionScaleFrame,l.frameIndex=f,l.setEasingType(g),l.setEasingParameter(i),l.setScaleX(p),l.setScaleY(q),m=this._frameArray[ccs.FRAME_TYPE_SCALE],m.push(l)}if(void 0!==e.rotation){var r=e.rotation;l=new ccs.ActionRotationFrame,l.frameIndex=f,l.setEasingType(g),l.setEasingParameter(i),l.setRotation(r),m=this._frameArray[ccs.FRAME_TYPE_ROTATE],m.push(l)}if(void 0!==e.opacity){var s=e.opacity;l=new ccs.ActionFadeFrame,l.frameIndex=f,l.setEasingType(g),l.setEasingParameter(i),l.setOpacity(s),m=this._frameArray[ccs.FRAME_TYPE_FADE],m.push(l)}if(void 0!==e.colorr){var t=e.colorr,u=e.colorg,v=e.colorb;l=new ccs.ActionTintFrame,l.frameIndex=f,l.setEasingType(g),l.setEasingParameter(i),l.setColor(cc.color(t,u,v)),m=this._frameArray[ccs.FRAME_TYPE_TINT],m.push(l)}e=null}this._initActionNodeFromRoot(b)},_initActionNodeFromRoot:function(a){if(a instanceof ccui.Widget){var b=ccui.helper.seekActionWidgetByActionTag(a,this.getActionTag());b&&this.setObject(b)}},setUnitTime:function(a){this._unitTime=a,this._refreshActionProperty()},getUnitTime:function(){return this._unitTime},setActionTag:function(a){this._actionTag=a},getActionTag:function(){return this._actionTag},setObject:function(a){this._object=a},getObject:function(){return this._object},getActionNode:function(){return this._object instanceof cc.Node?this._object:null},insertFrame:function(a,b){if(null!=b){var c=b.frameType,d=this._frameArray[c];d.splice(a,0,b)}},addFrame:function(a){if(a){var b=a.frameType,c=this._frameArray[b];c.push(a)}},deleteFrame:function(a){if(null!=a){var b=a.frameType,c=this._frameArray[b];cc.arrayRemoveObject(c,a)}},clearAllFrame:function(){for(var a=0;a<this._frameArrayNum;a++)this._frameArray[a].length=0},_refreshActionProperty:function(){if(null==this._object)return null;for(var a=[],b=0;b<this._frameArrayNum;b++){var c=this._frameArray[b];if(!(c.length<=0)){for(var d=[],e=0;e<c.length;e++){var f=c[e];if(0!=e){var g=c[e-1],h=(f.frameIndex-g.frameIndex)*this.getUnitTime(),i=f.getAction(h);i&&d.push(i)}}if(d){var j=cc.sequence(d);null!=j&&a.push(j)}}}return this._action=null,this._actionSpawn=cc.spawn(a),this._actionSpawn},playAction:function(a){null!=this._object&&null!=this._actionSpawn&&(this._action=a?cc.sequence(this._actionSpawn,a):cc.sequence(this._actionSpawn),this._runAction())},_runAction:function(){var a=this.getActionNode();null!=a&&null!=this._action&&a.runAction(this._action)},stopAction:function(){var a=this.getActionNode();null!=a&&null!=this._action&&(this._action.isDone()||a.stopAction(this._action))},getFirstFrameIndex:function(){for(var a=99999,b=!1,c=this._frameArray,d=0,e=this._frameArrayNum;e>d;d++){var f=c[d];if(!(f.length<=0)){b=!0;var g=f[0].frameIndex;a=a>g?g:a}}return b||(a=0),a},getLastFrameIndex:function(){for(var a=-1,b=!1,c=this._frameArray,d=0,e=this._frameArrayNum;e>d;d++){var f=c[d];if(!(f.length<=0)){b=!0;var g=f[f.length-1],h=g.frameIndex;a=h>a?h:a}}return b||(a=0),a},updateActionToTimeLine:function(a){for(var b=!1,c=this.getUnitTime(),d=0;d<this._frameArrayNum;d++){var e=this._frameArray[d];if(null!=e)for(var f=0;f<e.length;f++){var g=e[f];if(g.frameIndex*c==a){this._easingToFrame(1,1,g),b=!0;break}if(g.frameIndex*c>a){if(0==f)this._easingToFrame(1,1,g),b=!1;else{var h=e[f-1],i=(g.frameIndex-h.frameIndex)*c,j=a-h.frameIndex*c;this._easingToFrame(i,1,h),this._easingToFrame(i,j/i,g),b=!0}break}}}return b},_easingToFrame:function(a,b,c){var d=c.getAction(a),e=this.getActionNode();null!=d&&null!=e&&(d.startWithTarget(e),d.update(b))},isActionDoneOnce:function(){return null==this._action?!0:this._action.isDone()}}),ccs.ActionObject=ccs.Class.extend({_actionNodeList:null,_name:"",_loop:!1,_pause:!1,_playing:!1,_unitTime:0,_currentTime:0,_scheduler:null,_callback:null,_fTotalTime:0,ctor:function(){this._actionNodeList=[],this._name="",this._loop=!1,this._pause=!1,this._playing=!1,this._unitTime=.1,this._currentTime=0,this._fTotalTime=0,this._scheduler=cc.director.getScheduler()},setName:function(a){this._name=a},getName:function(){return this._name},setLoop:function(a){this._loop=a},getLoop:function(){return this._loop},setUnitTime:function(a){this._unitTime=a;for(var b=this._actionNodeList.length,c=0;b>c;c++){var d=this._actionNodeList[c];d.setUnitTime(this._unitTime)}},getUnitTime:function(){return this._unitTime},getCurrentTime:function(){return this._currentTime},setCurrentTime:function(a){this._currentTime=a},getTotalTime:function(){return this._fTotalTime},isPlaying:function(){return this._playing},initWithDictionary:function(a,b){this.setName(a.name),this.setLoop(a.loop),this.setUnitTime(a.unittime);for(var c=a.actionnodelist,d=0,e=0;e<c.length;e++){var f=new ccs.ActionNode,g=c[e];f.initWithDictionary(g,b),f.setUnitTime(this.getUnitTime()),this._actionNodeList.push(f);var h=f.getLastFrameIndex()-f.getFirstFrameIndex();h>d&&(d=h)}this._fTotalTime=d*this._unitTime},addActionNode:function(a){a&&(this._actionNodeList.push(a),a.setUnitTime(this._unitTime))},removeActionNode:function(a){null!=a&&cc.arrayRemoveObject(this._actionNodeList,a)},play:function(a){this.stop(),this.updateToFrameByTime(0);for(var b=this._actionNodeList,c=b.length,d=0;c>d;d++)b[d].playAction(a);this._loop&&this._scheduler.scheduleCallbackForTarget(this,this.simulationActionUpdate,0,cc.REPEAT_FOREVER,0,!1),void 0!==a&&(this._callback=a)},pause:function(){this._pause=!0,this._playing=!1},stop:function(){for(var a=this._actionNodeList,b=0;b<a.length;b++)a[b].stopAction();this._scheduler.unscheduleCallbackForTarget(this,this.simulationActionUpdate),this._pause=!1,this._playing=!1},updateToFrameByTime:function(a){this._currentTime=a;for(var b=0;b<this._actionNodeList.length;b++){var c=this._actionNodeList[b];c.updateActionToTimeLine(a)}},simulationActionUpdate:function(){for(var a=!0,b=this._actionNodeList,c=0,d=b.length;d>c;c++)if(!b[c].isActionDoneOnce()){a=!1;break}a&&(null!=this._callback&&this._callback.execute(),this._loop?this.play():(this._playing=!1,this._scheduler.unschedule(this.simulationActionUpdate,this)))}}),ccs.ComAttribute=ccs.Component.extend({_jsonDict:null,_filePath:"",ctor:function(){cc.Component.prototype.ctor.call(this),this._jsonDict={},this._filePath="",this._name="CCComAttribute",ccs.ComAttribute.prototype.init.call(this)},init:function(){return this._jsonDict={},!0},setInt:function(a,b){return a?void(this._jsonDict[a]=b):void cc.log("Argument must be non-nil")},setDouble:function(a,b){return a?void(this._jsonDict[a]=b):void cc.log("Argument must be non-nil")},setFloat:function(a,b){return a?void(this._jsonDict[a]=b):void cc.log("Argument must be non-nil")},setBool:function(a,b){return a?void(this._jsonDict[a]=b):void cc.log("Argument must be non-nil")},setString:function(a,b){return a?void(this._jsonDict[a]=b):void cc.log("Argument must be non-nil")},setObject:function(a,b){return a?void(this._jsonDict[a]=b):void cc.log("Argument must be non-nil")},getInt:function(a){var b=this._jsonDict[a];return parseInt(b||0)},getDouble:function(a){var b=this._jsonDict[a];return parseFloat(b||0)},getFloat:function(a){var b=this._jsonDict[a];return parseFloat(b||0)},getBool:function(a){var b=this._jsonDict[a];return Boolean(b||!1)},getString:function(a){var b=this._jsonDict[a];return b||""},getObject:function(a){return this._jsonDict[a]},parse:function(a){this._jsonDict=cc.loader.getRes(a)}}),ccs.ComAttribute.create=function(){return new ccs.ComAttribute},ccs.ComAudio=ccs.Component.extend({_filePath:"",_loop:!1,ctor:function(){cc.Component.prototype.ctor.call(this),this._name="Audio",ccs.ComAudio.prototype.init.call(this)},init:function(){return!0},onExit:function(){this.stopBackgroundMusic(!0),this.stopAllEffects()},end:function(){cc.audioEngine.end()},preloadBackgroundMusic:function(a){cc.loader.load(a)},playBackgroundMusic:function(a,b){a?cc.audioEngine.playMusic(a,b):cc.audioEngine.playMusic(this._filePath,this._loop)},stopBackgroundMusic:function(a){cc.audioEngine.stopMusic(a)},pauseBackgroundMusic:function(){cc.audioEngine.pauseMusic()},resumeBackgroundMusic:function(){cc.audioEngine.resumeMusic()},rewindBackgroundMusic:function(){cc.audioEngine.rewindMusic()},willPlayBackgroundMusic:function(){return cc.audioEngine.willPlayMusic()},isBackgroundMusicPlaying:function(){return cc.audioEngine.isMusicPlaying()},getBackgroundMusicVolume:function(){return cc.audioEngine.getMusicVolume()},setBackgroundMusicVolume:function(a){cc.audioEngine.setMusicVolume(a)},getEffectsVolume:function(){return cc.audioEngine.getEffectsVolume()},setEffectsVolume:function(a){cc.audioEngine.setEffectsVolume(a)},playEffect:function(a,b){return a?cc.audioEngine.playEffect(a,b):cc.audioEngine.playEffect(this._filePath,this._loop)},pauseEffect:function(a){cc.audioEngine.pauseEffect(a)},pauseAllEffects:function(){cc.audioEngine.pauseAllEffects()},resumeEffect:function(a){cc.audioEngine.resumeEffect(a)},resumeAllEffects:function(){cc.audioEngine.resumeAllEffects()},stopEffect:function(a){cc.audioEngine.stopEffect(a)},stopAllEffects:function(){cc.audioEngine.stopAllEffects()},preloadEffect:function(a){cc.loader.getRes(a),this.setFile(a),this.setLoop(!1)},unloadEffect:function(a){cc.audioEngine.unloadEffect(a)},setFile:function(a){this._filePath=a},setLoop:function(a){this._loop=a},getFile:function(){return this._filePath},isLoop:function(){return this._loop}}),ccs.ComAudio.create=function(){return new ccs.ComAudio},ccs.ComController=ccs.Component.extend({ctor:function(){cc.Component.prototype.ctor.call(this),this._name="ComController",ccs.ComController.prototype.init.call(this)},onEnter:function(){null!=this._owner&&this._owner.scheduleUpdate()},isEnabled:function(){return this._enabled},setEnabled:function(a){this._enabled=a}}),ccs.ComController.create=function(){return new ccs.ComController},ccs.ComRender=ccs.Component.extend({_render:null,ctor:function(a,b){cc.Component.prototype.ctor.call(this),this._render=a,this._name=b,this.isRenderer=!0,ccs.ComRender.prototype.init.call(this)},onEnter:function(){this._owner&&this._owner.addChild(this._render)},onExit:function(){this._owner&&(this._owner.removeChild(this._render,!0),this._render=null)},getNode:function(){return this._render},setNode:function(a){this._render=a}}),ccs.ComRender.create=function(a,b){return new ccs.ComRender(a,b)},ccs.objectFactory={_typeMap:{},createObject:function(a){var b=null,c=this._typeMap[a];return c&&(b=cc.isFunction(c._fun)?new c._fun:c._fun),b},registerType:function(a){this._typeMap[a._className]=a},createGUI:function(a){var b=null;"Panel"===a?a="Layout":"TextArea"===a?a="Label":"TextButton"===a&&(a="Button");var c=this._typeMap[a];return c&&c._fun&&(b=c._fun),b},removeAll:function(){this._typeMap={}}},ccs.TInfo=ccs.Class.extend({_className:"",_fun:null,ctor:function(a,b){b?(this._className=a,this._fun=b):(this._className=a._className,this._fun=a._fun),ccs.objectFactory.registerType(this)}}),ccs.sendEvent=function(a){var b=ccs.triggerManager.get(a);if(null!=b)for(var c=0;c<b.length;c++){var d=b[c];null!=d&&d.detect()&&d.done()}},ccs.registerTriggerClass=function(a,b){new ccs.TInfo(a,b)},ccs.triggerManager={_eventTriggers:{},_triggerObjs:{},_movementDispatches:[],parse:function(a){for(var b=0;b<a.length;++b){var c=a[b],d=new ccs.TriggerObj;d.serialize(c);for(var e=d.getEvents(),f=0;f<e.length;f++){var g=e[f];this.add(g,d)}this._triggerObjs[d.getId()]=d}},get:function(a){return this._eventTriggers[a]},getTriggerObj:function(a){return this._triggerObjs[a]},add:function(a,b){var c=this._eventTriggers[a];c||(c=[]),-1==c.indexOf(b)&&(c.push(b),this._eventTriggers[a]=c)},removeAll:function(){for(var a in this._eventTriggers)for(var b=this._eventTriggers[a],c=0;c<b.length;c++){var d=b[c];d.removeAll()}this._eventTriggers={}},remove:function(a,b){if(b)return this._removeObj(a,b);var c=!1;do{var d=this._eventTriggers[a];if(!d)break;for(var e=0;e<d.length;e++){var f=d[e];f&&f.removeAll()}delete this._eventTriggers[a],c=!0}while(0);return c},_removeObj:function(a,b){var c=!1;do{var d=this._eventTriggers[a];if(!d)break;for(var e=0;e<d.length;e++){var f=d[e];if(f&&f==b){f.removeAll(),d.splice(e,1);break}}c=!0}while(0);return c},removeTriggerObj:function(a){var b=this.getTriggerObj(a);if(!b)return!1;for(var c=b.getEvents(),d=0;d<c.length;d++){var e=c[d];this.remove(e,b)}return!0},isEmpty:function(){return!this._eventTriggers||this._eventTriggers.length<=0},addArmatureMovementCallBack:function(a,b,c){if(null!=a&&null!=c&&null!=b){for(var d,e=!1,f=0;f<this._movementDispatches.length;f++)d=this._movementDispatches[f],d&&d[0]==a&&(d.addAnimationEventCallBack(b,c),e=!0);if(!e){var g=new ccs.ArmatureMovementDispatcher;a.getAnimation().setMovementEventCallFunc(g.animationEvent,g),g.addAnimationEventCallBack(b,c),this._movementDispatches.push([a,g])}}},removeArmatureMovementCallBack:function(a,b,c){if(null!=a&&null!=b&&null!=c)for(var d,e=0;e<this._movementDispatches.length;e++)d=this._movementDispatches[e],d&&d[0]==a&&d.removeAnimationEventCallBack(c,b)},removeArmatureAllMovementCallBack:function(a){if(null!=a)for(var b,c=0;c<this._movementDispatches.length;c++)if(b=this._movementDispatches[c],b&&b[0]==a){this._movementDispatches.splice(c,1);break}},removeAllArmatureMovementCallBack:function(){this._movementDispatches.length=0
},version:function(){return"1.2.0.0"}},ccs.ArmatureMovementDispatcher=ccs.Class.extend({_mapEventAnimation:null,ctor:function(){this._mapEventAnimation=[]},animationEvent:function(a,b,c){for(var d,e,f,g=0;g<this._mapEventAnimation.length;g++)d=this._mapEventAnimation[g],e=d[0],f=d[1],f&&f.call(e,a,b,c)},addAnimationEventCallBack:function(a,b){this._mapEventAnimation.push([b,a])},removeAnimationEventCallBack:function(a,b){for(var c,d=0;d<this._mapEventAnimation.length;d++)c=this._mapEventAnimation[d],c[0]==b&&this._mapEventAnimation.splice(d,1)}}),ccs.BaseTriggerCondition=ccs.Class.extend({ctor:function(){},init:function(){return!0},detect:function(){return!0},serialize:function(){},removeAll:function(){}}),ccs.BaseTriggerAction=ccs.Class.extend({ctor:function(){},init:function(){return!0},done:function(){},serialize:function(){},removeAll:function(){}}),ccs.TriggerObj=ccs.Class.extend({_cons:null,_acts:null,_id:0,_enable:!0,_vInt:null,ctor:function(){this._id=0,this._enable=!0,ccs.TriggerObj.prototype.init.call(this)},init:function(){return this._cons=[],this._acts=[],this._vInt=[],!0},detect:function(){if(!this._enable||0==this._cons.length)return!0;for(var a=!0,b=null,c=0;c<this._cons.length;c++)b=this._cons[c],b&&b.detect&&(a=a&&b.detect());return a},done:function(){if(this._enable&&0!=this._acts.length)for(var a,b=0;b<this._acts.length;b++)a=this._acts[b],a&&a.done&&a.done()},removeAll:function(){for(var a=null,b=0;b<this._cons.length;b++)a=this._cons[b],a&&a.removeAll();this._cons=[];for(var b=0;b<this._acts.length;b++)a=this._acts[b],a&&a.removeAll();this._acts=[]},serialize:function(a){this._id=a.id||0;for(var b=a.conditions||[],c=0;c<b.length;c++){var d=b[c],e=d.classname,f=ccs.objectFactory.createObject(e);f?(f.serialize(d),f.init(),this._cons.push(f)):cc.log("class named classname("+e+") can not implement!")}for(var g=a.actions||[],c=0;c<g.length;c++){var d=g[c],e=d.classname,h=ccs.objectFactory.createObject(e);h?(h.serialize(d),h.init(),this._acts.push(h)):cc.log("class named classname("+e+") can not implement!")}for(var i=a.events||[],c=0;c<i.length;c++){var d=i[c],j=d.id;0>j||this._vInt.push(j)}},getId:function(){return this._id},setEnable:function(a){this._enable=a},getEvents:function(){return this._vInt}}),ccs.TriggerObj.create=function(){return new ccs.TriggerObj},ccs.buttonReader={setPropsFromJsonDictionary:function(a,b){ccs.widgetReader.setPropsFromJsonDictionary.call(this,a,b);var c=ccs.uiReader.getFilePath(),d=a,e=b.scale9Enable;d.setScale9Enabled(e);var f=b.normalData,g=f.resourceType;switch(g){case 0:var h=c,i=f.path,j=i&&""!==i?h+i:null;d.loadTextureNormal(j);break;case 1:var i=f.path;d.loadTextureNormal(i,1)}var k=b.pressedData,l=k.resourceType;switch(l){case 0:var m=c,n=k.path,o=n&&""!==n?m+n:null;d.loadTexturePressed(o);break;case 1:var n=k.path;d.loadTexturePressed(n,1)}var p=b.disabledData,q=p.resourceType;switch(q){case 0:var r=c,s=p.path,t=s&&""!==s?r+s:null;d.loadTextureDisabled(t);break;case 1:var s=p.path;d.loadTextureDisabled(s,1)}if(e){var u=b.capInsetsX,v=b.capInsetsY,w=b.capInsetsWidth,x=b.capInsetsHeight;d.setCapInsets(cc.rect(u,v,w,x));var y=b.scale9Width,z=b.scale9Height;null!=y&&null!=z&&d.setSize(cc.size(y,z))}var A=b.text;null!=A&&d.setTitleText(A);var B=b.textColorR,C=b.textColorG,D=b.textColorB,E=null!==B?b.textColorR:255,F=null!==C?b.textColorG:255,G=null!==D?b.textColorB:255;d.setTitleColor(cc.color(E,F,G));var H=b.fontSize;null!=H&&d.setTitleFontSize(b.fontSize);var I=b.fontName;I&&d.setTitleFontName(b.fontName),ccs.widgetReader.setColorPropsFromJsonDictionary.call(this,a,b)},setPropsFromProtocolBuffers:function(a,b){ccs.widgetReader.setPropsFromProtocolBuffers.call(this,a,b);var c=a,d=b.buttonOptions,e=ccs.uiReader.getFilePath(),f=d.scale9Enable;c.setScale9Enabled(f);var g=d.normalData,h=g.resourceType,i=ccs.widgetReader.getResourcePath(g.path,h);c.loadTextureNormal(i,h);var j=d.pressedData,k=j.resourceType,l=ccs.widgetReader.getResourcePath(j.path,k);c.loadTexturePressed(l,k);var m=d.disabledData,n=m.resourceType,o=ccs.widgetReader.getResourcePath(m.path,n);if(c.loadTextureDisabled(o,n),f){c.setUnifySizeEnabled(!1),c.ignoreContentAdaptWithSize(!1);var p=d.capInsetsX,q=d.capInsetsY,r=d.capInsetsWidth,s=d.capInsetsHeight;c.setCapInsets(cc.rect(p,q,r,s));var t=d.scale9Width,u=d.scale9Height;t&&u&&c.setContentSize(cc.size(t,u))}var v=d.text;v&&c.setTitleText(v);var w=null!==d.textColorR?d.textColorR:255,x=null!==d.textColorG?d.textColorG:255,y=null!==d.textColorB?d.textColorB:255;c.setTitleColor(cc.color(w,x,y));var z=null!==d.fontSize?d.fontSize:14;c.setTitleFontSize(z);var A=!0;null!==d.displaystate&&(A=d.displaystate),c.setBright(A);var B=null!==d.fontName?d.fontName:"";if(c.setTitleFontName(B),d.fontResource){var C=d.fontResource;c.setTitleFontName(e+C.path)}var D=b.widgetOptions;c.setColor(cc.color(D.colorR,D.colorG,D.colorB)),c.setOpacity(null!==D.Alpha?D.Alpha:255),ccs.widgetReader.setColorPropsFromProtocolBuffers.call(this,a,b)}},ccs.checkBoxReader={setPropsFromJsonDictionary:function(a,b){ccs.widgetReader.setPropsFromJsonDictionary.call(this,a,b);var c=a,d=b.backGroundBoxData,e=d.resourceType,f=ccs.widgetReader._getResourcePath(d,"path",e);c.loadTextureBackGround(f,e);var g=b.backGroundBoxSelectedData,h=g.resourceType,i=ccs.widgetReader._getResourcePath(g,"path",h);i||(h=e,i=f),c.loadTextureBackGroundSelected(i,h);var j=b.frontCrossData,k=j.resourceType,l=ccs.widgetReader._getResourcePath(j,"path",k);c.loadTextureFrontCross(l,k);var m=b.backGroundBoxDisabledData,n=m.resourceType,o=ccs.widgetReader._getResourcePath(m,"path",n);o||(n=k,o=l),c.loadTextureBackGroundDisabled(o,n);var p=b.frontCrossDisabledData,q=p.resourceType,r=ccs.widgetReader._getResourcePath(p,"path",q);c.loadTextureFrontCrossDisabled(r,q),b.selectedState&&c.setSelected(b.selectedState),ccs.widgetReader.setColorPropsFromJsonDictionary.call(this,a,b)},setPropsFromProtocolBuffers:function(a,b){ccs.widgetReader.setPropsFromProtocolBuffers.call(this,a,b);var c=a,d=b.checkBoxOptions,e=ccs.uiReader.getFilePath(),f=d.backGroundBoxData,g=f.resourceType;1==g&&cc.spriteFrameCache.addSpriteFrames(e+f.plistFile);var h=ccs.widgetReader.getResourcePath(f.path,g);c.loadTextureBackGround(h,g);var i=d.backGroundBoxSelectedData,j=i.resourceType,k=ccs.widgetReader.getResourcePath(i.path,j);c.loadTextureBackGroundSelected(k,j);var l=d.frontCrossData,m=l.resourceType,n=ccs.widgetReader.getResourcePath(l.path,m);c.loadTextureFrontCross(n,m);var o=d.backGroundBoxDisabledData,p=o.resourceType,q=ccs.widgetReader.getResourcePath(o.path,p);c.loadTextureBackGroundDisabled(q,p);var r=d.frontCrossDisabledData,s=r.resourceType,t=ccs.widgetReader.getResourcePath(r.path,s);c.loadTextureFrontCrossDisabled(t,s),c.setSelected(d.selectedState);var u=!0;null!==d.displaystate&&(u=d.displaystate),c.setBright(u),ccs.widgetReader.setColorPropsFromProtocolBuffers.call(this,a,b)},getResourceType:function(a){return"Normal"==a||"Default"==a||"MarkedSubImage"==a?0:1}},ccs.imageViewReader={setPropsFromJsonDictionary:function(a,b){ccs.widgetReader.setPropsFromJsonDictionary.call(this,a,b);var c=ccs.uiReader.getFilePath(),d=a,e=b.fileNameData,f=e.resourceType;switch(f){case 0:var g=c,h=e.path,i=null;h&&""!==h&&(i=g+h,d.loadTexture(i));break;case 1:var h=e.path;d.loadTexture(h,1)}var j=b.scale9Enable,k=!1;if(j&&(k=b.scale9Enable),d.setScale9Enabled(k),k){var l=b.scale9Width,m=b.scale9Height;if(l&&m){var n=b.scale9Width,o=b.scale9Height;d.setSize(cc.size(n,o))}var p=b.capInsetsX,q=b.capInsetsY,r=b.capInsetsWidth,s=b.capInsetsHeight;d.setCapInsets(cc.rect(p,q,r,s))}ccs.widgetReader.setColorPropsFromJsonDictionary.call(this,a,b)},setPropsFromProtocolBuffers:function(a,b){ccs.widgetReader.setPropsFromProtocolBuffers.call(this,a,b);var c=b.imageViewOptions,d=a,e=(ccs.uiReader.getFilePath(),c.fileNameData),f=e.resourceType,g=ccs.widgetReader.getResourcePath(e.path,f);d.loadTexture(g,f);var h=null!==c.scale9Enable,i=!1;if(h&&(i=c.scale9Enable),d.setScale9Enabled(i),i){d.setUnifySizeEnabled(!1),d.ignoreContentAdaptWithSize(!1);var j=null!==c.scale9width?c.scale9Width:80,k=null!==c.scale9height?c.scale9Height:80;d.setContentSize(cc.size(j,k));var l=c.capInsetsX,m=c.capInsetsY,n=null!==c.capInsetsWidth?c.capInsetsWidth:1,o=null!==c.capInsetsHeight?c.capInsetsHeight:1;d.setCapInsets(cc.rect(l,m,n,o))}ccs.widgetReader.setColorPropsFromProtocolBuffers.call(this,a,b);var p=c.flippedX,q=c.flippedY;0!=p&&d.setFlippedX(p),0!=q&&d.setFlippedY(q)}},ccs.labelAtlasReader={setPropsFromJsonDictionary:function(a,b){ccs.widgetReader.setPropsFromJsonDictionary.call(this,a,b);var c=ccs.uiReader.getFilePath(),d=a,e=b.stringValue,f=b.charMapFileData,g=b.itemWidth,h=b.itemHeight,i=b.startCharMap;if(null!=e&&f&&null!=g&&null!=h&&null!=i){var j=b.charMapFileData,k=j.resourceType;switch(k){case 0:var l=c,m=j.path,n=l+m;d.setProperty(e,n,g,h,i);break;case 1:cc.log("Wrong res type of LabelAtlas!")}}ccs.widgetReader.setColorPropsFromJsonDictionary.call(this,a,b)},setPropsFromProtocolBuffers:function(a,b){ccs.widgetReader.setPropsFromProtocolBuffers.call(this,a,b);var c=ccs.uiReader.getFilePath(),d=a,e=b.textAtlasOptions,f=e.charMapFileData,g=f.resourceType;switch(g){case 0:var h=c,i=f.path,j=h+=i,k=null!==e.stringValue?e.stringValue:"12345678",l=null!==e.itemWidth?e.itemWidth:24,m=null!==e.itemHeight?e.itemHeight:32;d.setProperty(k,j,l,m,e.startCharMap);break;case 1:cc.log("Wrong res type of LabelAtlas!")}ccs.widgetReader.setColorPropsFromProtocolBuffers.call(this,a,b)}},ccs.labelBMFontReader={setPropsFromJsonDictionary:function(a,b){ccs.widgetReader.setPropsFromJsonDictionary.call(this,a,b);var c=ccs.uiReader.getFilePath(),d=a,e=b.fileNameData,f=e.resourceType;switch(f){case 0:var g=c,h=e.path,i=g+h;d.setFntFile(i);break;case 1:cc.log("Wrong res type of LabelAtlas!")}var j=b.text;d.setString(j),ccs.widgetReader.setColorPropsFromJsonDictionary.call(this,a,b)},setPropsFromProtocolBuffers:function(a,b){ccs.widgetReader.setPropsFromProtocolBuffers.call(this,a,b);var c=ccs.uiReader.getFilePath(),d=a,e=b.textBMFontOptions;if(e){var f=e.fileNameData,g=f.resourceType;switch(g){case 0:var h=c,i=f.path,j=h+i;d.setFntFile(j);break;case 1:cc.log("Wrong res type of LabelAtlas!")}var k=null!==e.text?e.text:"Text Label";d.setString(k)}ccs.widgetReader.setColorPropsFromProtocolBuffers.call(this,a,b)}},ccs.labelReader={setPropsFromJsonDictionary:function(a,b){ccs.widgetReader.setPropsFromJsonDictionary.call(this,a,b);var c=a,d=b.touchScaleEnable;c.setTouchScaleChangeEnabled(d);var e=b.text;c.setString(e);var f=b.fontSize;null!=f&&c.setFontSize(b.fontSize);var g=b.fontName;null!=g&&c.setFontName(b.fontName);var h=b.areaWidth,i=b.areaHeight;if(null!=h&&null!=i){var j=cc.size(b.areaWidth,b.areaHeight);c.setTextAreaSize(j)}var k=b.hAlignment;null!=k&&c.setTextHorizontalAlignment(b.hAlignment);var l=b.vAlignment;null!=l&&c.setTextVerticalAlignment(b.vAlignment),ccs.widgetReader.setColorPropsFromJsonDictionary.call(this,a,b)},setPropsFromProtocolBuffers:function(a,b){var c=a,d=b.textOptions,e=d.IsCustomSize;c.ignoreContentAdaptWithSize(!e),ccs.widgetReader.setPropsFromProtocolBuffers.call(this,a,b),c.setUnifySizeEnabled(!1);var f=ccs.uiReader.getFilePath(),g=d.touchScaleEnable;c.setTouchScaleChangeEnabled(g);var h=null!==d.text?d.text:"Text Label";c.setString(h);var i=null!==d.fontSize?d.fontSize:20;c.setFontSize(i);var j=null!==d.fontName?d.fontName:"";c.setFontName(j);var k=d.areaWidth,l=d.areaHeight;if(null!==k&&null!==l){var m=cc.size(k,l);c.setTextAreaSize(m)}var n=d.hAlignment;n&&c.setTextHorizontalAlignment(n);var o=d.vAlignment;if(o&&c.setTextVerticalAlignment(o),d.fontResource){var p=d.fontResource;c.setFontName(f+p.path)}ccs.widgetReader.setColorPropsFromProtocolBuffers.call(this,a,b)}},ccs.layoutReader={setPropsFromJsonDictionary:function(a,b){ccs.widgetReader.setPropsFromJsonDictionary.call(this,a,b);var c=ccs.uiReader.getFilePath(),d=a,e=0,f=0,g=b.adaptScreen;if(g){var h=cc.director.getWinSize();e=h.width,f=h.height}else e=b.width,f=b.height;d.setSize(cc.size(e,f)),d.setClippingEnabled(b.clipAble);var i=b.backGroundScale9Enable;d.setBackGroundImageScale9Enabled(i);var j=b.bgColorR,k=b.bgColorG,l=b.bgColorB,m=b.bgStartColorR,n=b.bgStartColorG,o=b.bgStartColorB,p=b.bgEndColorR,q=b.bgEndColorG,r=b.bgEndColorB,s=b.vectorX,t=b.vectorY;d.setBackGroundColorVector(cc.p(s,t));var u=b.bgColorOpacity,v=b.colorType;d.setBackGroundColorType(v),d.setBackGroundColor(cc.color(m,n,o),cc.color(p,q,r)),d.setBackGroundColor(cc.color(j,k,l)),d.setBackGroundColorOpacity(u);var w=b.backGroundImageData;if(w){var x=w.resourceType;switch(x){case 0:var y=c,z=w.path,A=z&&""!==z?y+z:null;d.setBackGroundImage(A);break;case 1:var z=w.path;d.setBackGroundImage(z,1)}}if(i){var B=b.capInsetsX,C=b.capInsetsY,D=b.capInsetsWidth,E=b.capInsetsHeight;d.setBackGroundImageCapInsets(cc.rect(B,C,D,E))}d.setLayoutType(b.layoutType),ccs.widgetReader.setColorPropsFromJsonDictionary.call(this,a,b)},setPropsFromProtocolBuffers:function(a,b){ccs.widgetReader.setPropsFromProtocolBuffers.call(this,a,b);var c=a,d=b.PanelOptions;if(d){{ccs.uiReader.getFilePath()}c.setClippingEnabled(d.clipAble);var e=d.backGroundScale9Enable;c.setBackGroundImageScale9Enabled(e);var f,g,h,i,j,k,l,m,n;a instanceof ccui.PageView?(f=150,g=150,h=150,i=255,j=255,k=255,l=255,m=150,n=100):a instanceof ccui.ListView?(f=150,g=150,h=255,i=255,j=255,k=255,l=150,m=150,n=255):a instanceof ccui.ScrollView?(f=255,g=150,h=100,i=255,j=255,k=255,l=255,m=150,n=100):(f=150,g=200,h=255,i=255,j=255,k=255,l=150,m=200,n=255),f=null!==d.bgColorR?d.bgColorR:f,g=null!==d.bgColorG?d.bgColorG:g,h=null!==d.bgColorB?d.bgColorB:h,i=null!==d.bgStartColorR?d.bgStartColorR:i,j=null!==d.bgStartColorG?d.bgStartColorG:j,k=null!==d.bgStartColorB?d.bgStartColorB:k,l=null!==d.bgEndColorR?d.bgEndColorR:l,m=null!==d.bgEndColorG?d.bgEndColorG:m,n=null!==d.bgEndColorB?d.bgEndColorB:n;var o=0,p=-.5;null!==d.vectorX&&(o=d.vectorX),d.vectorY&&(p=d.vectorY),c.setBackGroundColorVector(cc.p(o,p));var q=null!==d.bgColorOpacity?d.bgColorOpacity:100,r=null!==d.colorType?d.colorType:1;c.setBackGroundColorType(r),c.setBackGroundColor(cc.color(i,j,k),cc.color(l,m,n)),c.setBackGroundColor(cc.color(f,g,h)),c.setBackGroundColorOpacity(q);var s=d.backGroundImageData;if(s){var t=s.resourceType,u=ccs.widgetReader.getResourcePath(s.path,t);c.setBackGroundImage(u,t)}if(e){var v=d.scale9Width,w=d.scale9Height;null!=v&&null!==w&&c.setContentSize(cc.size(v,w))}c.setLayoutType(d.layoutType);var x=b.widgetOptions,y=null!==x.colorR?x.colorR:255,z=null!==x.colorG?x.colorG:255,A=null!==x.colorB?x.colorB:255;c.setColor(cc.color(y,z,A));var B=null!==x.Alpha?x.Alpha:255;c.setOpacity(B),ccs.widgetReader._setAnchorPointForWidget(a,b);var C=x.flipX,D=x.flipY;a.setFlippedX(C),a.setFlippedY(D)}}},ccs.scrollViewReader={setPropsFromJsonDictionary:function(a,b){ccs.layoutReader.setPropsFromJsonDictionary.call(this,a,b);var c=a,d=null!=b.innerWidth?b.innerWidth:200,e=null!=b.innerHeight?b.innerHeight:200;c.setInnerContainerSize(cc.size(d,e));var f=null!=b.direction?b.direction:1;c.setDirection(f),c.setBounceEnabled(b.bounceEnable),ccs.widgetReader.setColorPropsFromJsonDictionary.call(this,a,b)},setPropsFromProtocolBuffers:function(a,b){ccs.widgetReader.setPropsFromProtocolBuffers.call(this,a,b);{var c=a,d=b.scrollViewOptions;ccs.uiReader.getFilePath()}c.setClippingEnabled(d.clipAble);var e=d.backGroundScale9Enable;c.setBackGroundImageScale9Enabled(e);var f,g,h,i,j,k,l,m,n;f=null!==d.bgColorR?d.bgColorR:255,g=null!==d.bgColorG?d.bgColorG:150,h=null!==d.bgColorB?d.bgColorB:100,i=null!==d.bgStartColorR?d.bgStartColorR:255,j=null!==d.bgStartColorG?d.bgStartColorG:255,k=null!==d.bgStartColorB?d.bgStartColorB:255,l=null!==d.bgEndColorR?d.bgEndColorR:255,m=null!==d.bgEndColorG?d.bgEndColorG:150,n=null!==d.bgEndColorB?d.bgEndColorB:100;var o=0,p=-.5;d.vectorX&&(o=d.vectorX),null!==d.vectorY&&(p=d.vectorY),c.setBackGroundColorVector(cc.p(o,p));var q=null!==d.bgColorOpacity?d.bgColorOpacity:100,r=d.colorType?d.colorType:1;c.setBackGroundColorType(r),c.setBackGroundColor(cc.color(i,j,k),cc.color(l,m,n)),c.setBackGroundColor(cc.color(f,g,h)),c.setBackGroundColorOpacity(q);var s=d.backGroundImageData;if(s){var t=s.resourceType,u=ccs.widgetReader.getResourcePath(s.path,t);c.setBackGroundImage(u,t)}if(e){var v=d.capInsetsX,w=d.capInsetsY,x=null!==d.capInsetsWidth?d.capInsetsWidth:1,y=null!==d.capInsetsHeight?d.capInsetsHeight:1;c.setBackGroundImageCapInsets(cc.rect(v,w,x,y));var z=d.scale9Width,A=d.scale9Height;null!=z&&null!=A&&c.setContentSize(cc.size(z,A))}c.setLayoutType(d.layoutType);var B=b.widgetOptions,C=null!==B.colorR?B.colorR:255,D=B.colorG?B.colorG:255,E=B.colorB?B.colorB:255;c.setColor(cc.color(C,D,E));var F=null!==B.Alpha?B.Alpha:255;c.setOpacity(F);var G=null!==d.innerWidth?d.innerWidth:200,H=null!==d.innerHeight?d.innerHeight:200;c.setInnerContainerSize(cc.size(G,H));var I=null!==d.direction?d.direction:1;c.setDirection(I),c.setBounceEnabled(d.bounceenAble),ccs.widgetReader.setAnchorPointForWidget(a,b);var J=B.flipX,K=B.flipY;a.setFlippedX(J),a.setFlippedY(K)}},ccs.listViewReader={setPropsFromJsonDictionary:function(a,b){ccs.scrollViewReader.setPropsFromJsonDictionary.call(this,a,b);var c=a,d=b.direction;c.setDirection(d);var e=b.gravity;c.setGravity(e);var f=b.itemMargin;c.setItemsMargin(f)},setPropsFromProtocolBuffers:function(a,b){ccs.widgetReader.setPropsFromProtocolBuffers.call(this,a,b);{var c=a,d=b.listviewOptions;ccs.uiReader.getFilePath()}c.setClippingEnabled(d.clipAble);var e=d.backGroundScale9enAble;c.setBackGroundImageScale9Enabled(e);var f,g,h,i,j,k,l,m,n;f=null!==d.bgColorR?d.bgColorR:150,g=null!==d.bgColorG?d.bgColorG:150,h=null!==d.bgColorB?d.bgColorB:255,i=null!==d.bgStartColorR?d.bgStartColorR:255,j=null!==d.bgStartColorG?d.bgStartColorG:255,k=null!==d.bgStartColorB?d.bgStartColorB:255,l=null!==d.bgEndColorR?d.bgEndColorR:150,m=null!==d.bgEndColorG?d.bgEndColorG:150,n=null!==d.bgEndColorB?d.bgEndColorB:255;var o=d.vectorX,p=null!==d.ectorY?d.vectorY:-.5;c.setBackGroundColorVector(cc.p(o,p));var q=null!==d.bgColorOpacity?d.bgColorOpacity:100,r=null!==d.colorType?d.colorType:1;c.setBackGroundColorType(r),c.setBackGroundColor(cc.color(i,j,k),cc.color(l,m,n)),c.setBackGroundColor(cc.color(f,g,h)),c.setBackGroundColorOpacity(q);var s=d.backGroundImageData,t=s.resourceType,u=ccs.widgetReader.getResourcePath(s.path,t);if(c.setBackGroundImage(u,t),e){var v=d.capInsetsX,w=d.capInsetsY,x=null!==d.capInsetsWidth?d.capInsetsWidth:1,y=null!==d.capInsetsHeight?d.capInsetsHeight:1;c.setBackGroundImageCapInsets(cc.rect(v,w,x,y));var z=d.scale9width,A=d.scale9height;null!=z&&null!=A&&c.setContentSize(cc.size(z,A))}var B=b.widgetOptions,C=null!==B.colorR?B.colorR:255,D=null!==B.colorG?B.colorG:255,E=null!==B.colorB?B.colorB:255;c.setColor(cc.color(C,D,E));var F=null!=B.Alpha?B.Alpha:255;c.setOpacity(F);var G=null!==d.innerWidth?d.innerWidth:200,H=null!==d.innerHeight?d.innerHeight:200;c.setInnerContainerSize(cc.size(G,H)),c.setBounceEnabled(d.bounceEnable);var I=null!=d.direction?d.direction:2;c.setDirection(I);var J=null!==d.gravity?d.gravity:3,K=J;c.setGravity(K);var L=d.itemMargin;c.setItemsMargin(L),ccs.widgetReader.setAnchorPointForWidget(a,b);var M=B.flipX,N=B.flipY;a.setFlippedX(M),a.setFlippedY(N)}},ccs.loadingBarReader={setPropsFromJsonDictionary:function(a,b){ccs.widgetReader.setPropsFromJsonDictionary.call(this,a,b);var c=ccs.uiReader.getFilePath(),d=a,e=b.textureData,f=e.resourceType;switch(f){case 0:var g=c,h=e.path,i=null;h&&""!==h&&(i=g+h,d.loadTexture(i));break;case 1:var h=e.path;d.loadTexture(h,1)}var j=b.scale9Enable;if(d.setScale9Enabled(j),j){var k=b.capInsetsX,l=b.capInsetsY,m=b.capInsetsWidth,n=b.capInsetsHeight;d.setCapInsets(cc.rect(k,l,m,n));var o=b.width,p=b.height;d.setSize(cc.size(o,p))}d.setDirection(b.direction),d.setPercent(b.percent),ccs.widgetReader.setColorPropsFromJsonDictionary.call(this,a,b)},setPropsFromProtocolBuffers:function(a,b){ccs.widgetReader.setPropsFromProtocolBuffers.call(this,a,b);var c=a,d=b.loadingBarOptions,e=(ccs.uiReader.getFilePath(),d.textureData),f=e.resourceType,g=ccs.widgetReader.getResourcePath(e.path,f);c.loadTexture(g,f);var h=d.scale9Enable;c.setScale9Enabled(h);var i=d.capinsetsX,j=d.capinsetsY,k=null!=d.capinsetsWidth?d.capinsetsWidth:1,l=null!=d.capinsetsHeight?d.capinsetsHeight:1;h&&c.setCapInsets(cc.rect(i,j,k,l));var m=b.widgetOptions,n=m.width,o=m.height;c.setContentSize(cc.size(n,o)),c.setDirection(d.direction);var p=null!==d.percent?d.percent:100;c.setPercent(p),ccs.widgetReader.setColorPropsFromProtocolBuffers.call(this,a,b)}},ccs.pageViewReader={setPropsFromJsonDictionary:function(a,b){ccs.layoutReader.setPropsFromJsonDictionary.call(this,a,b)},setPropsFromProtocolBuffers:function(a,b){ccs.widgetReader.setPropsFromProtocolBuffers.call(this,a,b);{var c=a,d=b.pageViewOptions;ccs.uiReader.getFilePath()}c.setClippingEnabled(d.clipAble);var e=d.backGroundScale9Enable;c.setBackGroundImageScale9Enabled(e);var f,g,h,i,j,k,l,m,n;f=null!==d.bgColorR?d.bgColorR:150,g=null!==d.bgColorG?d.bgColorG:150,h=null!==d.bgColorB?d.bgColorB:150,i=null!==d.bgStartColorR?d.bgStartColorR:255,j=null!==d.bgStartColorG?d.bgStartColorG:255,k=null!==d.bgStartColorB?d.bgStartColorB:255,l=null!==d.bgEndColorR?d.bgEndColorR:255,m=null!==d.bgEndColorG?d.bgEndColorG:150,n=null!==d.bgEndColorB?d.bgEndColorB:100;var o=0,p=-.5;null!==d.vectorX&&(o=d.vectorX),null!==d.vectorY&&(p=d.vectorY),c.setBackGroundColorVector(cc.p(o,p));var q=null!==d.bgColorOpacity?d.bgColorOpacity:100,r=null!==d.colorType?d.colorType:1;c.setBackGroundColorType(r),c.setBackGroundColor(cc.color(i,j,k),cc.color(l,m,n)),c.setBackGroundColor(cc.color(f,g,h)),c.setBackGroundColorOpacity(q);var s=d.backGroundImageData;if(s){var t=s.resourceType,u=ccs.widgetReader.getResourcePath(s.path,t);c.setBackGroundImage(u,t)}if(e){var v=d.capInsetsX,w=d.capInsetsY,x=null!==d.capInsetsWidth?d.capInsetsWidth:1,y=null!==d.capInsetsHeight?d.capInsetsHeight:1;c.setBackGroundImageCapInsets(cc.rect(v,w,x,y));var z=d.scale9Width,A=d.scale9Height;null!=z&&null!=A&&c.setContentSize(cc.size(z,A))}var B=b.widgetOptions,C=null!==B.colorR?B.colorR:255,D=null!==B.colorG?B.colorG:255,E=null!==B.colorB?B.colorB:255;c.setColor(cc.color(C,D,E));var F=null!==B.Alpha?B.Alpha:255;c.setOpacity(F),ccs.widgetReader.setAnchorPointForWidget(a,b);var G=B.flipX,H=B.flipY;a.setFlippedX(G),a.setFlippedY(H)}},ccs.sliderReader={setPropsFromJsonDictionary:function(a,b){ccs.widgetReader.setPropsFromJsonDictionary.call(this,a,b);var c=ccs.uiReader.getFilePath(),d=a,e=c,f=b.scale9Enable;d.setScale9Enabled(f);var g,h=b.barFileName,i=b.length,j=b.barFileNameData,k=j.resourceType,l=j.path;if(null!=h){if(f){switch(k){case 0:g=l?e+l:null,d.loadBarTexture(g);break;case 1:d.loadBarTexture(l,1)}d.setSize(cc.size(i,d.getContentSize().height))}}else switch(k){case 0:g=l?e+l:null,d.loadBarTexture(g);break;case 1:d.loadBarTexture(l,1)}var m=b.ballNormalData,n=m.resourceType,o=m.path;switch(n){case 0:var p=o?e+o:null;d.loadSlidBallTextureNormal(p);break;case 1:d.loadSlidBallTextureNormal(o,1)}var q=b.ballPressedData,r=q.resourceType,s=q.path;switch(null===s&&(r=n,s=o),r){case 0:var t=s?e+s:null;d.loadSlidBallTexturePressed(t);break;case 1:d.loadSlidBallTexturePressed(s,1)}var u=b.ballDisabledData,v=u.resourceType,w=u.path;switch(v){case 0:var x=w?e+w:null;d.loadSlidBallTextureDisabled(x);break;case 1:d.loadSlidBallTextureDisabled(w,1)}var y=b.progressBarData,z=y.resourceType,A=y.path;switch(z){case 0:var B=A?e+A:null;d.loadProgressBarTexture(B);break;case 1:d.loadProgressBarTexture(A,1)}ccs.widgetReader.setColorPropsFromJsonDictionary.call(this,a,b)},setPropsFromProtocolBuffers:function(a,b){ccs.widgetReader.setPropsFromProtocolBuffers.call(this,a,b);var c=a,d=b.sliderOptions,e=(ccs.uiReader.getFilePath(),!!d.scale9Enable);e&&c.setUnifySizeEnabled(!1),c.setScale9Enabled(e),c.setPercent(d.percent);var f=null!==d.length?d.length:290,g=d.barFileNameData,h=g.resourceType,i=ccs.widgetReader.getResourcePath(g.path,h);c.loadBarTexture(i,h),e&&c.setContentSize(cc.size(f,c.getContentSize().height));var j=d.ballNormalData,k=j.resourceType;i=ccs.widgetReader.getResourcePath(j.path,k),c.loadSlidBallTextureNormal(i,k);var l=d.ballPressedData,m=l.resourceType,n=ccs.widgetReader.getResourcePath(l.path,m);c.loadSlidBallTexturePressed(n,m);var o=d.ballDisabledData,p=o.resourceType,q=ccs.widgetReader.getResourcePath(o.path,p);c.loadSlidBallTextureDisabled(q,p);var r=d.progressBarData,s=r.resourceType,t=ccs.widgetReader.getResourcePath(r.path,s);c.loadProgressBarTexture(t,s);var u=!0;null!==d.displaystate&&(u=d.displaystate),c.setBright(u),ccs.widgetReader.setColorPropsFromProtocolBuffers.call(this,a,b)}},ccs.textFieldReader={setPropsFromJsonDictionary:function(a,b){ccs.widgetReader.setPropsFromJsonDictionary.call(this,a,b);var c=a,d=b.placeHolder;d&&c.setPlaceHolder(d),c.setString(b.text||"Text Field");var e=b.fontSize1;e&&c.setFontSize(e);var f=b.fontName;f&&c.setFontName(f);var g=b.touchSizeWidth,h=b.touchSizeHeight;null!=g&&null!=h&&c.setTouchSize(g,h);var i=(b.width,b.height,b.maxLengthEnable);if(c.setMaxLengthEnabled(i),i){var j=b.maxLength;c.setMaxLength(j)}var k=b.passwordEnable;c.setPasswordEnabled(k),k&&c.setPasswordStyleText(b.passwordStyleText);var l=b.areaWidth,m=b.areaHeight;if(null!=l&&null!=m){var n=cc.size(l,m);c.setTextAreaSize(n)}var o=b.hAlignment;o&&c.setTextHorizontalAlignment(o);var p=b.vAlignment;p&&c.setTextVerticalAlignment(p),ccs.widgetReader.setColorPropsFromJsonDictionary.call(this,a,b)},setPropsFromProtocolBuffers:function(a,b){var c=a,d=b.textfieldOptions,e=ccs.uiReader.getFilePath(),f=d.isCustomSize;if(a.ignoreContentAdaptWithSize(!f),f){var g=b.widgetOptions;c.setContentSize(cc.size(g.width,g.height))}ccs.widgetReader.setPropsFromProtocolBuffers.call(this,a,b),ccs.widgetReader.setAnchorPointForWidget.call(this,a,b),c.setUnifySizeEnabled(!1);var h=d.placeholder;if(null!==h){var i=null!==d.placeholder?d.placeholder:"inputs words here";c.setPlaceHolder(i)}var j=null!==d.text?d.text:"Text Field";c.setString(j);var k=d.fontSize?d.fontSize:20;c.setFontSize(k);var l=null!==d.fontName?d.fontName:"";c.setFontName(l);var m=d.maxlengthEnable;if(c.setMaxLengthEnabled(m),m){var n=null!==d.maxLength?d.maxLength:10;c.setMaxLength(n)}var o=d.passwordEnable;if(c.setPasswordEnabled(o),o){var p=null!==d.passwordStyleText?d.passwordStyleText:"*";c.setPasswordStyleText(p)}if(null!==d.fontResource){var q=d.fontresource;c.setFontName(e+q.path)}ccs.widgetReader.setColorPropsFromProtocolBuffers.call(this,a,b)}},ccs.WidgetReaderProtocol=ccs.Class.extend({setPropsFromJsonDictionary:function(){}}),ccs.widgetReader={setPropsFromJsonDictionary:function(a,b){var c=b.ignoreSize;null!=c&&a.ignoreContentAdaptWithSize(c),a.setSizeType(b.sizeType),a.setPositionType(b.positionType),a.setSizePercent(cc.p(b.sizePercentX,b.sizePercentY)),a.setPositionPercent(cc.p(b.positionPercentX,b.positionPercentY));var d=0,e=0,f=b.adaptScreen;if(f){var g=cc.director.getWinSize();d=g.width,e=g.height}else d=b.width,e=b.height;a.setContentSize(d,e),a.setTag(b.tag),a.setActionTag(b.actiontag),a.setTouchEnabled(b.touchAble);var h=b.name,i=h?h:"default";a.setName(i);var j=b.x,k=b.y;a.setPosition(j,k);var l=null!=b.scaleX?b.scaleX:1;a.setScaleX(l);var m=null!=b.scaleY?b.scaleY:1;a.setScaleY(m);var n=b.rotation||0;a.setRotation(n);var o=b.visible||!1;null!=o&&a.setVisible(o),a.setLocalZOrder(b.ZOrder);var p=b.layoutParameter;if(null!=p){var q=b.layoutParameter,r=q.type,s=null;switch(r){case 0:break;case 1:s=new ccui.LinearLayoutParameter;var t=q.gravity;s.setGravity(t);break;case 2:s=new ccui.RelativeLayoutParameter;var u=s,v=q.relativeName;u.setRelativeName(v);var w=q.relativeToName;u.setRelativeToWidgetName(w);var x=q.align;u.setAlign(x)}if(null!=s){var y=q.marginLeft||0,z=q.marginTop||0,A=q.marginRight||0,B=q.marginDown||0;s.setMargin(y,z,A,B),a.setLayoutParameter(s)}}},setColorPropsFromJsonDictionary:function(a,b){var c=b.opacity;null!=c&&a.setOpacity(c);var d=b.colorR,e=b.colorG,f=b.colorB;a.setColor(cc.color(null==d?255:d,null==e?255:e,null==f?255:f)),ccs.widgetReader._setAnchorPointForWidget(a,b),a.setFlippedX(b.flipX),a.setFlippedY(b.flipY)},_setAnchorPointForWidget:function(a,b){var c,d=b.anchorPointX;c=null!=d?b.anchorPointX:a.getAnchorPoint().x;var e,f=b.anchorPointY;e=null!=f?b.anchorPointY:a.getAnchorPoint().y,(null!=d||null!=f)&&a.setAnchorPoint(cc.p(c,e))},_getResourcePath:function(a,b,c){var d,e=a[b];return null!=e&&(0==c?d=ccs.uiReader.getFilePath()+e:1==c?d=e:cc.assert(0,"invalid TextureResType!!!")),d},setPropsFromProtocolBuffers:function(a,b){var c=b.widgetOptions;a.setCascadeColorEnabled(!0),a.setCascadeOpacityEnabled(!0),a.setAnchorPoint(cc.p(0,0)),a.setUnifySizeEnabled(!0);var d=c.ignoreSize;d&&a.ignoreContentAdaptWithSize(c.ignoreSize),a.setSizeType(c.sizeType),a.setPositionType(c.positionType),a.setSizePercent(cc.p(c.sizePercentX,c.sizePercentY)),a.setPositionPercent(cc.p(c.positionPercentX,c.positionPercentY));var e=c.width,f=c.height;a.setContentSize(cc.size(e,f)),a.setTag(c.tag),a.setActionTag(c.actionTag),a.setTouchEnabled(c.touchAble);var g=c.name,h=g?g:"default";a.setName(h);var i=c.x,j=c.y;a.setPosition(cc.p(i,j)),c.Alpha&&a.setOpacity(c.Alpha),a.setScaleX(null!==c.scaleX?c.scaleX:1),a.setScaleY(null!==c.scaleY?c.scaleY:1),a.setRotationX(null!==c.rotationSkewX?c.rotationSkewX:0),a.setRotationY(null!==c.rotationSkewY?c.rotationSkewY:0);var k=c.visible;k&&a.setVisible(c.visible);var l=c.zorder;a.setLocalZOrder(l);var m=c.layoutParameter;if(m){var n=c.layoutParameter,o=n.type,p=null;switch(o){case 0:break;case 1:p=new ccui.LinearLayoutParameter;var q=n.gravity;p.setGravity(q);break;case 2:p=new ccui.RelativeLayoutParameter;var r=p,s=n.relativeName;r.setRelativeName(s);var t=n.relativeToName;r.setRelativeToWidgetName(t);var u=n.align;r.setAlign(u)}if(p){var v=n.marginLeft,w=n.marginTop,x=n.marginRight,y=n.marginDown;p.setMargin(new ccui.Margin(v,w,x,y)),a.setLayoutParameter(p)}}},setColorPropsFromProtocolBuffers:function(a,b){var c=b.widgetOptions,d=null!==c.colorR,e=null!==c.colorG,f=null!==c.colorB,g=c.colorR,h=c.colorG,i=c.colorB;d&&e&&f&&a.setColor(cc.color(g,h,i)),ccs.widgetReader.setAnchorPointForWidget(a,b);var j=c.flipX,k=c.flipY;a.setFlippedX(j),a.setFlippedY(k)},setAnchorPointForWidget:function(a,b){var c,d=b.widgetOptions,e=d.anchorPointX;c=e?d.anchorPointX:a.getAnchorPoint().x;var f,g=d.anchorPointY;f=g?d.anchorPointY:a.getAnchorPoint().y,(e||g)&&a.setAnchorPoint(cc.p(c,f))},getResourcePath:function(a,b){var c,d=ccs.uiReader.getFilePath(),e=a;return null!=e&&0!=e&&(b==ccui.Widget.LOCAL_TEXTURE?c=d+e:b==ccui.Widget.PLIST_TEXTURE?c=e:cc.assert(0,"invalid TextureResType!!!")),c}};var PBP;PBP=CSParseBinary&&window.dcodeIO&&window.dcodeIO.ProtoBuf?dcodeIO.ProtoBuf.loadProto(CSParseBinary).build().protocolbuffers:null,function(){var a=ccs.objectFactory;a.registerType({_className:"ButtonReader",_fun:ccs.buttonReader}),a.registerType({_className:"CheckBoxReader",_fun:ccs.checkBoxReader}),a.registerType({_className:"SliderReader",_fun:ccs.sliderReader}),a.registerType({_className:"ImageViewReader",_fun:ccs.imageViewReader}),a.registerType({_className:"LoadingBarReader",_fun:ccs.loadingBarReader}),a.registerType({_className:"TextAtlasReader",_fun:ccs.labelAtlasReader}),a.registerType({_className:"TextReader",_fun:ccs.labelReader}),a.registerType({_className:"TextBMFontReader",_fun:ccs.labelBMFontReader}),a.registerType({_className:"TextFieldReader",_fun:ccs.textFieldReader}),a.registerType({_className:"LayoutReader",_fun:ccs.layoutReader}),a.registerType({_className:"PageViewReader",_fun:ccs.pageViewReader}),a.registerType({_className:"ScrollViewReader",_fun:ccs.scrollViewReader}),a.registerType({_className:"ListViewReader",_fun:ccs.listViewReader}),a.registerType({_className:"WidgetReader",_fun:ccs.widgetReader}),a.registerType({_className:"Button",_fun:ccui.Button}),a.registerType({_className:"CheckBox",_fun:ccui.CheckBox}),a.registerType({_className:"ImageView",_fun:ccui.ImageView}),a.registerType({_className:"Text",_fun:ccui.Text}),a.registerType({_className:"TextAtlas",_fun:ccui.TextAtlas}),a.registerType({_className:"TextBMFont",_fun:ccui.TextBMFont}),a.registerType({_className:"LoadingBar",_fun:ccui.LoadingBar}),a.registerType({_className:"Slider",_fun:ccui.Slider}),a.registerType({_className:"TextField",_fun:ccui.TextField}),a.registerType({_className:"Layout",_fun:ccui.Layout}),a.registerType({_className:"ListView",_fun:ccui.ListView}),a.registerType({_className:"PageView",_fun:ccui.PageView}),a.registerType({_className:"ScrollView",_fun:ccui.ScrollView})
}(),ccs.uiReader={_filePath:"",_olderVersion:!1,_fileDesignSizes:{},_mapObject:{},_mapParseSelector:{},getVersionInteger:function(a){if(!a)return 0;var b=a,c=b.length;if(7>c)return 0;var d=b.indexOf("."),e=b.substr(0,d);b=b.substr(d+1,c-1),d=b.indexOf(".");var f=b.substr(0,d);b=b.substr(d+1,c-1),d=b.indexOf(".");var g=b.substr(0,d);b=b.substr(d+1,c-1),d=b.indexOf(".");var h=-1==d?b:b.substr(0,d),i=parseInt(e),j=parseInt(f),k=parseInt(g),l=parseInt(h);return 1e3*i+100*j+10*k+l},storeFileDesignSize:function(a,b){this._fileDesignSizes[a]=b},getFileDesignSize:function(a){return this._fileDesignSizes[a]},widgetFromJsonFile:function(a){var b=cc.loader.getRes(a);if(!b)throw"Please load the resource first : "+a;var c=cc.path.dirname(a);this._filePath=""==c?c:c+"/";var d,e,f=b.version,g=this.getVersionInteger(f);return f?250>g?(d=new ccs.WidgetPropertiesReader0250,e=d.createWidget(b,this._filePath,a)):(d=new ccs.WidgetPropertiesReader0300,e=d.createWidget(b,this._filePath,a)):(d=new ccs.WidgetPropertiesReader0250,e=d.createWidget(b,this._filePath,a)),(!f||250>g)&&(this._olderVersion=!0),b=null,e},clear:function(){this._filePath="",this._olderVersion=!1,this._fileDesignSizes={}},registerTypeAndCallBack:function(a,b,c,d){var e=ccs.objectFactory,f=new ccs.TInfo(a,b);e.registerType(f),c&&(this._mapObject[a]=c),d&&(this._mapParseSelector[a]=d)},getFilePath:function(){return this._filePath},setFilePath:function(a){this._filePath=a},getParseObjectMap:function(){return this._mapObject},getParseCallBackMap:function(){return this._mapParseSelector}},ccs.WidgetPropertiesReader=ccs.Class.extend({_filePath:"",createWidget:function(){},widgetFromJsonDictionary:function(){},_createGUI:function(a){var b=this._getGUIClassName(a);return ccs.objectFactory.createObject(b)},_getGUIClassName:function(a){var b=a;return"Panel"==a?b="Layout":"TextArea"==a?b="Text":"TextButton"==a?b="Button":"Label"==a?b="Text":"LabelAtlas"==a?b="TextAtlas":"LabelBMFont"==a?b="TextBMFont":"Node"==a&&(b="Layout"),b},_getWidgetReaderClassName:function(a){var b=a;return"Panel"==b?b="Layout":"TextArea"==b?b="Text":"TextButton"==b?b="Button":"Label"==b?b="Text":"LabelAtlas"==b?b="TextAtlas":"LabelBMFont"==b&&(b="TextBMFont"),b+="Reader"},_getWidgetReaderClassNameFromWidget:function(a){var b="";return a instanceof ccui.Button?b="ButtonReader":a instanceof ccui.CheckBox?b="CheckBoxReader":a instanceof ccui.ImageView?b="ImageViewReader":a instanceof ccui.TextAtlas?b="TextAtlasReader":a instanceof ccui.TextBMFont?b="TextBMFontReader":a instanceof ccui.Text?b="TextReader":a instanceof ccui.LoadingBar?b="LoadingBarReader":a instanceof ccui.Slider?b="SliderReader":a instanceof ccui.TextField?b="TextFieldReader":a instanceof ccui.ListView?b="ListViewReader":a instanceof ccui.PageView?b="PageViewReader":a instanceof ccui.ScrollView?b="ScrollViewReader":a instanceof ccui.Layout?b="LayoutReader":a instanceof ccui.Widget&&(b="WidgetReader"),b},_createWidgetReaderProtocol:function(a){return ccs.objectFactory.createObject(a)}}),ccs.WidgetPropertiesReader0250=ccs.WidgetPropertiesReader.extend({createWidget:function(a,b,c){this._filePath=""==b?b:cc.path.join(b,"/");for(var d=a.textures,e=0;e<d.length;e++){var f=d[e],g=b;g+=f,cc.spriteFrameCache.addSpriteFrames(g)}var h=a.designWidth,i=a.designHeight;if(0>=h||0>=i){cc.log("Read design size error!");var j=cc.director.getWinSize();ccs.uiReader.storeFileDesignSize(c,j)}else ccs.uiReader.storeFileDesignSize(c,cc.size(h,i));var k=a.widgetTree,l=this.widgetFromJsonDictionary(k),m=l.getContentSize();0==m.width&&0==m.height&&l.setSize(cc.size(h,i));var n=a.animation;return ccs.actionManager.initWithDictionary(c,n,l),k=null,n=null,l},widgetFromJsonDictionary:function(a){var b=null,c=a.classname,d=a.options;"Button"==c?(b=new ccui.Button,this.setPropsForButtonFromJsonDictionary(b,d)):"CheckBox"==c?(b=new ccui.CheckBox,this.setPropsForCheckBoxFromJsonDictionary(b,d)):"Label"==c?(b=new ccui.Text,this.setPropsForLabelFromJsonDictionary(b,d)):"LabelAtlas"==c?(b=new ccui.TextAtlas,this.setPropsForLabelAtlasFromJsonDictionary(b,d)):"LoadingBar"==c?(b=new ccui.LoadingBar,this.setPropsForLoadingBarFromJsonDictionary(b,d)):"ScrollView"==c?(b=new ccui.ScrollView,this.setPropsForScrollViewFromJsonDictionary(b,d)):"TextArea"==c?(b=new ccui.Text,this.setPropsForLabelFromJsonDictionary(b,d)):"TextButton"==c?(b=new ccui.Button,this.setPropsForButtonFromJsonDictionary(b,d)):"TextField"==c?(b=new ccui.TextField,this.setPropsForTextFieldFromJsonDictionary(b,d)):"ImageView"==c?(b=new ccui.ImageView,this.setPropsForImageViewFromJsonDictionary(b,d)):"Panel"==c?(b=new ccui.Layout,this.setPropsForLayoutFromJsonDictionary(b,d)):"Slider"==c?(b=new ccui.Slider,this.setPropsForSliderFromJsonDictionary(b,d)):"LabelBMFont"==c?(b=new ccui.TextBMFont,this.setPropsForLabelBMFontFromJsonDictionary(b,d)):"DragPanel"==c&&(b=new ccui.ScrollView,this.setPropsForScrollViewFromJsonDictionary(b,d));for(var e=a.children,f=0;f<e.length;f++){var g=e[f],h=this.widgetFromJsonDictionary(g);h&&b.addChild(h),g=null}return d=null,b},setPropsForWidgetFromJsonDictionary:function(a,b){void 0!==b.ignoreSize&&a.ignoreContentAdaptWithSize(b.ignoreSize);var c=b.width,d=b.height;a.setSize(cc.size(c,d)),a.setTag(b.tag),a.setActionTag(b.actiontag),a.setTouchEnabled(b.touchAble);var e=b.name,f=e?e:"default";a.setName(f);var g=b.x,h=b.y;a.setPosition(cc.p(g,h)),void 0!==b.scaleX&&a.setScaleX(b.scaleX),void 0!==b.scaleY&&a.setScaleY(b.scaleY),void 0!==b.rotation&&a.setRotation(b.rotation),void 0!==b.visible&&a.setVisible(b.visible);var i=b.ZOrder;a.setLocalZOrder(i)},setPropsForAllWidgetFromJsonDictionary:function(){},setPropsForAllCustomWidgetFromJsonDictionary:function(){},setColorPropsForWidgetFromJsonDictionary:function(a,b){void 0!==b.opacity&&a.setOpacity(b.opacity);var c=void 0!==b.colorR?b.colorR:255,d=void 0!==b.colorG?b.colorG:255,e=void 0!==b.colorB?b.colorB:255;a.setColor(cc.color(c,d,e));var f=void 0!==b.anchorPointX?b.anchorPointX:a.getWidgetType()==ccui.Widget.TYPE_WIDGET?.5:0,g=void 0!==b.anchorPointY?b.anchorPointY:a.getWidgetType()==ccui.Widget.TYPE_WIDGET?.5:0;a.setAnchorPoint(f,g);var h=b.flipX,i=b.flipY;a.setFlippedX(h),a.setFlippedY(i)},setPropsForButtonFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.scale9Enable;c.setScale9Enabled(d);var e=b.normal,f=b.pressed,g=b.disabled,h=e?this._filePath+e:null,i=f?this._filePath+f:null,j=g?this._filePath+g:null,k=b.useMergedTexture;if(d){{b.capInsetsX,b.capInsetsY,b.capInsetsWidth,b.capInsetsHeight}if(k?c.loadTextures(e,f,g,ccui.Widget.PLIST_TEXTURE):c.loadTextures(h,i,j),void 0!==b.scale9Width&&void 0!==b.scale9Height){var l=b.scale9Width,m=b.scale9Height;c.setSize(cc.size(l,m))}}else k?c.loadTextures(e,f,g,ccui.Widget.PLIST_TEXTURE):c.loadTextures(h,i,j);if(void 0!==b.text){var n=b.text||"";n&&c.setTitleText(n)}void 0!==b.fontSize&&c.setTitleFontSize(b.fontSize),void 0!==b.fontName&&c.setTitleFontName(b.fontName);var o=void 0!==b.textColorR?b.textColorR:255,p=void 0!==b.textColorG?b.textColorG:255,q=void 0!==b.textColorB?b.textColorB:255,r=cc.color(o,p,q);c.setTitleColor(r),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForCheckBoxFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.backGroundBox,e=b.backGroundBoxSelected,f=b.frontCross,g=b.backGroundBoxDisabled,h=b.frontCrossDisabled,i=this._filePath,j=d?i+d:null,k=e?i+e:null,l=f?i+f:null,m=g?i+g:null,n=h?i+h:null,o=b.useMergedTexture;o?c.loadTextures(d,e,f,g,h,ccui.Widget.PLIST_TEXTURE):c.loadTextures(j,k,l,m,n),c.setSelected(b.selectedState||!1),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForImageViewFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.fileName,e=b.scale9Enable||!1;c.setScale9Enabled(e);var f=this._filePath,g=null;d&&(g=f+d);var h=b.useMergedTexture;if(e){if(h?c.loadTexture(d,ccui.Widget.PLIST_TEXTURE):c.loadTexture(g),void 0!==b.scale9Width&&void 0!==b.scale9Height){var i=b.scale9Width,j=b.scale9Height;c.setSize(cc.size(i,j))}var k=b.capInsetsX,l=b.capInsetsY,m=b.capInsetsWidth,n=b.capInsetsHeight;c.setCapInsets(cc.rect(k,l,m,n))}else h?c.loadTexture(d,ccui.Widget.PLIST_TEXTURE):c.loadTexture(g);this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForLabelFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.touchScaleEnable;c.setTouchScaleChangeEnabled(d);var e=b.text;if(c.setString(e),void 0!==b.fontSize&&c.setFontSize(b.fontSize),void 0!==b.fontName&&c.setFontName(b.fontName),void 0!==b.areaWidth&&void 0!==b.areaHeight){var f=cc.size(b.areaWidth,b.areaHeight);c.setTextAreaSize(f)}b.hAlignment&&c.setTextHorizontalAlignment(b.hAlignment),b.vAlignment&&c.setTextVerticalAlignment(b.vAlignment),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForLabelAtlasFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.charMapFileData,e=b.stringValue,f=b.itemWidth,g=b.itemHeight,h=b.startCharMap,i=void 0!==e,j=void 0!==d,k=void 0!==f,l=void 0!==g,m=void 0!==h;if(i&&j&&k&&l&&m&&d){var n=this._filePath+d;c.setProperty(e,n,f,g,h)}this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForLayoutFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a;c instanceof ccui.ScrollView||c instanceof ccui.ListView||c.setClippingEnabled(b.clipAble);var d=a,e=b.backGroundScale9Enable;d.setBackGroundImageScale9Enabled(e);var f=b.bgColorR,g=b.bgColorG,h=b.bgColorB,i=b.bgStartColorR,j=b.bgStartColorG,k=b.bgStartColorB,l=b.bgEndColorR,m=b.bgEndColorG,n=b.bgEndColorB,o=b.vectorX,p=b.vectorY;d.setBackGroundColorVector(cc.p(o,p));var q=b.bgColorOpacity,r=b.colorType;d.setBackGroundColorType(r),d.setBackGroundColor(cc.color(i,j,k),cc.color(l,m,n)),d.setBackGroundColor(cc.color(f,g,h)),d.setBackGroundColorOpacity(q);var s=b.backGroundImage,t=s?this._filePath+s:null,u=b.useMergedTexture;if(u?d.setBackGroundImage(s,ccui.Widget.PLIST_TEXTURE):d.setBackGroundImage(t),e){var v=b.capInsetsX,w=b.capInsetsY,x=b.capInsetsWidth,y=b.capInsetsHeight;d.setBackGroundImageCapInsets(cc.rect(v,w,x,y))}this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForScrollViewFromJsonDictionary:function(a,b){this.setPropsForLayoutFromJsonDictionary(a,b);var c=a,d=b.innerWidth,e=b.innerHeight;c.setInnerContainerSize(cc.size(d,e));var f=b.direction;c.setDirection(f),c.setBounceEnabled(b.bounceEnable),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForContainerWidgetFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a;(c instanceof ccui.ScrollView||c instanceof ccui.ListView)&&c.setClippingEnabled(b.clipAble),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForSliderFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.barTextureScale9Enable||!1;c.setScale9Enabled(d);var e=b.length,f=b.useMergedTexture,g=void 0!==b.barFileName;if(g)if(d){var h=b.barFileName,i=h?this._filePath+h:null;f?c.loadBarTexture(h,ccui.Widget.PLIST_TEXTURE):c.loadBarTexture(i),c.setSize(cc.size(e,c.getContentSize().height))}else{var h=b.barFileName,i=h?this._filePath+h:null;f?c.loadBarTexture(h,ccui.Widget.PLIST_TEXTURE):c.loadBarTexture(i)}var j=b.ballNormal,k=b.ballPressed,l=b.ballDisabled,m=j?this._filePath+j:null,n=k?this._filePath+k:null,o=l?this._filePath+l:null;f?c.loadSlidBallTextures(j,k,l,ccui.Widget.PLIST_TEXTURE):c.loadSlidBallTextures(m,n,o),c.setPercent(b.percent);var h=b.progressBarFileName,i=h?this._filePath+h:null;f?c.loadProgressBarTexture(h,ccui.Widget.PLIST_TEXTURE):c.loadProgressBarTexture(i),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForTextAreaFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a;c.setString(b.text),void 0!==b.fontSize&&c.setFontSize(b.fontSize);var d=b.colorR,e=b.colorG,f=b.colorB;if(c.setColor(cc.color(null==d?255:d,null==e?255:e,null==f?255:f)),c.setFontName(b.fontName),void 0!==b.areaWidth&&void 0!==b.areaHeight){var g=cc.size(b.areaWidth,b.areaHeight);c.setTextAreaSize(g)}b.hAlignment&&c.setTextHorizontalAlignment(b.hAlignment),b.vAlignment&&c.setTextVerticalAlignment(b.vAlignment),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForTextButtonFromJsonDictionary:function(a,b){this.setPropsForButtonFromJsonDictionary(a,b);var c=a;c.setTitleText(b.text||"");var d=void 0!==b.textColorR?b.textColorR:255,e=void 0!==b.textColorG?b.textColorG:255,f=void 0!==b.textColorB?b.textColorB:255;c.setTitleColor(cc.color(d,e,f)),void 0!==b.fontSize&&c.setTitleFontSize(b.fontSize),void 0!==b.fontName&&c.setTitleFontName(b.fontName),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForTextFieldFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a;void 0!==b.placeHolder&&c.setPlaceHolder(b.placeHolder),c.setString(b.text),void 0!==b.fontSize&&c.setFontSize(b.fontSize),void 0!==b.fontName&&c.setFontName(b.fontName),void 0!==b.touchSizeWidth&&void 0!==b.touchSizeHeight&&c.setTouchSize(cc.size(b.touchSizeWidth,b.touchSizeHeight));var d=(b.width,b.height,b.maxLengthEnable);if(c.setMaxLengthEnabled(d),d){var e=b.maxLength;c.setMaxLength(e)}var f=b.passwordEnable;c.setPasswordEnabled(f),f&&c.setPasswordStyleText(b.passwordStyleText),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForLoadingBarFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.useMergedTexture,e=b.texture,f=e?this._filePath+e:null;d?c.loadTexture(e,ccui.Widget.PLIST_TEXTURE):c.loadTexture(f),c.setDirection(b.direction),c.setPercent(b.percent),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForListViewFromJsonDictionary:function(a,b){this.setPropsForLayoutFromJsonDictionary(a,b)},setPropsForPageViewFromJsonDictionary:function(a,b){this.setPropsForLayoutFromJsonDictionary(a,b)},setPropsForLabelBMFontFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.fileName,e=this._filePath+d;c.setFntFile(e);var f=b.text;c.setString(f),this.setColorPropsForWidgetFromJsonDictionary(a,b)}}),ccs.WidgetPropertiesReader0300=ccs.WidgetPropertiesReader.extend({createWidget:function(a,b,c){this._filePath=""==b?b:cc.path.join(b,"/");for(var d=a.textures,e=0;e<d.length;e++){var f=d[e],g=b;g+=f,cc.spriteFrameCache.addSpriteFrames(g)}var h=a.designWidth,i=a.designHeight;if(0>=h||0>=i){cc.log("Read design size error!");var j=cc.director.getWinSize();ccs.uiReader.storeFileDesignSize(c,j)}else ccs.uiReader.storeFileDesignSize(c,cc.size(h,i));var k=a.widgetTree,l=this.widgetFromJsonDictionary(k),m=l.getContentSize();0==m.width&&0==m.height&&l.setSize(cc.size(h,i));var n=a.animation;return ccs.actionManager.initWithDictionary(c,n,l),k=null,n=null,l},setPropsForAllWidgetFromJsonDictionary:function(a,b,c){a&&a.setPropsFromJsonDictionary&&a.setPropsFromJsonDictionary(b,c)},setPropsForAllCustomWidgetFromJsonDictionary:function(a,b,c){var d=ccs.uiReader,e=d.getParseObjectMap(),f=e[a],g=d.getParseCallBackMap(),h=g[a];f&&h&&h.call(f,a,b,c)},widgetFromJsonDictionary:function(a){var b=a.classname,c=a.options,d=this._createGUI(b),e=this._getWidgetReaderClassName(b),f=this._createWidgetReaderProtocol(e);if(f)this.setPropsForAllWidgetFromJsonDictionary(f,d,c);else if(e=this._getWidgetReaderClassNameFromWidget(d),f=ccs.objectFactory.createObject(e),f&&d){this.setPropsForAllWidgetFromJsonDictionary(f,d,c);var g=c.customProperty,h=JSON.parse(g);this.setPropsForAllCustomWidgetFromJsonDictionary(b,d,h)}else cc.log("Widget or WidgetReader doesn't exists!!!  Please check your json file.");for(var i=a.children,j=0;j<i.length;j++){var k=this.widgetFromJsonDictionary(i[j]);if(k)if(d instanceof ccui.PageView)d.addPage(k);else if(d instanceof ccui.ListView)d.pushBackCustomItem(k);else{if(!(d instanceof ccui.Layout)){if(k.getPositionType()==ccui.Widget.POSITION_PERCENT){var l=k.getPositionPercent(),m=d.getAnchorPoint();k.setPositionPercent(cc.p(l.x+m.x,l.y+m.y))}var n=d.getAnchorPointInPoints();k.setPosition(cc.p(k.getPositionX()+n.x,k.getPositionY()+n.y))}d.addChild(k)}}return d},setPropsForWidgetFromJsonDictionary:function(a,b){var c=b.name,d=c?c:"default";a.setName(d),void 0!==b.ignoreSize&&a.ignoreContentAdaptWithSize(b.ignoreSize),a.setSizeType(b.sizeType),a.setPositionType(b.positionType),a.setSizePercent(cc.p(b.sizePercentX,b.sizePercentY)),a.setPositionPercent(cc.p(b.positionPercentX,b.positionPercentY));var e=b.width,f=b.height;a.setSize(cc.size(e,f)),a.setTag(b.tag),a.setActionTag(b.actiontag),a.setTouchEnabled(b.touchAble);var g=b.x,h=b.y;a.setPosition(cc.p(g,h)),void 0!==b.scaleX&&a.setScaleX(b.scaleX),void 0!==b.scaleY&&a.setScaleY(b.scaleY),void 0!==b.rotation&&a.setRotation(b.rotation),void 0!==b.visible&&a.setVisible(b.visible),a.setLocalZOrder(b.ZOrder);var i=b.layoutParameter;if(i){var j,k=i.type;switch(k){case 0:break;case 1:j=new ccui.LinearLayoutParameter;var l=i.gravity;j.setGravity(l);break;case 2:j=new ccui.RelativeLayoutParameter;var m=i.relativeName;j.setRelativeName(m);var n=i.relativeToName;j.setRelativeToWidgetName(n),j.setAlign(i.align)}var o=i.marginLeft,p=i.marginTop,q=i.marginRight,r=i.marginDown;j.setMargin(new ccui.Margin(o,p,q,r)),a.setLayoutParameter(j)}},setColorPropsForWidgetFromJsonDictionary:function(a,b){void 0!==b.opacity&&a.setOpacity(b.opacity);var c=void 0!==b.colorR?b.colorR:255,d=void 0!==b.colorG?b.colorG:255,e=void 0!==b.colorB?b.colorB:255;a.setColor(cc.color(c,d,e));var f=void 0!==b.anchorPointX?b.anchorPointX:a.getWidgetType()==ccui.Widget.TYPE_WIDGET?.5:0,g=void 0!==b.anchorPointY?b.anchorPointY:a.getWidgetType()==ccui.Widget.TYPE_WIDGET?.5:0;a.setAnchorPoint(f,g);var h=b.flipX,i=b.flipY;a.setFlippedX(h),a.setFlippedY(i)},setPropsForButtonFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.scale9Enable;c.setScale9Enabled(d);var e=b.normalData,f=e.resourceType;switch(f){case 0:var g=e.path,h=g?this._filePath+g:null;c.loadTextureNormal(h);break;case 1:var g=e.path;c.loadTextureNormal(g,ccui.Widget.PLIST_TEXTURE)}e=null;var i=b.pressedData,j=i.resourceType;switch(j){case 0:var k=i.path,l=k?this._filePath+k:null;c.loadTexturePressed(l);break;case 1:var k=i.path;c.loadTexturePressed(k,ccui.Widget.PLIST_TEXTURE)}i=null;var m=b.disabledData,n=m.resourceType;switch(n){case 0:var o=m.path,p=o?this._filePath+o:null;c.loadTextureDisabled(p);break;case 1:var o=m.path;c.loadTextureDisabled(o,ccui.Widget.PLIST_TEXTURE)}if(m=null,d){var q=b.capInsetsX,r=b.capInsetsY,s=b.capInsetsWidth,t=b.capInsetsHeight;if(c.setCapInsets(cc.rect(q,r,s,t)),void 0!==b.scale9Width&&void 0!==b.scale9Height){var u=b.scale9Width,v=b.scale9Height;c.setSize(cc.size(u,v))}}if(void 0!==b.text){var w=b.text||"";w&&c.setTitleText(w)}void 0!==b.fontSize&&c.setTitleFontSize(b.fontSize),void 0!==b.fontName&&c.setTitleFontName(b.fontName);var x=void 0!==b.textColorR?b.textColorR:255,y=void 0!==b.textColorG?b.textColorG:255,z=void 0!==b.textColorB?b.textColorB:255,A=cc.color(x,y,z);c.setTitleColor(A),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForCheckBoxFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.backGroundBoxData,e=d.resourceType;switch(e){case 0:var f=d.path,g=f?this._filePath+f:null;c.loadTextureBackGround(g);break;case 1:var f=d.path;c.loadTextureBackGround(f,ccui.Widget.PLIST_TEXTURE)}d=null;var h=b.backGroundBoxSelectedData,i=h.resourceType;switch(i){case 0:var j=h.path,k=j?this._filePath+j:null;c.loadTextureBackGroundSelected(k);break;case 1:var j=h.path;c.loadTextureBackGroundSelected(j,ccui.Widget.PLIST_TEXTURE)}h=null;var l=b.frontCrossData,m=l.resourceType;switch(m){case 0:var n=l.path,o=n?this._filePath+n:null;c.loadTextureFrontCross(o);break;case 1:var n=l.path;c.loadTextureFrontCross(n,ccui.Widget.PLIST_TEXTURE)}l=null;var p=b.backGroundBoxDisabledData,q=p.resourceType;switch(q){case 0:var r=p.path,s=r?this._filePath+r:null;c.loadTextureBackGroundDisabled(s);break;case 1:var r=p.path;c.loadTextureBackGroundDisabled(r,ccui.Widget.PLIST_TEXTURE)}p=null;var t=b.frontCrossDisabledData,u=t.resourceType;switch(u){case 0:var v=b.path,w=v?this._filePath+v:null;c.loadTextureFrontCrossDisabled(w);break;case 1:var v=b.path;c.loadTextureFrontCrossDisabled(v,ccui.Widget.PLIST_TEXTURE)}t=null;var x=b.selectedState||!1;a.setSelectedState(x),c.setSelectedState(b,"selectedState"),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForImageViewFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.fileNameData,e=d.resourceType;switch(e){case 0:var f=this._filePath,g=d.path,h=null;g&&(h=f+g,c.loadTexture(h));break;case 1:var g=d.path;c.loadTexture(g,ccui.Widget.PLIST_TEXTURE)}d=null;var i=b.scale9Enable||!1;if(c.setScale9Enabled(i),i){if(void 0!==b.scale9Width&&void 0!==b.scale9Height){var j=b.scale9Width,k=b.scale9Height;c.setSize(cc.size(j,k))}var l=b.capInsetsX,m=b.capInsetsY,n=b.capInsetsWidth,o=b.capInsetsHeight;c.setCapInsets(cc.rect(l,m,n,o))}this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForLabelFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.touchScaleEnable;c.setTouchScaleChangeEnabled(d);var e=b.text;if(c.setString(e),void 0!==b.fontSize&&c.setFontSize(b.fontSize),void 0!==b.fontName&&c.setFontName(b.fontName),void 0!==b.areaWidth&&void 0!==b.areaHeight){var f=cc.size(b.areaWidth,b.areaHeight);c.setTextAreaSize(f)}b.hAlignment&&c.setTextHorizontalAlignment(b.hAlignment),b.vAlignment&&c.setTextVerticalAlignment(b.vAlignment),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForLabelAtlasFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=void 0!==b.stringValue,e=void 0!==b.charMapFile,f=void 0!==b.itemWidth,g=void 0!==b.itemHeight,h=void 0!==b.startCharMap;if(d&&e&&f&&g&&h){var i=b.charMapFileData,j=i.resourceType;switch(j){case 0:var k=i.path,l=this._filePath+k;c.setProperty(b.stringValue,l,b.itemWidth,b.itemHeight,b.startCharMap);break;case 1:cc.log("Wrong res type of LabelAtlas!")}i=null}this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForLayoutFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a;c instanceof ccui.ScrollView||c instanceof ccui.ListView||c.setClippingEnabled(b.clipAble);var d=b.backGroundScale9Enable;c.setBackGroundImageScale9Enabled(d);var e=b.bgColorR,f=b.bgColorG,g=b.bgColorB,h=b.bgStartColorR,i=b.bgStartColorG,j=b.bgStartColorB,k=b.bgEndColorR,l=b.bgEndColorG,m=b.bgEndColorB,n=b.vectorX,o=b.vectorY;c.setBackGroundColorVector(cc.p(n,o));var p=b.bgColorOpacity,q=b.colorType;c.setBackGroundColorType(q),c.setBackGroundColor(cc.color(h,i,j),cc.color(k,l,m)),c.setBackGroundColor(cc.color(e,f,g)),c.setBackGroundColorOpacity(p);var r=b.backGroundImageData||{},s=r.resourceType;switch(s){case 0:var t=r.path,u=t?this._filePath+t:null;c.setBackGroundImage(u);break;case 1:var t=r.path;c.setBackGroundImage(t,ccui.Widget.PLIST_TEXTURE)}if(r=null,d){var v=b.capInsetsX,w=b.capInsetsY,x=b.capInsetsWidth,y=b.capInsetsHeight;c.setBackGroundImageCapInsets(cc.rect(v,w,x,y))}c.setLayoutType(b.layoutType),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForScrollViewFromJsonDictionary:function(a,b){this.setPropsForLayoutFromJsonDictionary(a,b);var c=a,d=b.innerWidth,e=b.innerHeight;c.setInnerContainerSize(cc.size(d,e));var f=b.direction;c.setDirection(f),c.setBounceEnabled(b.bounceEnable),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForSliderFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.barTextureScale9Enable||!1;c.setScale9Enabled(d);var e=b.length,f=void 0!==b.barFileName;if(f)if(d){var g=b.barFileNameData,h=g.resourceType;switch(h){case 0:var i=g.path,j=i?this._filePath+i:null;c.loadBarTexture(j);break;case 1:var i=g.path;c.loadBarTexture(i,ccui.Widget.PLIST_TEXTURE)}c.setSize(cc.size(e,c.getContentSize().height)),g=null}else{var g=b.barFileNameData,h=g.resourceType;switch(h){case 0:var i=g.path,j=i?this._filePath+i:null;c.loadBarTexture(j);break;case 1:var i=g.path;c.loadBarTexture(i,ccui.Widget.PLIST_TEXTURE)}g=null}var k=b.ballNormalData,l=k.resourceType;switch(l){case 0:var m=k.path,n=m?this._filePath+m:null;c.loadSlidBallTextureNormal(n);break;case 1:var m=k.path;c.loadSlidBallTextureNormal(m,ccui.Widget.PLIST_TEXTURE)}k=null;var o=b.ballPressedData,p=o.resourceType;switch(p){case 0:var q=o.path,r=q?this._filePath+q:null;c.loadSlidBallTexturePressed(r);break;case 1:var q=o.path;c.loadSlidBallTexturePressed(q,ccui.Widget.PLIST_TEXTURE)}o=null;var s=b.ballDisabledData,t=s.resourceType;switch(t){case 0:var u=s.path,v=u?this._filePath+u:null;c.loadSlidBallTextureDisabled(v);break;case 1:var u=s.path;c.loadSlidBallTextureDisabled(u,ccui.Widget.PLIST_TEXTURE)}s=null;var w=b.progressBarData,x=w.resourceType;switch(x){case 0:var i=w.path,j=i?this._filePath+i:null;c.loadProgressBarTexture(j);break;case 1:var i=w.path;c.loadProgressBarTexture(i,ccui.Widget.PLIST_TEXTURE)}this.setColorPropsForWidgetFromJsonDictionary(a,b),c.setPercent(b.percent)},setPropsForTextAreaFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a;c.setString(b.text),void 0!==b.fontSize&&c.setFontSize(b.fontSize);var d=b.colorR,e=b.colorG,f=b.colorB;if(c.setColor(cc.color(null==d?255:d,null==e?255:e,null==f?255:f)),c.setFontName(b.fontName),void 0!==b.areaWidth&&void 0!==b.areaHeight){var g=cc.size(b.areaWidth,b.areaHeight);c.setTextAreaSize(g)}b.hAlignment&&c.setTextHorizontalAlignment(b.hAlignment),b.vAlignment&&c.setTextVerticalAlignment(b.vAlignment),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForTextButtonFromJsonDictionary:function(a,b){this.setPropsForButtonFromJsonDictionary(a,b);var c=a;c.setTitleText(b.text||"");var d=void 0!==b.textColorR?b.textColorR:255,e=void 0!==b.textColorG?b.textColorG:255,f=void 0!==b.textColorB?b.textColorB:255;c.setTitleColor(cc.color(d,e,f)),void 0!==b.fontSize&&c.setTitleFontSize(b.fontSize),void 0!==b.fontName&&c.setTitleFontName(b.fontName),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForTextFieldFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a;void 0!==b.placeHolder&&c.setPlaceHolder(b.placeHolder),c.setString(b.text),void 0!==b.fontSize&&c.setFontSize(b.fontSize),void 0!==b.fontName&&c.setFontName(b.fontName),void 0!==b.touchSizeWidth&&void 0!==b.touchSizeHeight&&c.setTouchSize(cc.size(b.touchSizeWidth,b.touchSizeHeight));var d=(b.width,b.height,b.maxLengthEnable);if(c.setMaxLengthEnabled(d),d){var e=b.maxLength;c.setMaxLength(e)}var f=b.passwordEnable;c.setPasswordEnabled(f),f&&c.setPasswordStyleText(b.passwordStyleText),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForLoadingBarFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.textureData,e=d.resourceType;switch(e){case 0:var f=this._filePath,g=d.path,h=null;g&&(h=f+g,c.loadTexture(h));break;case 1:var g=d.path;c.loadTexture(g,ccui.Widget.PLIST_TEXTURE)}d=null;var i=b.scale9Enable;if(c.setScale9Enabled(i),i){var j=b.capInsetsX,k=b.capInsetsY,l=b.capInsetsWidth,m=b.capInsetsHeight;c.setCapInsets(cc.rect(j,k,l,m));var n=b.width,o=b.height;c.setSize(cc.size(n,o))}c.setDirection(b.direction),c.setPercent(b.percent),this.setColorPropsForWidgetFromJsonDictionary(a,b)},setPropsForListViewFromJsonDictionary:function(a,b){this.setPropsForLayoutFromJsonDictionary(a,b);var c=b.innerWidth||0,d=b.innerHeight||0;a.setInnerContainerSize(cc.size(c,d)),a.setDirection(b.direction||0),a.setGravity(b.gravity||0),a.setItemsMargin(b.itemMargin||0)},setPropsForPageViewFromJsonDictionary:function(a,b){this.setPropsForLayoutFromJsonDictionary(a,b)},setPropsForLabelBMFontFromJsonDictionary:function(a,b){this.setPropsForWidgetFromJsonDictionary(a,b);var c=a,d=b.fileNameData,e=d.resourceType;switch(e){case 0:var f=d.path,g=this._filePath+f;c.setFntFile(g);break;case 1:cc.log("Wrong res type of LabelAtlas!")}d=null;var h=b.text;c.setString(h),this.setColorPropsForWidgetFromJsonDictionary(a,b)},widgetFromProtocolBuffers:function(a){var b=a.classname,c=this._createGUI(b),d=this._getWidgetReaderClassName(b),e=this._createWidgetReaderProtocol(d);if(e)this.setPropsForAllWidgetFromProtocolBuffers(e,c,a);else if(d=this._getWidgetReaderClassNameFromWidget(c),e=this._createWidgetReaderProtocol(d),e&&c){this.setPropsForAllWidgetFromProtocolBuffers(e,c,a);var f=a.widgetOptions,g=f.componentOptions;this.setPropsForAllCustomWidgetFromJsonDictionary(b,c,g)}else cc.log("Widget or WidgetReader doesn't exists!!!  Please check your json file.");for(var h=a.children.length,i=0;h>i;++i){var j=a.children[i],k=this.widgetFromProtocolBuffers(j);if(k){var l=c;if(l instanceof ccui.PageView)l.addPage(k);else{var m=c;m instanceof ccui.ListView?m.pushBackCustomItem(k):c.addChild(k)}}}return c},setPropsForAllWidgetFromProtocolBuffers:function(a,b,c){a.setPropsFromProtocolBuffers(b,c)},widgetFromXML:function(a,b){var c=b.substr(0,b.find("ObjectData")),d=this.createGUI(c),e=this.getWidgetReaderClassName(c),f=this.createWidgetReaderProtocol(e);if(f)this.setPropsForAllWidgetFromXML(f,d,a);else if(e=this.getWidgetReaderClassName(d),f=this.createWidgetReaderProtocol(e),f&&d){this.setPropsForAllWidgetFromXML(f,d,a);var g,h="";g.Parse(h),g.HasParseError()&&cc.log("GetParseError %s\n",g.GetParseError()),this.setPropsForAllCustomWidgetFromJsonDictionary(c,d,g)}else cc.log("Widget or WidgetReader doesn't exists!!!  Please check your json file.");var i=!1;for(a=a.FirstChildElement();a;){if("Children"!==a.Name()){i=!0;break}a=a.NextSiblingElement()}if(i)for(a=a.FirstChildElement();a;){for(var j=a.FirstAttribute();j;){var k=j.Name(),l=j.Value();if("ctype"==k){var m=this.widgetFromXML(a,l);if(m){var n=d,o=d;if(n instanceof ccui.PageView){var p=m;p instanceof ccui.Layout&&n.addPage(p)}else if(o){var q=m;q instanceof ccui.Widget&&o.pushBackCustomItem(q)}else d.addChild(m)}break}j=j.Next()}a=a.NextSiblingElement()}return d},setPropsForAllWidgetFromXML:function(a,b,c){a.setPropsFromXML(b,c)}}),ccs.sceneReader={_baseBath:"",_listener:null,_selector:null,_node:null,createNodeWithSceneFile:function(a){this._node=null;do{this._baseBath=cc.path.dirname(a);var b=cc.loader.getRes(a);if(!b)throw"Please load the resource first : "+a;this._node=this.createObject(b,null),ccs.triggerManager.parse(b.Triggers||[])}while(0);return this._node},createObject:function(a,b){var c=a.classname;if("CCNode"==c){var d=null;b?(d=new cc.Node,b.addChild(d)):d=new cc.Node,this.setPropertyFromJsonDict(d,a);for(var e=a.components,f=0;f<e.length;f++){var g=e[f];if(!g)break;c=g.classname;var h=g.name,i=g.fileData,j="",k="",l=0;null!=i&&(l=void 0!==i.resourceType?i.resourceType:-1,j=cc.path.join(this._baseBath,i.path),k=i.plistFile);var m=cc.path.extname(j);if("CCSprite"==c){var n=null;if(0==l){if(".png"!=m)continue;n=new cc.Sprite(j)}else{if(1!=l)continue;if(".plist"!=m)continue;k=cc.path.join(this._baseBath,k);var o=cc.path.changeExtname(k,".png");cc.spriteFrameCache.addSpriteFrames(k,o),n=new cc.Sprite("#"+i.path)}var p=new ccs.ComRender(n,"CCSprite");null!=h&&p.setName(h),d.addComponent(p),this._callSelector(n,g)}else if("CCTMXTiledMap"==c){var q=null;if(0!=l)continue;if(".tmx"!=m)continue;q=new cc.TMXTiledMap(j);var p=new ccs.ComRender(q,"CCTMXTiledMap");null!=h&&p.setName(h),d.addComponent(p),this._callSelector(q,g)}else if("CCParticleSystemQuad"==c){if(".plist"!=m)continue;var r=null;if(0!=l){cc.log("unknown resourcetype on CCParticleSystemQuad!");continue}r=new cc.ParticleSystem(j),r.setPosition(0,0);var p=new ccs.ComRender(r,"CCParticleSystemQuad");null!=h&&p.setName(h),d.addComponent(p),this._callSelector(r,g)}else if("CCArmature"==c){if(0!=l)continue;var s=cc.loader.getRes(j);s||cc.log("Please load the resource [%s] first!",j);var t=s.armature_data,u=t[0],v=u.name;ccs.armatureDataManager.addArmatureFileInfo(j);var w=new ccs.Armature(v),p=new ccs.ComRender(w,"CCArmature");
null!=h&&p.setName(h),d.addComponent(p);var x=g.selectedactionname;x&&w.getAnimation()&&w.getAnimation().play(x),s=null,u=null,this._callSelector(w,g)}else if("CCComAudio"==c){var y=null;if(0!=l)continue;y=new ccs.ComAudio,y.preloadEffect(j),h&&y.setName(h),d.addComponent(y),this._callSelector(y,g)}else if("CCComAttribute"==c){var z=null;if(0!=l){cc.log("unknown resourcetype on CCComAttribute!");continue}z=new ccs.ComAttribute,""!=j&&z.parse(j),h&&z.setName(h),d.addComponent(z),this._callSelector(z,g)}else if("CCBackgroundAudio"==c){if(!m)continue;if(0!=l)continue;var y=new ccs.ComAudio;y.preloadBackgroundMusic(j),y.setFile(j);var A=Boolean(g.loop||0);y.setLoop(A),h&&y.setName(h),d.addComponent(y),y.playBackgroundMusic(j,A),this._callSelector(y,g)}else if("GUIComponent"==c){var B=ccs.uiReader.widgetFromJsonFile(j),p=new ccs.ComRender(B,"GUIComponent");null!=h&&p.setName(h),d.addComponent(p),this._callSelector(y,g)}g=null}for(var C=a.gameobjects,f=0;f<C.length;f++){var g=C[f];if(!g)break;this.createObject(g,d),g=null}var D=a.CanvasSize;if(D){var E=D._width,F=D._height;d.setContentSize(cc.size(E,F))}return d}return null},_nodeByTag:function(a,b){if(null==a)return null;for(var c=null,d=a.getChildren(),e=0;e<d.length;e++){var f=d[e];if(f&&f.getTag()==b){c=f;break}if(c=this._nodeByTag(f,b))break}return c},getNodeByTag:function(a){return null==this._node?null:this._node.getTag()==a?this._node:this._nodeByTag(this._node,a)},setPropertyFromJsonDict:function(a,b){var c=cc.isUndefined(b.x)?0:b.x,d=cc.isUndefined(b.y)?0:b.y;a.setPosition(c,d);var e=Boolean(cc.isUndefined(b.visible)?1:b.visible);a.setVisible(e);var f=cc.isUndefined(b.objecttag)?-1:b.objecttag;a.setTag(f);var g=cc.isUndefined(b.zorder)?0:b.zorder;a.setLocalZOrder(g);var h=cc.isUndefined(b.scalex)?1:b.scalex,i=cc.isUndefined(b.scaley)?1:b.scaley;a.setScaleX(h),a.setScaleY(i);var j=cc.isUndefined(b.rotation)?0:b.rotation;a.setRotation(j);var k=b.name||"";a.setName(k)},setTarget:function(a,b){this._listener=b,this._selector=a},_callSelector:function(a,b){this._selector&&this._selector.call(this._listener,a,b)},version:function(){return"1.2.0.0"},clear:function(){ccs.triggerManager.removeAll(),cc.audioEngine.end()}},ccs.ActionTimelineData=ccs.Class.extend({_actionTag:0,ctor:function(a){this._init(a)},_init:function(a){return this._actionTag=a,!0},setActionTag:function(a){this._actionTag=a},getActionTag:function(){return this._actionTag}}),ccs.ActionTimelineData.create=function(a){return new ccs.ActionTimelineData(a)},ccs.ActionTimeline=cc.Action.extend({_timelineMap:null,_timelineList:null,_duration:0,_time:null,_timeSpeed:1,_frameInternal:1/60,_playing:!1,_currentFrame:0,_startFrame:0,_endFrame:0,_loop:null,_frameEventListener:null,ctor:function(){cc.Action.prototype.ctor.call(this),this._timelineMap={},this._timelineList=[],this.init()},_gotoFrame:function(a){for(var b=this._timelineList.length,c=0;b>c;c++)this._timelineList[c]._gotoFrame(a)},_stepToFrame:function(a){for(var b=this._timelineList.length,c=0;b>c;c++)this._timelineList[c]._stepToFrame(a)},_emitFrameEvent:function(a){this._frameEventListener&&this._frameEventListener(a)},init:function(){return!0},gotoFrameAndPlay:function(a,b,c,d){var e,f=0,g=arguments.length,h=[];for(f;g>f;f++)"boolean"==typeof arguments[f]?e=arguments[f]:h.push(arguments[f]);a=h[0],b=h[1]||this._duration,c=h[2]||a,d=null!=e?e:!0,this._startFrame=a,this._endFrame=b,this._currentFrame=c,this._loop=d,this._time=this._currentFrame*this._frameInternal,this.resume(),this._gotoFrame(this._currentFrame)},gotoFrameAndPause:function(a){this._startFrame=this._currentFrame=a,this._time=this._currentFrame*this._frameInternal,this.pause(),this._gotoFrame(this._currentFrame)},pause:function(){this._playing=!1},resume:function(){this._playing=!0},isPlaying:function(){return this._playing},setTimeSpeed:function(a){this._timeSpeed=a},getTimeSpeed:function(){return this._timeSpeed},setDuration:function(a){this._duration=a},getDuration:function(){return this._duration},getStartFrame:function(){return this._startFrame},getEndFrame:function(){return this._endFrame},setCurrentFrame:function(a){a>=this._startFrame&&a>=this._endFrame?(this._currentFrame=a,this._time=this._currentFrame*this._frameInternal):cc.log("frame index is not between start frame and end frame")},getCurrentFrame:function(){return this._currentFrame},addTimeline:function(a){var b=a.getActionTag();this._timelineMap[b]||(this._timelineMap[b]=[]),this._timelineMap[b].some(function(b){return b===a?!0:void 0})||(this._timelineList.push(a),this._timelineMap[b].push(a),a.setActionTimeline(this))},removeTimeline:function(a){var b=a.getActionTag();this._timelineMap[b]&&this._timelineMap[b].some(function(b){return b===a?!0:void 0})&&(cc.arrayRemoveObject(this._timelineMap[b],a),cc.arrayRemoveObject(this._timelineList,a),a.setActionTimeline(null))},getTimelines:function(){return this._timelineList},setFrameEventCallFunc:function(a){this._frameEventListener=a},clearFrameEventCallFunc:function(){this._frameEventListener=null},clone:function(){var a=new ccs.ActionTimeline;a.setDuration(this._duration),a.setTimeSpeed(this._timeSpeed);for(var b in this._timelineMap){var c=this._timelineMap[b];for(var d in c){var e=c[d],f=e.clone();a.addTimeline(f)}}return a},reverse:function(){return null},step:function(a){this._playing&&0!=this._timelineMap.length&&0!=this._duration&&(this._time+=a*this._timeSpeed,this._currentFrame=this._time/this._frameInternal,this._stepToFrame(this._currentFrame),this._time>this._endFrame*this._frameInternal&&(this._playing=this._loop,this._playing?this.gotoFrameAndPlay(this._startFrame,this._endFrame,this._loop):this._time=this._endFrame*this._frameInternal))},_foreachNodeDescendant:function(a,b){b(a);for(var c=a.getChildren(),d=0;d<c.length;d++){var e=c[d];this._foreachNodeDescendant(e,b)}},startWithTarget:function(a){cc.Action.prototype.startWithTarget.call(this,a);var b=this,c=function(a){var c=a.getUserObject();if(c){var d=c.getActionTag();if(b._timelineMap[d])for(var e=b._timelineMap[d],f=0;f<e.length;f++){var g=e[f];g.setNode(a)}}};this._foreachNodeDescendant(a,c)},isDone:function(){return!1}}),ccs.ActionTimeline.create=function(){return new ccs.ActionTimeline},ccui.actionTimelineCacheStatic={FrameType_VisibleFrame:"VisibleFrame",FrameType_PositionFrame:"PositionFrame",FrameType_ScaleFrame:"ScaleFrame",FrameType_RotationFrame:"RotationFrame",FrameType_SkewFrame:"SkewFrame",FrameType_RotationSkewFrame:"RotationSkewFrame",FrameType_AnchorFrame:"AnchorPointFrame",FrameType_InnerActionFrame:"InnerActionFrame",FrameType_ColorFrame:"ColorFrame",FrameType_TextureFrame:"TextureFrame",FrameType_EventFrame:"EventFrame",FrameType_ZOrderFrame:"ZOrderFrame",ACTION:"action",DURATION:"duration",TIMELINES:"timelines",FRAME_TYPE:"frameType",FRAMES:"frames",FRAME_INDEX:"frameIndex",TWEEN:"tween",TIME_SPEED:"speed",ACTION_TAG:"actionTag",INNER_ACTION:"innerActionType",START_FRAME:"startFrame",X:"x",Y:"y",ROTATION:"rotation",ALPHA:"alpha",RED:"red",GREEN:"green",BLUE:"blue",Value:"value"},ccs.actionTimelineCache={_FrameCreateFunc:null,_Pair:null,_funcs:null,_animationActions:null,init:function(){this._animationActions={},this._funcs={},this._funcs.VisibleFrame=this._loadVisibleFrame,this._funcs.PositionFrame=this._loadPositionFrame,this._funcs.ScaleFrame=this._loadScaleFrame,this._funcs.RotationFrame=this._loadRotationFrame,this._funcs.SkewFrame=this._loadSkewFrame,this._funcs.RotationSkewFrame=this._loadRotationSkewFrame,this._funcs.AnchorFrame=this._loadAnchorPointFrame,this._funcs.InnerActionFrame=this._loadInnerActionFrame,this._funcs.ColorFrame=this._loadColorFrame,this._funcs.TextureFrame=this._loadTextureFrame,this._funcs.EventFrame=this._loadEventFrame,this._funcs.ZOrderFrame=this._loadZOrderFrame},removeAction:function(a){this._animationActions[a]&&delete this._animationActions[a]},createAction:function(a){var b=a,c=b.lastIndexOf("."),d=b.substr(c+1,b.length),e=ccs.actionTimelineCache;return"csb"==d?e.createActionFromProtocolBuffers(a):"json"==d||"ExportJson"==d?e.createActionFromJson(a):("xml"==d&&cc.log("Does not support"),null)},createActionFromJson:function(a){var b=this._animationActions[a];return null==b&&(b=this.loadAnimationActionWithFile(a)),b.clone()},loadAnimationActionWithFile:function(a){var b=cc.loader.getRes(a);return this.loadAnimationActionWithContent(a,b)},loadAnimationActionWithContent:function(a,b){var c=this._animationActions[a];if(c)return c;var d=b[ccui.actionTimelineCacheStatic.ACTION];c=new ccs.ActionTimeline,c.setDuration(d[ccui.actionTimelineCacheStatic.DURATION]),c.setTimeSpeed(d[ccui.actionTimelineCacheStatic.TIME_SPEED]||1);for(var e=d[ccui.actionTimelineCacheStatic.TIMELINES].length,f=0;e>f;f++){var g=d[ccui.actionTimelineCacheStatic.TIMELINES][f],h=this._loadTimeline(g);h&&c.addTimeline(h)}return this._animationActions[a]=c,c},createActionFromProtocolBuffers:function(a){var b=this._animationActions[a];return null==b&&(b=this.loadAnimationActionWithFileFromProtocolBuffers(a)),b.clone()},loadAnimationActionWithFileFromProtocolBuffers:function(a){var b=this._animationActions[a];if(b)return b;var c=cc.loader.getRes(a),d=PBP.CSParseBinary.decode(c),e=d.action;b=new ccs.ActionTimeline,b.setDuration(e.duration),b.setTimeSpeed(null!==e.speed?e.speed:1);for(var f=e.timelines.length,g=0;f>g;g++)var h=e.timelines[g],i=this.loadTimelineFromProtocolBuffers(h);for(var g=0;f>g;g++){var h=e.timelines[g],i=this.loadTimelineFromProtocolBuffers(h);i&&b.addTimeline(i)}return this._animationActions[a]=b,b},_loadTimeline:function(a){var b=null,c=a[ccui.actionTimelineCacheStatic.FRAME_TYPE];if(null==c)return null;if(c&&this._funcs[c]){b=new ccs.Timeline;var d=a[ccui.actionTimelineCacheStatic.ACTION_TAG];b.setActionTag(d);for(var e=this._funcs[c],f=a[ccui.actionTimelineCacheStatic.FRAMES].length,g=0;f>g;g++){var h=a[ccui.actionTimelineCacheStatic.FRAMES][g],i=null;if(null!=e){i=e(h);var j=h[ccui.actionTimelineCacheStatic.FRAME_INDEX];i.setFrameIndex(j);var k=h[ccui.actionTimelineCacheStatic.TWEEN]||!1;i.setTween(k)}b.addFrame(i)}}return b},_loadVisibleFrame:function(a){var b=new ccs.VisibleFrame,c=a[ccui.actionTimelineCacheStatic.Value];return b.setVisible(c),b},_loadPositionFrame:function(a){var b=new ccs.PositionFrame,c=a[ccui.actionTimelineCacheStatic.X],d=a[ccui.actionTimelineCacheStatic.Y];return b.setPosition(cc.p(c,d)),b},_loadScaleFrame:function(a){var b=new ccs.ScaleFrame,c=a[ccui.actionTimelineCacheStatic.X],d=a[ccui.actionTimelineCacheStatic.Y];return b.setScaleX(c),b.setScaleY(d),b},_loadSkewFrame:function(a){var b=new ccs.SkewFrame,c=a[ccui.actionTimelineCacheStatic.X],d=a[ccui.actionTimelineCacheStatic.Y];return b.setSkewX(c),b.setSkewY(d),b},_loadRotationSkewFrame:function(a){var b=new ccs.RotationSkewFrame,c=a[ccui.actionTimelineCacheStatic.X],d=a[ccui.actionTimelineCacheStatic.Y];return b.setSkewX(c),b.setSkewY(d),b},_loadRotationFrame:function(a){var b=new ccs.RotationFrame,c=a[ccui.actionTimelineCacheStatic.ROTATION];return b.setRotation(c),b},_loadAnchorPointFrame:function(a){var b=new ccs.AnchorPointFrame,c=a[ccui.actionTimelineCacheStatic.X],d=a[ccui.actionTimelineCacheStatic.Y];return b.setAnchorPoint(Point(c,d)),b},_loadInnerActionFrame:function(a){var b=new ccs.InnerActionFrame,c=a[ccui.actionTimelineCacheStatic.INNER_ACTION],d=a[ccui.actionTimelineCacheStatic.START_FRAME];return b.setInnerActionType(c),b.setStartFrameIndex(d),b},_loadColorFrame:function(a){var b=new ccs.ColorFrame,c=a[ccui.actionTimelineCacheStatic.ALPHA],d=a[ccui.actionTimelineCacheStatic.RED],e=a[ccui.actionTimelineCacheStatic.GREEN],f=a[ccui.actionTimelineCacheStatic.BLUE];return b.setAlpha(c),b.setColor(cc.color(d,e,f)),b},_loadTextureFrame:function(a){var b=new ccs.TextureFrame,c=a[ccui.actionTimelineCacheStatic.Value];if(null!=c){var d=c,e=cc.spriteFrameCache.getSpriteFrame(d);if(null==e){var f=ccs.csLoader.getJsonPath();d=f+c}b.setTextureName(d)}return b},_loadEventFrame:function(a){var b=new ccs.EventFrame,c=a[ccui.actionTimelineCacheStatic.Value];return null!=c&&b.setEvent(c),b},_loadZOrderFrame:function(a){var b=new ccs.ZOrderFrame,c=a[ccui.actionTimelineCacheStatic.Value];return b.setZOrder(c),b},loadTimelineFromProtocolBuffers:function(a){var b=null,c=a.frameType;if(null==c)return null;if(c){b=new ccs.Timeline;var d=a.actionTag;b.setActionTag(d);for(var e=a.frames.length,f=0;e>f;f++){var g=a.frames[f],h=null;if(ccui.actionTimelineCacheStatic.FrameType_VisibleFrame===c){var i=g.visibleFrame;h=this.loadVisibleFrameFromProtocolBuffers(i)}else if(ccui.actionTimelineCacheStatic.FrameType_PositionFrame===c){var j=g.positionFrame;h=this.loadPositionFrameFromProtocolBuffers(j)}else if(ccui.actionTimelineCacheStatic.FrameType_ScaleFrame===c){var k=g.scaleFrame;h=this.loadScaleFrameFromProtocolBuffers(k)}else if(ccui.actionTimelineCacheStatic.FrameType_RotationSkewFrame===c){var l=g.rotationSkewFrame;h=this.loadRotationSkewFrameFromProtocolBuffers(l)}else if(ccui.actionTimelineCacheStatic.FrameType_AnchorFrame===c){var m=g.anchorPointFrame;h=this.loadAnchorPointFrameFromProtocolBuffers(m)}else if(ccui.actionTimelineCacheStatic.FrameType_ColorFrame===c){var n=g.colorFrame;h=this.loadColorFrameFromProtocolBuffers(n)}else if(ccui.actionTimelineCacheStatic.FrameType_TextureFrame===c){var o=g.textureFrame;h=this.loadTextureFrameFromProtocolBuffers(o)}else if(ccui.actionTimelineCacheStatic.FrameType_EventFrame===c){var p=g.eventFrame;h=this.loadEventFrameFromProtocolBuffers(p)}else if(ccui.actionTimelineCacheStatic.FrameType_ZOrderFrame===c){var q=g.zOrderFrame;h=this.loadZOrderFrameFromProtocolBuffers(q)}b.addFrame(h)}}return b},loadVisibleFrameFromProtocolBuffers:function(a){var b=new ccs.VisibleFrame,c=a.value;b.setVisible(c);var d=null!==a.frameIndex?a.frameIndex:0;b.setFrameIndex(d);var e=null!==a.tween?a.tween:!1;return b.setTween(e),b},loadPositionFrameFromProtocolBuffers:function(a){var b=new ccs.PositionFrame,c=a.x,d=a.y;b.setPosition(cc.p(c,d));var e=null!==a.frameIndex?a.frameIndex:0;b.setFrameIndex(e);var f=null!==a.tween?a.tween:!1;return b.setTween(f),b},loadScaleFrameFromProtocolBuffers:function(a){var b=new ccs.ScaleFrame,c=a.x,d=a.y;b.setScaleX(c),b.setScaleY(d);var e=null!==a.frameIndex?a.frameIndex:0;b.setFrameIndex(e);var f=null!==a.tween?a.tween:!1;return b.setTween(f),b},loadRotationSkewFrameFromProtocolBuffers:function(a){var b=new ccs.RotationSkewFrame,c=a.x,d=a.y;b.setSkewX(c),b.setSkewY(d);var e=null!==a.frameIndex?a.frameIndex:0;b.setFrameIndex(e);var f=null!==a.tween?a.tween:!1;return b.setTween(f),b},loadAnchorPointFrameFromProtocolBuffers:function(a){var b=new ccs.AnchorPointFrame,c=a.x,d=a.y;b.setAnchorPoint(cc.p(c,d));var e=null!==a.frameIndex?a.frameIndex:0;b.setFrameIndex(e);var f=null!==a.tween?a.tween:!1;return b.setTween(f),b},loadColorFrameFromProtocolBuffers:function(a){var b=new ccs.ColorFrame,c=a.alpha,d=a.red,e=a.green,f=a.blue;b.setAlpha(c),b.setColor(cc.color(d,e,f));var g=null!==a.frameIndex?a.frameIndex:0;b.setFrameIndex(g);var h=null!==a.tween?a.tween:!1;return b.setTween(h),b},loadTextureFrameFromProtocolBuffers:function(a){var b=new ccs.TextureFrame,c=a.filepath;null!=c&&b.setTextureName(c);var d=null!==a.frameIndex?a.frameIndex:0;b.setFrameIndex(d);var e=null!==a.tween?a.tween:!1;return b.setTween(e),b},loadEventFrameFromProtocolBuffers:function(a){var b=new ccs.EventFrame,c=a.value;null!=c&&b.setEvent(c);var d=null!==a.frameIndex?a.frameIndex:0;b.setFrameIndex(d);var e=null!==a.tween?a.tween:!1;return b.setTween(e),b},loadZOrderFrameFromProtocolBuffers:function(a){var b=new ccs.ZOrderFrame,c=a.value;b.setZOrder(c);var d=null!==a.frameIndex?a.frameIndex:0;b.setFrameIndex(d);var e=null!==a.tween?a.tween:!1;return b.setTween(e),b},createActionFromXML:function(a){var b=this._animationActions[a];return null==b&&(b=this.loadAnimationActionWithFileFromXML(a)),b.clone()},loadAnimationActionWithFileFromXML:function(a){var b=this._animationActions[a];if(b)return b;var c=cc.loader.getRes(a),d=new tinyxml2.XMLDocument;d.Parse(c);for(var e=d.RootElement(),f=e.FirstChildElement(),g=!1;f;){if(0==strcmp("Content",f.Name())){var h=f.FirstAttribute();h||(g=!0)}if(g)break;var i=f.FirstChildElement();f=i?i:f.NextSiblingElement()}if(g)for(var i=f.FirstChildElement();i;){var j=i.Name();if("Animation"==j){var k=i;b=this.loadActionTimelineFromXML(k)}i=i.NextSiblingElement()}return b},loadActionTimelineFromXML:function(a){for(var b=new ccs.ActionTimeline,c=a.FirstAttribute();c;){var d=c.Name(),e=c.Value();"Duration"==d?b.setDuration(atoi(e.c_str())):"Speed"==d&&b.setTimeSpeed(atof(e.c_str())),c=c.Next()}for(var f=a.FirstChildElement();f;){var g=loadTimelineFromXML(f);g&&b.addTimeline(g),f=f.NextSiblingElement()}return b},loadTimelineFromXML:function(a){for(var b=null,c=0,d="",e=a.FirstAttribute();e;){var f=e.Name(),g=e.Value();"ActionTag"==f?c=atoi(g.c_str()):"FrameType"==f&&(d=g),e=e.Next()}""!=d&&(b=new ccs.Timeline,b.setActionTag(c));for(var h=a.FirstChildElement();h;){var i=null;d==FrameType_VisibleFrame?i=loadVisibleFrameFromXML(h):d==FrameType_PositionFrame?i=loadPositionFrameFromXML(h):d==FrameType_ScaleFrame?i=loadScaleFrameFromXML(h):d==FrameType_RotationSkewFrame?i=loadRotationSkewFrameFromXML(h):d==FrameType_AnchorFrame?i=loadAnchorPointFrameFromXML(h):d==FrameType_ColorFrame?i=loadColorFrameFromXML(h):d==FrameType_TextureFrame?i=loadTextureFrameFromXML(h):d==FrameType_EventFrame?i=loadEventFrameFromXML(h):d==FrameType_ZOrderFrame&&(i=loadZOrderFrameFromXML(h)),i&&b.addFrame(i),h=h.NextSiblingElement()}return b},loadVisibleFrameFromXML:function(a){var b=new ccs.VisibleFrame;b.setTween(!0);for(var c=a.FirstAttribute();c;){var d=c.Name(),e=c.Value();"Value"==d?b.setVisible("True"==e?!0:!1):"FrameIndex"==d?b.setFrameIndex(atoi(e)):"Tween"==d&&b.setTween("True"==e?!0:!1),c=c.Next()}return b},loadPositionFrameFromXML:function(a){var b=new ccs.PositionFrame;b.setTween(!0);for(var c=a.FirstAttribute();c;){var d=c.Name(),e=c.Value();"X"==d?b.setX(atof(e)):"Y"==d?b.setY(atof(e)):"FrameIndex"==d?b.setFrameIndex(atoi(e)):"Tween"==d&&b.setTween("True"==e?!0:!1),c=c.Next()}return b},loadScaleFrameFromXML:function(a){var b=new ccs.ScaleFrame;b.setTween(!0);for(var c=a.FirstAttribute();c;){var d=c.Name(),e=c.Value();"X"==d?b.setScaleX(atof(e)):"Y"==d?b.setScaleY(atof(e)):"FrameIndex"==d?b.setFrameIndex(atoi(e)):"Tween"==d&&b.setTween("True"==e?!0:!1),c=c.Next()}return b},loadRotationSkewFrameFromXML:function(a){var b=new ccs.RotationSkewFrame;b.setTween(!0);for(var c=a.FirstAttribute();c;){var d=c.Name(),e=c.Value();"X"==d?b.setSkewX(atof(e)):"Y"==d?b.setSkewY(atof(e)):"FrameIndex"==d?b.setFrameIndex(atoi(e)):"Tween"==d&&b.setTween("True"==e?!0:!1),c=c.Next()}return b},loadAnchorPointFrameFromXML:function(a){var b=new ccs.AnchorPointFrame,c=.5,d=.5;b.setTween(!0);for(var e=a.FirstAttribute();e;){var f=e.Name(),g=e.Value();"X"==f?c=atof(g):"Y"==f?d=atof(g):"FrameIndex"==f?b.setFrameIndex(atoi(g)):"Tween"==f&&b.setTween("True"==g?!0:!1),e=e.Next()}return b.setAnchorPoint(cc.p(c,d)),b},loadColorFrameFromXML:function(a){var b=new ccs.ColorFrame,c=255,d=255,e=255;b.setTween(!0);for(var f=a.FirstAttribute();f;){var g=f.Name(),h=f.Value();"FrameIndex"==g?b.setFrameIndex(atoi(h)):"Alpha"==g?b.setAlpha(atoi(h)):"Tween"==g&&b.setTween("True"==h?!0:!1),f=f.Next()}for(var i=a.FirstChildElement();i;){for(var f=i.FirstAttribute();f;){var g=f.Name(),h=f.Value();"R"==g?c=atoi(h):"G"==g?d=atoi(h):"B"==g&&(e=atoi(h)),f=f.Next()}i=i.NextSiblingElement()}return b.setColor(cc.color(c,d,e)),b},loadTextureFrameFromXML:function(a){var b=new ccs.TextureFrame;b.setTween(!0);for(var c=a.FirstAttribute();c;){var d=c.Name(),e=c.Value();"Path"==d?b.setTextureName(e):"FrameIndex"==d?b.setFrameIndex(atoi(e.c_str())):"Tween"==d&&b.setTween("True"==e?!0:!1),c=c.Next()}return b},loadEventFrameFromXML:function(a){var b=new ccs.EventFrame;b.setTween(!0);for(var c=a.FirstAttribute();c;){var d=c.Name(),e=c.Value();"EventStr"==d?b.setEvent(e):"FrameIndex"==d?b.setFrameIndex(atoi(e.c_str())):"Tween"==d&&b.setTween("True"==e?!0:!1),c=c.Next()}return b},loadZOrderFrameFromXML:function(){var a=new ccs.ZOrderFrame;a.setTween(!0);for(var b=frameElement.FirstAttribute();b;){var c=b.Name(),d=b.Value();"zorder"==c?a.setZOrder(atoi(d)):"FrameIndex"==c?a.setFrameIndex(atoi(d)):"Tween"==c&&a.setTween("True"==d?!0:!1),b=b.Next()}return a}},ccs.actionTimelineCache.init(),ccs.actionTimelineCache._sharedActionCache=null,ccs.Frame=ccs.Class.extend({_frameIndex:null,_tween:null,_timeline:null,_node:null,ctor:function(){this._frameIndex=0,this._tween=!0,this._timeline=null,this._node=null},_emitEvent:function(){this._timeline&&this._timeline.getActionTimeline()._emitFrameEvent(this)},_cloneProperty:function(a){this._frameIndex=a.getFrameIndex(),this._tween=a.isTween()},setFrameIndex:function(a){this._frameIndex=a},getFrameIndex:function(){return this._frameIndex},setTimeline:function(a){this._timeline=a},getTimeline:function(){return this._timeline},setNode:function(a){this._node=a},getNode:function(){return this._node},setTween:function(a){this._tween=a},isTween:function(){return this._tween},onEnter:function(){},apply:function(){},clone:function(){}}),ccs.VisibleFrame=ccs.Frame.extend({_visible:!0,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._visible=!0},onEnter:function(){this._node.setVisible(this._visible)},clone:function(){var a=new ccs.VisibleFrame;return a.setVisible(this._visible),a._cloneProperty(this),a},setVisible:function(a){this._visible=a},isVisible:function(){return this._visible}}),ccs.VisibleFrame.create=function(){return new ccs.VisibleFrame},ccs.TextureFrame=ccs.Frame.extend({_sprite:null,_textureName:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._textureName=""},setNode:function(a){ccs.Frame.prototype.setNode.call(this,a),this._sprite=a},onEnter:function(){if(this._sprite){var a=cc.spriteFrameCache.getSpriteFrame(this._textureName);null!=a?this._sprite.setSpriteFrame(a):this._sprite.setTexture(this._textureName)}},clone:function(){var a=new ccs.TextureFrame;return a.setTextureName(this._textureName),a._cloneProperty(this),a},setTextureName:function(a){this._textureName=a},getTextureName:function(){return this._textureName}}),ccs.TextureFrame.create=function(){return new ccs.TextureFrame},ccs.RotationFrame=ccs.Frame.extend({_rotation:null,_betwennRotation:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._rotation=0},onEnter:function(a){this._node.setRotation(this._rotation),this._tween&&(this._betwennRotation=a._rotation-this._rotation)},apply:function(a){if(this._tween&&0!=this._betwennRotation){var b=this._rotation+a*this._betwennRotation;this._node.setRotation(b)}},clone:function(){var a=new ccs.RotationFrame;return a.setRotation(this._rotation),a._cloneProperty(this),a},setRotation:function(a){this._rotation=a},getRotation:function(){return this._rotation}}),ccs.RotationFrame.create=function(){return new ccs.RotationFrame},ccs.SkewFrame=ccs.Frame.extend({_skewX:null,_skewY:null,_betweenSkewX:null,_betweenSkewY:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._skewX=0,this._skewY=0},onEnter:function(a){this._node.setSkewX(this._skewX),this._node.setSkewY(this._skewY),this._tween&&(this._betweenSkewX=a._skewX-this._skewX,this._betweenSkewY=a._skewY-this._skewY)},apply:function(a){if(this._tween&&(0!=this._betweenSkewX||0!=this._betweenSkewY)){var b=this._skewX+a*this._betweenSkewX,c=this._skewY+a*this._betweenSkewY;this._node.setSkewX(b),this._node.setSkewY(c)}},clone:function(){var a=new ccs.SkewFrame;return a.setSkewX(this._skewX),a.setSkewY(this._skewY),a._cloneProperty(this),a},setSkewX:function(a){this._skewX=a},getSkewX:function(){return this._skewX},setSkewY:function(a){this._skewY=a},getSkewY:function(){return this._skewY}}),ccs.SkewFrame.create=function(){return new ccs.SkewFrame},ccs.RotationSkewFrame=ccs.SkewFrame.extend({onEnter:function(a){this._node.setRotationX(this._skewX),this._node.setRotationY(this._skewY),this._tween&&(this._betweenSkewX=a._skewX-this._skewX,this._betweenSkewY=a._skewY-this._skewY)},apply:function(a){if(this._tween&&(0!=this._betweenSkewX||0!=this._betweenSkewY)){var b=this._skewX+a*this._betweenSkewX,c=this._skewY+a*this._betweenSkewY;this._node.setRotationX(b),this._node.setRotationY(c)}},clone:function(){var a=new ccs.RotationSkewFrame;return a.setSkewX(this._skewX),a.setSkewY(this._skewY),a._cloneProperty(this),a}}),ccs.RotationSkewFrame.create=function(){return new ccs.RotationSkewFrame},ccs.PositionFrame=ccs.Frame.extend({_position:null,_betweenX:null,_betweenY:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._position=cc.p(0,0)},onEnter:function(a){this._node.setPosition(this._position),this._tween&&(this._betweenX=a._position.x-this._position.x,this._betweenY=a._position.y-this._position.y)},apply:function(a){if(this._tween&&(0!=this._betweenX||0!=this._betweenY)){var b=cc.p(0,0);b.x=this._position.x+this._betweenX*a,b.y=this._position.y+this._betweenY*a,this._node.setPosition(b)}},clone:function(){var a=new ccs.PositionFrame;return a.setPosition(this._position),a._cloneProperty(this),a},setPosition:function(a){this._position=a},getPosition:function(){return this._position},setX:function(a){this._position.x=a},getX:function(){return this._position.x},setY:function(a){this._position.y=a},getY:function(){return this._position.y}}),ccs.PositionFrame.create=function(){return new ccs.PositionFrame},ccs.ScaleFrame=ccs.Frame.extend({_scaleX:null,_scaleY:null,_betweenScaleX:null,_betweenScaleY:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._scaleX=1,this._scaleY=1},onEnter:function(a){this._node.setScaleX(this._scaleX),this._node.setScaleY(this._scaleY),this._tween&&(this._betweenScaleX=a._scaleX-this._scaleX,this._betweenScaleY=a._scaleY-this._scaleY)},apply:function(a){if(this._tween&&(0!=this._betweenScaleX||0!=this._betweenScaleY)){var b=this._scaleX+this._betweenScaleX*a,c=this._scaleY+this._betweenScaleY*a;this._node.setScaleX(b),this._node.setScaleY(c)}},clone:function(){var a=new ccs.ScaleFrame;return a.setScaleX(this._scaleX),a.setScaleY(this._scaleY),a._cloneProperty(this),a},setScale:function(a){this._scaleX=a,this._scaleY=a},setScaleX:function(a){this._scaleX=a},getScaleX:function(){return this._scaleX},setScaleY:function(a){this._scaleY=a},getScaleY:function(){return this._scaleY}}),ccs.ScaleFrame.create=function(){return new ccs.ScaleFrame},ccs.AnchorPointFrame=ccs.Frame.extend({_anchorPoint:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._anchorPoint=cc.p(0,0)},onEnter:function(){this._node.setAnchorPoint(this._anchorPoint)},clone:function(){var a=new ccs.AnchorPointFrame;return a.setAnchorPoint(this._anchorPoint),a._cloneProperty(this),a},setAnchorPoint:function(a){this._anchorPoint=a},getAnchorPoint:function(){return this._anchorPoint}}),ccs.AnchorPointFrame.create=function(){return new ccs.AnchorPointFrame},ccs.InnerActionType={LoopAction:0,NoLoopAction:1,SingleFrame:2},ccs.InnerActionFrame=ccs.Frame.extend({_innerActionType:null,_startFrameIndex:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._innerActionType=ccs.InnerActionType.LoopAction,this._startFrameIndex=0},onEnter:function(){},clone:function(){var a=new ccs.InnerActionFrame;return a.setInnerActionType(this._innerActionType),a.setStartFrameIndex(this._startFrameIndex),a._cloneProperty(this),a},setInnerActionType:function(a){this._innerActionType=a},getInnerActionType:function(){return this._innerActionType},setStartFrameIndex:function(a){this._startFrameIndex=a},getStartFrameIndex:function(){return this._startFrameIndex}}),ccs.InnerActionFrame.create=function(){return new ccs.InnerActionFrame},ccs.ColorFrame=ccs.Frame.extend({_alpha:null,_color:null,_betweenAlpha:null,_betweenRed:null,_betweenGreen:null,_betweenBlue:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._alpha=255,this.color=cc.color(255,255,255)},onEnter:function(a){if(this._node.setOpacity(this._alpha),this._node.setColor(this._color),this._tween){this._betweenAlpha=a._alpha-this._alpha;var b=a._color;this._betweenRed=b.r-this._color.r,this._betweenGreen=b.g-this._color.g,this._betweenBlue=b.b-this._color.b}},apply:function(a){if(this._tween&&(0!=this._betweenAlpha||0!=this._betweenRed||0!=this._betweenGreen||0!=this._betweenBlue)){var b=this._alpha+this._betweenAlpha*a,c=cc.color(255,255,255);c.r=this._color.r+this._betweenRed*a,c.g=this._color.g+this._betweenGreen*a,c.b=this._color.b+this._betweenBlue*a,this._node.setOpacity(b),this._node.setColor(c)}},clone:function(){var a=new ccs.ColorFrame;return a.setAlpha(this._alpha),a.setColor(this._color),a._cloneProperty(this),a},setAlpha:function(a){this._alpha=a},getAlpha:function(){return this._alpha},setColor:function(a){this._color=a},getColor:function(){return this._color}}),ccs.ColorFrame.create=function(){return new ccs.ColorFrame},ccs.EventFrame=ccs.Frame.extend({_event:null,ctor:function(){ccs.Frame.prototype.ctor.call(this),this._event=""},onEnter:function(){this._emitEvent()},clone:function(){var a=new ccs.EventFrame;return a.setEvent(this._event),a._cloneProperty(this),a},setEvent:function(a){this._event=a},getEvent:function(){return this._event}}),ccs.EventFrame.create=function(){return new ccs.EventFrame},ccs.ZOrderFrame=ccs.Frame.extend({_zorder:null,onEnter:function(){this._node&&this._node.setLocalZOrder(this._zorder)},clone:function(){var a=new ccs.ZOrderFrame;return a.setZOrder(this._zorder),a._cloneProperty(this),a},setZOrder:function(a){this._zorder=a},getZOrder:function(){return this._zorder}}),ccs.ZOrderFrame.create=function(){return new ccs.ZOrderFrame},ccs.Timeline=ccs.Class.extend({_frames:null,_currentKeyFrame:null,_currentKeyFrameIndex:null,_fromIndex:null,_toIndex:null,_betweenDuration:null,_actionTag:null,_ActionTimeline:null,_node:null,ctor:function(){this._frames=[],this._currentKeyFrame=null,this._currentKeyFrameIndex=0,this._fromIndex=0,this._toIndex=0,this._betweenDuration=0,this._actionTag=0,this._ActionTimeline=null,this._node=null},_gotoFrame:function(a){0!=this._frames.length&&(this._binarySearchKeyFrame(a),this._apply(a))},_stepToFrame:function(a){0!=this._frames.length&&(this._updateCurrentKeyFrame(a),this._apply(a))},getFrames:function(){return this._frames},addFrame:function(a){this._frames.push(a),a.setTimeline(this)},insertFrame:function(a,b){this._frames.splice(b,0,a),a.setTimeline(this)},removeFrame:function(a){cc.arrayRemoveObject(this._frames,a),a.setTimeline(null)},setActionTag:function(a){this._actionTag=a},getActionTag:function(){return this._actionTag},setNode:function(a){for(var b=0;b<this._frames.length;b++){var c=this._frames[b];c.setNode(a)}},getNode:function(){return this._node},setActionTimeline:function(a){this._ActionTimeline=a},getActionTimeline:function(){return this._ActionTimeline},clone:function(){var a=new ccs.Timeline;a._actionTag=this._actionTag;for(var b=0;b<this._frames.length;b++){var c=this._frames[b],d=c.clone();a.addFrame(d)}return a},_apply:function(a){if(this._currentKeyFrame){var b=0==this._betweenDuration?0:(a-this._currentKeyFrameIndex)/this._betweenDuration;this._currentKeyFrame.apply(b)}},_binarySearchKeyFrame:function(a){var b=null,c=null,d=this._frames.length,e=!1;do{if(a<=this._frames[0].getFrameIndex()){this._currentKeyFrameIndex>=this._frames[0].getFrameIndex()&&(e=!0),b=c=this._frames[0],this._currentKeyFrameIndex=0,this._betweenDuration=this._frames[0].getFrameIndex();break}if(a>=this._frames[d-1].getFrameIndex()){b=c=this._frames[d-1],this._currentKeyFrameIndex=this._frames[d-1].getFrameIndex(),this._betweenDuration=0;break}for(var f=-1,g=0,h=d-1,i=0;h>=g;){if(i=Math.ceil((g+h)/2),a>=this._frames[i].getFrameIndex()&&a<this._frames[i+1].getFrameIndex()){f=i;break}this._frames[i].getFrameIndex()>a?h=i-1:g=i+1}b=this._frames[f],c=this._frames[f+1],0==f&&this._currentKeyFrameIndex<b.getFrameIndex()&&(e=!0),this._currentKeyFrameIndex=b.getFrameIndex(),this._betweenDuration=c.getFrameIndex()-b.getFrameIndex()}while(0);(e||this._currentKeyFrame!=b)&&(this._currentKeyFrame=b,this._currentKeyFrame.onEnter(c))
},_updateCurrentKeyFrame:function(a){if(a<this._currentKeyFrameIndex||a>=this._currentKeyFrameIndex+this._betweenDuration){var b=null,c=null;do{var d=this._frames.length;if(a<this._frames[0].getFrameIndex()){b=c=this._frames[0],this._currentKeyFrameIndex=0,this._betweenDuration=this._frames[0].getFrameIndex();break}if(a>=this._frames[d-1].getFrameIndex()){b=c=this._frames[d-1],this._currentKeyFrameIndex=this._frames[d-1].getFrameIndex(),this._betweenDuration=0;break}do if(this._fromIndex=this._toIndex,b=this._frames[this._fromIndex],this._currentKeyFrameIndex=b.getFrameIndex(),this._toIndex=this._fromIndex+1,this._toIndex>=d&&(this._toIndex=0),c=this._frames[this._toIndex],a==b.getFrameIndex())break;while(a<b.getFrameIndex()||a>=c.getFrameIndex());this._betweenDuration=c.getFrameIndex()-b.getFrameIndex()}while(0);this._currentKeyFrame=b,this._currentKeyFrame.onEnter(c)}}}),ccs.Timeline.create=function(){return new ccs.Timeline};