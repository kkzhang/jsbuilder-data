cc._globalFontSize=cc.ITEM_SIZE,cc._globalFontName="Arial",cc._globalFontNameRelease=!1,cc.MenuItem=cc.Node.extend({_enabled:!1,_target:null,_callback:null,_isSelected:!1,_className:"MenuItem",ctor:function(a,b){var c=cc.Node.prototype;c.ctor.call(this),this._target=null,this._callback=null,this._isSelected=!1,this._enabled=!1,c.setAnchorPoint.call(this,.5,.5),this._target=b||null,this._callback=a||null,this._callback&&(this._enabled=!0)},isSelected:function(){return this._isSelected},setOpacityModifyRGB:function(a){},isOpacityModifyRGB:function(){return!1},setTarget:function(a,b){this._target=b,this._callback=a},isEnabled:function(){return this._enabled},setEnabled:function(a){this._enabled=a},initWithCallback:function(a,b){return this.anchorX=.5,this.anchorY=.5,this._target=b,this._callback=a,this._enabled=!0,this._isSelected=!1,!0},rect:function(){var a=this._position,b=this._contentSize,c=this._anchorPoint;return cc.rect(a.x-b.width*c.x,a.y-b.height*c.y,b.width,b.height)},selected:function(){this._isSelected=!0},unselected:function(){this._isSelected=!1},setCallback:function(a,b){this._target=b,this._callback=a},activate:function(){if(this._enabled){var a=this._target,b=this._callback;if(!b)return;a&&cc.isString(b)?a[b](this):a&&cc.isFunction(b)?b.call(a,this):b(this)}}});var _p=cc.MenuItem.prototype;_p.enabled,cc.defineGetterSetter(_p,"enabled",_p.isEnabled,_p.setEnabled),cc.MenuItem.create=function(a,b){return new cc.MenuItem(a,b)},cc.MenuItemLabel=cc.MenuItem.extend({_disabledColor:null,_label:null,_originalScale:0,_colorBackup:null,ctor:function(a,b,c){cc.MenuItem.prototype.ctor.call(this,b,c),this._disabledColor=null,this._label=null,this._colorBackup=null,a&&(this._originalScale=1,this._colorBackup=cc.color.WHITE,this._disabledColor=cc.color(126,126,126),this.setLabel(a),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0))},getDisabledColor:function(){return this._disabledColor},setDisabledColor:function(a){this._disabledColor=a},getLabel:function(){return this._label},setLabel:function(a){a&&(this.addChild(a),a.anchorX=0,a.anchorY=0,this.width=a.width,this.height=a.height,a.setCascadeColorEnabled(!0)),this._label&&this.removeChild(this._label,!0),this._label=a},setEnabled:function(a){this._enabled!==a&&(a?this.setColor(this._colorBackup):(this._colorBackup=this.color,this.setColor(this._disabledColor))),cc.MenuItem.prototype.setEnabled.call(this,a)},initWithLabel:function(a,b,c){return this.initWithCallback(b,c),this._originalScale=1,this._colorBackup=cc.color.WHITE,this._disabledColor=cc.color(126,126,126),this.setLabel(a),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0),!0},setString:function(a){this._label.string=a,this.width=this._label.width,this.height=this._label.height},getString:function(){return this._label.string},activate:function(){this._enabled&&(this.stopAllActions(),this.scale=this._originalScale,cc.MenuItem.prototype.activate.call(this))},selected:function(){if(this._enabled){cc.MenuItem.prototype.selected.call(this);var a=this.getActionByTag(cc.ZOOM_ACTION_TAG);a?this.stopAction(a):this._originalScale=this.scale;var b=cc.scaleTo(.1,1.2*this._originalScale);b.setTag(cc.ZOOM_ACTION_TAG),this.runAction(b)}},unselected:function(){if(this._enabled){cc.MenuItem.prototype.unselected.call(this),this.stopActionByTag(cc.ZOOM_ACTION_TAG);var a=cc.scaleTo(.1,this._originalScale);a.setTag(cc.ZOOM_ACTION_TAG),this.runAction(a)}}});var _p=cc.MenuItemLabel.prototype;_p.string,cc.defineGetterSetter(_p,"string",_p.getString,_p.setString),_p.disabledColor,cc.defineGetterSetter(_p,"disabledColor",_p.getDisabledColor,_p.setDisabledColor),_p.label,cc.defineGetterSetter(_p,"label",_p.getLabel,_p.setLabel),cc.MenuItemLabel.create=function(a,b,c){return new cc.MenuItemLabel(a,b,c)},cc.MenuItemAtlasFont=cc.MenuItemLabel.extend({ctor:function(a,b,c,d,e,f,g){var h;a&&a.length>0&&(h=new cc.LabelAtlas(a,b,c,d,e)),cc.MenuItemLabel.prototype.ctor.call(this,h,f,g)},initWithString:function(a,b,c,d,e,f,g){if(!a||0===a.length)throw new Error("cc.MenuItemAtlasFont.initWithString(): value should be non-null and its length should be greater than 0");var h=new cc.LabelAtlas;return h.initWithString(a,b,c,d,e),this.initWithLabel(h,f,g),!0}}),cc.MenuItemAtlasFont.create=function(a,b,c,d,e,f,g){return new cc.MenuItemAtlasFont(a,b,c,d,e,f,g)},cc.MenuItemFont=cc.MenuItemLabel.extend({_fontSize:null,_fontName:null,ctor:function(a,b,c){var d;a&&a.length>0?(this._fontName=cc._globalFontName,this._fontSize=cc._globalFontSize,d=new cc.LabelTTF(a,this._fontName,this._fontSize)):(this._fontSize=0,this._fontName=""),cc.MenuItemLabel.prototype.ctor.call(this,d,b,c)},initWithString:function(a,b,c){if(!a||0===a.length)throw new Error("Value should be non-null and its length should be greater than 0");this._fontName=cc._globalFontName,this._fontSize=cc._globalFontSize;var d=new cc.LabelTTF(a,this._fontName,this._fontSize);return this.initWithLabel(d,b,c),!0},setFontSize:function(a){this._fontSize=a,this._recreateLabel()},getFontSize:function(){return this._fontSize},setFontName:function(a){this._fontName=a,this._recreateLabel()},getFontName:function(){return this._fontName},_recreateLabel:function(){var a=new cc.LabelTTF(this._label.string,this._fontName,this._fontSize);this.setLabel(a)}}),cc.MenuItemFont.setFontSize=function(a){cc._globalFontSize=a},cc.MenuItemFont.fontSize=function(){return cc._globalFontSize},cc.MenuItemFont.setFontName=function(a){cc._globalFontNameRelease&&(cc._globalFontName=""),cc._globalFontName=a,cc._globalFontNameRelease=!0};var _p=cc.MenuItemFont.prototype;_p.fontSize,cc.defineGetterSetter(_p,"fontSize",_p.getFontSize,_p.setFontSize),_p.fontName,cc.defineGetterSetter(_p,"fontName",_p.getFontName,_p.setFontName),cc.MenuItemFont.fontName=function(){return cc._globalFontName},cc.MenuItemFont.create=function(a,b,c){return new cc.MenuItemFont(a,b,c)},cc.MenuItemSprite=cc.MenuItem.extend({_normalImage:null,_selectedImage:null,_disabledImage:null,ctor:function(a,b,c,d,e){if(cc.MenuItem.prototype.ctor.call(this),this._normalImage=null,this._selectedImage=null,this._disabledImage=null,void 0!==b){var f,g,h;void 0!==e?(f=c,h=d,g=e):void 0!==d&&cc.isFunction(d)?(f=c,h=d):void 0!==d&&cc.isFunction(c)?(g=d,h=c,f=null):void 0===c&&(f=null),this.initWithNormalSprite(a,b,f,h,g)}},getNormalImage:function(){return this._normalImage},setNormalImage:function(a){this._normalImage!==a&&(a&&(this.addChild(a,0,cc.NORMAL_TAG),a.anchorX=0,a.anchorY=0),this._normalImage&&this.removeChild(this._normalImage,!0),this._normalImage=a,this._normalImage&&(this.width=this._normalImage.width,this.height=this._normalImage.height,this._updateImagesVisibility(),a.textureLoaded&&!a.textureLoaded()&&a.addEventListener("load",function(a){this.width=a.width,this.height=a.height},this)))},getSelectedImage:function(){return this._selectedImage},setSelectedImage:function(a){this._selectedImage!==a&&(a&&(this.addChild(a,0,cc.SELECTED_TAG),a.anchorX=0,a.anchorY=0),this._selectedImage&&this.removeChild(this._selectedImage,!0),this._selectedImage=a,this._updateImagesVisibility())},getDisabledImage:function(){return this._disabledImage},setDisabledImage:function(a){this._disabledImage!==a&&(a&&(this.addChild(a,0,cc.DISABLE_TAG),a.anchorX=0,a.anchorY=0),this._disabledImage&&this.removeChild(this._disabledImage,!0),this._disabledImage=a,this._updateImagesVisibility())},initWithNormalSprite:function(a,b,c,d,e){this.initWithCallback(d,e),this.setNormalImage(a),this.setSelectedImage(b),this.setDisabledImage(c);var f=this._normalImage;return f&&(this.width=f.width,this.height=f.height,f.textureLoaded&&!f.textureLoaded()&&f.addEventListener("load",function(a){this.width=a.width,this.height=a.height,this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0)},this)),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0),!0},selected:function(){cc.MenuItem.prototype.selected.call(this),this._normalImage&&(this._disabledImage&&(this._disabledImage.visible=!1),this._selectedImage?(this._normalImage.visible=!1,this._selectedImage.visible=!0):this._normalImage.visible=!0)},unselected:function(){cc.MenuItem.prototype.unselected.call(this),this._normalImage&&(this._normalImage.visible=!0,this._selectedImage&&(this._selectedImage.visible=!1),this._disabledImage&&(this._disabledImage.visible=!1))},setEnabled:function(a){this._enabled!==a&&(cc.MenuItem.prototype.setEnabled.call(this,a),this._updateImagesVisibility())},_updateImagesVisibility:function(){var a=this._normalImage,b=this._selectedImage,c=this._disabledImage;this._enabled?(a&&(a.visible=!0),b&&(b.visible=!1),c&&(c.visible=!1)):c?(a&&(a.visible=!1),b&&(b.visible=!1),c&&(c.visible=!0)):(a&&(a.visible=!0),b&&(b.visible=!1))}});var _p=cc.MenuItemSprite.prototype;_p.normalImage,cc.defineGetterSetter(_p,"normalImage",_p.getNormalImage,_p.setNormalImage),_p.selectedImage,cc.defineGetterSetter(_p,"selectedImage",_p.getSelectedImage,_p.setSelectedImage),_p.disabledImage,cc.defineGetterSetter(_p,"disabledImage",_p.getDisabledImage,_p.setDisabledImage),cc.MenuItemSprite.create=function(a,b,c,d,e){return new cc.MenuItemSprite(a,b,c,d,e||void 0)},cc.MenuItemImage=cc.MenuItemSprite.extend({ctor:function(a,b,c,d,e){var f=null,g=null,h=null,i=null,j=null;void 0===a||null===a?cc.MenuItemSprite.prototype.ctor.call(this):(f=new cc.Sprite(a),b&&(g=new cc.Sprite(b)),void 0===d?i=c:void 0===e?(i=c,j=d):e&&(h=new cc.Sprite(c),i=d,j=e),cc.MenuItemSprite.prototype.ctor.call(this,f,g,h,i,j))},setNormalSpriteFrame:function(a){this.setNormalImage(new cc.Sprite(a))},setSelectedSpriteFrame:function(a){this.setSelectedImage(new cc.Sprite(a))},setDisabledSpriteFrame:function(a){this.setDisabledImage(new cc.Sprite(a))},initWithNormalImage:function(a,b,c,d,e){var f=null,g=null,h=null;return a&&(f=new cc.Sprite(a)),b&&(g=new cc.Sprite(b)),c&&(h=new cc.Sprite(c)),this.initWithNormalSprite(f,g,h,d,e)}}),cc.MenuItemImage.create=function(a,b,c,d,e){return new cc.MenuItemImage(a,b,c,d,e)},cc.MenuItemToggle=cc.MenuItem.extend({subItems:null,_selectedIndex:0,_opacity:null,_color:null,ctor:function(){cc.MenuItem.prototype.ctor.call(this),this._selectedIndex=0,this.subItems=[],this._opacity=0,this._color=cc.color.WHITE,arguments.length>0&&this.initWithItems(Array.prototype.slice.apply(arguments))},getOpacity:function(){return this._opacity},setOpacity:function(a){if(this._opacity=a,this.subItems&&this.subItems.length>0)for(var b=0;b<this.subItems.length;b++)this.subItems[b].opacity=a;this._color.a=a},getColor:function(){var a=this._color;return cc.color(a.r,a.g,a.b,a.a)},setColor:function(a){var b=this._color;if(b.r=a.r,b.g=a.g,b.b=a.b,this.subItems&&this.subItems.length>0)for(var c=0;c<this.subItems.length;c++)this.subItems[c].setColor(a);void 0===a.a||a.a_undefined||this.setOpacity(a.a)},getSelectedIndex:function(){return this._selectedIndex},setSelectedIndex:function(a){if(a!==this._selectedIndex){this._selectedIndex=a;var b=this.getChildByTag(cc.CURRENT_ITEM);b&&b.removeFromParent(!1);var c=this.subItems[this._selectedIndex];this.addChild(c,0,cc.CURRENT_ITEM);var d=c.width,e=c.height;this.width=d,this.height=e,c.setPosition(d/2,e/2)}},getSubItems:function(){return this.subItems},setSubItems:function(a){this.subItems=a},initWithItems:function(a){var b=a.length;cc.isFunction(a[a.length-2])?(this.initWithCallback(a[a.length-2],a[a.length-1]),b-=2):cc.isFunction(a[a.length-1])?(this.initWithCallback(a[a.length-1],null),b-=1):this.initWithCallback(null,null);var c=this.subItems;c.length=0;for(var d=0;b>d;d++)a[d]&&c.push(a[d]);return this._selectedIndex=cc.UINT_MAX,this.setSelectedIndex(0),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0),!0},addSubItem:function(a){this.subItems.push(a)},activate:function(){if(this._enabled){var a=(this._selectedIndex+1)%this.subItems.length;this.setSelectedIndex(a)}cc.MenuItem.prototype.activate.call(this)},selected:function(){cc.MenuItem.prototype.selected.call(this),this.subItems[this._selectedIndex].selected()},unselected:function(){cc.MenuItem.prototype.unselected.call(this),this.subItems[this._selectedIndex].unselected()},setEnabled:function(a){if(this._enabled!==a){cc.MenuItem.prototype.setEnabled.call(this,a);var b=this.subItems;if(b&&b.length>0)for(var c=0;c<b.length;c++)b[c].enabled=a}},selectedItem:function(){return this.subItems[this._selectedIndex]},getSelectedItem:function(){return this.subItems[this._selectedIndex]},onEnter:function(){cc.Node.prototype.onEnter.call(this),this.setSelectedIndex(this._selectedIndex)}});var _p=cc.MenuItemToggle.prototype;_p.selectedIndex,cc.defineGetterSetter(_p,"selectedIndex",_p.getSelectedIndex,_p.setSelectedIndex),cc.MenuItemToggle.create=function(){arguments.length>0&&null==arguments[arguments.length-1]&&cc.log("parameters should not be ending with null in Javascript");var a=new cc.MenuItemToggle;return a.initWithItems(Array.prototype.slice.apply(arguments)),a},cc.MENU_STATE_WAITING=0,cc.MENU_STATE_TRACKING_TOUCH=1,cc.MENU_HANDLER_PRIORITY=-128,cc.DEFAULT_PADDING=5,cc.Menu=cc.Layer.extend({enabled:!1,_selectedItem:null,_state:-1,_touchListener:null,_className:"Menu",ctor:function(a){cc.Layer.prototype.ctor.call(this),this._color=cc.color.WHITE,this.enabled=!1,this._opacity=255,this._selectedItem=null,this._state=-1,this._touchListener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this._onTouchBegan,onTouchMoved:this._onTouchMoved,onTouchEnded:this._onTouchEnded,onTouchCancelled:this._onTouchCancelled}),arguments.length>0&&null==arguments[arguments.length-1]&&cc.log("parameters should not be ending with null in Javascript");var b,c=arguments.length;if(0===c)b=[];else if(1===c)b=a instanceof Array?a:[a];else if(c>1){b=[];for(var d=0;c>d;d++)arguments[d]&&b.push(arguments[d])}this.initWithArray(b)},onEnter:function(){var a=this._touchListener;a._isRegistered()||cc.eventManager.addListener(a,this),cc.Node.prototype.onEnter.call(this)},isEnabled:function(){return this.enabled},setEnabled:function(a){this.enabled=a},initWithItems:function(a){var b=[];if(a)for(var c=0;c<a.length;c++)a[c]&&b.push(a[c]);return this.initWithArray(b)},initWithArray:function(a){if(cc.Layer.prototype.init.call(this)){this.enabled=!0;var b=cc.winSize;if(this.setPosition(b.width/2,b.height/2),this.setContentSize(b),this.setAnchorPoint(.5,.5),this.ignoreAnchorPointForPosition(!0),a)for(var c=0;c<a.length;c++)this.addChild(a[c],c);return this._selectedItem=null,this._state=cc.MENU_STATE_WAITING,this.cascadeColor=!0,this.cascadeOpacity=!0,!0}return!1},addChild:function(a,b,c){if(!(a instanceof cc.MenuItem))throw new Error("cc.Menu.addChild() : Menu only supports MenuItem objects as children");cc.Layer.prototype.addChild.call(this,a,b,c)},alignItemsVertically:function(){this.alignItemsVerticallyWithPadding(cc.DEFAULT_PADDING)},alignItemsVerticallyWithPadding:function(a){var b,c,d,e,f,g=-a,h=this._children;if(h&&h.length>0){for(c=0,b=h.length;b>c;c++)g+=h[c].height*h[c].scaleY+a;var i=g/2;for(c=0,b=h.length;b>c;c++)f=h[c],e=f.height,d=f.scaleY,f.setPosition(0,i-e*d/2),i-=e*d+a}},alignItemsHorizontally:function(){this.alignItemsHorizontallyWithPadding(cc.DEFAULT_PADDING)},alignItemsHorizontallyWithPadding:function(a){var b,c,d,e,f,g=-a,h=this._children;if(h&&h.length>0){for(b=0,c=h.length;c>b;b++)g+=h[b].width*h[b].scaleX+a;var i=-g/2;for(b=0,c=h.length;c>b;b++)f=h[b],d=f.scaleX,e=h[b].width,f.setPosition(i+e*d/2,0),i+=e*d+a}},alignItemsInColumns:function(){arguments.length>0&&null==arguments[arguments.length-1]&&cc.log("parameters should not be ending with null in Javascript");for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);var c,d,e,f=-5,g=0,h=0,i=0,j=this._children;if(j&&j.length>0)for(b=0,e=j.length;e>b;b++)g>=a.length||(c=a[g],c&&(d=j[b].height,h=h>=d||isNaN(d)?h:d,++i,i>=c&&(f+=h+5,i=0,h=0,++g)));var k=cc.director.getWinSize();g=0,h=0,c=0;var l=0,m=0,n=f/2;if(j&&j.length>0)for(b=0,e=j.length;e>b;b++){var o=j[b];0===c&&(c=a[g],l=k.width/(1+c),m=l),d=o._getHeight(),h=h>=d||isNaN(d)?h:d,o.setPosition(m-k.width/2,n-d/2),m+=l,++i,i>=c&&(n-=h+5,i=0,c=0,h=0,++g)}},alignItemsInRows:function(){arguments.length>0&&null==arguments[arguments.length-1]&&cc.log("parameters should not be ending with null in Javascript");var a,b=[];for(a=0;a<arguments.length;a++)b.push(arguments[a]);var c,d,e,f,g=[],h=[],i=-10,j=-5,k=0,l=0,m=0,n=this._children;if(n&&n.length>0)for(a=0,e=n.length;e>a;a++)d=n[a],k>=b.length||(c=b[k],c&&(f=d.width,l=l>=f||isNaN(f)?l:f,j+=d.height+5,++m,m>=c&&(g.push(l),h.push(j),i+=l+10,m=0,l=0,j=-5,++k)));var o=cc.director.getWinSize();k=0,l=0,c=0;var p=-i/2,q=0;if(n&&n.length>0)for(a=0,e=n.length;e>a;a++)d=n[a],0===c&&(c=b[k],q=h[k]),f=d._getWidth(),l=l>=f||isNaN(f)?l:f,d.setPosition(p+g[k]/2,q-o.height/2),q-=d.height+10,++m,m>=c&&(p+=l+5,m=0,c=0,l=0,++k)},removeChild:function(a,b){if(null!=a){if(!(a instanceof cc.MenuItem))return void cc.log("cc.Menu.removeChild():Menu only supports MenuItem objects as children");this._selectedItem===a&&(this._selectedItem=null),cc.Node.prototype.removeChild.call(this,a,b)}},_onTouchBegan:function(a,b){var c=b.getCurrentTarget();if(c._state!==cc.MENU_STATE_WAITING||!c._visible||!c.enabled)return!1;for(var d=c.parent;null!=d;d=d.parent)if(!d.isVisible())return!1;return c._selectedItem=c._itemForTouch(a),c._selectedItem?(c._state=cc.MENU_STATE_TRACKING_TOUCH,c._selectedItem.selected(),c._selectedItem.setNodeDirty(),!0):!1},_onTouchEnded:function(a,b){var c=b.getCurrentTarget();return c._state!==cc.MENU_STATE_TRACKING_TOUCH?void cc.log("cc.Menu.onTouchEnded(): invalid state"):(c._selectedItem&&(c._selectedItem.unselected(),c._selectedItem.setNodeDirty(),c._selectedItem.activate()),void(c._state=cc.MENU_STATE_WAITING))},_onTouchCancelled:function(a,b){var c=b.getCurrentTarget();return c._state!==cc.MENU_STATE_TRACKING_TOUCH?void cc.log("cc.Menu.onTouchCancelled(): invalid state"):(c._selectedItem&&(c._selectedItem.unselected(),c._selectedItem.setNodeDirty()),void(c._state=cc.MENU_STATE_WAITING))},_onTouchMoved:function(a,b){var c=b.getCurrentTarget();if(c._state!==cc.MENU_STATE_TRACKING_TOUCH)return void cc.log("cc.Menu.onTouchMoved(): invalid state");var d=c._itemForTouch(a);d!==c._selectedItem&&(c._selectedItem&&(c._selectedItem.unselected(),c._selectedItem.setNodeDirty()),c._selectedItem=d,c._selectedItem&&(c._selectedItem.selected(),c._selectedItem.setNodeDirty()))},onExit:function(){this._state===cc.MENU_STATE_TRACKING_TOUCH&&(this._selectedItem&&(this._selectedItem.unselected(),this._selectedItem=null),this._state=cc.MENU_STATE_WAITING),cc.Node.prototype.onExit.call(this)},setOpacityModifyRGB:function(a){},isOpacityModifyRGB:function(){return!1},_itemForTouch:function(a){var b,c=a.getLocation(),d=this._children;if(d&&d.length>0)for(var e=d.length-1;e>=0;e--)if(b=d[e],b.isVisible()&&b.isEnabled()){var f=b.convertToNodeSpace(c),g=b.rect();if(g.x=0,g.y=0,cc.rectContainsPoint(g,f))return b}return null}});var _p=cc.Menu.prototype;_p.enabled,cc.Menu.create=function(a){var b=arguments.length;b>0&&null==arguments[b-1]&&cc.log("parameters should not be ending with null in Javascript");var c;return c=0===b?new cc.Menu:1===b?new cc.Menu(a):new cc.Menu(Array.prototype.slice.call(arguments,0))};