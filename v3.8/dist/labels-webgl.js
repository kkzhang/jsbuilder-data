!function(){cc.LabelAtlas.WebGLRenderCmd=function(a){cc.AtlasNode.WebGLRenderCmd.call(this,a),this._needDraw=!0};var a=cc.LabelAtlas.WebGLRenderCmd.prototype=Object.create(cc.AtlasNode.WebGLRenderCmd.prototype);a.constructor=cc.LabelAtlas.WebGLRenderCmd,a.setCascade=function(){var a=this._node;a._cascadeOpacityEnabled=!0,a._cascadeColorEnabled=!0},a.rendering=function(a){if(cc.AtlasNode.WebGLRenderCmd.prototype.rendering.call(this,a),cc.LABELATLAS_DEBUG_DRAW){var b=this._node.getContentSize(),c=[cc.p(0,0),cc.p(b.width,0),cc.p(b.width,b.height),cc.p(0,b.height)];cc._drawingUtil.drawPoly(c,4,!0)}},a.updateAtlasValues=function(){var a=this._node,b=a._string,c=b.length,d=this._textureAtlas,e=d.texture,f=e.pixelsWidth,g=e.pixelsHeight,h=a._itemWidth,i=a._itemHeight;a._ignoreContentScaleFactor||(h=a._itemWidth*cc.contentScaleFactor(),i=a._itemHeight*cc.contentScaleFactor()),c>d.getCapacity()&&cc.log("cc.LabelAtlas._updateAtlasValues(): Invalid String length");for(var j=d.quads,k=this._displayedColor,l={r:k.r,g:k.g,b:k.b,a:a._displayedOpacity},m=a._itemWidth,n=a._itemHeight,o=0,p=-1;c>o;o++){var q=b.charCodeAt(o)-a._mapStartChar.charCodeAt(0),r=q%a._itemsPerRow,s=0|q/a._itemsPerRow;if(!(0>r||0>s||r*m+m>f||s*n+n>g)){p++;var t,u,v,w;cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL?(t=(2*r*h+1)/(2*f),u=t+(2*h-2)/(2*f),v=(2*s*i+1)/(2*g),w=v+(2*i-2)/(2*g)):(t=r*h/f,u=t+h/f,v=s*i/g,w=v+i/g);var x=j[o],y=x.tl,z=x.tr,A=x.bl,B=x.br;y.texCoords.u=t,y.texCoords.v=v,z.texCoords.u=u,z.texCoords.v=v,A.texCoords.u=t,A.texCoords.v=w,B.texCoords.u=u,B.texCoords.v=w,A.vertices.x=p*m,A.vertices.y=0,A.vertices.z=0,B.vertices.x=p*m+m,B.vertices.y=0,B.vertices.z=0,y.vertices.x=p*m,y.vertices.y=a._itemHeight,y.vertices.z=0,z.vertices.x=p*m+m,z.vertices.y=a._itemHeight,z.vertices.z=0,y.colors=l,z.colors=l,A.colors=l,B.colors=l}}if(this.updateContentSize(o,p+1),c>0){d.dirty=!0;var C=d.totalQuads;c>C&&d.increaseTotalQuadsWith(c-C)}},a.updateContentSize=function(a,b){var c=this._node,d=c._contentSize;a!==b&&a*c._itemWidth===d.width&&c._itemHeight===d.height&&c.setContentSize(b*c._itemWidth,c._itemHeight)},a.setString=function(a){var b=a.length;b>this._textureAtlas.totalQuads&&this._textureAtlas.resizeCapacity(b)},a._addChild=function(){}}(),function(){cc.LabelBMFont.WebGLRenderCmd=function(a){cc.SpriteBatchNode.WebGLRenderCmd.call(this,a),this._needDraw=!0};var a=cc.LabelBMFont.WebGLRenderCmd.prototype=Object.create(cc.SpriteBatchNode.WebGLRenderCmd.prototype);a.constructor=cc.LabelBMFont.WebGLRenderCmd,a._updateCharTexture=function(a,b,c){a.setTextureRect(b,!1),a.visible=!0},a._updateFntFileTexture=function(){},a._changeTextureColor=function(){},a._updateChildrenDisplayedOpacity=function(a){a.updateDisplayedOpacity(this._displayedOpacity)},a._updateChildrenDisplayedColor=function(a){a.updateDisplayedColor(this._displayedColor)},a._initBatchTexture=function(){var a=this._node,b=a.textureAtlas.texture;a._opacityModifyRGB=b.hasPremultipliedAlpha();var c=a._reusedChar=new cc.Sprite;c.initWithTexture(b,cc.rect(0,0,0,0),!1),c.batchNode=a},a.rendering=function(a){cc.SpriteBatchNode.WebGLRenderCmd.prototype.rendering.call(this,a);var b=this._node;if(cc.LABELBMFONT_DEBUG_DRAW){var c=b.getContentSize(),d=cc.p(0|-this._anchorPointInPoints.x,0|-this._anchorPointInPoints.y),e=[cc.p(d.x,d.y),cc.p(d.x+c.width,d.y),cc.p(d.x+c.width,d.y+c.height),cc.p(d.x,d.y+c.height)];cc._drawingUtil.setDrawColor(0,255,0,255),cc._drawingUtil.drawPoly(e,4,!0)}},a._updateCharColorAndOpacity=function(){}}();