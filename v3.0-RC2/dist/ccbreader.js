var PROPERTY_POSITION="position",PROPERTY_CONTENTSIZE="contentSize",PROPERTY_SKEW="skew",PROPERTY_ANCHORPOINT="anchorPoint",PROPERTY_SCALE="scale",PROPERTY_ROTATION="rotation",PROPERTY_TAG="tag",PROPERTY_IGNOREANCHORPOINTFORPOSITION="ignoreAnchorPointForPosition",PROPERTY_VISIBLE="visible",ASSERT_FAIL_UNEXPECTED_PROPERTY=function(a){cc.log("Unexpected property: '"+a+"'!")},ASSERT_FAIL_UNEXPECTED_PROPERTYTYPE=function(a){cc.log("Unexpected property type: '"+a+"'!")};
function BlockData(a,c){this.selMenuHander=a;this.target=c}function BlockCCControlData(a,c,b){this.selCCControlHandler=a;this.target=c;this.controlEvents=b}
cc.NodeLoader=cc.Class.extend({_customProperties:null,ctor:function(){this._customProperties=new cc._Dictionary},loadCCNode:function(a,c){return this._createCCNode(a,c)},parseProperties:function(a,c,b){for(var d=b.readInt(!1),e=b.readInt(!1),e=d+e,g=0;g<e;g++){var h=g>=d,f=b.readInt(!1),k=b.readCachedString(),l=!1,m=b.readByte();if(m===CCB_PLATFORM_ALL||m===CCB_PLATFORM_IOS||m===CCB_PLATFORM_MAC)l=!0;a instanceof cc.BuilderFile?a.getCCBFileNode()&&h&&(a=a.getCCBFileNode(),l=-1!=a.userObject.indexOf(k)):
h&&a==b.getAnimationManager().getRootNode()&&(h=a.userObject,h||(h=[],a.userObject=h),h.push(k));switch(f){case CCB_PROPTYPE_POSITION:f=this.parsePropTypePosition(a,c,b,k);if(l)this.onHandlePropTypePosition(a,c,k,f,b);break;case CCB_PROPTYPE_POINT:f=this.parsePropTypePoint(a,c,b);if(l)this.onHandlePropTypePoint(a,c,k,f,b);break;case CCB_PROPTYPE_POINTLOCK:f=this.parsePropTypePointLock(a,c,b);if(l)this.onHandlePropTypePointLock(a,c,k,f,b);break;case CCB_PROPTYPE_SIZE:f=this.parsePropTypeSize(a,c,b);
if(l)this.onHandlePropTypeSize(a,c,k,f,b);break;case CCB_PROPTYPE_SCALELOCK:f=this.parsePropTypeScaleLock(a,c,b,k);if(l)this.onHandlePropTypeScaleLock(a,c,k,f,b);break;case CCB_PROPTYPE_FLOATXY:f=this.parsePropTypeFloatXY(a,c,b);if(l)this.onHandlePropTypeFloatXY(a,c,k,f,b);break;case CCB_PROPTYPE_FLOAT:f=this.parsePropTypeFloat(a,c,b);if(l)this.onHandlePropTypeFloat(a,c,k,f,b);break;case CCB_PROPTYPE_DEGREES:f=this.parsePropTypeDegrees(a,c,b,k);if(l)this.onHandlePropTypeDegrees(a,c,k,f,b);break;case CCB_PROPTYPE_FLOATSCALE:f=
this.parsePropTypeFloatScale(a,c,b);if(l)this.onHandlePropTypeFloatScale(a,c,k,f,b);break;case CCB_PROPTYPE_INTEGER:f=this.parsePropTypeInteger(a,c,b);if(l)this.onHandlePropTypeInteger(a,c,k,f,b);break;case CCB_PROPTYPE_INTEGERLABELED:f=this.parsePropTypeIntegerLabeled(a,c,b);if(l)this.onHandlePropTypeIntegerLabeled(a,c,k,f,b);break;case CCB_PROPTYPE_FLOATVAR:f=this.parsePropTypeFloatVar(a,c,b);if(l)this.onHandlePropTypeFloatVar(a,c,k,f,b);break;case CCB_PROPTYPE_CHECK:f=this.parsePropTypeCheck(a,
c,b,k);if(l)this.onHandlePropTypeCheck(a,c,k,f,b);break;case CCB_PROPTYPE_SPRITEFRAME:f=this.parsePropTypeSpriteFrame(a,c,b,k);if(l)this.onHandlePropTypeSpriteFrame(a,c,k,f,b);break;case CCB_PROPTYPE_ANIMATION:f=this.parsePropTypeAnimation(a,c,b);if(l)this.onHandlePropTypeAnimation(a,c,k,f,b);break;case CCB_PROPTYPE_TEXTURE:f=this.parsePropTypeTexture(a,c,b);if(l)this.onHandlePropTypeTexture(a,c,k,f,b);break;case CCB_PROPTYPE_BYTE:f=this.parsePropTypeByte(a,c,b,k);if(l)this.onHandlePropTypeByte(a,
c,k,f,b);break;case CCB_PROPTYPE_COLOR3:f=this.parsePropTypeColor3(a,c,b,k);if(l)this.onHandlePropTypeColor3(a,c,k,f,b);break;case CCB_PROPTYPE_COLOR4VAR:f=this.parsePropTypeColor4FVar(a,c,b);if(l)this.onHandlePropTypeColor4FVar(a,c,k,f,b);break;case CCB_PROPTYPE_FLIP:f=this.parsePropTypeFlip(a,c,b);if(l)this.onHandlePropTypeFlip(a,c,k,f,b);break;case CCB_PROPTYPE_BLENDMODE:f=this.parsePropTypeBlendFunc(a,c,b);if(l)this.onHandlePropTypeBlendFunc(a,c,k,f,b);break;case CCB_PROPTYPE_FNTFILE:f=b.getCCBRootPath()+
this.parsePropTypeFntFile(a,c,b);if(l)this.onHandlePropTypeFntFile(a,c,k,f,b);break;case CCB_PROPTYPE_FONTTTF:f=this.parsePropTypeFontTTF(a,c,b);if(l)this.onHandlePropTypeFontTTF(a,c,k,f,b);break;case CCB_PROPTYPE_STRING:f=this.parsePropTypeString(a,c,b);if(l)this.onHandlePropTypeString(a,c,k,f,b);break;case CCB_PROPTYPE_TEXT:f=this.parsePropTypeText(a,c,b);if(l)this.onHandlePropTypeText(a,c,k,f,b);break;case CCB_PROPTYPE_BLOCK:f=this.parsePropTypeBlock(a,c,b);if(l)this.onHandlePropTypeBlock(a,c,
k,f,b);break;case CCB_PROPTYPE_BLOCKCCCONTROL:f=this.parsePropTypeBlockCCControl(a,c,b);if(l&&null!=f)this.onHandlePropTypeBlockCCControl(a,c,k,f,b);break;case CCB_PROPTYPE_CCBFILE:f=this.parsePropTypeCCBFile(a,c,b);if(l)this.onHandlePropTypeCCBFile(a,c,k,f,b);break;default:ASSERT_FAIL_UNEXPECTED_PROPERTYTYPE(f)}}},getCustomProperties:function(){return this._customProperties},_createCCNode:function(a,c){return cc.Node.create()},parsePropTypePosition:function(a,c,b,d){var e=b.readFloat(),g=b.readFloat(),
h=b.readInt(!1),f=b.getAnimationManager().getContainerSize(c);c=cc._getAbsolutePosition(e,g,h,f,d);a.setPosition(cc.getAbsolutePosition(c,h,f,d));-1<b.getAnimatedProperties().indexOf(d)&&(e=[e,g,h],b.getAnimationManager().setBaseValue(e,a,d));return c},parsePropTypePoint:function(a,c,b){a=b.readFloat();b=b.readFloat();return cc.p(a,b)},parsePropTypePointLock:function(a,c,b){a=b.readFloat();b=b.readFloat();return cc.p(a,b)},parsePropTypeSize:function(a,c,b){a=b.readFloat();var d=b.readFloat(),e=b.readInt(!1);
c=b.getAnimationManager().getContainerSize(c);switch(e){case CCB_SIZETYPE_ABSOLUTE:break;case CCB_SIZETYPE_RELATIVE_CONTAINER:a=c.width-a;d=c.height-d;break;case CCB_SIZETYPE_PERCENT:a=c.width*a/100;d=c.height*d/100;break;case CCB_SIZETYPE_HORIZONTAL_PERCENT:a=c.width*a/100;break;case CCB_SIZETYPE_VERTICAL_PERCENT:d=c.height*d/100;break;case CCB_SIZETYPE_MULTIPLY_RESOLUTION:c=cc.BuilderReader.getResolutionScale();a*=c;d*=c;break;default:cc.log("Unknown CCB type.")}return cc.size(a,d)},parsePropTypeScaleLock:function(a,
c,b,d){c=b.readFloat();var e=b.readFloat(),g=b.readInt(!1);cc.setRelativeScale(a,c,e,g,d);-1<b.getAnimatedProperties().indexOf(d)&&b.getAnimationManager().setBaseValue([c,e,g],a,d);g==CCB_SCALETYPE_MULTIPLY_RESOLUTION&&(c*=cc.BuilderReader.getResolutionScale(),e*=cc.BuilderReader.getResolutionScale());return[c,e]},parsePropTypeFloat:function(a,c,b){return b.readFloat()},parsePropTypeDegrees:function(a,c,b,d){c=b.readFloat();-1<b.getAnimatedProperties().indexOf(d)&&b.getAnimationManager().setBaseValue(c,
a,d);return c},parsePropTypeFloatScale:function(a,c,b){a=b.readFloat();b.readInt(!1)==CCB_SCALETYPE_MULTIPLY_RESOLUTION&&(a*=cc.BuilderReader.getResolutionScale());return a},parsePropTypeInteger:function(a,c,b){return b.readInt(!0)},parsePropTypeIntegerLabeled:function(a,c,b){return b.readInt(!0)},parsePropTypeFloatVar:function(a,c,b){a=b.readFloat();b=b.readFloat();return[a,b]},parsePropTypeCheck:function(a,c,b,d){c=b.readBool();-1<b.getAnimatedProperties().indexOf(d)&&b.getAnimationManager().setBaseValue(c,
a,d);return c},parsePropTypeSpriteFrame:function(a,c,b,d){c=b.readCachedString();var e=b.readCachedString(),g;null!=e&&0!=e.length&&(0==c.length?(e=b.getCCBRootPath()+e,c=cc.textureCache.addImage(e),e=c.getContentSize(),e=cc.rect(0,0,e.width,e.height),g=cc.SpriteFrame.create(c,e)):(g=cc.spriteFrameCache,c=b.getCCBRootPath()+c,-1==b.getLoadedSpriteSheet().indexOf(c)&&(g.addSpriteFrames(c),b.getLoadedSpriteSheet().push(c)),g=g.getSpriteFrame(e)),-1<b.getAnimatedProperties().indexOf(d)&&b.getAnimationManager().setBaseValue(g,
a,d));return g},parsePropTypeAnimation:function(a,c,b){a=b.getCCBRootPath()+b.readCachedString();b=b.readCachedString();c=null;b=cc.BuilderReader.lastPathComponent(b);a=cc.BuilderReader.lastPathComponent(a);null!=b&&""!=b&&(c=cc.animationCache,c.addAnimations(a),c=c.getAnimation(b));return c},parsePropTypeTexture:function(a,c,b){a=b.getCCBRootPath()+b.readCachedString();return""!=a?cc.textureCache.addImage(a):null},parsePropTypeByte:function(a,c,b,d){c=b.readByte();-1<b.getAnimatedProperties().indexOf(d)&&
b.getAnimationManager().setBaseValue(c,a,d);return c},parsePropTypeColor3:function(a,c,b,d){c=b.readByte();var e=b.readByte(),g=b.readByte();c={r:c,g:e,b:g};-1<b.getAnimatedProperties().indexOf(d)&&b.getAnimationManager().setBaseValue(cc.Color3BWapper.create(c),a,d);return c},parsePropTypeColor4FVar:function(a,c,b){a=0|255*b.readFloat();c=0|255*b.readFloat();var d=0|255*b.readFloat(),e=b.readFloat(),e=1>=e?0|255*e:e,g=0|255*b.readFloat(),h=0|255*b.readFloat(),f=0|255*b.readFloat();b=b.readFloat();
var k=[];k[0]={r:a,g:c,b:d,a:e};k[1]={r:g,g:h,b:f,a:1>=b?0|255*b:b};return k},parsePropTypeFlip:function(a,c,b){a=b.readBool();b=b.readBool();return[a,b]},parsePropTypeBlendFunc:function(a,c,b){a=b.readInt(!1);b=b.readInt(!1);return new cc.BlendFunc(a,b)},parsePropTypeFntFile:function(a,c,b){return b.readCachedString()},parsePropTypeString:function(a,c,b){return b.readCachedString()},parsePropTypeText:function(a,c,b){return b.readCachedString()},parsePropTypeFontTTF:function(a,c,b){return b.readCachedString()},
parsePropTypeBlock:function(a,c,b){c=b.readCachedString();var d=b.readInt(!1);if(d!==CCB_TARGETTYPE_NONE){var e=null;if(b.isJSControlled())d===CCB_TARGETTYPE_DOCUMENTROOT?(b.addDocumentCallbackNode(a),b.addDocumentCallbackName(c),b.addDocumentCallbackControlEvents(0)):(b.addOwnerCallbackNode(a),b.addOwnerCallbackName(c),b.addOwnerCallbackControlEvents(0));else if(d===CCB_TARGETTYPE_DOCUMENTROOT?e=b.getAnimationManager().getRootNode():d===CCB_TARGETTYPE_OWNER&&(e=b.getOwner()),null!=e)if(0<c.length)if(a=
0,null!=e&&e.onResolveCCBCCMenuItemSelector&&(a=e.onResolveCCBCCMenuItemSelector(e,c)),0==a&&(b=b.getCCBSelectorResolver(),null!=b&&(a=b.onResolveCCBCCMenuItemSelector(e,c))),0==a)cc.log("Skipping selector '"+c+"' since no CCBSelectorResolver is present.");else return new BlockData(a,e);else cc.log("Unexpected empty selector.");else cc.log("Unexpected NULL target for selector.")}return null},parsePropTypeBlockCCControl:function(a,c,b){c=b.readCachedString();var d=b.readInt(!1),e=b.readInt(!1);if(d!==
CCB_TARGETTYPE_NONE)if(b.isJSControlled())d==CCB_TARGETTYPE_DOCUMENTROOT?(b.addDocumentCallbackNode(a),b.addDocumentCallbackName(c),b.addDocumentCallbackControlEvents(e)):(b.addOwnerCallbackNode(a),b.addOwnerCallbackName(c),b.addOwnerCallbackControlEvents(e));else if(a=null,d==CCB_TARGETTYPE_DOCUMENTROOT?a=b.getAnimationManager().getRootNode():d==CCB_TARGETTYPE_OWNER&&(a=b.getOwner()),null!=a)if(0<c.length)if(d=0,null!=a&&a.onResolveCCBCCControlSelector&&(d=a.onResolveCCBCCControlSelector(a,c)),0==
d&&(b=b.getCCBSelectorResolver(),null!=b&&(d=b.onResolveCCBCCControlSelector(a,c))),0==d)cc.log("Skipping selector '"+c+"' since no CCBSelectorResolver is present.");else return new BlockCCControlData(d,a,e);else cc.log("Unexpected empty selector.");else cc.log("Unexpected NULL target for selector.");return null},parsePropTypeCCBFile:function(a,c,b){var d=b.getCCBRootPath()+b.readCachedString(),d=cc.BuilderReader.deletePathExtension(d)+".ccbi";a=new cc.BuilderReader(b);var e=cc.loader.getRes(d);e||
(e=cc.loader.getUrl(d),e=cc.loader.loadBinarySync(e),cc.loader.cache[d]=e);a.initWithData(e,b.getOwner());a.getAnimationManager().setRootContainerSize(c.getContentSize());a.setAnimationManagers(b.getAnimationManagers());a.getAnimationManager().setOwner(b.getOwner());c=a.readFileWithCleanUp(!1);b.setAnimationManagers(a.getAnimationManagers());c&&-1!=a.getAnimationManager().getAutoPlaySequenceId()&&a.getAnimationManager().runAnimations(a.getAnimationManager().getAutoPlaySequenceId(),0);return c},parsePropTypeFloatXY:function(a,
c,b){a=b.readFloat();b=b.readFloat();return[a,b]},onHandlePropTypePosition:function(a,c,b,d,e){b===PROPERTY_POSITION?a.setPosition(d):ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypePoint:function(a,c,b,d,e){b===PROPERTY_ANCHORPOINT?a.setAnchorPoint(d):ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypePointLock:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeSize:function(a,c,b,d,e){b===PROPERTY_CONTENTSIZE?a.setContentSize(d):ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeScaleLock:function(a,
c,b,d,e){b===PROPERTY_SCALE?(a.setScaleX(d[0]),a.setScaleY(d[1])):ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeFloatXY:function(a,c,b,d,e){b===PROPERTY_SKEW?(a.setSkewX(d[0]),a.setSkewY(d[1])):(c=b+"X",e=b+"Y",(!a[c]||!a[e])&&ASSERT_FAIL_UNEXPECTED_PROPERTY(b),a[c](d[0]),a[e](d[1]))},onHandlePropTypeFloat:function(a,c,b,d,e){this._customProperties.setObject(d,b)},onHandlePropTypeDegrees:function(a,c,b,d,e){b===PROPERTY_ROTATION?a.setRotation(d):ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeFloatScale:function(a,
c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeInteger:function(a,c,b,d,e){b===PROPERTY_TAG?a.setTag(d):ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeIntegerLabeled:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeFloatVar:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeCheck:function(a,c,b,d,e){b===PROPERTY_VISIBLE?a.setVisible(d):b===PROPERTY_IGNOREANCHORPOINTFORPOSITION?a.ignoreAnchorPointForPosition(d):ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},
onHandlePropTypeSpriteFrame:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeAnimation:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeTexture:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeByte:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeColor3:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeColor4FVar:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeFlip:function(a,
c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeBlendFunc:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeFntFile:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeString:function(a,c,b,d,e){this._customProperties.setObject(d,b)},onHandlePropTypeText:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeFontTTF:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeBlock:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},
onHandlePropTypeBlockCCControl:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)},onHandlePropTypeCCBFile:function(a,c,b,d,e){ASSERT_FAIL_UNEXPECTED_PROPERTY(b)}});cc.NodeLoader.loader=function(){return new cc.NodeLoader};cc.NodeLoaderListener=cc.Class.extend({onNodeLoaded:function(a,c){}});cc.BuilderSelectorResolver=cc.Class.extend({onResolveCCBCCMenuItemSelector:function(a,c){},onResolveCCBCCCallFuncSelector:function(a,c){},onResolveCCBCCControlSelector:function(a,c){}});cc.BuilderScriptOwnerProtocol=cc.Class.extend({createNew:function(){}});cc.BuilderMemberVariableAssigner=cc.Class.extend({onAssignCCBMemberVariable:function(a,c,b){return!1},onAssignCCBCustomProperty:function(a,c,b){return!1}});var PROPERTY_CCBFILE="ccbFile";cc.BuilderFileLoader=cc.NodeLoader.extend({_createCCNode:function(a,c){return cc.BuilderFile.create()},onHandlePropTypeCCBFile:function(a,c,b,d,e){b==PROPERTY_CCBFILE?a.setCCBFileNode(d):cc.NodeLoader.prototype.onHandlePropTypeCCBFile.call(this,a,c,b,d,e)}});cc.BuilderFileLoader.loader=function(){return new cc.BuilderFileLoader};var PROPERTY_ENABLED="enabled",PROPERTY_SELECTED="selected",PROPERTY_CCCONTROL="ccControl";
cc.ControlLoader=cc.NodeLoader.extend({_createCCNode:function(a,c){},onHandlePropTypeBlockCCControl:function(a,c,b,d,e){b==PROPERTY_CCCONTROL?a.addTargetWithActionForControlEvents(d.target,d.selCCControlHandler,d.controlEvents):cc.NodeLoader.prototype.onHandlePropTypeBlockCCControl.call(this,a,c,b,d,e)},onHandlePropTypeCheck:function(a,c,b,d,e){b==PROPERTY_ENABLED?a.setEnabled(d):b==PROPERTY_SELECTED?a.setSelected(d):cc.NodeLoader.prototype.onHandlePropTypeCheck.call(this,a,c,b,d,e)}});
var PROPERTY_ZOOMONTOUCHDOWN="zoomOnTouchDown",PROPERTY_TITLE_NORMAL="title|1",PROPERTY_TITLE_HIGHLIGHTED="title|2",PROPERTY_TITLE_DISABLED="title|3",PROPERTY_TITLECOLOR_NORMAL="titleColor|1",PROPERTY_TITLECOLOR_HIGHLIGHTED="titleColor|2",PROPERTY_TITLECOLOR_DISABLED="titleColor|3",PROPERTY_TITLETTF_NORMAL="titleTTF|1",PROPERTY_TITLETTF_HIGHLIGHTED="titleTTF|2",PROPERTY_TITLETTF_DISABLED="titleTTF|3",PROPERTY_TITLETTFSIZE_NORMAL="titleTTFSize|1",PROPERTY_TITLETTFSIZE_HIGHLIGHTED="titleTTFSize|2",
PROPERTY_TITLETTFSIZE_DISABLED="titleTTFSize|4",PROPERTY_LABELANCHORPOINT="labelAnchorPoint",PROPERTY_PREFEREDSIZE="preferedSize",PROPERTY_BACKGROUNDSPRITEFRAME_NORMAL="backgroundSpriteFrame|1",PROPERTY_BACKGROUNDSPRITEFRAME_HIGHLIGHTED="backgroundSpriteFrame|2",PROPERTY_BACKGROUNDSPRITEFRAME_DISABLED="backgroundSpriteFrame|3";
cc.ControlButtonLoader=cc.ControlLoader.extend({_createCCNode:function(a,c){return cc.ControlButton.create()},onHandlePropTypeCheck:function(a,c,b,d,e){b==PROPERTY_ZOOMONTOUCHDOWN?a.setZoomOnTouchDown(d):cc.ControlLoader.prototype.onHandlePropTypeCheck.call(this,a,c,b,d,e)},onHandlePropTypeString:function(a,c,b,d,e){b==PROPERTY_TITLE_NORMAL?a.setTitleForState(d,cc.CONTROL_STATE_NORMAL):b==PROPERTY_TITLE_HIGHLIGHTED?a.setTitleForState(d,cc.CONTROL_STATE_HIGHLIGHTED):b==PROPERTY_TITLE_DISABLED?a.setTitleForState(d,
cc.CONTROL_STATE_DISABLED):cc.ControlLoader.prototype.onHandlePropTypeString.call(this,a,c,b,d,e)},onHandlePropTypeFontTTF:function(a,c,b,d,e){b==PROPERTY_TITLETTF_NORMAL?a.setTitleTTFForState(d,cc.CONTROL_STATE_NORMAL):b==PROPERTY_TITLETTF_HIGHLIGHTED?a.setTitleTTFForState(d,cc.CONTROL_STATE_HIGHLIGHTED):b==PROPERTY_TITLETTF_DISABLED?a.setTitleTTFForState(d,cc.CONTROL_STATE_DISABLED):cc.ControlLoader.prototype.onHandlePropTypeFontTTF.call(this,a,c,b,d,e)},onHandlePropTypeFloatScale:function(a,c,
b,d,e){b==PROPERTY_TITLETTFSIZE_NORMAL?a.setTitleTTFSizeForState(d,cc.CONTROL_STATE_NORMAL):b==PROPERTY_TITLETTFSIZE_HIGHLIGHTED?a.setTitleTTFSizeForState(d,cc.CONTROL_STATE_HIGHLIGHTED):b==PROPERTY_TITLETTFSIZE_DISABLED?a.setTitleTTFSizeForState(d,cc.CONTROL_STATE_DISABLED):cc.ControlLoader.prototype.onHandlePropTypeFloatScale.call(this,a,c,b,d,e)},onHandlePropTypePoint:function(a,c,b,d,e){b==PROPERTY_LABELANCHORPOINT?a.setLabelAnchorPoint(d):cc.ControlLoader.prototype.onHandlePropTypePoint.call(this,
a,c,b,d,e)},onHandlePropTypeSize:function(a,c,b,d,e){b==PROPERTY_PREFEREDSIZE?a.setPreferredSize(d):cc.ControlLoader.prototype.onHandlePropTypeSize.call(this,a,c,b,d,e)},onHandlePropTypeSpriteFrame:function(a,c,b,d,e){b==PROPERTY_BACKGROUNDSPRITEFRAME_NORMAL?null!=d&&a.setBackgroundSpriteFrameForState(d,cc.CONTROL_STATE_NORMAL):b==PROPERTY_BACKGROUNDSPRITEFRAME_HIGHLIGHTED?null!=d&&a.setBackgroundSpriteFrameForState(d,cc.CONTROL_STATE_HIGHLIGHTED):b==PROPERTY_BACKGROUNDSPRITEFRAME_DISABLED?null!=
d&&a.setBackgroundSpriteFrameForState(d,cc.CONTROL_STATE_DISABLED):cc.ControlLoader.prototype.onHandlePropTypeSpriteFrame.call(this,a,c,b,d,e)},onHandlePropTypeColor3:function(a,c,b,d,e){b==PROPERTY_TITLECOLOR_NORMAL?a.setTitleColorForState(d,cc.CONTROL_STATE_NORMAL):b==PROPERTY_TITLECOLOR_HIGHLIGHTED?a.setTitleColorForState(d,cc.CONTROL_STATE_HIGHLIGHTED):b==PROPERTY_TITLECOLOR_DISABLED?a.setTitleColorForState(d,cc.CONTROL_STATE_DISABLED):cc.ControlLoader.prototype.onHandlePropTypeColor3.call(this,
a,c,b,d,e)}});cc.ControlButtonLoader.loader=function(){return new cc.ControlButtonLoader};var PROPERTY_CONTAINER="container",PROPERTY_DIRECTION="direction",PROPERTY_CLIPSTOBOUNDS="clipsToBounds",PROPERTY_BOUNCES="bounces",PROPERTY_SCALE="scale";
cc.ScrollViewLoader=cc.NodeLoader.extend({_createCCNode:function(a,c){return cc.ScrollView.create()},onHandlePropTypeSize:function(a,c,b,d,e){b==PROPERTY_CONTENTSIZE?a.setViewSize(d):cc.NodeLoader.prototype.onHandlePropTypeSize.call(this,a,c,b,d,e)},onHandlePropTypeCCBFile:function(a,c,b,d,e){b==PROPERTY_CONTAINER?(a.setContainer(d),a.updateInset()):cc.NodeLoader.prototype.onHandlePropTypeCCBFile.call(this,a,c,b,d,e)},onHandlePropTypeCheck:function(a,c,b,d,e){b==PROPERTY_CLIPSTOBOUNDS?a.setClippingToBounds(d):
b==PROPERTY_BOUNCES?a.setBounceable(d):cc.NodeLoader.prototype.onHandlePropTypeCheck.call(this,a,c,b,d,e)},onHandlePropTypeFloat:function(a,c,b,d,e){b==PROPERTY_SCALE?a.setScale(d):cc.NodeLoader.prototype.onHandlePropTypeFloat.call(this,a,c,b,d,e)},onHandlePropTypeIntegerLabeled:function(a,c,b,d,e){b==PROPERTY_DIRECTION?a.setDirection(d):cc.NodeLoader.prototype.onHandlePropTypeIntegerLabeled.call(this,a,c,b,d,e)}});cc.ScrollViewLoader.loader=function(){return new cc.ScrollViewLoader};
var PROPERTY_CONTENTSIZE="contentSize",PROPERTY_SPRITEFRAME="spriteFrame",PROPERTY_COLOR="color",PROPERTY_OPACITY="opacity",PROPERTY_BLENDFUNC="blendFunc",PROPERTY_INSETLEFT="insetLeft",PROPERTY_INSETTOP="insetTop",PROPERTY_INSETRIGHT="insetRight",PROPERTY_INSETBOTTOM="insetBottom";
cc.Scale9SpriteLoader=cc.NodeLoader.extend({_createCCNode:function(a,c){var b=cc.Scale9Sprite.create();b.setAnchorPoint(0,0);return b},onHandlePropTypeColor3:function(a,c,b,d,e){b==PROPERTY_COLOR?(255!==d.r||255!==d.g||255!==d.b)&&a.setColor(d):cc.NodeLoader.prototype.onHandlePropTypeColor3.call(this,a,c,b,d,e)},onHandlePropTypeByte:function(a,c,b,d,e){b==PROPERTY_OPACITY?a.setOpacity(d):cc.NodeLoader.prototype.onHandlePropTypeByte.call(this,a,c,b,d,e)},onHandlePropTypeBlendFunc:function(a,c,b,d,
e){b!=PROPERTY_BLENDFUNC&&cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(this,a,c,b,d,e)},onHandlePropTypeSpriteFrame:function(a,c,b,d,e){b==PROPERTY_SPRITEFRAME?a.setSpriteFrame(d):cc.NodeLoader.prototype.onHandlePropTypeSpriteFrame.call(this,a,c,b,d,e)},onHandlePropTypeSize:function(a,c,b,d,e){b!=PROPERTY_CONTENTSIZE&&(b==PROPERTY_PREFEREDSIZE?a.setPreferredSize(d):cc.NodeLoader.prototype.onHandlePropTypeSize.call(this,a,c,b,d,e))},onHandlePropTypeFloat:function(a,c,b,d,e){b==PROPERTY_INSETLEFT?
a.setInsetLeft(d):b==PROPERTY_INSETTOP?a.setInsetTop(d):b==PROPERTY_INSETRIGHT?a.setInsetRight(d):b==PROPERTY_INSETBOTTOM?a.setInsetBottom(d):cc.NodeLoader.prototype.onHandlePropTypeFloat.call(this,a,c,b,d,e)}});cc.Scale9SpriteLoader.loader=function(){return new cc.Scale9SpriteLoader};var PROPERTY_FLIP="flip",PROPERTY_DISPLAYFRAME="displayFrame",PROPERTY_COLOR="color",PROPERTY_OPACITY="opacity",PROPERTY_BLENDFUNC="blendFunc";
cc.SpriteLoader=cc.NodeLoader.extend({_createCCNode:function(a,c){return cc.Sprite.create()},onHandlePropTypeColor3:function(a,c,b,d,e){b===PROPERTY_COLOR?(255!==d.r||255!==d.g||255!==d.b)&&a.setColor(d):cc.NodeLoader.prototype.onHandlePropTypeColor3.call(this,a,c,b,d,e)},onHandlePropTypeByte:function(a,c,b,d,e){b===PROPERTY_OPACITY?a.setOpacity(d):cc.NodeLoader.prototype.onHandlePropTypeByte.call(this,a,c,b,d,e)},onHandlePropTypeBlendFunc:function(a,c,b,d,e){b===PROPERTY_BLENDFUNC?a.setBlendFunc(d):
cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(this,a,c,b,d,e)},onHandlePropTypeSpriteFrame:function(a,c,b,d,e){b===PROPERTY_DISPLAYFRAME?d?a.setSpriteFrame(d):cc.log("ERROR: SpriteFrame is null"):cc.NodeLoader.prototype.onHandlePropTypeSpriteFrame.call(this,a,c,b,d,e)},onHandlePropTypeFlip:function(a,c,b,d,e){b===PROPERTY_FLIP?(a.setFlippedX(d[0]),a.setFlippedY(d[1])):cc.NodeLoader.prototype.onHandlePropTypeFlip.call(this,a,c,b,d,e)}});cc.SpriteLoader.loader=function(){return new cc.SpriteLoader};
var PROPERTY_TOUCH_ENABLED="touchEnabled",PROPERTY_IS_TOUCH_ENABLED="isTouchEnabled",PROPERTY_ACCELEROMETER_ENABLED="accelerometerEnabled",PROPERTY_IS_ACCELEROMETER_ENABLED="isAccelerometerEnabled",PROPERTY_IS_MOUSE_ENABLED="isMouseEnabled",PROPERTY_MOUSE_ENABLED="mouseEnabled",PROPERTY_KEYBOARD_ENABLED="keyboardEnabled",PROPERTY_IS_KEYBOARD_ENABLED="isKeyboardEnabled";
cc.LayerLoader=cc.NodeLoader.extend({_createCCNode:function(a,c){var b=cc.Layer.create();b.setContentSize(0,0);return b},onHandlePropTypeCheck:function(a,c,b,d,e){b===PROPERTY_TOUCH_ENABLED||b===PROPERTY_IS_TOUCH_ENABLED||b===PROPERTY_ACCELEROMETER_ENABLED||b===PROPERTY_IS_ACCELEROMETER_ENABLED||b===PROPERTY_MOUSE_ENABLED||b===PROPERTY_IS_MOUSE_ENABLED||(b===PROPERTY_KEYBOARD_ENABLED||b===PROPERTY_IS_KEYBOARD_ENABLED?a.setKeyboardEnabled&&!cc.sys.isNative?a.setKeyboardEnabled(d):cc.log("The property '"+
PROPERTY_IS_KEYBOARD_ENABLED+"' is not supported!"):cc.NodeLoader.prototype.onHandlePropTypeCheck.call(this,a,c,b,d,e))}});cc.LayerLoader.loader=function(){return new cc.LayerLoader};
cc.LayerColorLoader=cc.LayerLoader.extend({_createCCNode:function(a,c){return cc.LayerColor.create()},onHandlePropTypeColor3:function(a,c,b,d,e){b===PROPERTY_COLOR?a.setColor(d):cc.LayerLoader.prototype.onHandlePropTypeColor3.call(this,a,c,b,d,e)},onHandlePropTypeByte:function(a,c,b,d,e){b===PROPERTY_OPACITY?a.setOpacity(d):cc.LayerLoader.prototype.onHandlePropTypeByte.call(this,a,c,b,d,e)},onHandlePropTypeBlendFunc:function(a,c,b,d,e){b===PROPERTY_BLENDFUNC?a.setBlendFunc(d):cc.LayerLoader.prototype.onHandlePropTypeBlendFunc.call(this,
a,c,b,d,e)}});cc.LayerColorLoader.loader=function(){return new cc.LayerColorLoader};var PROPERTY_STARTCOLOR="startColor",PROPERTY_ENDCOLOR="endColor",PROPERTY_STARTOPACITY="startOpacity",PROPERTY_ENDOPACITY="endOpacity",PROPERTY_VECTOR="vector";
cc.LayerGradientLoader=cc.LayerLoader.extend({_createCCNode:function(a,c){return cc.LayerGradient.create()},onHandlePropTypeColor3:function(a,c,b,d,e){b===PROPERTY_STARTCOLOR?a.setStartColor(d):b==PROPERTY_ENDCOLOR?a.setEndColor(d):cc.LayerLoader.prototype.onHandlePropTypeColor3.call(this,a,c,b,d,e)},onHandlePropTypeByte:function(a,c,b,d,e){b===PROPERTY_STARTOPACITY?a.setStartOpacity(d):b===PROPERTY_ENDOPACITY?a.setEndOpacity(d):cc.LayerLoader.prototype.onHandlePropTypeByte.call(this,a,c,b,d,e)},
onHandlePropTypePoint:function(a,c,b,d,e){b===PROPERTY_VECTOR?a.setVector(d):cc.LayerLoader.prototype.onHandlePropTypePoint.call(this,a,c,b,d,e)},onHandlePropTypeBlendFunc:function(a,c,b,d,e){b===PROPERTY_BLENDFUNC?a.setBlendFunc(d):cc.LayerLoader.prototype.onHandlePropTypeBlendFunc.call(this,a,c,b,d,e)}});cc.LayerGradientLoader.loader=function(){return new cc.LayerGradientLoader};cc.MenuLoader=cc.LayerLoader.extend({_createCCNode:function(a,c){var b=cc.Menu.create();b.setContentSize(0,0);return b}});
cc.MenuLoader.loader=function(){return new cc.MenuLoader};var PROPERTY_BLOCK="block",PROPERTY_ISENABLED="isEnabled";
cc.MenuItemLoader=cc.NodeLoader.extend({_createCCNode:function(a,c){return null},onHandlePropTypeBlock:function(a,c,b,d,e){b===PROPERTY_BLOCK?null!=d&&a.setTarget(d.selMenuHander,d.target):cc.NodeLoader.prototype.onHandlePropTypeBlock.call(this,a,c,b,d,e)},onHandlePropTypeCheck:function(a,c,b,d,e){b===PROPERTY_ISENABLED?a.setEnabled(d):cc.NodeLoader.prototype.onHandlePropTypeCheck.call(this,a,c,b,d,e)}});
var PROPERTY_NORMALDISPLAYFRAME="normalSpriteFrame",PROPERTY_SELECTEDDISPLAYFRAME="selectedSpriteFrame",PROPERTY_DISABLEDDISPLAYFRAME="disabledSpriteFrame";
cc.MenuItemImageLoader=cc.MenuItemLoader.extend({_createCCNode:function(a,c){return cc.MenuItemImage.create()},onHandlePropTypeSpriteFrame:function(a,c,b,d,e){b===PROPERTY_NORMALDISPLAYFRAME?null!=d&&a.setNormalSpriteFrame(d):b===PROPERTY_SELECTEDDISPLAYFRAME?null!=d&&a.setSelectedSpriteFrame(d):b===PROPERTY_DISABLEDDISPLAYFRAME?null!=d&&a.setDisabledSpriteFrame(d):cc.MenuItemLoader.prototype.onHandlePropTypeSpriteFrame.call(this,a,c,b,d,e)}});cc.MenuItemImageLoader.loader=function(){return new cc.MenuItemImageLoader};
var PROPERTY_FONTNAME="fontName",PROPERTY_FONTSIZE="fontSize",PROPERTY_HORIZONTALALIGNMENT="horizontalAlignment",PROPERTY_VERTICALALIGNMENT="verticalAlignment",PROPERTY_STRING="string",PROPERTY_DIMENSIONS="dimensions";
cc.LabelTTFLoader=cc.NodeLoader.extend({_createCCNode:function(a,c){return cc.LabelTTF.create()},onHandlePropTypeColor3:function(a,c,b,d,e){b===PROPERTY_COLOR?(255!==d.r||255!==d.g||255!==d.b)&&a.setColor(d):cc.NodeLoader.prototype.onHandlePropTypeColor3.call(this,a,c,b,d,e)},onHandlePropTypeByte:function(a,c,b,d,e){b===PROPERTY_OPACITY?a.setOpacity(d):cc.NodeLoader.prototype.onHandlePropTypeByte.call(this,a,c,b,d,e)},onHandlePropTypeBlendFunc:function(a,c,b,d,e){b===PROPERTY_BLENDFUNC?a.setBlendFunc(d):
cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(this,a,c,b,d,e)},onHandlePropTypeFontTTF:function(a,c,b,d,e){b===PROPERTY_FONTNAME?a.setFontName(d):cc.NodeLoader.prototype.onHandlePropTypeFontTTF.call(this,a,c,b,d,e)},onHandlePropTypeText:function(a,c,b,d,e){b===PROPERTY_STRING?a.setString(d):cc.NodeLoader.prototype.onHandlePropTypeText.call(this,a,c,b,d,e)},onHandlePropTypeFloatScale:function(a,c,b,d,e){b===PROPERTY_FONTSIZE?a.setFontSize(d):cc.NodeLoader.prototype.onHandlePropTypeFloatScale.call(this,
a,c,b,d,e)},onHandlePropTypeIntegerLabeled:function(a,c,b,d,e){b===PROPERTY_HORIZONTALALIGNMENT?a.setHorizontalAlignment(d):b===PROPERTY_VERTICALALIGNMENT?a.setVerticalAlignment(d):cc.NodeLoader.prototype.onHandlePropTypeIntegerLabeled.call(this,a,c,b,d,e)},onHandlePropTypeSize:function(a,c,b,d,e){b===PROPERTY_DIMENSIONS?a.setDimensions(d):cc.NodeLoader.prototype.onHandlePropTypeSize.call(this,a,c,b,d,e)}});cc.LabelTTFLoader.loader=function(){return new cc.LabelTTFLoader};var PROPERTY_FNTFILE="fntFile";
cc.LabelBMFontLoader=cc.NodeLoader.extend({_createCCNode:function(a,c){return cc.LabelBMFont.create()},onHandlePropTypeColor3:function(a,c,b,d,e){b===PROPERTY_COLOR?(255!==d.r||255!==d.g||255!==d.b)&&a.setColor(d):cc.NodeLoader.prototype.onHandlePropTypeColor3.call(this,a,c,b,d,e)},onHandlePropTypeByte:function(a,c,b,d,e){b===PROPERTY_OPACITY?a.setOpacity(d):cc.NodeLoader.prototype.onHandlePropTypeByte.call(this,a,c,b,d,e)},onHandlePropTypeBlendFunc:function(a,c,b,d,e){b===PROPERTY_BLENDFUNC?a.setBlendFunc(d):
cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(this,a,c,b,d,e)},onHandlePropTypeFntFile:function(a,c,b,d,e){b===PROPERTY_FNTFILE?a.setFntFile(d):cc.NodeLoader.prototype.onHandlePropTypeFntFile.call(this,a,c,b,d,e)},onHandlePropTypeText:function(a,c,b,d,e){b===PROPERTY_STRING?a.setString(d):cc.NodeLoader.prototype.onHandlePropTypeText.call(this,a,c,b,d,e)}});cc.LabelBMFontLoader.loader=function(){return new cc.LabelBMFontLoader};
var PROPERTY_EMITERMODE="emitterMode",PROPERTY_POSVAR="posVar",PROPERTY_EMISSIONRATE="emissionRate",PROPERTY_DURATION="duration",PROPERTY_TOTALPARTICLES="totalParticles",PROPERTY_LIFE="life",PROPERTY_STARTSIZE="startSize",PROPERTY_ENDSIZE="endSize",PROPERTY_STARTSPIN="startSpin",PROPERTY_ENDSPIN="endSpin",PROPERTY_ANGLE="angle",PROPERTY_GRAVITY="gravity",PROPERTY_SPEED="speed",PROPERTY_TANGENTIALACCEL="tangentialAccel",PROPERTY_RADIALACCEL="radialAccel",PROPERTY_TEXTURE="texture",PROPERTY_STARTRADIUS=
"startRadius",PROPERTY_ENDRADIUS="endRadius",PROPERTY_ROTATEPERSECOND="rotatePerSecond";
cc.ParticleSystemLoader=cc.NodeLoader.extend({_createCCNode:function(a,c){return cc.ParticleSystem.create()},onHandlePropTypeIntegerLabeled:function(a,c,b,d,e){b===PROPERTY_EMITERMODE?a.setEmitterMode(d):cc.NodeLoader.prototype.onHandlePropTypeIntegerLabeled.call(this,a,c,b,d,e)},onHandlePropTypePoint:function(a,c,b,d,e){b===PROPERTY_POSVAR?a.setPosVar(d):b===PROPERTY_GRAVITY?a.setGravity(d):cc.NodeLoader.prototype.onHandlePropTypePoint.call(this,a,c,b,d,e)},onHandlePropTypeFloat:function(a,c,b,d,
e){b===PROPERTY_EMISSIONRATE?a.setEmissionRate(d):b===PROPERTY_DURATION?a.setDuration(d):cc.NodeLoader.prototype.onHandlePropTypeFloat.call(this,a,c,b,d,e)},onHandlePropTypeInteger:function(a,c,b,d,e){b===PROPERTY_TOTALPARTICLES?a.setTotalParticles(d):cc.NodeLoader.prototype.onHandlePropTypeInteger.call(this,a,c,b,d,e)},onHandlePropTypeFloatVar:function(a,c,b,d,e){b===PROPERTY_LIFE?(a.setLife(d[0]),a.setLifeVar(d[1])):b===PROPERTY_STARTSIZE?(a.setStartSize(d[0]),a.setStartSizeVar(d[1])):b===PROPERTY_ENDSIZE?
(a.setEndSize(d[0]),a.setEndSizeVar(d[1])):b===PROPERTY_STARTSPIN?(a.setStartSpin(d[0]),a.setStartSpinVar(d[1])):b===PROPERTY_ENDSPIN?(a.setEndSpin(d[0]),a.setEndSpinVar(d[1])):b===PROPERTY_ANGLE?(a.setAngle(d[0]),a.setAngleVar(d[1])):b===PROPERTY_SPEED?(a.setSpeed(d[0]),a.setSpeedVar(d[1])):b===PROPERTY_TANGENTIALACCEL?(a.setTangentialAccel(d[0]),a.setTangentialAccelVar(d[1])):b===PROPERTY_RADIALACCEL?(a.setRadialAccel(d[0]),a.setRadialAccelVar(d[1])):b===PROPERTY_STARTRADIUS?(a.setStartRadius(d[0]),
a.setStartRadiusVar(d[1])):b===PROPERTY_ENDRADIUS?(a.setEndRadius(d[0]),a.setEndRadiusVar(d[1])):b===PROPERTY_ROTATEPERSECOND?(a.setRotatePerSecond(d[0]),a.setRotatePerSecondVar(d[1])):cc.NodeLoader.prototype.onHandlePropTypeFloatVar.call(this,a,c,b,d,e)},onHandlePropTypeColor4FVar:function(a,c,b,d,e){b===PROPERTY_STARTCOLOR?(a.setStartColor(d[0]),a.setStartColorVar(d[1])):b===PROPERTY_ENDCOLOR?(a.setEndColor(d[0]),a.setEndColorVar(d[1])):cc.NodeLoader.prototype.onHandlePropTypeColor4FVar.call(this,
a,c,b,d,e)},onHandlePropTypeBlendFunc:function(a,c,b,d,e){b===PROPERTY_BLENDFUNC?a.setBlendFunc(d):cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(this,a,c,b,d,e)},onHandlePropTypeTexture:function(a,c,b,d,e){b===PROPERTY_TEXTURE?a.setTexture(d):cc.NodeLoader.prototype.onHandlePropTypeTexture.call(this,a,c,b,d,e)}});cc.ParticleSystemLoader.loader=function(){return new cc.ParticleSystemLoader};cc.NodeLoaderLibrary=cc.Class.extend({_ccNodeLoaders:null,ctor:function(){this._ccNodeLoaders={}},registerDefaultCCNodeLoaders:function(){this.registerCCNodeLoader("CCNode",cc.NodeLoader.loader());this.registerCCNodeLoader("CCLayer",cc.LayerLoader.loader());this.registerCCNodeLoader("CCLayerColor",cc.LayerColorLoader.loader());this.registerCCNodeLoader("CCLayerGradient",cc.LayerGradientLoader.loader());this.registerCCNodeLoader("CCSprite",cc.SpriteLoader.loader());this.registerCCNodeLoader("CCLabelBMFont",
cc.LabelBMFontLoader.loader());this.registerCCNodeLoader("CCLabelTTF",cc.LabelTTFLoader.loader());this.registerCCNodeLoader("CCScale9Sprite",cc.Scale9SpriteLoader.loader());this.registerCCNodeLoader("CCScrollView",cc.ScrollViewLoader.loader());this.registerCCNodeLoader("CCBFile",cc.BuilderFileLoader.loader());this.registerCCNodeLoader("CCMenu",cc.MenuLoader.loader());this.registerCCNodeLoader("CCMenuItemImage",cc.MenuItemImageLoader.loader());this.registerCCNodeLoader("CCControlButton",cc.ControlButtonLoader.loader());
this.registerCCNodeLoader("CCParticleSystemQuad",cc.ParticleSystemLoader.loader())},registerCCNodeLoader:function(a,c){this._ccNodeLoaders[a]=c},unregisterCCNodeLoader:function(a){this._ccNodeLoaders[a]&&delete this._ccNodeLoaders[a]},getCCNodeLoader:function(a){return this._ccNodeLoaders[a]?this._ccNodeLoaders[a]:null},purge:function(a){if(a)for(var c in this._ccNodeLoaders)delete this._ccNodeLoaders[c];this._ccNodeLoaders={}}});cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary=null;
cc.NodeLoaderLibrary.library=function(){return new cc.NodeLoaderLibrary};cc.NodeLoaderLibrary.sharedCCNodeLoaderLibrary=function(){null==cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary&&(cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary=new cc.NodeLoaderLibrary,cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary.registerDefaultCCNodeLoaders());return cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary};
cc.NodeLoaderLibrary.purgeSharedCCNodeLoaderLibrary=function(){cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary=null};cc.NodeLoaderLibrary.newDefaultCCNodeLoaderLibrary=function(){var a=cc.NodeLoaderLibrary.library();a.registerDefaultCCNodeLoaders();return a};var CCB_VERSION=5,CCB_PROPTYPE_POSITION=0,CCB_PROPTYPE_SIZE=1,CCB_PROPTYPE_POINT=2,CCB_PROPTYPE_POINTLOCK=3,CCB_PROPTYPE_SCALELOCK=4,CCB_PROPTYPE_DEGREES=5,CCB_PROPTYPE_INTEGER=6,CCB_PROPTYPE_FLOAT=7,CCB_PROPTYPE_FLOATVAR=8,CCB_PROPTYPE_CHECK=9,CCB_PROPTYPE_SPRITEFRAME=10,CCB_PROPTYPE_TEXTURE=11,CCB_PROPTYPE_BYTE=12,CCB_PROPTYPE_COLOR3=13,CCB_PROPTYPE_COLOR4VAR=14,CCB_PROPTYPE_FLIP=15,CCB_PROPTYPE_BLENDMODE=16,CCB_PROPTYPE_FNTFILE=17,CCB_PROPTYPE_TEXT=18,CCB_PROPTYPE_FONTTTF=19,CCB_PROPTYPE_INTEGERLABELED=
20,CCB_PROPTYPE_BLOCK=21,CCB_PROPTYPE_ANIMATION=22,CCB_PROPTYPE_CCBFILE=23,CCB_PROPTYPE_STRING=24,CCB_PROPTYPE_BLOCKCCCONTROL=25,CCB_PROPTYPE_FLOATSCALE=26,CCB_PROPTYPE_FLOATXY=27,CCB_FLOAT0=0,CCB_FLOAT1=1,CCB_FLOAT_MINUS1=2,CCB_FLOAT05=3,CCB_FLOAT_INTEGER=4,CCB_FLOAT_FULL=5,CCB_PLATFORM_ALL=0,CCB_PLATFORM_IOS=1,CCB_PLATFORM_MAC=2,CCB_TARGETTYPE_NONE=0,CCB_TARGETTYPE_DOCUMENTROOT=1,CCB_TARGETTYPE_OWNER=2,CCB_KEYFRAME_EASING_INSTANT=0,CCB_KEYFRAME_EASING_LINEAR=1,CCB_KEYFRAME_EASING_CUBIC_IN=2,CCB_KEYFRAME_EASING_CUBIC_OUT=
3,CCB_KEYFRAME_EASING_CUBIC_INOUT=4,CCB_KEYFRAME_EASING_ELASTIC_IN=5,CCB_KEYFRAME_EASING_ELASTIC_OUT=6,CCB_KEYFRAME_EASING_ELASTIC_INOUT=7,CCB_KEYFRAME_EASING_BOUNCE_IN=8,CCB_KEYFRAME_EASING_BOUNCE_OUT=9,CCB_KEYFRAME_EASING_BOUNCE_INOUT=10,CCB_KEYFRAME_EASING_BACK_IN=11,CCB_KEYFRAME_EASING_BACK_OUT=12,CCB_KEYFRAME_EASING_BACK_INOUT=13,CCB_POSITIONTYPE_RELATIVE_BOTTOM_LEFT=0,CCB_POSITIONTYPE_RELATIVE_TOP_LEFT=1,CCB_POSITIONTYPE_RELATIVE_TOP_RIGHT=2,CCB_POSITIONTYPE_RELATIVE_BOTTOM_RIGHT=3,CCB_POSITIONTYPE_PERCENT=
4,CCB_POSITIONTYPE_MULTIPLY_RESOLUTION=5,CCB_SIZETYPE_ABSOLUTE=0,CCB_SIZETYPE_PERCENT=1,CCB_SIZETYPE_RELATIVE_CONTAINER=2,CCB_SIZETYPE_HORIZONTAL_PERCENT=3,CCB_SIZETYPE_VERTICAL_PERCENT=4,CCB_SIZETYPE_MULTIPLY_RESOLUTION=5,CCB_SCALETYPE_ABSOLUTE=0,CCB_SCALETYPE_MULTIPLY_RESOLUTION=1;cc.BuilderFile=cc.Node.extend({_ccbFileNode:null,getCCBFileNode:function(){return this._ccbFileNode},setCCBFileNode:function(a){this._ccbFileNode=a}});cc.BuilderFile.create=function(){return new cc.BuilderFile};
cc.BuilderReader=cc.Class.extend({_jsControlled:!1,_data:null,_ccbRootPath:"",_bytes:0,_currentByte:0,_currentBit:0,_stringCache:null,_loadedSpriteSheets:null,_owner:null,_animationManager:null,_animationManagers:null,_animatedProps:null,_ccNodeLoaderLibrary:null,_ccNodeLoaderListener:null,_ccbMemberVariableAssigner:null,_ccbSelectorResolver:null,_ownerOutletNames:null,_ownerOutletNodes:null,_nodesWithAnimationManagers:null,_animationManagerForNodes:null,_ownerCallbackNames:null,_ownerCallbackNodes:null,
_ownerCallbackEvents:null,_readNodeGraphFromData:!1,ctor:function(a,c,b,d){this._stringCache=[];this._loadedSpriteSheets=[];this._currentByte=this._currentBit=-1;0!=arguments.length&&(a instanceof cc.BuilderReader?(this._loadedSpriteSheets=a._loadedSpriteSheets,this._ccNodeLoaderLibrary=a._ccNodeLoaderLibrary,this._ccbMemberVariableAssigner=a._ccbMemberVariableAssigner,this._ccbSelectorResolver=a._ccbSelectorResolver,this._ccNodeLoaderListener=a._ccNodeLoaderListener,this._ownerCallbackNames=a._ownerCallbackNames,
this._ownerCallbackNodes=a._ownerCallbackNodes,this._ownerCallbackEvents=a._ownerCallbackEvents,this._ownerOutletNames=a._ownerOutletNames,this._ownerOutletNodes=a._ownerOutletNodes,this._ccbRootPath=a._ccbRootPath):(this._ccNodeLoaderLibrary=a,this._ccbMemberVariableAssigner=c,this._ccbSelectorResolver=b,this._ccNodeLoaderListener=d))},getCCBRootPath:function(){return this._ccbRootPath},setCCBRootPath:function(a){this._ccbRootPath=a},initWithData:function(a,c){this._animationManager=new cc.BuilderAnimationManager;
this._data=a;this._bytes=a.length;this._currentByte=this._currentBit=0;this._owner=c;this._animationManager.setRootContainerSize(cc.director.getWinSize());return!0},_loadBinarySync:function(a){var c=this.getXMLHttpRequest(),b="load "+a+" failed!";c.open("GET",a,!1);var d=null;if(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){c.setRequestHeader("Accept-Charset","x-user-defined");c.send(null);if(200!=c.status)return cc.log(b),null;if(c=cc._convertResponseBodyToText(c.responseBody))d=
this._stringConvertToArray(c),this._fileDataCache[a]=d}else{c.overrideMimeType&&c.overrideMimeType("text/plain; charset\x3dx-user-defined");c.send(null);if(200!=c.status)return cc.log(b),null;d=this._stringConvertToArray(c.responseText);this._fileDataCache[a]=d}return d},readNodeGraphFromFile:function(a,c,b,d){null==b?b=cc.director.getWinSize():b instanceof cc.BuilderAnimationManager&&(d=b,b=cc.director.getWinSize());var e=cc.loader.getRes(a);e||(e=cc.loader.getUrl(a),e=cc.loader.loadBinarySync(e),
cc.loader.cache[a]=e);return this.readNodeGraphFromData(e,c,b,d)},readNodeGraphFromData:function(a,c,b){this.initWithData(a,c);a=this._animationManager;a.setRootContainerSize(b);a.setOwner(c);this._ownerOutletNames=[];this._ownerOutletNodes=[];this._ownerCallbackNames=[];this._ownerCallbackNodes=[];this._ownerCallbackEvents=[];this._animationManagers=new cc._Dictionary;(c=this.readFileWithCleanUp(!0))&&-1!=a.getAutoPlaySequenceId()&&a.runAnimations(a.getAutoPlaySequenceId(),0);if(this._jsControlled){b=
[];a=[];for(var d=this._animationManagers,e=d.allKeys(),g=0;g<e.length;g++)b.push(e[g]),a.push(d.objectForKey(e[g]));this._nodesWithAnimationManagers=b;this._animationManagerForNodes=a}return c},createSceneWithNodeGraphFromFile:function(a,c,b,d){a=this.readNodeGraphFromFile(a,c,b,d);c=cc.Scene.create();c.addChild(a);return c},getCCBMemberVariableAssigner:function(){return this._ccbMemberVariableAssigner},getCCBSelectorResolver:function(){return this._ccbSelectorResolver},getAnimationManager:function(){return this._animationManager},
setAnimationManager:function(a){this._animationManager=a},getAnimatedProperties:function(){return this._animatedProps},getLoadedSpriteSheet:function(){return this._loadedSpriteSheets},getOwner:function(){return this._owner},readInt:function(a){for(var c=0;!this._getBit();)c++;for(var b=0,d=c-1;0<=d;d--)this._getBit()&&(b|=1<<d);b|=1<<c;a=a?b%2?0|b/2:0|-b/2:b-1;this._alignBits();return a},readByte:function(){var a=this._data[this._currentByte];this._currentByte++;return a},readBool:function(){return 0!=
this.readByte()},readFloat:function(){switch(this.readByte()){case CCB_FLOAT0:return 0;case CCB_FLOAT1:return 1;case CCB_FLOAT_MINUS1:return-1;case CCB_FLOAT05:return 0.5;case CCB_FLOAT_INTEGER:return this.readInt(!0);default:return this._decodeFloat(23,8)}},_decodeFloat:function(a,c){var b=a+c+1,d=b>>3;this._checkSize(b);var b=Math.pow(2,c-1)-1,e=this._readBitsOnly(a+c,1,d),g=this._readBitsOnly(a,c,d),h=0,f=2,k=0;do for(var l=this._readByteOnly(++k,d),m=a%8||8,n=1<<m;n>>=1;)l&n&&(h+=1/f),f*=2;while(a-=
m);this._currentByte+=d;return g==(b<<1)+1?h?NaN:e?-Infinity:Infinity:(1+-2*e)*(g||h?!g?Math.pow(2,-b+1)*h:Math.pow(2,g-b)*(1+h):0)},_readBitsOnly:function(a,c,b){var d=(a+c)%8,e=a%8,g=b-(a>>3)-1;a=b+(-(a+c)>>3);var h=g-a;c=this._readByteOnly(g,b)>>e&(1<<(h?8-e:c))-1;for(h&&d&&(c+=(this._readByteOnly(a++,b)&(1<<d)-1)<<(h--<<3)-e);h;)c+=this._shl(this._readByteOnly(a++,b),(h--<<3)-e);return c},_readByteOnly:function(a,c){return this._data[this._currentByte+c-a-1]},_shl:function(a,c){for(++c;--c;a=
1073741824==((a%=2147483648)&1073741824)?2*a:2*(a-1073741824)+2147483648);return a},_checkSize:function(a){if(!(this._currentByte+Math.ceil(a/8)<this._data.length))throw Error("Index out of bound");},readCachedString:function(){return this._stringCache[this.readInt(!1)]},isJSControlled:function(){return this._jsControlled},getOwnerCallbackNames:function(){return this._ownerCallbackNames},getOwnerCallbackNodes:function(){return this._ownerCallbackNodes},getOwnerCallbackControlEvents:function(){return this._ownerCallbackEvents},
getOwnerOutletNames:function(){return this._ownerOutletNames},getOwnerOutletNodes:function(){return this._ownerOutletNodes},getNodesWithAnimationManagers:function(){return this._nodesWithAnimationManagers},getAnimationManagersForNodes:function(){return this._animationManagerForNodes},getAnimationManagers:function(){return this._animationManagers},setAnimationManagers:function(a){this._animationManagers=a},addOwnerCallbackName:function(a){this._ownerCallbackNames.push(a)},addOwnerCallbackNode:function(a){this._ownerCallbackNodes.push(a)},
addOwnerCallbackControlEvents:function(a){this._ownerCallbackEvents.push(a)},addDocumentCallbackName:function(a){this._animationManager.addDocumentCallbackName(a)},addDocumentCallbackNode:function(a){this._animationManager.addDocumentCallbackNode(a)},addDocumentCallbackControlEvents:function(a){this._animationManager.addDocumentCallbackControlEvents(a)},readFileWithCleanUp:function(a){if(!this._readHeader()||!this._readStringCache()||!this._readSequences())return null;var c=this._readNodeGraph();
this._animationManagers.setObject(this._animationManager,c);a&&this._cleanUpNodeGraph(c);return c},addOwnerOutletName:function(a){this._ownerOutletNames.push(a)},addOwnerOutletNode:function(a){null!=a&&this._ownerOutletNodes.push(a)},_cleanUpNodeGraph:function(a){a.userObject=null;a=a.getChildren();for(var c=0,b=a.length;c<b;c++)this._cleanUpNodeGraph(a[c])},_readCallbackKeyframesForSeq:function(a){var c=this.readInt(!1);if(!c)return!0;for(var b=new cc.BuilderSequenceProperty,d=this._jsControlled,
e=this._animationManager,g=b.getKeyframes(),h=0;h<c;h++){var f=this.readFloat(),k=this.readCachedString(),l=this.readInt(!1),m=[k,l],n=new cc.BuilderKeyframe;n.setTime(f);n.setValue(m);d&&e.getKeyframeCallbacks().push(l+":"+k);g.push(n)}a.setCallbackChannel(b);return!0},_readSoundKeyframesForSeq:function(a){var c=this.readInt(!1);if(!c)return!0;for(var b=new cc.BuilderSequenceProperty,d=b.getKeyframes(),e=0;e<c;e++){var g=this.readFloat(),h=this.readCachedString(),f=this.readFloat(),k=this.readFloat(),
l=this.readFloat(),h=[h,f,k,l],f=new cc.BuilderKeyframe;f.setTime(g);f.setValue(h);d.push(f)}a.setSoundChannel(b);return!0},_readSequences:function(){for(var a=this._animationManager.getSequences(),c=this.readInt(!1),b=0;b<c;b++){var d=new cc.BuilderSequence;d.setDuration(this.readFloat());d.setName(this.readCachedString());d.setSequenceId(this.readInt(!1));d.setChainedSequenceId(this.readInt(!0));if(!this._readCallbackKeyframesForSeq(d)||!this._readSoundKeyframesForSeq(d))return!1;a.push(d)}this._animationManager.setAutoPlaySequenceId(this.readInt(!0));
return!0},readKeyframe:function(a){var c=new cc.BuilderKeyframe;c.setTime(this.readFloat());var b=this.readInt(!1),d=0,e=null;if(b===CCB_KEYFRAME_EASING_CUBIC_IN||b===CCB_KEYFRAME_EASING_CUBIC_OUT||b===CCB_KEYFRAME_EASING_CUBIC_INOUT||b===CCB_KEYFRAME_EASING_ELASTIC_IN||b===CCB_KEYFRAME_EASING_ELASTIC_OUT||b===CCB_KEYFRAME_EASING_ELASTIC_INOUT)d=this.readFloat();c.setEasingType(b);c.setEasingOpt(d);a==CCB_PROPTYPE_CHECK?e=this.readBool():a==CCB_PROPTYPE_BYTE?e=this.readByte():a==CCB_PROPTYPE_COLOR3?
(a=cc.color(this.readByte(),this.readByte(),this.readByte()),e=cc.Color3BWapper.create(a)):a==CCB_PROPTYPE_FLOATXY?e=[this.readFloat(),this.readFloat()]:a==CCB_PROPTYPE_DEGREES?e=this.readFloat():a==CCB_PROPTYPE_SCALELOCK||a==CCB_PROPTYPE_POSITION||a==CCB_PROPTYPE_FLOATXY?e=[this.readFloat(),this.readFloat()]:a==CCB_PROPTYPE_SPRITEFRAME&&(a=this.readCachedString(),b=this.readCachedString(),""==a?(b=this._ccbRootPath+b,a=cc.textureCache.addImage(b),b=a.getContentSize(),b=cc.rect(0,0,b.width,b.height),
e=cc.SpriteFrame.create(a,b)):(a=this._ccbRootPath+a,d=cc.spriteFrameCache,-1==this._loadedSpriteSheets.indexOf(a)&&(d.addSpriteFrames(a),this._loadedSpriteSheets.push(a)),e=d.getSpriteFrame(b)));c.setValue(e);return c},_readHeader:function(){if(null==this._data)return!1;var a=this._readStringFromBytes(this._currentByte,4,!0);this._currentByte+=4;if("ccbi"!=a)return!1;a=this.readInt(!1);if(a!=CCB_VERSION)return cc.log("WARNING! Incompatible ccbi file version (file: "+a+" reader: "+CCB_VERSION+")"),
!1;this._jsControlled=this.readBool();this._animationManager._jsControlled=this._jsControlled;return!0},_readStringFromBytes:function(a,c,b){a="";var d=this._data,e=this._currentByte;if(b)for(b=c-1;0<=b;b--)a+=String.fromCharCode(d[e+b]);else for(b=0;b<c;b++)a+=String.fromCharCode(d[e+b]);return a},_readStringCache:function(){for(var a=this.readInt(!1),c=0;c<a;c++)this._readStringCacheEntry();return!0},_readStringCacheEntry:function(){for(var a=this.readByte(),c=this.readByte(),a=a<<8|c,c="",b=this._data,
d=this._currentByte,e=0;e<a;e++)var g=b[d+e].toString("16").toUpperCase(),g=1<g.length?g:"0"+g,c=c+("%"+g);c=decodeURIComponent(c);this._currentByte+=a;this._stringCache.push(c)},_readNodeGraph:function(a){var c=this.readCachedString(),b,d=this._jsControlled,e=this._animationManager;d&&(b=this.readCachedString());var g=this.readInt(!1),h;g!=CCB_TARGETTYPE_NONE&&(h=this.readCachedString());(c=this._ccNodeLoaderLibrary.getCCNodeLoader(c))||(c=this._ccNodeLoaderLibrary.getCCNodeLoader("CCNode"));var f=
c.loadCCNode(a,this);e.getRootNode()||e.setRootNode(f);d&&f==e.getRootNode()&&e.setDocumentControllerName(b);var k=new cc._Dictionary,l=this._animatedProps=[],m=this.readInt(!1);for(b=0;b<m;++b){for(var n=this.readInt(!1),p=new cc._Dictionary,s=this.readInt(!1),r=0;r<s;++r){var q=new cc.BuilderSequenceProperty;q.setName(this.readCachedString());q.setType(this.readInt(!1));l.push(q.getName());for(var u=this.readInt(!1),v=q.getKeyframes(),t=0;t<u;++t){var w=this.readKeyframe(q.getType());v.push(w)}p.setObject(q,
q.getName())}k.setObject(p,n)}0<k.count()&&e.addNode(f,k);c.parseProperties(f,a,this);if(a=f instanceof cc.BuilderFile)b=f.getCCBFileNode(),b.setPosition(f.getPosition()),b.setRotation(f.getRotation()),b.setScaleX(f.getScaleX()),b.setScaleY(f.getScaleY()),b.setTag(f.getTag()),b.setVisible(!0),e.moveAnimationsFromNode(f,b),f.setCCBFileNode(null),f=b;l=k=null;if(g!=CCB_TARGETTYPE_NONE)if(d)g==CCB_TARGETTYPE_DOCUMENTROOT?(e.addDocumentOutletName(h),e.addDocumentOutletNode(f)):(this._ownerOutletNames.push(h),
this._ownerOutletNodes.push(f));else if(g===CCB_TARGETTYPE_DOCUMENTROOT?k=e.getRootNode():g===CCB_TARGETTYPE_OWNER&&(k=this._owner),null!=k&&(b=!1,null!=k&&k.onAssignCCBMemberVariable&&(b=k.onAssignCCBMemberVariable(k,h,f)),l=this._ccbMemberVariableAssigner,!b&&null!=l&&l.onAssignCCBMemberVariable))l.onAssignCCBMemberVariable(k,h,f);if(0<c.getCustomProperties().length&&(h=!1,!d&&(k=f,null!=k&&null!=k.onAssignCCBCustomProperty))){d=c.getCustomProperties();e=d.allKeys();for(b=0;b<e.length;b++)if(g=
d.objectForKey(e[b]),h=k.onAssignCCBCustomProperty(k,e[b],g),l=this._ccbMemberVariableAssigner,!h&&null!=l&&null!=l.onAssignCCBCustomProperty)l.onAssignCCBCustomProperty(k,e[b],g)}this._animatedProps=null;d=this.readInt(!1);for(b=0;b<d;b++)h=this._readNodeGraph(f),f.addChild(h);if(!a)if(null!=f&&f.onNodeLoaded)f.onNodeLoaded(f,c);else if(null!=this._ccNodeLoaderListener)this._ccNodeLoaderListener.onNodeLoaded(f,c);return f},_getBit:function(){var a=0!=(this._data[this._currentByte]&1<<this._currentBit);
this._currentBit++;if(8<=this._currentBit&&(this._currentBit=0,this._currentByte++,this._currentByte>this._data.length))throw"out of the data bound";return a},_alignBits:function(){this._currentBit&&(this._currentBit=0,this._currentByte++)},_readUTF8:function(){}});cc.BuilderReader._ccbResolutionScale=1;cc.BuilderReader.setResolutionScale=function(a){cc.BuilderReader._ccbResolutionScale=a};cc.BuilderReader.getResolutionScale=function(){return cc.BuilderReader._ccbResolutionScale};
cc.BuilderReader.loadAsScene=function(a,c,b,d){d=d||cc.BuilderReader.getResourcePath();a=cc.BuilderReader.load(a,c,b,d);c=cc.Scene.create();c.addChild(a);return c};cc.BuilderReader._controllerClassCache={};cc.BuilderReader.registerController=function(a,c){cc.BuilderReader._controllerClassCache[a]=cc.Class.extend(c)};
cc.BuilderReader.load=function(a,c,b,d){d=d||cc.BuilderReader.getResourcePath();var e=new cc.BuilderReader(cc.NodeLoaderLibrary.newDefaultCCNodeLoaderLibrary());e.setCCBRootPath(d);if(5>a.length||a.toLowerCase().lastIndexOf(".ccbi")!=a.length-5)a+=".ccbi";a=e.readNodeGraphFromFile(a,c,b);var g,h,f;if(c){d=e.getOwnerCallbackNames();var k=e.getOwnerCallbackNodes(),l=e.getOwnerCallbackControlEvents();for(b=0;b<d.length;b++)g=d[b],h=k[b],f=l[b],h instanceof cc.ControlButton?h.addTargetWithActionForControlEvents(c,
c[g],f):h.setCallback(c[g],c);d=e.getOwnerOutletNames();k=e.getOwnerOutletNodes();for(b=0;b<d.length;b++)g=d[b],h=k[b],c[g]=h}d=e.getNodesWithAnimationManagers();e=e.getAnimationManagersForNodes();if(!d||!e)return a;k=cc.BuilderReader._controllerClassCache;for(b=0;b<d.length;b++){var m=d[b],l=e[b];m.animationManager=l;if(g=l.getDocumentControllerName()){var n=k[g];if(!n)throw"Can not find controller : "+g;n=new n;n.controllerName=g;m.controller=n;n.rootNode=m;for(var p=l.getDocumentCallbackNames(),
s=l.getDocumentCallbackNodes(),r=l.getDocumentCallbackControlEvents(),m=0;m<p.length;m++)g=p[m],h=s[m],f=r[m],h instanceof cc.ControlButton?h.addTargetWithActionForControlEvents(n,n[g],f):h.setCallback(n[g],n);f=l.getDocumentOutletNames();p=l.getDocumentOutletNodes();for(m=0;m<f.length;m++)g=f[m],h=p[m],n[g]=h;if(n.onDidLoadFromCCB&&"function"==typeof n.onDidLoadFromCCB)n.onDidLoadFromCCB();g=l.getKeyframeCallbacks();for(m=0;m<g.length;m++)f=g[m].split(":"),h=f[0],f=f[1],1==h?l.setCallFunc(cc.CallFunc.create(n[f],
n),g[m]):2==h&&c&&l.setCallFunc(cc.CallFunc.create(c[f],c),g[m])}}return a};cc.BuilderReader._resourcePath="";cc.BuilderReader.setResourcePath=function(a){cc.BuilderReader._resourcePath=a};cc.BuilderReader.getResourcePath=function(){return cc.BuilderReader._resourcePath};cc.BuilderReader.lastPathComponent=function(a){var c=a.lastIndexOf("/");return-1!=c?a.substring(c+1,a.length-c):a};cc.BuilderReader.deletePathExtension=function(a){var c=a.lastIndexOf(".");return-1!=c?a.substring(0,c):a};
cc.BuilderReader.toLowerCase=function(a){return a.toLowerCase()};cc.BuilderReader.endsWith=function(a,c){return a.length>=c.length?0==a.lastIndexOf(c):!1};cc.BuilderReader.concat=function(a,c){return a+c};cc.loader.register(["ccbi"],cc._binaryLoader);cc.INT_VALUE=0;cc.FLOAT_VALUE=1;cc.POINTER_VALUE=2;cc.BOOL_VALUE=3;cc.UNSIGNEDCHAR_VALUE=4;cc.Color3BWapper=cc.Class.extend({_color:null,ctor:function(){this._color=cc.color(0,0,0)},getColor:function(){return this._color}});cc.Color3BWapper.create=function(a){var c=new cc.Color3BWapper;c&&(c._color.r=a.r,c._color.g=a.g,c._color.b=a.b);return c};
cc.BuilderValue=cc.Class.extend({_value:null,_type:0,getIntValue:function(){},getFloatValue:function(){},getBoolValue:function(){},getByteValue:function(){},getPointer:function(){},getValue:function(){return this._value}});cc.BuilderValue.create=function(a){return new cc.BuilderValue};cc.BuilderKeyframe=cc.Class.extend({_value:null,_time:0,_easingType:0,_easingOpt:0,getValue:function(){return this._value},setValue:function(a){this._value=a},getTime:function(){return this._time},setTime:function(a){this._time=a},getEasingType:function(){return this._easingType},setEasingType:function(a){this._easingType=a},getEasingOpt:function(){return this._easingOpt},setEasingOpt:function(a){this._easingOpt=a}});cc.BuilderSequence=cc.Class.extend({_duration:0,_name:"",_sequenceId:0,_chainedSequenceId:0,_callbackChannel:null,_soundChannel:null,ctor:function(){this._name=""},getDuration:function(){return this._duration},setDuration:function(a){this._duration=a},getName:function(){return this._name},setName:function(a){this._name=a},getSequenceId:function(){return this._sequenceId},setSequenceId:function(a){this._sequenceId=a},getChainedSequenceId:function(){return this._chainedSequenceId},setChainedSequenceId:function(a){this._chainedSequenceId=
a},getCallbackChannel:function(){return this._callbackChannel},setCallbackChannel:function(a){this._callbackChannel=a},getSoundChannel:function(){return this._soundChannel},setSoundChannel:function(a){this._soundChannel=a}});
cc.BuilderSequenceProperty=cc.Class.extend({_name:null,_type:0,_keyFrames:null,ctor:function(){this.init()},init:function(){this._keyFrames=[];this._name=""},getName:function(){return this._name},setName:function(a){this._name=a},getType:function(){return this._type},setType:function(a){this._type=a},getKeyframes:function(){return this._keyFrames}});cc.getAbsolutePosition=function(a,c,b,d){d=cc.p(0,0);c===CCB_POSITIONTYPE_RELATIVE_BOTTOM_LEFT?d=a:c===CCB_POSITIONTYPE_RELATIVE_TOP_LEFT?(d.x=a.x,d.y=b.height-a.y):c===CCB_POSITIONTYPE_RELATIVE_TOP_RIGHT?(d.x=b.width-a.x,d.y=b.height-a.y):c===CCB_POSITIONTYPE_RELATIVE_BOTTOM_RIGHT?(d.x=b.width-a.x,d.y=a.y):c===CCB_POSITIONTYPE_PERCENT?(d.x=b.width*a.x/100,d.y=b.height*a.y/100):c===CCB_POSITIONTYPE_MULTIPLY_RESOLUTION&&(c=cc.BuilderReader.getResolutionScale(),d.x=a.x*c,d.y=a.y*c);return d};
cc._getAbsolutePosition=function(a,c,b,d,e){e=cc.p(0,0);b===CCB_POSITIONTYPE_RELATIVE_BOTTOM_LEFT?(e.x=a,e.y=c):b===CCB_POSITIONTYPE_RELATIVE_TOP_LEFT?(e.x=a,e.y=d.height-c):b===CCB_POSITIONTYPE_RELATIVE_TOP_RIGHT?(e.x=d.width-a,e.y=d.height-c):b===CCB_POSITIONTYPE_RELATIVE_BOTTOM_RIGHT?(e.x=d.width-a,e.y=c):b===CCB_POSITIONTYPE_PERCENT?(e.x=d.width*a/100,e.y=d.height*c/100):b===CCB_POSITIONTYPE_MULTIPLY_RESOLUTION&&(b=cc.BuilderReader.getResolutionScale(),e.x=a*b,e.y=c*b);return e};
cc.setRelativeScale=function(a,c,b,d,e){if(!a)throw"cc.setRelativeScale(): node should be non-null";d===CCB_POSITIONTYPE_MULTIPLY_RESOLUTION&&(d=cc.BuilderReader.getResolutionScale(),c*=d,b*=d);a.setScaleX(c);a.setScaleY(b)};cc.BuilderAnimationManagerDelegate=cc.Class.extend({completedAnimationSequenceNamed:function(a){}});
cc.BuilderAnimationManager=cc.Class.extend({_sequences:null,_nodeSequences:null,_baseValues:null,_autoPlaySequenceId:0,_rootNode:null,_owner:null,_rootContainerSize:null,_delegate:null,_runningSequence:null,_documentOutletNames:null,_documentOutletNodes:null,_documentCallbackNames:null,_documentCallbackNodes:null,_documentCallbackControlEvents:null,_documentControllerName:"",_lastCompletedSequenceName:"",_keyframeCallbacks:null,_keyframeCallFuncs:null,_animationCompleteCallbackFunc:null,_target:null,
_jsControlled:!1,ctor:function(){this._rootContainerSize=cc.size(0,0);this.init()},init:function(){this._sequences=[];this._nodeSequences=new cc._Dictionary;this._baseValues=new cc._Dictionary;this._documentOutletNames=[];this._documentOutletNodes=[];this._documentCallbackNames=[];this._documentCallbackNodes=[];this._documentCallbackControlEvents=[];this._keyframeCallbacks=[];this._keyframeCallFuncs={};return!0},getSequences:function(){return this._sequences},setSequences:function(a){this._sequences=
a},getAutoPlaySequenceId:function(){return this._autoPlaySequenceId},setAutoPlaySequenceId:function(a){this._autoPlaySequenceId=a},getRootNode:function(){return this._rootNode},setRootNode:function(a){this._rootNode=a},getOwner:function(){return this._owner},setOwner:function(a){this._owner=a},addDocumentCallbackNode:function(a){this._documentCallbackNodes.push(a)},addDocumentCallbackName:function(a){this._documentCallbackNames.push(a)},addDocumentCallbackControlEvents:function(a){this._documentCallbackControlEvents.push(a)},
addDocumentOutletNode:function(a){this._documentOutletNodes.push(a)},addDocumentOutletName:function(a){this._documentOutletNames.push(a)},setDocumentControllerName:function(a){this._documentControllerName=a},getDocumentControllerName:function(){return this._documentControllerName},getDocumentCallbackNames:function(){return this._documentCallbackNames},getDocumentCallbackNodes:function(){return this._documentCallbackNodes},getDocumentCallbackControlEvents:function(){return this._documentCallbackControlEvents},
getDocumentOutletNames:function(){return this._documentOutletNames},getDocumentOutletNodes:function(){return this._documentOutletNodes},getLastCompletedSequenceName:function(){return this._lastCompletedSequenceName},getKeyframeCallbacks:function(){return this._keyframeCallbacks},getRootContainerSize:function(){return this._rootContainerSize},setRootContainerSize:function(a){this._rootContainerSize=cc.size(a.width,a.height)},getDelegate:function(){return this._delegate},setDelegate:function(a){this._delegate=
a},getRunningSequenceName:function(){return this._runningSequence?this._runningSequence.getName():null},getContainerSize:function(a){return a?a.getContentSize():this._rootContainerSize},addNode:function(a,c){this._nodeSequences.setObject(c,a)},setBaseValue:function(a,c,b){var d=this._baseValues.objectForKey(c);d||(d=new cc._Dictionary,this._baseValues.setObject(d,c));d.setObject(a,b)},moveAnimationsFromNode:function(a,c){var b=this._baseValues,d=b.objectForKey(a);null!=d&&(b.setObject(d,c),b.removeObjectForKey(a));
b=this._nodeSequences;d=b.objectForKey(a);null!=d&&(b.setObject(d,c),b.removeObjectForKey(a))},getActionForCallbackChannel:function(a){var c=0,b=[];a=a.getKeyframes();for(var d=a.length,e=0;e<d;++e){var g=a[e],h=g.getTime()-c,c=g.getTime();0<h&&b.push(cc.DelayTime.create(h));h=g.getValue();g=h[0];h=h[1];if(this._jsControlled)g=this._keyframeCallFuncs[h+":"+g],null!=g&&b.push(g);else{var f;h==CCB_TARGETTYPE_DOCUMENTROOT?f=this._rootNode:h==CCB_TARGETTYPE_OWNER&&(f=this._owner);if(null!=f)if(0<g.length){var h=
0,k=f;null!=f.onResolveCCBCCCallFuncSelector&&(h=k.onResolveCCBCCCallFuncSelector(f,g));0==h?cc.log("Skipping selector '"+g+"' since no CCBSelectorResolver is present."):b.push(cc.CallFunc.create(h,f))}else cc.log("Unexpected empty selector.")}}return 1>b.length?null:cc.Sequence.create(b)},getActionForSoundChannel:function(a){var c=0,b=[];a=a.getKeyframes();for(var d=a.length,e=0;e<d;++e){var g=a[e],h=g.getTime()-c,c=g.getTime();0<h&&b.push(cc.DelayTime.create(h));var f=g.getValue(),g=cc.BuilderReader.getResourcePath()+
f[0],h=parseFloat(f[1]),k=parseFloat(f[2]),f=parseFloat(f[3]);b.push(cc.BuilderSoundEffect.create(g,h,k,f))}return 1>b.length?null:cc.Sequence.create(b)},runAnimationsForSequenceNamed:function(a){this.runAnimationsForSequenceIdTweenDuration(this._getSequenceId(a),0)},runAnimationsForSequenceNamedTweenDuration:function(a,c){this.runAnimationsForSequenceIdTweenDuration(this._getSequenceId(a),c)},runAnimationsForSequenceIdTweenDuration:function(a,c){if(-1===a)throw"cc.BuilderAnimationManager.runAnimationsForSequenceIdTweenDuration(): Sequence id should not be -1";
c=c||0;this._rootNode.stopAllActions();for(var b=this._nodeSequences.allKeys(),d=0,e=b.length;d<e;d++){var g=b[d];g.stopAllActions();var h=this._nodeSequences.objectForKey(g).objectForKey(a),f,k=[];if(h){var l=h.allKeys();for(f=0;f<l.length;f++){var m=l[f],n=h.objectForKey(m);k.push(m);this._setFirstFrame(g,n,c);this._runAction(g,n,c)}}if(h=this._baseValues.objectForKey(g)){l=h.allKeys();for(f=0;f<l.length;f++)m=l[f],-1==k.indexOf(m)&&(n=h.objectForKey(m),null!=n&&this._setAnimatedProperty(m,g,n,
c))}}b=this._getSequence(a);d=cc.Sequence.create(cc.DelayTime.create(b.getDuration()+c),cc.CallFunc.create(this._sequenceCompleted,this));this._rootNode.runAction(d);b.getCallbackChannel()&&(d=this.getActionForCallbackChannel(b.getCallbackChannel()))&&this._rootNode.runAction(d);b.getSoundChannel()&&(d=this.getActionForSoundChannel(b.getSoundChannel()))&&this._rootNode.runAction(d);this._runningSequence=this._getSequence(a)},runAnimations:function(a,c){c=c||0;var b;b="string"===typeof a?this._getSequenceId(a):
a;this.runAnimationsForSequenceIdTweenDuration(b,c)},setAnimationCompletedCallback:function(a,c){this._target=a;this._animationCompleteCallbackFunc=c},setCompletedAnimationCallback:function(a,c){this.setAnimationCompletedCallback(a,c)},setCallFunc:function(a,c){this._keyframeCallFuncs[c]=a},debug:function(){},_getBaseValue:function(a,c){var b=this._baseValues.objectForKey(a);return b?b.objectForKey(c):null},_getSequenceId:function(a){for(var c=null,b=this._sequences,d=0,e=b.length;d<e;d++)if((c=b[d])&&
c.getName()===a)return c.getSequenceId();return-1},_getSequence:function(a){for(var c=null,b=this._sequences,d=0,e=b.length;d<e;d++)if((c=b[d])&&c.getSequenceId()===a)return c;return null},_getAction:function(a,c,b,d){a=c.getTime()-(a?a.getTime():0);var e,g;if("rotation"===b)return cc.BuilderRotateTo.create(a,c.getValue());if("rotationX"===b)return cc.BuilderRotateXTo.create(a,c.getValue());if("rotationY"===b)return cc.BuilderRotateYTo.create(a,c.getValue());if("opacity"===b)return cc.FadeTo.create(a,
c.getValue());if("color"===b)return b=c.getValue().getColor(),cc.TintTo.create(a,b.r,b.g,b.b);if("visible"===b)return c.getValue()?cc.Sequence.create(cc.DelayTime.create(a),cc.Show.create()):cc.Sequence.create(cc.DelayTime.create(a),cc.Hide.create());if("displayFrame"===b)return cc.Sequence.create(cc.DelayTime.create(a),cc.BuilderSetSpriteFrame.create(c.getValue()));if("position"===b)return e=this._getBaseValue(d,b),e=e[2],g=c.getValue(),c=g[0],g=g[1],d=this.getContainerSize(d.getParent()),b=cc._getAbsolutePosition(c,
g,e,d,b),cc.MoveTo.create(a,b);if("scale"===b)return e=this._getBaseValue(d,b),e=e[2],g=c.getValue(),c=g[0],g=g[1],e===CCB_SCALETYPE_MULTIPLY_RESOLUTION&&(b=cc.BuilderReader.getResolutionScale(),c*=b,g*=b),cc.ScaleTo.create(a,c,g);if("skew"===b)return g=c.getValue(),c=g[0],g=g[1],cc.SkewTo.create(a,c,g);cc.log("BuilderReader: Failed to create animation for property: "+b);return null},_setAnimatedProperty:function(a,c,b,d){if(0<d){var e=new cc.BuilderKeyframe;e.setValue(b);e.setTime(d);e.setEasingType(CCB_KEYFRAME_EASING_LINEAR);
a=this._getAction(null,e,a,c);c.runAction(a)}else"position"===a?(d=this._getBaseValue(c,a),d=d[2],e=b[0],b=b[1],c.setPosition(cc._getAbsolutePosition(e,b,d,this.getContainerSize(c.getParent()),a))):"scale"===a?(d=this._getBaseValue(c,a),d=d[2],e=b[0],b=b[1],cc.setRelativeScale(c,e,b,d,a)):"skew"===a?(e=b[0],b=b[1],c.setSkewX(e),c.setSkewY(b)):"rotation"===a?c.setRotation(b):"rotationX"==a?c.setRotationSkewX(b):"rotationY"==a?c.setRotationSkewY(b):"opacity"===a?c.setOpacity(b):"displayFrame"===a?c.setSpriteFrame(b):
"color"===a?(a=b.getColor(),(255!==a.r||255!==a.g||255!==a.b)&&c.setColor(a)):"visible"===a?c.setVisible(b||!1):cc.log("unsupported property name is "+a)},_setFirstFrame:function(a,c,b){var d=c.getKeyframes();0===d.length?((d=this._getBaseValue(a,c.getName()))||cc.log("cc.BuilderAnimationManager._setFirstFrame(): No baseValue found for property"),this._setAnimatedProperty(c.getName(),a,d,b)):(d=d[0],this._setAnimatedProperty(c.getName(),a,d.getValue(),b))},_getEaseAction:function(a,c,b){if(c===CCB_KEYFRAME_EASING_LINEAR||
c===CCB_KEYFRAME_EASING_INSTANT)return a;if(c===CCB_KEYFRAME_EASING_CUBIC_IN)return cc.EaseIn.create(a,b);if(c===CCB_KEYFRAME_EASING_CUBIC_OUT)return cc.EaseOut.create(a,b);if(c===CCB_KEYFRAME_EASING_CUBIC_INOUT)return cc.EaseInOut.create(a,b);if(c===CCB_KEYFRAME_EASING_BACK_IN)return cc.EaseBackIn.create(a);if(c===CCB_KEYFRAME_EASING_BACK_OUT)return cc.EaseBackOut.create(a);if(c===CCB_KEYFRAME_EASING_BACK_INOUT)return cc.EaseBackInOut.create(a);if(c===CCB_KEYFRAME_EASING_BOUNCE_IN)return cc.EaseBounceIn.create(a);
if(c===CCB_KEYFRAME_EASING_BOUNCE_OUT)return cc.EaseBounceOut.create(a);if(c===CCB_KEYFRAME_EASING_BOUNCE_INOUT)return cc.EaseBounceInOut.create(a);if(c===CCB_KEYFRAME_EASING_ELASTIC_IN)return cc.EaseElasticIn.create(a,b);if(c===CCB_KEYFRAME_EASING_ELASTIC_OUT)return cc.EaseElasticOut.create(a,b);if(c===CCB_KEYFRAME_EASING_ELASTIC_INOUT)return cc.EaseElasticInOut.create(a,b);cc.log("BuilderReader: Unkown easing type "+c);return a},_runAction:function(a,c,b){var d=c.getKeyframes(),e=d.length;if(1<
e){var g=[];b=d[0].getTime()+b;0<b&&g.push(cc.DelayTime.create(b));for(b=0;b<e-1;++b){var h=d[b],f=this._getAction(h,d[b+1],c.getName(),a);f&&(f=this._getEaseAction(f,h.getEasingType(),h.getEasingOpt()),g.push(f))}c=cc.Sequence.create(g);a.runAction(c)}},_sequenceCompleted:function(){var a=this._runningSequence,c=a.getName();this._lastCompletedSequenceName!=a.getName()&&(this._lastCompletedSequenceName=a.getName());a=a.getChainedSequenceId();this._runningSequence=null;-1!=a&&this.runAnimations(a,
0);this._delegate&&this._delegate.completedAnimationSequenceNamed(c);this._target&&this._animationCompleteCallbackFunc&&this._animationCompleteCallbackFunc.call(this._target)}});cc.BuilderSetSpriteFrame=cc.ActionInstant.extend({_spriteFrame:null,initWithSpriteFrame:function(a){this._spriteFrame=a;return!0},update:function(a){this.target.setSpriteFrame(this._spriteFrame)}});cc.BuilderSetSpriteFrame.create=function(a){var c=new cc.BuilderSetSpriteFrame;return c&&c.initWithSpriteFrame(a)?c:null};
cc.BuilderRotateTo=cc.ActionInterval.extend({_startAngle:0,_dstAngle:0,_diffAngle:0,initWithDuration:function(a,c){return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(this._dstAngle=c,!0):!1},update:function(a){this.target.setRotation(this._startAngle+this._diffAngle*a)},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._startAngle=this.target.getRotation();this._diffAngle=this._dstAngle-this._startAngle}});
cc.BuilderRotateTo.create=function(a,c){var b=new cc.BuilderRotateTo;return b&&b.initWithDuration(a,c)?b:null};cc.BuilderRotateXTo=cc.ActionInterval.extend({});cc.BuilderRotateXTo.create=function(a,c){throw"rotationX has not been implemented in cocos2d-html5";};cc.BuilderRotateYTo=cc.ActionInterval.extend({});cc.BuilderRotateYTo.create=function(a,c){throw"rotationY has not been implemented in cocos2d-html5";};cc.BuilderSoundEffect=cc.ActionInstant.extend({init:function(a){this._file=a;return!0},update:function(a){cc.audioEngine.playEffect(this._file)}});
cc.BuilderSoundEffect.create=function(a,c,b,d){return(c=new cc.BuilderSoundEffect)&&c.init(a)?c:null};