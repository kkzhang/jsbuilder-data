cc.LabelAtlas=cc.AtlasNode.extend({_string:null,_mapStartChar:null,_textureLoaded:!1,_loadedEventListeners:null,_className:"LabelAtlas",ctor:function(a,b,c,d,e){cc.AtlasNode.prototype.ctor.call(this);b&&cc.LabelAtlas.prototype.initWithString.call(this,a,b,c,d,e)},textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(a,b){this._loadedEventListeners||(this._loadedEventListeners=[]);this._loadedEventListeners.push({eventCallback:a,eventTarget:b})},_callLoadedEventCallbacks:function(){if(this._loadedEventListeners){this._textureLoaded=
!0;for(var a=this._loadedEventListeners,b=0,c=a.length;b<c;b++){var d=a[b];d.eventCallback.call(d.eventTarget,this)}a.length=0}},initWithString:function(a,b,c,d,e){var f=a+"",h,k;if(void 0===c){c=cc.loader.getRes(b);if(1!==parseInt(c.version,10))return cc.log("cc.LabelAtlas.initWithString(): Unsupported version. Upgrade cocos2d version"),!1;b=cc.path.changeBasename(b,c.textureFilename);d=cc.contentScaleFactor();h=parseInt(c.itemWidth,10)/d;k=parseInt(c.itemHeight,10)/d;c=String.fromCharCode(parseInt(c.firstChar,
10))}else h=c||0,k=d||0,c=e||" ";var g=null,g=b instanceof cc.Texture2D?b:cc.textureCache.addImage(b);(this._textureLoaded=b=g.isLoaded())||g.addLoadedEventListener(function(a){this.initWithTexture(g,h,k,f.length);this.string=f;this._callLoadedEventCallbacks()},this);return this.initWithTexture(g,h,k,f.length)?(this._mapStartChar=c,this.string=f,!0):!1},setColor:function(a){cc.AtlasNode.prototype.setColor.call(this,a);this.updateAtlasValues()},getString:function(){return this._string},draw:function(a){cc.AtlasNode.prototype.draw.call(this,
a);cc.LABELATLAS_DEBUG_DRAW&&(a=this.size,a=[cc.p(0,0),cc.p(a.width,0),cc.p(a.width,a.height),cc.p(0,a.height)],cc._drawingUtil.drawPoly(a,4,!0))},_addChildForCanvas:function(a,b,c){a._lateChild=!0;cc.Node.prototype.addChild.call(this,a,b,c)},updateAtlasValues:null,_updateAtlasValuesForCanvas:function(){for(var a=this._string||"",b=a.length,c=this.texture,d=this._itemWidth,e=this._itemHeight,f=0;f<b;f++){var h=a.charCodeAt(f)-this._mapStartChar.charCodeAt(0),k=parseInt(h%this._itemsPerRow,10),h=parseInt(h/
this._itemsPerRow,10),k=cc.rect(k*d,h*e,d,e),h=a.charCodeAt(f),g=this.getChildByTag(f);g?32==h?(g.init(),g.setTextureRect(cc.rect(0,0,10,10),!1,cc.size(0,0))):(g.initWithTexture(c,k),g.visible=!0,g.opacity=this._displayedOpacity):(g=new cc.Sprite,32==h?(g.init(),g.setTextureRect(cc.rect(0,0,10,10),!1,cc.size(0,0))):g.initWithTexture(c,k),cc.Node.prototype.addChild.call(this,g,0,f));g.setPosition(f*d+d/2,e/2)}},_updateAtlasValuesForWebGL:function(){var a=this._string,b=a.length,c=this.textureAtlas,
d=c.texture,e=d.pixelsWidth,d=d.pixelsHeight,f=this._itemWidth,h=this._itemHeight;this._ignoreContentScaleFactor||(f=this._itemWidth*cc.contentScaleFactor(),h=this._itemHeight*cc.contentScaleFactor());b>c.getCapacity()&&cc.log("cc.LabelAtlas._updateAtlasValues(): Invalid String length");for(var k=c.quads,g=this._displayedColor,g={r:g.r,g:g.g,b:g.b,a:this._displayedOpacity},q=this._itemWidth,m=0;m<b;m++){var l=a.charCodeAt(m)-this._mapStartChar.charCodeAt(0),u=l%this._itemsPerRow,s=0|l/this._itemsPerRow,
n;cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL?(u=(2*u*f+1)/(2*e),l=u+(2*f-2)/(2*e),s=(2*s*h+1)/(2*d),n=s+(2*h-2)/(2*d)):(u=u*f/e,l=u+f/e,s=s*h/d,n=s+h/d);var t=k[m],r=t.tl,p=t.tr,v=t.bl,t=t.br;r.texCoords.u=u;r.texCoords.v=s;p.texCoords.u=l;p.texCoords.v=s;v.texCoords.u=u;v.texCoords.v=n;t.texCoords.u=l;t.texCoords.v=n;v.vertices.x=m*q;v.vertices.y=0;v.vertices.z=0;t.vertices.x=m*q+q;t.vertices.y=0;t.vertices.z=0;r.vertices.x=m*q;r.vertices.y=this._itemHeight;r.vertices.z=0;p.vertices.x=m*q+q;p.vertices.y=
this._itemHeight;p.vertices.z=0;r.colors=g;p.colors=g;v.colors=g;t.colors=g}0<b&&(c.dirty=!0,a=c.totalQuads,b>a&&c.increaseTotalQuadsWith(b-a))},setString:null,_setStringForCanvas:function(a){a=String(a);var b=a.length;this._string=a;this.width=b*this._itemWidth;this.height=this._itemHeight;if(this._children){a=this._children;for(var b=a.length,c=0;c<b;c++){var d=a[c];d&&!d._lateChild&&(d.visible=!1)}}this.updateAtlasValues();this.quadsToDraw=b},_setStringForWebGL:function(a){a=String(a);var b=a.length;
b>this.textureAtlas.totalQuads&&this.textureAtlas.resizeCapacity(b);this._string=a;this.width=b*this._itemWidth;this.height=this._itemHeight;this.updateAtlasValues();this.quadsToDraw=b},setOpacity:null,_setOpacityForCanvas:function(a){if(this._displayedOpacity!==a){cc.AtlasNode.prototype.setOpacity.call(this,a);for(var b=this._children,c=0,d=b.length;c<d;c++)b[c]&&(b[c].opacity=a)}},_setOpacityForWebGL:function(a){this._opacity!==a&&cc.AtlasNode.prototype.setOpacity.call(this,a)}});var _p=cc.LabelAtlas.prototype;
cc._renderType===cc._RENDER_TYPE_WEBGL?(_p.updateAtlasValues=_p._updateAtlasValuesForWebGL,_p.setString=_p._setStringForWebGL,_p.setOpacity=_p._setOpacityForWebGL):(_p.updateAtlasValues=_p._updateAtlasValuesForCanvas,_p.setString=_p._setStringForCanvas,_p.setOpacity=_p._setOpacityForCanvas,_p.addChild=_p._addChildForCanvas);cc.defineGetterSetter(_p,"opacity",_p.getOpacity,_p.setOpacity);cc.defineGetterSetter(_p,"string",_p.getString,_p.setString);
cc.LabelAtlas.create=function(a,b,c,d,e){return new cc.LabelAtlas(a,b,c,d,e)};cc.LABEL_AUTOMATIC_WIDTH=-1;
cc.LabelBMFont=cc.SpriteBatchNode.extend({_opacityModifyRGB:!1,_string:"",_config:null,_fntFile:"",_initialString:"",_alignment:cc.TEXT_ALIGNMENT_CENTER,_width:-1,_lineBreakWithoutSpaces:!1,_imageOffset:null,_reusedChar:null,_displayedOpacity:255,_realOpacity:255,_displayedColor:null,_realColor:null,_cascadeColorEnabled:!0,_cascadeOpacityEnabled:!0,_textureLoaded:!1,_loadedEventListeners:null,_className:"LabelBMFont",_setString:function(a,b){b?this._initialString=a:this._string=a;var c=this._children;
if(c)for(var d=0;d<c.length;d++){var e=c[d];e&&e.setVisible(!1)}this._textureLoaded&&(this.createFontChars(),b&&this.updateLabel())},ctor:function(a,b,c,d,e){cc.SpriteBatchNode.prototype.ctor.call(this);this._imageOffset=cc.p(0,0);this._displayedColor=cc.color(255,255,255,255);this._realColor=cc.color(255,255,255,255);this._reusedChar=[];this.initWithString(a,b,c,d,e)},textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(a,b){this._loadedEventListeners||(this._loadedEventListeners=
[]);this._loadedEventListeners.push({eventCallback:a,eventTarget:b})},_callLoadedEventCallbacks:function(){if(this._loadedEventListeners){for(var a=this._loadedEventListeners,b=0,c=a.length;b<c;b++){var d=a[b];d.eventCallback.call(d.eventTarget,this)}a.length=0}},draw:function(a){cc.SpriteBatchNode.prototype.draw.call(this,a);if(cc.LABELBMFONT_DEBUG_DRAW){a=this.getContentSize();var b=cc.p(0|-this._anchorPointInPoints.x,0|-this._anchorPointInPoints.y);a=[cc.p(b.x,b.y),cc.p(b.x+a.width,b.y),cc.p(b.x+
a.width,b.y+a.height),cc.p(b.x,b.y+a.height)];cc._drawingUtil.setDrawColor(0,255,0,255);cc._drawingUtil.drawPoly(a,4,!0)}},setColor:function(a){var b=this._displayedColor,c=this._realColor;c.r==a.r&&c.g==a.g&&c.b==a.b&&c.a==a.a||(b.r=c.r=a.r,b.g=c.g=a.g,b.b=c.b=a.b,this._textureLoaded&&this._cascadeColorEnabled&&(a=cc.color.WHITE,(b=this._parent)&&b.cascadeColor&&(a=b.getDisplayedColor()),this.updateDisplayedColor(a)))},isOpacityModifyRGB:function(){return this._opacityModifyRGB},setOpacityModifyRGB:function(a){this._opacityModifyRGB=
a;if(a=this._children)for(var b=0;b<a.length;b++){var c=a[b];c&&(c.opacityModifyRGB=this._opacityModifyRGB)}},getOpacity:function(){return this._realOpacity},getDisplayedOpacity:function(){return this._displayedOpacity},setOpacity:function(a){this._displayedOpacity=this._realOpacity=a;if(this._cascadeOpacityEnabled){var b=255,c=this._parent;c&&c.cascadeOpacity&&(b=c.getDisplayedOpacity());this.updateDisplayedOpacity(b)}this._displayedColor.a=this._realColor.a=a},updateDisplayedOpacity:function(a){this._displayedOpacity=
this._realOpacity*a/255;a=this._children;for(var b=0;b<a.length;b++){var c=a[b];cc._renderType==cc._RENDER_TYPE_WEBGL?c.updateDisplayedOpacity(this._displayedOpacity):(cc.Node.prototype.updateDisplayedOpacity.call(c,this._displayedOpacity),c.setNodeDirty())}this._changeTextureColor()},isCascadeOpacityEnabled:function(){return!1},setCascadeOpacityEnabled:function(a){this._cascadeOpacityEnabled=a},getColor:function(){var a=this._realColor;return cc.color(a.r,a.g,a.b,a.a)},getDisplayedColor:function(){return this._displayedColor},
updateDisplayedColor:function(a){var b=this._displayedColor,c=this._realColor;b.r=c.r*a.r/255;b.g=c.g*a.g/255;b.b=c.b*a.b/255;a=this._children;for(b=0;b<a.length;b++)c=a[b],cc._renderType==cc._RENDER_TYPE_WEBGL?c.updateDisplayedColor(this._displayedColor):(cc.Node.prototype.updateDisplayedColor.call(c,this._displayedColor),c.setNodeDirty());this._changeTextureColor()},_changeTextureColor:function(){if(cc._renderType!=cc._RENDER_TYPE_WEBGL){var a=this.getTexture();if(a&&0<a.getContentSize().width){var b=
this._originalTexture.getHtmlElementObj();if(b){var c=a.getHtmlElementObj(),d=cc.rect(0,0,b.width,b.height);c instanceof HTMLCanvasElement&&!this._rectRotated?cc.generateTintImageWithMultiply(b,this._displayedColor,d,c):(c=cc.generateTintImageWithMultiply(b,this._displayedColor,d),a=new cc.Texture2D,a.initWithElement(c),a.handleLoadedTexture());this.setTexture(a)}}}},isCascadeColorEnabled:function(){return!1},setCascadeColorEnabled:function(a){this._cascadeColorEnabled=a},init:function(){return this.initWithString(null,
null,null,null,null)},initWithString:function(a,b,c,d,e){a=a||"";this._config&&cc.log("cc.LabelBMFont.initWithString(): re-init is no longer supported");if(b){var f=cc.loader.getRes(b);if(!f)return cc.log("cc.LabelBMFont.initWithString(): Impossible to create font. Please check file"),!1;this._config=f;this._fntFile=b;b=cc.textureCache.addImage(f.atlasName);(this._textureLoaded=f=b.isLoaded())||b.addLoadedEventListener(function(a){this._textureLoaded=!0;this.initWithTexture(a,this._initialString.length);
this.setString(this._initialString,!0);this._callLoadedEventCallbacks()},this)}else b=new cc.Texture2D,f=new Image,b.initWithElement(f),this._textureLoaded=!1;return this.initWithTexture(b,a.length)?(this._alignment=d||cc.TEXT_ALIGNMENT_LEFT,this._imageOffset=e||cc.p(0,0),this._width=null==c?-1:c,this._displayedOpacity=this._realOpacity=255,this._displayedColor=cc.color(255,255,255,255),this._realColor=cc.color(255,255,255,255),this._cascadeColorEnabled=this._cascadeOpacityEnabled=!0,this._contentSize.width=
0,this._contentSize.height=0,this.setAnchorPoint(0.5,0.5),cc._renderType===cc._RENDER_TYPE_WEBGL&&(c=this.textureAtlas.texture,this._opacityModifyRGB=c.hasPremultipliedAlpha(),d=this._reusedChar=new cc.Sprite,d.initWithTexture(c,cc.rect(0,0,0,0),!1),d.batchNode=this),this.setString(a,!0),!0):!1},createFontChars:function(){var a=cc._renderType,b=a===cc._RENDER_TYPE_CANVAS?this.texture:this.textureAtlas.texture,c=0,d=cc.size(0,0),e=0,f=1,h=this._string,k=h?h.length:0;if(0!==k){var g,q=this._config,
m=q.kerningDict,l=q.commonHeight,u=q.fontDefDictionary;for(g=0;g<k-1;g++)10==h.charCodeAt(g)&&f++;var s=l*f,f=-(l-l*f),n=-1;for(g=0;g<k;g++)if(l=h.charCodeAt(g),0!=l)if(10===l)c=0,f-=q.commonHeight;else{var t=m[n<<16|l&65535]||0,r=u[l];if(r){var p=cc.rect(r.rect.x,r.rect.y,r.rect.width,r.rect.height),p=cc.rectPixelsToPoints(p);p.x+=this._imageOffset.x;p.y+=this._imageOffset.y;(n=this.getChildByTag(g))?32===l&&a===cc._RENDER_TYPE_CANVAS?n.setTextureRect(p,!1,cc.size(0,0)):(n.setTextureRect(p,!1),n.visible=
!0):(n=new cc.Sprite,32===l&&a===cc._RENDER_TYPE_CANVAS&&(p=cc.rect(0,0,0,0)),n.initWithTexture(b,p,!1),n._newTextureWhenChangeColor=!0,this.addChild(n,0,g));n.opacityModifyRGB=this._opacityModifyRGB;cc._renderType==cc._RENDER_TYPE_WEBGL?(n.updateDisplayedColor(this._displayedColor),n.updateDisplayedOpacity(this._displayedOpacity)):(cc.Node.prototype.updateDisplayedColor.call(n,this._displayedColor),cc.Node.prototype.updateDisplayedOpacity.call(n,this._displayedOpacity),n.setNodeDirty());p=cc.p(c+
r.xOffset+0.5*r.rect.width+t,f+(q.commonHeight-r.yOffset)-0.5*p.height*cc.contentScaleFactor());n.setPosition(cc.pointPixelsToPoints(p));c+=r.xAdvance+t;n=l;e<c&&(e=c)}else cc.log("cocos2d: LabelBMFont: character not found "+h[g])}d.width=e;d.height=s;this.setContentSize(cc.sizePixelsToPoints(d))}},updateString:function(a){var b=this._children;if(b)for(var c=0,d=b.length;c<d;c++){var e=b[c];e&&(e.visible=!1)}this._config&&this.createFontChars();a||this.updateLabel()},getString:function(){return this._initialString},
setString:function(a,b){a=String(a);null==b&&(b=!0);if(null==a||"string"!=typeof a)a+="";this._initialString=a;this._setString(a,b)},_setStringForSetter:function(a){this.setString(a,!1)},setCString:function(a){this.setString(a,!0)},updateLabel:function(){this.string=this._initialString;if(0<this._width){for(var a=this._string.length,b=[],c=[],d=1,e=0,f=!1,h=!1,k=-1,g=-1,q=0,m,l=0,u=this._children.length;l<u;l++){for(var s=0;!(m=this.getChildByTag(l+q+s));)s++;q+=s;if(e>=a)break;var n=this._string[e];
h||(g=this._getLetterPosXLeft(m),h=!0);f||(k=g,f=!0);if(10==n.charCodeAt(0)){c.push("\n");b=b.concat(c);c.length=0;f=h=!1;k=g=-1;l--;q-=s;d++;if(e>=a)break;g||(g=this._getLetterPosXLeft(m),h=!0);k||(k=g,f=!0);e++}else if(cc.isspace_unicode(n))c.push(n),b=b.concat(c),c.length=0,h=!1,g=-1,e++;else if(this._getLetterPosXRight(m)-k>this._width)if(this._lineBreakWithoutSpaces){cc.utf8_trim_ws(c);c.push("\n");b=b.concat(c);c.length=0;f=h=!1;k=g=-1;d++;if(e>=a)break;g||(g=this._getLetterPosXLeft(m),h=!0);
k||(k=g,f=!0);l--}else c.push(n),-1!=b.lastIndexOf(" ")?cc.utf8_trim_ws(b):b=[],0<b.length&&b.push("\n"),d++,f=!1,k=-1,e++;else c.push(n),e++}b=b.concat(c);l=b.length;m="";for(e=0;e<l;++e)m+=b[e];m+=String.fromCharCode(0);this._setString(m,!1)}if(this._alignment!=cc.TEXT_ALIGNMENT_LEFT){b=e=0;a=this._string.length;c=[];for(d=0;d<a;d++)if(10==this._string[d].charCodeAt(0)||0==this._string[d].charCodeAt(0))if(l=0,f=c.length,0==f)b++;else{if(m=e+f-1+b,!(0>m)&&(l=this.getChildByTag(m),null!=l)){l=l.getPositionX()+
l._getWidth()/2;h=0;switch(this._alignment){case cc.TEXT_ALIGNMENT_CENTER:h=this.width/2-l/2;break;case cc.TEXT_ALIGNMENT_RIGHT:h=this.width-l}if(0!=h)for(l=0;l<f;l++)if(m=e+l+b,!(0>m)&&(m=this.getChildByTag(m)))m.x+=h;e+=f;b++;c.length=0}}else c.push(this._string[e])}},setAlignment:function(a){this._alignment=a;this.updateLabel()},_getAlignment:function(){return this._alignment},setBoundingWidth:function(a){this._width=a;this.updateLabel()},_getBoundingWidth:function(){return this._width},setLineBreakWithoutSpace:function(a){this._lineBreakWithoutSpaces=
a;this.updateLabel()},setScale:function(a,b){cc.Node.prototype.setScale.call(this,a,b);this.updateLabel()},setScaleX:function(a){cc.Node.prototype.setScaleX.call(this,a);this.updateLabel()},setScaleY:function(a){cc.Node.prototype.setScaleY.call(this,a);this.updateLabel()},setFntFile:function(a){if(null!=a&&a!=this._fntFile){var b=cc.loader.getRes(a);b?(this._fntFile=a,this._config=b,a=cc.textureCache.addImage(b.atlasName),this._textureLoaded=b=a.isLoaded(),this.texture=a,cc._renderType===cc._RENDER_TYPE_CANVAS&&
(this._originalTexture=this.texture),b?this.createFontChars():a.addLoadedEventListener(function(a){this._textureLoaded=!0;this.texture=a;this.createFontChars();this._changeTextureColor();this.updateLabel();this._callLoadedEventCallbacks()},this)):cc.log("cc.LabelBMFont.setFntFile() : Impossible to create font. Please check file")}},getFntFile:function(){return this._fntFile},setAnchorPoint:function(a,b){cc.Node.prototype.setAnchorPoint.call(this,a,b);this.updateLabel()},_setAnchor:function(a){cc.Node.prototype._setAnchor.call(this,
a);this.updateLabel()},_setAnchorX:function(a){cc.Node.prototype._setAnchorX.call(this,a);this.updateLabel()},_setAnchorY:function(a){cc.Node.prototype._setAnchorY.call(this,a);this.updateLabel()},_atlasNameFromFntFile:function(a){},_kerningAmountForFirst:function(a,b){var c=0;if(this._configuration.kerningDictionary){var d=this._configuration.kerningDictionary[(a<<16|b&65535).toString()];d&&(c=d.amount)}return c},_getLetterPosXLeft:function(a){return a.getPositionX()*this._scaleX-a._getWidth()*this._scaleX*
a._getAnchorX()},_getLetterPosXRight:function(a){return a.getPositionX()*this._scaleX+a._getWidth()*this._scaleX*a._getAnchorX()}});_p=cc.LabelBMFont.prototype;
cc._renderType===cc._RENDER_TYPE_CANVAS&&!cc.sys._supportCanvasNewBlendModes&&(_p._changeTextureColor=function(){if(cc._renderType!=cc._RENDER_TYPE_WEBGL){var a,b=this.getTexture();if(b&&0<b.getContentSize().width&&(a=b.getHtmlElementObj()))if(b=cc.textureCache.getTextureColors(this._originalTexture.getHtmlElementObj()))a instanceof HTMLCanvasElement&&!this._rectRotated?cc.generateTintImage(a,b,this._displayedColor,null,a):(a=cc.generateTintImage(a,b,this._displayedColor),b=new cc.Texture2D,b.initWithElement(a),
b.handleLoadedTexture(),this.setTexture(b))}});cc.defineGetterSetter(_p,"string",_p.getString,_p._setStringForSetter);cc.defineGetterSetter(_p,"boundingWidth",_p._getBoundingWidth,_p.setBoundingWidth);cc.defineGetterSetter(_p,"textAlign",_p._getAlignment,_p.setAlignment);cc.LabelBMFont.create=function(a,b,c,d,e){return new cc.LabelBMFont(a,b,c,d,e)};
cc.isspace_unicode=function(a){a=a.charCodeAt(0);return 9<=a&&13>=a||32==a||133==a||160==a||5760==a||8192<=a&&8202>=a||8232==a||8233==a||8239==a||8287==a||12288==a};cc.utf8_trim_ws=function(a){var b=a.length;if(!(0>=b)&&(b-=1,cc.isspace_unicode(a[b]))){for(var c=b-1;0<=c;--c)if(cc.isspace_unicode(a[c]))b=c;else break;cc.utf8_trim_from(a,b)}};cc.utf8_trim_from=function(a,b){var c=a.length;b>=c||0>b||a.splice(b,c)};
cc._fntLoader={INFO_EXP:/info [^\n]*(\n|$)/gi,COMMON_EXP:/common [^\n]*(\n|$)/gi,PAGE_EXP:/page [^\n]*(\n|$)/gi,CHAR_EXP:/char [^\n]*(\n|$)/gi,KERNING_EXP:/kerning [^\n]*(\n|$)/gi,ITEM_EXP:/\w+=[^ \r\n]+/gi,INT_EXP:/^[\-]?\d+$/,_parseStrToObj:function(a){a=a.match(this.ITEM_EXP);var b={};if(a)for(var c=0,d=a.length;c<d;c++){var e=a[c],f=e.indexOf("\x3d"),h=e.substring(0,f),e=e.substring(f+1);e.match(this.INT_EXP)?e=parseInt(e):'"'==e[0]&&(e=e.substring(1,e.length-1));b[h]=e}return b},parseFnt:function(a,
b){var c={},d=this._parseStrToObj(a.match(this.INFO_EXP)[0]).padding.split(",");parseInt(d[0]);parseInt(d[1]);parseInt(d[2]);parseInt(d[3]);d=this._parseStrToObj(a.match(this.COMMON_EXP)[0]);c.commonHeight=d.lineHeight;if(cc._renderType===cc._RENDER_TYPE_WEBGL){var e=cc.configuration.getMaxTextureSize();(d.scaleW>e.width||d.scaleH>e.height)&&cc.log("cc.LabelBMFont._parseCommonArguments(): page can't be larger than supported")}1!==d.pages&&cc.log("cc.LabelBMFont._parseCommonArguments(): only supports 1 page");
d=this._parseStrToObj(a.match(this.PAGE_EXP)[0]);0!==d.id&&cc.log("cc.LabelBMFont._parseImageFileName() : file could not be found");c.atlasName=cc.path.changeBasename(b,d.file);for(var f=a.match(this.CHAR_EXP),h=c.fontDefDictionary={},d=0,e=f.length;d<e;d++){var k=this._parseStrToObj(f[d]);h[k.id]={rect:{x:k.x,y:k.y,width:k.width,height:k.height},xOffset:k.xoffset,yOffset:k.yoffset,xAdvance:k.xadvance}}f=c.kerningDict={};if(h=a.match(this.KERNING_EXP)){d=0;for(e=h.length;d<e;d++)k=this._parseStrToObj(h[d]),
f[k.first<<16|k.second&65535]=k.amount}return c},load:function(a,b,c,d){var e=this;cc.loader.loadTxt(a,function(a,c){if(a)return d(a);d(null,e.parseFnt(c,b))})}};cc.loader.register(["fnt"],cc._fntLoader);