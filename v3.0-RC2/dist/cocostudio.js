cc.Component=cc.Class.extend({_owner:null,_name:"",_enabled:!0,ctor:function(){this._owner=null;this._name="";this._enabled=!0},init:function(){return!0},onEnter:function(){},onExit:function(){},update:function(a){},serialize:function(a){},isEnabled:function(){return this._enabled},setEnabled:function(a){this._enabled=a},getName:function(){return this._name},setName:function(a){this._name=a},setOwner:function(a){this._owner=a},getOwner:function(){return this._owner}});cc.Component.create=function(){return new cc.Component};cc.ComponentContainer=cc.Class.extend({_components:null,_owner:null,ctor:function(a){this._components=null;this._owner=a},getComponent:function(a){if(!a)throw"cc.ComponentContainer.getComponent(): name should be non-null";a=a.trim();return this._components[a]},add:function(a){if(!a)throw"cc.ComponentContainer.add(): component should be non-null";if(a.getOwner())return cc.log("cc.ComponentContainer.add(): Component already added. It can't be added again"),!1;null==this._components&&(this._components=
{},this._owner.scheduleUpdate());if(this._components[a.getName()])return cc.log("cc.ComponentContainer.add(): Component already added. It can't be added again"),!1;a.setOwner(this._owner);this._components[a.getName()]=a;a.onEnter();return!0},remove:function(a){if(!a)throw"cc.ComponentContainer.remove(): name should be non-null";if(!this._components)return!1;if(a instanceof cc.Component)return this._removeByComponent(a);a=a.trim();return this._removeByComponent(this._components[a])},_removeByComponent:function(a){if(a)return!1;
a.onExit();a.setOwner(null);delete this._components[a.getName()];return!0},removeAll:function(){if(this._components){var a=this._components,c;for(c in a){var d=a[c];d.onExit();d.setOwner(null);delete a[c]}this._owner.unscheduleUpdate();this._components=null}},_alloc:function(){this._components={}},visit:function(a){if(this._components){var c=this._components,d;for(d in c)c[d].update(a)}},isEmpty:function(){if(!this._components)return!0;for(var a in this._components)return!1;return!0}});var ccs=ccs||{};ccs.Class=ccs.Class||cc.Class;ccs.Class.extend=ccs.Class.extend||cc.Class.extend;ccs.Node=ccs.Node||cc.Node;ccs.Node.extend=ccs.Node.extend||cc.Node.extend;ccs.Sprite=ccs.Sprite||cc.Sprite;ccs.Sprite.extend=ccs.Sprite.extend||cc.Sprite.extend;ccs.Component=ccs.Component||cc.Component;ccs.Component.extend=ccs.Component.extend||cc.Component.extend;ccs.cocostudioVersion="v1.3.0.0";ccs.VERSION_COMBINED=0.3;ccs.VERSION_CHANGE_ROTATION_RANGE=1;ccs.VERSION_COLOR_READING=1.1;ccs.MAX_VERTEXZ_VALUE=5E6;ccs.ARMATURE_MAX_CHILD=50;ccs.ARMATURE_MAX_ZORDER=100;ccs.ARMATURE_MAX_COUNT=ccs.MAX_VERTEXZ_VALUE/ccs.ARMATURE_MAX_CHILD/ccs.ARMATURE_MAX_ZORDER;ccs.AUTO_ADD_SPRITE_FRAME_NAME_PREFIX=!1;ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT=!1;ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX=!1;ccs.armatureVersion=function(){return"v1.1.0.0"};ccs.CONST_VERSION="version";ccs.CONST_VERSION_2_0=2;ccs.CONST_VERSION_COMBINED=0.3;ccs.CONST_ARMATURES="armatures";ccs.CONST_ARMATURE="armature";ccs.CONST_BONE="b";ccs.CONST_DISPLAY="d";ccs.CONST_ANIMATIONS="animations";ccs.CONST_ANIMATION="animation";ccs.CONST_MOVEMENT="mov";ccs.CONST_FRAME="f";ccs.CONST_TEXTURE_ATLAS="TextureAtlas";ccs.CONST_SUB_TEXTURE="SubTexture";ccs.CONST_SKELETON="skeleton";ccs.CONST_A_NAME="name";ccs.CONST_A_DURATION="dr";ccs.CONST_A_FRAME_INDEX="fi";
ccs.CONST_A_DURATION_TO="to";ccs.CONST_A_DURATION_TWEEN="drTW";ccs.CONST_A_LOOP="lp";ccs.CONST_A_MOVEMENT_SCALE="sc";ccs.CONST_A_MOVEMENT_DELAY="dl";ccs.CONST_A_DISPLAY_INDEX="dI";ccs.CONST_A_PLIST="plist";ccs.CONST_A_PARENT="parent";ccs.CONST_A_SKEW_X="kX";ccs.CONST_A_SKEW_Y="kY";ccs.CONST_A_SCALE_X="cX";ccs.CONST_A_SCALE_Y="cY";ccs.CONST_A_Z="z";ccs.CONST_A_EVENT="evt";ccs.CONST_A_SOUND="sd";ccs.CONST_A_SOUND_EFFECT="sdE";ccs.CONST_A_TWEEN_EASING="twE";ccs.CONST_A_EASING_PARAM="twEP";
ccs.CONST_A_TWEEN_ROTATE="twR";ccs.CONST_A_IS_ARMATURE="isArmature";ccs.CONST_A_DISPLAY_TYPE="displayType";ccs.CONST_A_MOVEMENT="mov";ccs.CONST_A_X="x";ccs.CONST_A_Y="y";ccs.CONST_A_COCOS2DX_X="cocos2d_x";ccs.CONST_A_COCOS2DX_Y="cocos2d_y";ccs.CONST_A_WIDTH="width";ccs.CONST_A_HEIGHT="height";ccs.CONST_A_PIVOT_X="pX";ccs.CONST_A_PIVOT_Y="pY";ccs.CONST_A_COCOS2D_PIVOT_X="cocos2d_pX";ccs.CONST_A_COCOS2D_PIVOT_Y="cocos2d_pY";ccs.CONST_A_BLEND_TYPE="bd";ccs.CONST_A_BLEND_SRC="bd_src";
ccs.CONST_A_BLEND_DST="bd_dst";ccs.CONST_A_ALPHA="a";ccs.CONST_A_RED="r";ccs.CONST_A_GREEN="g";ccs.CONST_A_BLUE="b";ccs.CONST_A_ALPHA_OFFSET="aM";ccs.CONST_A_RED_OFFSET="rM";ccs.CONST_A_GREEN_OFFSET="gM";ccs.CONST_A_BLUE_OFFSET="bM";ccs.CONST_A_COLOR_TRANSFORM="colorTransform";ccs.CONST_A_TWEEN_FRAME="tweenFrame";ccs.CONST_CONTOUR="con";ccs.CONST_CONTOUR_VERTEX="con_vt";ccs.CONST_FL_NAN="NaN";ccs.CONST_FRAME_DATA="frame_data";ccs.CONST_MOVEMENT_BONE_DATA="mov_bone_data";ccs.CONST_MOVEMENT_DATA="mov_data";
ccs.CONST_ANIMATION_DATA="animation_data";ccs.CONST_DISPLAY_DATA="display_data";ccs.CONST_SKIN_DATA="skin_data";ccs.CONST_BONE_DATA="bone_data";ccs.CONST_ARMATURE_DATA="armature_data";ccs.CONST_CONTOUR_DATA="contour_data";ccs.CONST_TEXTURE_DATA="texture_data";ccs.CONST_VERTEX_POINT="vertex";ccs.CONST_COLOR_INFO="color";ccs.CONST_CONFIG_FILE_PATH="config_file_path";ccs.CONST_CONTENT_SCALE="content_scale";
ccs.DataInfo=function(){this.asyncStruct=null;this.configFileQueue=[];this.contentScale=1;this.baseFilePath=this.filename="";this.cocoStudioVersion=this.flashToolVersion=0};
ccs.dataReaderHelper={ConfigType:{DragonBone_XML:0,CocoStudio_JSON:1,CocoStudio_Binary:2},_configFileList:[],_flashToolVersion:ccs.CONST_VERSION_2_0,_positionReadScale:1,_asyncRefCount:0,_asyncRefTotalCount:0,_dataQueue:null,setPositionReadScale:function(a){this._positionReadScale=a},getPositionReadScale:function(){return this._positionReadScale},addDataFromFile:function(a){if(-1==this._configFileList.indexOf(a)){this._configFileList.push(a);var c=this._initBaseFilePath(a),d=cc.path.extname(a).toLowerCase(),
e=new ccs.DataInfo;e.filename=a;e.basefilePath=c;".xml"==d?ccs.dataReaderHelper.addDataFromXML(a,e):".json"==d||".exportjson"==d?ccs.dataReaderHelper.addDataFromJson(a,e):".csb"==d&&ccs.dataReaderHelper.addDataFromBinaryCache(a,e)}},addDataFromFileAsync:function(a,c,d,e,f){if(-1!=this._configFileList.indexOf(d))f&&e&&(0==this._asyncRefTotalCount&&0==this._asyncRefCount?this._asyncCallBack(e,f,1):this._asyncCallBack(e,f,(this._asyncRefTotalCount-this._asyncRefCount)/this._asyncRefTotalCount));else{this._asyncRefTotalCount++;
this._asyncRefCount++;var g=this;cc.director.getScheduler().scheduleCallbackForTarget(this,function(){g.addDataFromFile(d);g._asyncRefCount--;g._asyncCallBack(e,f,(g._asyncRefTotalCount-g._asyncRefCount)/g._asyncRefTotalCount)},0.1,!1)}},removeConfigFile:function(a){for(var c=this._configFileList,d=c.length,e=c[d],f=0;f<d;f++)c[f]==a&&(e=f);e!=c[d]&&cc.arrayRemoveObject(c,a)},addDataFromCache:function(a,c){if(a){c.flashToolVersion=parseFloat(a.getAttribute(ccs.CONST_VERSION));var d=a.querySelectorAll(ccs.CONST_SKELETON+
" \x3e "+ccs.CONST_ARMATURES+" \x3e  "+ccs.CONST_ARMATURE+""),e=ccs.armatureDataManager,f;for(f=0;f<d.length;f++){var g=this.decodeArmature(d[f],c);e.addArmatureData(g.name,g,c.filename)}d=a.querySelectorAll(ccs.CONST_SKELETON+" \x3e "+ccs.CONST_ANIMATIONS+" \x3e  "+ccs.CONST_ANIMATION+"");for(f=0;f<d.length;f++)g=this.decodeAnimation(d[f],c),e.addAnimationData(g.name,g,c.filename);d=a.querySelectorAll(ccs.CONST_SKELETON+" \x3e "+ccs.CONST_TEXTURE_ATLAS+" \x3e  "+ccs.CONST_SUB_TEXTURE+"");for(f=0;f<
d.length;f++)g=this.decodeTexture(d[f],c),e.addTextureData(g.name,g,c.filename)}else cc.log("XML error  or  XML is empty.")},decodeArmature:function(a,c){var d=new ccs.ArmatureData;d.init();d.name=a.getAttribute(ccs.CONST_A_NAME);for(var e=a.querySelectorAll(ccs.CONST_ARMATURE+" \x3e "+ccs.CONST_BONE),f=0;f<e.length;f++){var g=e[f],h=g.getAttribute(ccs.CONST_A_PARENT),k=null;if(h)for(var l=0;l<e.length&&!(k=e[l],h==e[l].getAttribute(ccs.CONST_A_NAME));l++);g=this.decodeBone(g,k,c);d.addBoneData(g)}return d},
decodeArmatureFromJSON:function(a,c){var d=new ccs.ArmatureData;d.init();var e=a[ccs.CONST_A_NAME];e&&(d.name=e);c.cocoStudioVersion=d.dataVersion=a[ccs.CONST_VERSION]||0.1;for(var e=a[ccs.CONST_BONE_DATA],f=0;f<e.length;f++){var g=this.decodeBoneFromJson(e[f],c);d.addBoneData(g)}return d},decodeBone:function(a,c,d){c=new ccs.BoneData;c.init();c.name=a.getAttribute(ccs.CONST_A_NAME);c.parentName=a.getAttribute(ccs.CONST_A_PARENT)||"";c.zOrder=parseInt(a.getAttribute(ccs.CONST_A_Z))||0;a=a.querySelectorAll(ccs.CONST_BONE+
" \x3e "+ccs.CONST_DISPLAY);for(var e=0;e<a.length;e++){var f=this.decodeBoneDisplay(a[e],d);c.addDisplayData(f)}return c},decodeBoneFromJson:function(a,c){var d=new ccs.BoneData;d.init();this.decodeNodeFromJson(d,a,c);d.name=a[ccs.CONST_A_NAME]||"";d.parentName=a[ccs.CONST_A_PARENT]||"";for(var e=a[ccs.CONST_DISPLAY_DATA]||[],f=0;f<e.length;f++){var g=this.decodeBoneDisplayFromJson(e[f],c);d.addDisplayData(g)}return d},decodeBoneDisplay:function(a,c){var d=null;1==(parseFloat(a.getAttribute(ccs.CONST_A_IS_ARMATURE))||
0)?(d=new ccs.ArmatureDisplayData,d.displayType=ccs.DISPLAY_TYPE_ARMATURE):(d=new ccs.SpriteDisplayData,d.displayType=ccs.DISPLAY_TYPE_SPRITE);var e=a.getAttribute(ccs.CONST_A_NAME)||"";e&&(d.displayName=e);return d},decodeBoneDisplayFromJson:function(a,c){var d=a[ccs.CONST_A_DISPLAY_TYPE]||ccs.DISPLAY_TYPE_SPRITE,e=null;switch(d){case ccs.DISPLAY_TYPE_SPRITE:var e=new ccs.SpriteDisplayData,f=a[ccs.CONST_A_NAME];null!=f&&(e.displayName=f);if(f=(a[ccs.CONST_SKIN_DATA]||[])[0]){var g=e.skinData;g.x=
f[ccs.CONST_A_X]*this._positionReadScale;g.y=f[ccs.CONST_A_Y]*this._positionReadScale;g.scaleX=null==f[ccs.CONST_A_SCALE_X]?1:f[ccs.CONST_A_SCALE_X];g.scaleY=null==f[ccs.CONST_A_SCALE_Y]?1:f[ccs.CONST_A_SCALE_Y];g.skewX=null==f[ccs.CONST_A_SKEW_X]?1:f[ccs.CONST_A_SKEW_X];g.skewY=null==f[ccs.CONST_A_SKEW_Y]?1:f[ccs.CONST_A_SKEW_Y];g.x*=c.contentScale;g.y*=c.contentScale}break;case ccs.DISPLAY_TYPE_ARMATURE:e=new ccs.ArmatureDisplayData;f=a[ccs.CONST_A_NAME];null!=f&&(e.displayName=a[ccs.CONST_A_NAME]);
break;case ccs.DISPLAY_TYPE_PARTICLE:e=new ccs.ParticleDisplayData;f=a[ccs.CONST_A_PLIST];null!=f&&(e.displayName=c.asyncStruct?c.asyncStruct.basefilePath+f:c.basefilePath+f);break;default:e=new ccs.SpriteDisplayData}e.displayType=d;return e},decodeAnimation:function(a,c){var d=new ccs.AnimationData,e=a.getAttribute(ccs.CONST_A_NAME),f=ccs.armatureDataManager.getArmatureData(e);d.name=e;for(var e=a.querySelectorAll(ccs.CONST_ANIMATION+" \x3e "+ccs.CONST_MOVEMENT),g=null,h=0;h<e.length;h++)g=e[h],
g=this.decodeMovement(g,f,c),d.addMovement(g);return d},decodeAnimationFromJson:function(a,c){var d=new ccs.AnimationData;a[ccs.CONST_A_NAME]&&(d.name=a[ccs.CONST_A_NAME]);for(var e=a[ccs.CONST_MOVEMENT_DATA]||[],f=0;f<e.length;f++){var g=this.decodeMovementFromJson(e[f],c);d.addMovement(g)}return d},decodeMovement:function(a,c,d){var e=new ccs.MovementData;e.name=a.getAttribute(ccs.CONST_A_NAME);var f;f=0;f=a.getAttribute(ccs.CONST_A_DURATION);e.duration=null==f?0:parseFloat(f);f=a.getAttribute(ccs.CONST_A_DURATION_TO);
e.durationTo=null==f?0:parseFloat(f);f=a.getAttribute(ccs.CONST_A_DURATION_TWEEN);e.durationTween=null==f?0:parseFloat(f);f=a.getAttribute(ccs.CONST_A_LOOP);e.loop=f?Boolean(parseFloat(f)):!0;if(f=a.getAttribute(ccs.CONST_A_TWEEN_EASING))f!=ccs.CONST_FL_NAN?(f=null==f?0:parseFloat(f),e.tweenEasing=2==f?ccs.TweenType.sineEaseInOut:f):e.tweenEasing=ccs.TweenType.linear;a=a.querySelectorAll(ccs.CONST_MOVEMENT+" \x3e "+ccs.CONST_BONE);var g=null;for(f=0;f<a.length;f++){var g=a[f],h=g.getAttribute(ccs.CONST_A_NAME);
if(!e.getMovementBoneData(h)){var h=c.getBoneData(h),k=h.parentName,l=null;if(""!=k)for(var m=0;m<a.length&&!(l=a[m],k==l.getAttribute(ccs.CONST_A_NAME));m++);g=this.decodeMovementBone(g,l,h,d);e.addMovementBoneData(g)}}return e},decodeMovementFromJson:function(a,c){var d=new ccs.MovementData;d.loop=null==a[ccs.CONST_A_LOOP]?!1:a[ccs.CONST_A_LOOP];d.durationTween=a[ccs.CONST_A_DURATION_TWEEN]||0;d.durationTo=a[ccs.CONST_A_DURATION_TO]||0;d.duration=a[ccs.CONST_A_DURATION]||0;d.scale=null==a[ccs.CONST_A_DURATION]?
1:null==a[ccs.CONST_A_MOVEMENT_SCALE]?1:a[ccs.CONST_A_MOVEMENT_SCALE];d.tweenEasing=null==a[ccs.CONST_A_TWEEN_EASING]?ccs.TweenType.linear:a[ccs.CONST_A_TWEEN_EASING];var e=a[ccs.CONST_A_NAME];e&&(d.name=e);for(var e=a[ccs.CONST_MOVEMENT_BONE_DATA]||[],f=0;f<e.length;f++){var g=this.decodeMovementBoneFromJson(e[f],c);d.addMovementBoneData(g)}return d},decodeMovementBone:function(a,c,d,e){var f=new ccs.MovementBoneData;f.init();var g;a&&(g=parseFloat(a.getAttribute(ccs.CONST_A_MOVEMENT_SCALE))||0,
f.scale=g,g=parseFloat(a.getAttribute(ccs.CONST_A_MOVEMENT_DELAY))||0,0<g&&(g-=1),f.delay=g);var h=0,k=g=0,l=null,m=[];if(null!=c){for(var p=c.querySelectorAll(ccs.CONST_BONE+" \x3e "+ccs.CONST_FRAME),h=0;h<p.length;h++)m.push(p[h]);h=m.length}f.name=a.getAttribute(ccs.CONST_A_NAME);a=a.querySelectorAll(ccs.CONST_BONE+" \x3e "+ccs.CONST_FRAME);for(var n=p=0,r=0;r<a.length;r++){var q=a[r];if(c)for(;p<h&&(l?n<g||n>=g+k:1);)l=m[p],g+=k,k=parseFloat(l.getAttribute(ccs.CONST_A_DURATION)),p++;q=this.decodeFrame(q,
l,d,e);f.addFrameData(q);q.frameID=n;n+=q.duration;f.duration=n}c=f.frameList;d=Math.PI;for(h=c.length-1;0<=h;h--)if(0<h){e=c[h].skewX-c[h-1].skewX;g=c[h].skewY-c[h-1].skewY;if(e<-d||e>d)c[h-1].skewX=0>e?c[h-1].skewX-2*d:c[h-1].skewX+2*d;if(g<-d||g>d)c[h-1].skewY=0>g?c[h-1].skewY-2*d:c[h-1].skewY+2*d}c=new ccs.FrameData;c.copy(f.frameList[f.frameList.length-1]);c.frameID=f.duration;f.addFrameData(c);return f},decodeMovementBoneFromJson:function(a,c){var d=new ccs.MovementBoneData;d.init();d.delay=
a[ccs.CONST_A_MOVEMENT_DELAY]||0;var e=a[ccs.CONST_A_NAME];e&&(d.name=e);for(var f=(a[ccs.CONST_FRAME_DATA]||[]).length,e=0;e<f;e++){var g=this.decodeFrameFromJson(a[ccs.CONST_FRAME_DATA][e],c);d.addFrameData(g);c.cocoStudioVersion<ccs.CONST_VERSION_COMBINED&&(g.frameID=d.duration,d.duration+=g.duration)}if(c.cocoStudioVersion<ccs.VERSION_CHANGE_ROTATION_RANGE){f=d.frameList;g=Math.PI;for(e=f.length-1;0<=e;e--)if(0<e){var h=f[e].skewX-f[e-1].skewX,k=f[e].skewY-f[e-1].skewY;if(h<-g||h>g)f[e-1].skewX=
0>h?f[e-1].skewX-2*g:f[e-1].skewX+2*g;if(k<-g||k>g)f[e-1].skewY=0>k?f[e-1].skewY-2*g:f[e-1].skewY+2*g}}c.cocoStudioVersion<ccs.CONST_VERSION_COMBINED&&0<d.frameList.length&&(g=new ccs.FrameData,g.copy(d.frameList[d.frameList.length-1]),d.addFrameData(g),g.frameID=d.duration);return d},decodeFrame:function(a,c,d,e){var f=0,f=f=f=f=f=f=f=f=f=f=f=0;d=new ccs.FrameData;d.strMovement=a.getAttribute(ccs.CONST_A_MOVEMENT)||"";d.movement=d.strMovement;d.strEvent=a.getAttribute(ccs.CONST_A_EVENT)||"";d.event=
d.strEvent;d.strSound=a.getAttribute(ccs.CONST_A_SOUND)||"";d.sound=d.strSound;d.strSoundEffect=a.getAttribute(ccs.CONST_A_SOUND_EFFECT)||"";d.soundEffect=d.strSoundEffect;f=a.getAttribute(ccs.CONST_A_TWEEN_FRAME);d.isTween=void 0==f?!0:Boolean(f);if(e.flashToolVersion>=ccs.CONST_VERSION_2_0){if(f=a.getAttribute(ccs.CONST_A_COCOS2DX_X))d.x=parseFloat(f),d.x*=this._positionReadScale;f=a.getAttribute(ccs.CONST_A_COCOS2DX_Y)}else{if(f=a.getAttribute(ccs.CONST_A_X))d.x=parseFloat(f),d.x*=this._positionReadScale;
f=a.getAttribute(ccs.CONST_A_Y)}f&&(d.y=-parseFloat(f),d.y*=this._positionReadScale);f=a.getAttribute(ccs.CONST_A_SCALE_X);null!=f&&(d.scaleX=parseFloat(f));f=a.getAttribute(ccs.CONST_A_SCALE_Y);null!=f&&(d.scaleY=parseFloat(f));f=a.getAttribute(ccs.CONST_A_SKEW_X);null!=f&&(d.skewX=cc.degreesToRadians(parseFloat(f)));f=a.getAttribute(ccs.CONST_A_SKEW_Y);null!=f&&(d.skewY=cc.degreesToRadians(-parseFloat(f)));f=a.getAttribute(ccs.CONST_A_DURATION);null!=f&&(d.duration=parseFloat(f));f=a.getAttribute(ccs.CONST_A_DISPLAY_INDEX);
null!=f&&(d.displayIndex=parseFloat(f));f=a.getAttribute(ccs.CONST_A_Z);null!=f&&(d.zOrder=parseInt(f));f=a.getAttribute(ccs.CONST_A_TWEEN_ROTATE);null!=f&&(d.tweenRotate=parseFloat(f));f=a.getAttribute(ccs.CONST_A_BLEND_TYPE);if(null!=f){var g=d.blendFunc;switch(f){case ccs.BLEND_TYPE_NORMAL:g.src=cc.BLEND_SRC;g.dst=cc.BLEND_DST;break;case ccs.BLEND_TYPE_ADD:g.src=cc.SRC_ALPHA;g.dst=cc.ONE;break;case ccs.BLEND_TYPE_MULTIPLY:g.src=cc.DST_COLOR;g.dst=cc.ONE_MINUS_SRC_ALPHA;break;case ccs.BLEND_TYPE_SCREEN:g.src=
cc.ONE;g.dst=cc.ONE_MINUS_DST_COLOR;break;default:d.blendFunc.src=cc.BLEND_SRC,d.blendFunc.dst=cc.BLEND_DST}}var h=a.querySelectorAll(ccs.CONST_FRAME+" \x3e "+ccs.CONST_A_COLOR_TRANSFORM);if(h&&0<h.length){var h=h[0],k,l,m,p,n,f=h.getAttribute(ccs.CONST_A_ALPHA)||0,g=h.getAttribute(ccs.CONST_A_RED)||0;k=h.getAttribute(ccs.CONST_A_GREEN)||0;l=h.getAttribute(ccs.CONST_A_BLUE)||0;m=h.getAttribute(ccs.CONST_A_ALPHA_OFFSET)||0;p=h.getAttribute(ccs.CONST_A_RED_OFFSET)||0;n=h.getAttribute(ccs.CONST_A_GREEN_OFFSET)||
0;h=h.getAttribute(ccs.CONST_A_BLUE_OFFSET)||0;d.a=2.55*m+f;d.r=2.55*p+g;d.g=2.55*n+k;d.b=2.55*h+l;d.isUseColorInfo=!0}f=a.getAttribute(ccs.CONST_A_TWEEN_EASING);null!=f&&(f!=ccs.CONST_FL_NAN?(f=a.getAttribute(ccs.CONST_A_TWEEN_EASING))&&(d.tweenEasing=2==f?ccs.TweenType.sineEaseInOut:f):d.tweenEasing=ccs.TweenType.linear);c&&(a=new ccs.BaseData,e.flashToolVersion>=ccs.CONST_VERSION_2_0?(a.x=parseFloat(c.getAttribute(ccs.CONST_A_COCOS2DX_X)),a.y=parseFloat(c.getAttribute(ccs.CONST_A_COCOS2DX_Y))):
(a.x=parseFloat(c.getAttribute(ccs.CONST_A_X)),a.y=parseFloat(c.getAttribute(ccs.CONST_A_Y))),a.skewX=parseFloat(c.getAttribute(ccs.CONST_A_SKEW_X)),a.skewY=parseFloat(c.getAttribute(ccs.CONST_A_SKEW_Y)),a.y=-a.y,a.skewX=cc.degreesToRadians(a.skewX),a.skewY=cc.degreesToRadians(-a.skewY),ccs.TransformHelp.transformFromParent(d,a));return d},decodeFrameFromJson:function(a,c){var d=new ccs.FrameData;this.decodeNodeFromJson(d,a,c);d.tweenEasing=a[ccs.CONST_A_TWEEN_EASING]||ccs.TweenType.linear;d.displayIndex=
a[ccs.CONST_A_DISPLAY_INDEX];var e=null==a[ccs.CONST_A_BLEND_DST]?cc.BLEND_DST:a[ccs.CONST_A_BLEND_DST];d.blendFunc.src=null==a[ccs.CONST_A_BLEND_SRC]?cc.BLEND_SRC:a[ccs.CONST_A_BLEND_SRC];d.blendFunc.dst=e;d.isTween=null==a[ccs.CONST_A_TWEEN_FRAME]?!0:a[ccs.CONST_A_TWEEN_FRAME];e=a[ccs.CONST_A_EVENT];null!=e&&(d.strEvent=e,d.event=e);c.cocoStudioVersion<ccs.CONST_VERSION_COMBINED?d.duration=null==a[ccs.CONST_A_DURATION]?1:a[ccs.CONST_A_DURATION]:d.frameID=a[ccs.CONST_A_FRAME_INDEX];for(var e=a[ccs.CONST_A_EASING_PARAM]||
[],f=0;f<e.length;f++)d.easingParams[f]=e[f];return d},decodeTexture:function(a,c){var d=new ccs.TextureData;d.init();a.getAttribute(ccs.CONST_A_NAME)&&(d.name=a.getAttribute(ccs.CONST_A_NAME));var e,f;c.flashToolVersion>=ccs.CONST_VERSION_2_0?(e=parseFloat(a.getAttribute(ccs.CONST_A_COCOS2D_PIVOT_X))||0,f=parseFloat(a.getAttribute(ccs.CONST_A_COCOS2D_PIVOT_Y))||0):(e=parseFloat(a.getAttribute(ccs.CONST_A_PIVOT_X))||0,f=parseFloat(a.getAttribute(ccs.CONST_A_PIVOT_Y))||0);var g=parseFloat(a.getAttribute(ccs.CONST_A_WIDTH))||
0,h=parseFloat(a.getAttribute(ccs.CONST_A_HEIGHT))||0;d.pivotX=e/g;d.pivotY=(h-f)/h;e=a.querySelectorAll(ccs.CONST_SUB_TEXTURE+" \x3e "+ccs.CONST_CONTOUR);for(f=0;f<e.length;f++)d.addContourData(this.decodeContour(e[f],c));return d},decodeTextureFromJson:function(a){var c=new ccs.TextureData;c.init();var d=a[ccs.CONST_A_NAME];null!=d&&(c.name=d);c.width=a[ccs.CONST_A_WIDTH]||0;c.height=a[ccs.CONST_A_HEIGHT]||0;c.pivotX=a[ccs.CONST_A_PIVOT_X]||0;c.pivotY=a[ccs.CONST_A_PIVOT_Y]||0;a=a[ccs.CONST_CONTOUR_DATA]||
[];for(d=0;d<a.length;d++)c.contourDataList.push(this.decodeContourFromJson(a[d]));return c},decodeContour:function(a,c){var d=new ccs.ContourData;d.init();for(var e=a.querySelectorAll(ccs.CONST_CONTOUR+" \x3e "+ccs.CONST_CONTOUR_VERTEX),f,g=0;g<e.length;g++){f=e[g];var h=cc.p(0,0);h.x=parseFloat(f.getAttribute(ccs.CONST_A_X))||0;h.y=parseFloat(f.getAttribute(ccs.CONST_A_Y))||0;h.y=-h.y;d.vertexList.push(h)}return d},decodeContourFromJson:function(a){var c=new ccs.ContourData;c.init();a=a[ccs.CONST_VERTEX_POINT]||
[];for(var d=a.length,e=0;e<d;e++){var f=a[e],g=cc.p(0,0);g.x=f[ccs.CONST_A_X]||0;g.y=f[ccs.CONST_A_Y]||0;c.vertexList.push(g)}return c},addDataFromJsonCache:function(a,c){c.contentScale=null==a[ccs.CONST_CONTENT_SCALE]?1:a[ccs.CONST_CONTENT_SCALE];var d=a[ccs.CONST_ARMATURE_DATA]||[],e,f;for(e=0;e<d.length;e++)f=this.decodeArmatureFromJSON(d[e],c),ccs.armatureDataManager.addArmatureData(f.name,f,c.filename);d=a[ccs.CONST_ANIMATION_DATA]||[];for(e=0;e<d.length;e++)f=this.decodeAnimationFromJson(d[e],
c),ccs.armatureDataManager.addAnimationData(f.name,f,c.filename);d=a[ccs.CONST_TEXTURE_DATA]||[];for(e=0;e<d.length;e++)f=this.decodeTextureFromJson(d[e],c),ccs.armatureDataManager.addTextureData(f.name,f,c.filename);if(null==c.asyncStruct?ccs.armatureDataManager.isAutoLoadSpriteFile():c.asyncStruct.autoLoadSpriteFile){var d=a[ccs.CONST_CONFIG_FILE_PATH]||[],g;for(e=0;e<d.length;e++)f=d[e],g=f.lastIndexOf("."),f=f.substring(0,g),g=c.basefilePath+f+".plist",f=c.basefilePath+f+".png",ccs.armatureDataManager.addSpriteFrameFromFile(g,
f,c.filename)}},decodeNodeFromJson:function(a,c,d){a.x=c[ccs.CONST_A_X]*this._positionReadScale;a.y=c[ccs.CONST_A_Y]*this._positionReadScale;a.x*=d.contentScale;a.y*=d.contentScale;a.zOrder=c[ccs.CONST_A_Z];a.skewX=c[ccs.CONST_A_SKEW_X]||0;a.skewY=c[ccs.CONST_A_SKEW_Y]||0;a.scaleX=null==c[ccs.CONST_A_SCALE_X]?1:c[ccs.CONST_A_SCALE_X];a.scaleY=null==c[ccs.CONST_A_SCALE_Y]?1:c[ccs.CONST_A_SCALE_Y];if(c=d.cocoStudioVersion<ccs.VERSION_COLOR_READING?c[0]:c[ccs.CONST_COLOR_INFO]||null)a.a=null==c[ccs.CONST_A_ALPHA]?
255:c[ccs.CONST_A_ALPHA],a.r=null==c[ccs.CONST_A_RED]?255:c[ccs.CONST_A_RED],a.g=null==c[ccs.CONST_A_GREEN]?255:c[ccs.CONST_A_GREEN],a.b=null==c[ccs.CONST_A_BLUE]?255:c[ccs.CONST_A_BLUE],a.isUseColorInfo=!0},clear:function(){this._configFileList=[];this._asyncRefTotalCount=this._asyncRefCount=0},_asyncCallBack:function(a,c,d){a&&"function"===typeof a&&a.call(c,d);if(c&&a&&"string"===typeof a)c[a](d)},_initBaseFilePath:function(a){var c=a.lastIndexOf("/");return a=-1<c?a.substr(0,c+1):""},addDataFromXML:function(a,
c){var d=cc.loader.getRes(a);if(!d)throw"Please load the resource first : "+a;(d=cc.saxParser.parse(d).documentElement)&&this.addDataFromCache(d,c)},addDataFromJson:function(a,c){var d=cc.loader.getRes(a);this.addDataFromJsonCache(d,c)}};ccs.spriteFrameCacheHelper={_textureAtlasDic:{},_imagePaths:[],addSpriteFrameFromFile:function(a,c){cc.spriteFrameCache.addSpriteFrames(a,c)},getTexureAtlasWithTexture:function(a){return null},clear:function(){this._textureAtlasDic={};this._imagePaths=[]}};ccs.TransformHelp=ccs.TransformHelp||ccs.Class.extend({});ccs.TransformHelp.helpMatrix1=cc.affineTransformMake(1,0,0,1,0,0);ccs.TransformHelp.helpMatrix2=cc.affineTransformMake(1,0,0,1,0,0);ccs.TransformHelp.helpPoint1=cc.p(0,0);ccs.TransformHelp.helpPoint2=cc.p(0,0);ccs.TransformHelp.helpParentNode={};
ccs.TransformHelp.transformFromParent=function(a,c){this.nodeToMatrix(a,this.helpMatrix1);this.nodeToMatrix(c,this.helpMatrix2);this.helpMatrix2=cc.affineTransformInvert(this.helpMatrix2);this.helpMatrix1=cc.affineTransformConcat(this.helpMatrix1,this.helpMatrix2);this.matrixToNode(this.helpMatrix1,a)};
ccs.TransformHelp.transformToParent=function(a,c){this.nodeToMatrix(a,this.helpMatrix1);this.nodeToMatrix(c,this.helpMatrix2);this.helpMatrix1=cc.affineTransformConcat(this.helpMatrix1,this.helpMatrix2);this.matrixToNode(this.helpMatrix1,a)};
ccs.TransformHelp.transformFromParentWithoutScale=function(a,c){for(var d in c)this.helpParentNode[d]=c[d];this.helpParentNode.scaleX=1;this.helpParentNode.scaleY=1;this.nodeToMatrix(a,this.helpMatrix1);this.nodeToMatrix(this.helpParentNode,this.helpMatrix2);this.helpMatrix2=cc.affineTransformInvert(this.helpMatrix2);this.helpMatrix1=cc.affineTransformConcat(this.helpMatrix1,this.helpMatrix2);this.matrixToNode(this.helpMatrix1,a)};
ccs.TransformHelp.transformToParentWithoutScale=function(a,c){for(var d in c)this.helpParentNode[d]=c[d];this.helpParentNode.scaleX=1;this.helpParentNode.scaleY=1;this.nodeToMatrix(a,this.helpMatrix1);this.nodeToMatrix(this.helpParentNode,this.helpMatrix2);this.helpMatrix1=cc.affineTransformConcat(this.helpMatrix1,this.helpMatrix2);this.matrixToNode(this.helpMatrix1,a)};
ccs.TransformHelp.nodeToMatrix=function(a,c){if(a.skewX==-a.skewY){var d=Math.sin(a.skewX),e=Math.cos(a.skewX);c.a=a.scaleX*e;c.b=a.scaleX*-d;c.c=a.scaleY*d;c.d=a.scaleY*e}else c.a=a.scaleX*Math.cos(a.skewY),c.b=a.scaleX*Math.sin(a.skewY),c.c=a.scaleY*Math.sin(a.skewX),c.d=a.scaleY*Math.cos(a.skewX);c.tx=a.x;c.ty=a.y};
ccs.TransformHelp.matrixToNode=function(a,c){this.helpPoint1.x=0;this.helpPoint1.y=1;this.helpPoint1=cc.pointApplyAffineTransform(this.helpPoint1,a);this.helpPoint1.x-=a.tx;this.helpPoint1.y-=a.ty;this.helpPoint2.x=1;this.helpPoint2.y=0;this.helpPoint2=cc.pointApplyAffineTransform(this.helpPoint2,a);this.helpPoint2.x-=a.tx;this.helpPoint2.y-=a.ty;c.skewX=-(Math.atan2(this.helpPoint1.y,this.helpPoint1.x)-1.5707964);c.skewY=Math.atan2(this.helpPoint2.y,this.helpPoint2.x);c.scaleX=Math.sqrt(a.a*a.a+
a.b*a.b);c.scaleY=Math.sqrt(a.c*a.c+a.d*a.d);c.x=a.tx;c.y=a.ty};ccs.TransformHelp.nodeConcat=function(a,c){a.x+=c.x;a.y+=c.y;a.skewX+=c.skewX;a.skewY+=c.skewY;a.scaleX+=c.scaleX;a.scaleY+=c.scaleY};ccs.TransformHelp.nodeSub=function(a,c){a.x-=c.x;a.y-=c.y;a.skewX-=c.skewX;a.skewY-=c.skewY;a.scaleX-=c.scaleX;a.scaleY-=c.scaleY};ccs.TweenType={customEasing:-1,linear:0,sineEaseIn:1,sineEaseOut:2,sineEaseInOut:3,quadEaseIn:4,quadEaseOut:5,quadEaseInOut:6,cubicEaseIn:7,cubicEaseOut:8,cubicEaseInOut:9,quartEaseIn:10,quartEaseOut:11,quartEaseInOut:12,quintEaseIn:13,quintEaseOut:14,quintEaseInOut:15,expoEaseIn:16,expoEaseOut:17,expoEaseInOut:18,circEaseIn:19,eircEaseOut:20,circEaseInOut:21,elasticEaseIn:22,elasticEaseOut:23,elasticEaseInOut:24,backEaseIn:25,backEaseOut:26,backEaseInOut:27,bounceEaseIn:28,bounceEaseOut:29,bounceEaseInOut:30,
tweenEasingMax:1E4};ccs.TweenFunction=ccs.TweenFunction||ccs.Class.extend({});ccs.DOUBLE_PI=ccs.M_PI_X_2=2*Math.PI;ccs.HALF_PI=ccs.M_PI_2=Math.PI/2;ccs.M_PI=Math.PI;
ccs.TweenFunction.tweenTo=function(a,c,d){var e=0;switch(c){case ccs.TweenType.customEasing:e=this.customEase(a,d);break;case ccs.TweenType.linear:e=this.linear(a);break;case ccs.TweenType.sineEaseIn:e=this.sineEaseIn(a);break;case ccs.TweenType.sineEaseOut:e=this.sineEaseOut(a);break;case ccs.TweenType.sineEaseInOut:e=this.sineEaseInOut(a);break;case ccs.TweenType.quadEaseIn:e=this.quadEaseIn(a);break;case ccs.TweenType.quadEaseOut:e=this.quadEaseOut(a);break;case ccs.TweenType.quadEaseInOut:e=this.quadEaseInOut(a);
break;case ccs.TweenType.cubicEaseIn:e=this.cubicEaseIn(a);break;case ccs.TweenType.cubicEaseOut:e=this.cubicEaseOut(a);break;case ccs.TweenType.cubicEaseInOut:e=this.cubicEaseInOut(a);break;case ccs.TweenType.quartEaseIn:e=this.quartEaseIn(a);break;case ccs.TweenType.quartEaseOut:e=this.quartEaseOut(a);break;case ccs.TweenType.quartEaseInOut:e=this.quartEaseInOut(a);break;case ccs.TweenType.quintEaseIn:e=this.quintEaseIn(a);break;case ccs.TweenType.quintEaseOut:e=this.quintEaseOut(a);break;case ccs.TweenType.quintEaseInOut:e=
this.quintEaseInOut(a);break;case ccs.TweenType.expoEaseIn:e=this.expoEaseIn(a);break;case ccs.TweenType.expoEaseOut:e=this.expoEaseOut(a);break;case ccs.TweenType.expoEaseInOut:e=this.expoEaseInOut(a);break;case ccs.TweenType.circEaseIn:e=this.circEaseIn(a);break;case ccs.TweenType.eircEaseOut:e=this.circEaseOut(a);break;case ccs.TweenType.circEaseInOut:e=this.circEaseInOut(a);break;case ccs.TweenType.elasticEaseIn:c=0.3;null!=d&&(c=d[0]);e=this.elasticEaseIn(a,c);break;case ccs.TweenType.elasticEaseOut:c=
0.3;null!=d&&(c=d[0]);e=this.elasticEaseOut(a,c);break;case ccs.TweenType.elasticEaseInOut:c=0.3;null!=d&&(c=d[0]);e=this.elasticEaseInOut(a,c);break;case ccs.TweenType.backEaseIn:e=this.backEaseIn(a);break;case ccs.TweenType.backEaseOut:e=this.backEaseOut(a);break;case ccs.TweenType.backEaseInOut:e=this.backEaseInOut(a);break;case ccs.TweenType.bounceEaseIn:e=this.bounceEaseIn(a);break;case ccs.TweenType.bounceEaseOut:e=this.bounceEaseOut(a);break;case ccs.TweenType.bounceEaseInOut:e=this.bounceEaseInOut(a);
break;default:e=this.sineEaseInOut(a)}return e};ccs.TweenFunction.linear=function(a){return a};ccs.TweenFunction.sineEaseIn=function(a){return-1*Math.cos(a*ccs.HALF_PI)+1};ccs.TweenFunction.sineEaseOut=function(a){return Math.sin(a*ccs.HALF_PI)};ccs.TweenFunction.sineEaseInOut=function(a){return-0.5*(Math.cos(ccs.M_PI*a)-1)};ccs.TweenFunction.quadEaseIn=function(a){return a*a};ccs.TweenFunction.quadEaseOut=function(a){return-1*a*(a-2)};
ccs.TweenFunction.quadEaseInOut=function(a){a*=2;if(1>a)return 0.5*a*a;--a;return-0.5*(a*(a-2)-1)};ccs.TweenFunction.cubicEaseIn=function(a){return a*a*a};ccs.TweenFunction.cubicEaseOut=function(a){a-=1;return a*a*a+1};ccs.TweenFunction.cubicEaseInOut=function(a){a*=2;if(1>a)return 0.5*a*a*a;a-=2;return 0.5*(a*a*a+2)};ccs.TweenFunction.quartEaseIn=function(a){return a*a*a*a};ccs.TweenFunction.quartEaseOut=function(a){a-=1;return-(a*a*a*a-1)};
ccs.TweenFunction.quartEaseInOut=function(a){a*=2;if(1>a)return 0.5*a*a*a*a;a-=2;return-0.5*(a*a*a*a-2)};ccs.TweenFunction.quintEaseIn=function(a){return a*a*a*a*a};ccs.TweenFunction.quintEaseOut=function(a){a-=1;return a*a*a*a*a+1};ccs.TweenFunction.quintEaseInOut=function(a){a*=2;if(1>a)return 0.5*a*a*a*a*a;a-=2;return 0.5*(a*a*a*a*a+2)};ccs.TweenFunction.expoEaseIn=function(a){return 0==a?0:Math.pow(2,10*(a-1))-0.001};ccs.TweenFunction.expoEaseOut=function(a){return 1==a?1:-Math.pow(2,-10*a)+1};
ccs.TweenFunction.expoEaseInOut=function(a){a/=0.5;return a=1>a?0.5*Math.pow(2,10*(a-1)):0.5*(-Math.pow(2,-10*(a-1))+2)};ccs.TweenFunction.circEaseIn=function(a){return-1*(Math.sqrt(1-a*a)-1)};ccs.TweenFunction.circEaseOut=function(a){a-=1;return Math.sqrt(1-a*a)};ccs.TweenFunction.circEaseInOut=function(a){a*=2;if(1>a)return-0.5*(Math.sqrt(1-a*a)-1);a-=2;return 0.5*(Math.sqrt(1-a*a)+1)};
ccs.TweenFunction.elasticEaseIn=function(a,c){var d=0.3;0<c.length&&(d=c[0]);var e=0;0==a||1==a?e=a:(e=d/4,a-=1,e=-Math.pow(2,10*a)*Math.sin((a-e)*ccs.DOUBLE_PI/d));return e};ccs.TweenFunction.elasticEaseOut=function(a,c){var d=0.3;0<c.length&&(d=c[0]);var e=0;0==a||1==a?e=a:(e=d/4,e=Math.pow(2,-10*a)*Math.sin((a-e)*ccs.DOUBLE_PI/d)+1);return e};
ccs.TweenFunction.elasticEaseInOut=function(a,c){var d=0.3;0<c.length&&(d=c[0]);var e=0;0==a||1==a?e=a:(d||(d=0.3*1.5),e=d/4,a=2*a-1,e=0>a?-0.5*Math.pow(2,10*a)*Math.sin((a-e)*ccs.DOUBLE_PI/d):0.5*Math.pow(2,-10*a)*Math.sin((a-e)*ccs.DOUBLE_PI/d)+1);return e};ccs.TweenFunction.backEaseIn=function(a){return a*a*(2.70158*a-1.70158)};ccs.TweenFunction.backEaseOut=function(a){a-=1;return a*a*(2.70158*a+1.70158)+1};
ccs.TweenFunction.backEaseInOut=function(a){a*=2;if(1>a)return a*a*(3.5949095*a-2.5949095)/2;a-=2;return a*a*(3.5949095*a+2.5949095)/2+1};ccs.bounceTime=function(a){if(a<1/2.75)return 7.5625*a*a;if(a<2/2.75)return a-=1.5/2.75,7.5625*a*a+0.75;if(a<2.5/2.75)return a-=2.25/2.75,7.5625*a*a+0.9375;a-=2.625/2.75;return 7.5625*a*a+0.984375};ccs.TweenFunction.bounceEaseIn=function(a){return 1-ccs.bounceTime(1-a)};ccs.TweenFunction.bounceEaseOut=function(a){return ccs.bounceTime(a)};
ccs.TweenFunction.bounceEaseInOut=function(a){var c=0;return c=0.5>a?0.5*(1-ccs.bounceTime(1-2*a)):0.5*ccs.bounceTime(2*a-1)+0.5};ccs.TweenFunction.customEase=function(a,c){if(0<c.length){var d=1-a;return c[1]*d*d*d+3*c[3]*a*d*d+3*c[5]*a*a*d+c[7]*a*a*a}return a};ccs.TweenFunction.easeIn=function(a,c){return Math.pow(a,c)};ccs.TweenFunction.easeOut=function(a,c){return Math.pow(a,1/c)};ccs.TweenFunction.easeInOut=function(a,c){a*=2;return 1>a?0.5*Math.pow(a,c):1-0.5*Math.pow(2-a,c)};
ccs.TweenFunction.quadraticIn=function(a){return Math.pow(a,2)};ccs.TweenFunction.quadraticOut=function(a){return-a*(a-2)};ccs.TweenFunction.bezieratFunction=function(a,c,d,e,f){return Math.pow(1-f,3)*a+3*f*Math.pow(1-f,2)*c+3*Math.pow(f,2)*(1-f)*d+Math.pow(f,3)*e};var ENABLE_PHYSICS_DETECT=!1;ccs.fmodf=function(a,c){for(;a>c;)a-=c;return a};var CC_SAFE_RELEASE=function(a){a&&a.release&&a.release()};ccs.isSpriteContainPoint=function(a,c,d){c=a.convertToNodeSpace(c);d&&(d.x=c.x,d.y=c.y);a=a.getContentSize();return cc.rectContainsPoint(cc.rect(0,0,a.width,a.height),c)};ccs.SPRITE_CONTAIN_POINT=ccs.isSpriteContainPoint;ccs.SPRITE_CONTAIN_POINT_WITH_RETURN=ccs.isSpriteContainPoint;
ccs.extBezierTo=function(a,c,d,e,f){var g=cc.p(0,0);e&&!f&&(g.x=Math.pow(1-a,2)*c.x+2*a*(1-a)*d.x+Math.pow(a,2)*e.x,g.y=Math.pow(1-a,2)*c.y+2*a*(1-a)*d.y+Math.pow(a,2)*e.y);f&&(g.x=c.x*Math.pow(1-a,3)+3*a*d.x*Math.pow(1-a,2)+3*e.x*Math.pow(a,2)*(1-a)+f.x*Math.pow(a,3),g.y=c.y*Math.pow(1-a,3)+3*a*d.y*Math.pow(1-a,2)+3*e.y*Math.pow(a,2)*(1-a)+f.y*Math.pow(a,3));return g};ccs.extCircleTo=function(a,c,d,e,f){var g=cc.p(0,0);g.x=c.x+d*Math.cos(e+f*a);g.y=c.y+d*Math.sin(e+f*a);return g};ccs.RelativeData=function(){this.plistFiles=[];this.armatures=[];this.animations=[];this.textures=[]};
ccs.armatureDataManager={_animationDatas:{},_armarureDatas:{},_textureDatas:{},_autoLoadSpriteFile:!1,_relativeDatas:{},s_sharedArmatureDataManager:null,removeArmatureFileInfo:function(a){var c=this.getRelativeData(a);if(c){for(var d=0;d<c.armatures.length;d++){var e=c.armatures[d];this.removeArmatureData(e)}for(d=0;d<c.animations.length;d++)e=c.animations[d],this.removeAnimationData(e);for(d=0;d<c.textures.length;d++)e=c.textures[d],this.removeTextureData(e);for(d=0;d<c.plistFiles.length;d++)e=c.plistFiles[d],
cc.spriteFrameCache.removeSpriteFramesFromFile(e);delete this._relativeDatas[a];ccs.dataReaderHelper.removeConfigFile(a)}},addArmatureData:function(a,c,d){(d=this.getRelativeData(d))&&d.armatures.push(a);this._armarureDatas[a]=c},getArmatureData:function(a){var c=null;this._armarureDatas&&(c=this._armarureDatas[a]);return c},removeArmatureData:function(a){this._armarureDatas[a]&&delete this._armarureDatas[a]},addAnimationData:function(a,c,d){(d=this.getRelativeData(d))&&d.animations.push(a);this._animationDatas[a]=
c},getAnimationData:function(a){var c=null;this._animationDatas[a]&&(c=this._animationDatas[a]);return c},removeAnimationData:function(a){this._animationDatas[a]&&delete this._animationDatas[a]},addTextureData:function(a,c,d){(d=this.getRelativeData(d))&&d.textures.push(a);this._textureDatas[a]=c},getTextureData:function(a){var c=null;this._textureDatas&&(c=this._textureDatas[a]);return c},removeTextureData:function(a){this._textureDatas[a]&&delete this._textureDatas[a]},addArmatureFileInfo:function(){var a,
c,d;switch(arguments.length){case 1:d=arguments[0];this.addRelativeData(d);this._autoLoadSpriteFile=!0;ccs.dataReaderHelper.addDataFromFile(d);break;case 3:a=arguments[0],c=arguments[1],d=arguments[2],this.addRelativeData(d),this._autoLoadSpriteFile=!1,ccs.dataReaderHelper.addDataFromFile(d),this.addSpriteFrameFromFile(c,a)}},addArmatureFileInfoAsync:function(){var a,c,d,e,f;switch(arguments.length){case 3:d=arguments[0];e=arguments[2];f=arguments[1];this.addRelativeData(d);this._autoLoadSpriteFile=
!0;ccs.dataReaderHelper.addDataFromFileAsync("","",d,f,e);break;case 5:a=arguments[0],c=arguments[1],d=arguments[2],e=arguments[4],f=arguments[3],this.addRelativeData(d),this._autoLoadSpriteFile=!1,ccs.dataReaderHelper.addDataFromFileAsync(a,c,d,f,e),this.addSpriteFrameFromFile(c,a)}},addSpriteFrameFromFile:function(a,c,d){(d=this.getRelativeData(d))&&d.plistFiles.push(a);ccs.spriteFrameCacheHelper.addSpriteFrameFromFile(a,c)},isAutoLoadSpriteFile:function(){return this._autoLoadSpriteFile},getArmatureDatas:function(){return this._armarureDatas},
getAnimationDatas:function(){return this._animationDatas},getTextureDatas:function(){return this._textureDatas},addRelativeData:function(a){this._relativeDatas[a]||(this._relativeDatas[a]=new ccs.RelativeData)},getRelativeData:function(a){return this._relativeDatas[a]},clear:function(){this._animationDatas={};this._armarureDatas={};this._textureDatas={};ccs.spriteFrameCacheHelper.clear();ccs.dataReaderHelper.clear()}};ccs.BLEND_TYPE_NORMAL=0;ccs.BLEND_TYPE_LAYER=1;ccs.BLEND_TYPE_DARKEN=2;ccs.BLEND_TYPE_MULTIPLY=3;ccs.BLEND_TYPE_LIGHTEN=4;ccs.BLEND_TYPE_SCREEN=5;ccs.BLEND_TYPE_OVERLAY=6;ccs.BLEND_TYPE_HIGHLIGHT=7;ccs.BLEND_TYPE_ADD=8;ccs.BLEND_TYPE_SUBTRACT=9;ccs.BLEND_TYPE_DIFFERENCE=10;ccs.BLEND_TYPE_INVERT=11;ccs.BLEND_TYPE_ALPHA=12;ccs.BLEND_TYPE_ERASE=13;ccs.DISPLAY_TYPE_SPRITE=0;ccs.DISPLAY_TYPE_ARMATURE=1;ccs.DISPLAY_TYPE_PARTICLE=2;ccs.DISPLAY_TYPE_MAX=3;
ccs.BaseData=ccs.Class.extend({x:0,y:0,zOrder:0,skewX:0,skewY:0,scaleX:1,scaleY:1,tweenRotate:0,isUseColorInfo:!1,r:255,g:255,b:255,a:255,ctor:function(){this.skewY=this.skewX=this.zOrder=this.y=this.x=0;this.scaleY=this.scaleX=1;this.tweenRotate=0;this.isUseColorInfo=!1;this.a=this.b=this.g=this.r=255},copy:function(a){this.x=a.x;this.y=a.y;this.zOrder=a.zOrder;this.scaleX=a.scaleX;this.scaleY=a.scaleY;this.skewX=a.skewX;this.skewY=a.skewY;this.tweenRotate=a.tweenRotate;this.isUseColorInfo=a.isUseColorInfo;
this.r=a.r;this.g=a.g;this.b=a.b;this.a=a.a},setColor:function(a){this.r=a.r;this.g=a.g;this.b=a.b;this.a=a.a},getColor:function(){return cc.color(this.r,this.g,this.b,this.a)},subtract:function(a,c,d){this.x=c.x-a.x;this.y=c.y-a.y;this.scaleX=c.scaleX-a.scaleX;this.scaleY=c.scaleY-a.scaleY;this.skewX=c.skewX-a.skewX;this.skewY=c.skewY-a.skewY;this.isUseColorInfo||a.isUseColorInfo||c.isUseColorInfo?(this.a=c.a-a.a,this.r=c.r-a.r,this.g=c.g-a.g,this.b=c.b-a.b,this.isUseColorInfo=!0):(this.a=this.r=
this.g=this.b=0,this.isUseColorInfo=!1);d&&(this.skewX>ccs.M_PI&&(this.skewX-=ccs.DOUBLE_PI),this.skewX<-ccs.M_PI&&(this.skewX+=ccs.DOUBLE_PI),this.skewY>ccs.M_PI&&(this.skewY-=ccs.DOUBLE_PI),this.skewY<-ccs.M_PI&&(this.skewY+=ccs.DOUBLE_PI));c.tweenRotate&&(this.skewX+=2*c.tweenRotate*ccs.PI,this.skewY-=2*c.tweenRotate*ccs.PI)}});
ccs.DisplayData=ccs.Class.extend({displayType:ccs.DISPLAY_TYPE_MAX,displayName:"",ctor:function(){this.displayType=ccs.DISPLAY_TYPE_MAX},changeDisplayToTexture:function(a){var c=a.lastIndexOf(".");-1!=c&&(a=a.substring(0,c));return a},copy:function(a){this.displayName=a.displayName;this.displayType=a.displayType}});
ccs.SpriteDisplayData=ccs.DisplayData.extend({skinData:null,ctor:function(){this.skinData=new ccs.BaseData;this.displayType=ccs.DISPLAY_TYPE_SPRITE},copy:function(a){ccs.DisplayData.prototype.copy.call(this,a);this.skinData=a.skinData},SpriteDisplayData:function(){this.displayType=ccs.DISPLAY_TYPE_SPRITE}});ccs.ArmatureDisplayData=ccs.DisplayData.extend({displayName:"",ctor:function(){this.displayName="";this.displayType=ccs.DISPLAY_TYPE_ARMATURE}});
ccs.ParticleDisplayData=ccs.DisplayData.extend({ctor:function(){this.displayType=ccs.DISPLAY_TYPE_PARTICLE}});ccs.BoneData=ccs.BaseData.extend({displayDataList:null,name:"",parentName:"",boneDataTransform:null,ctor:function(){this.displayDataList=[];this.parentName=this.name="";this.boneDataTransform=null},init:function(){this.displayDataList.length=0;return!0},addDisplayData:function(a){this.displayDataList.push(a)},getDisplayData:function(a){return this.displayDataList[a]}});
ccs.ArmatureData=ccs.Class.extend({boneDataDic:null,name:"",dataVersion:0.1,ctor:function(){this.boneDataDic={};this.name="";this.dataVersion=0.1},init:function(){return!0},addBoneData:function(a){this.boneDataDic[a.name]=a},getBoneDataDic:function(){return this.boneDataDic},getBoneData:function(a){return this.boneDataDic[a]}});
ccs.FrameData=ccs.BaseData.extend({duration:0,tweenEasing:0,easingParamNumber:0,easingParams:null,displayIndex:-1,movement:"",event:"",sound:"",soundEffect:"",blendFunc:0,frameID:0,isTween:!0,ctor:function(){ccs.BaseData.prototype.ctor.call(this);this.duration=1;this.tweenEasing=ccs.TweenType.linear;this.easingParamNumber=0;this.easingParams=[];this.displayIndex=0;this.soundEffect=this.sound=this.event=this.movement="";this.blendFunc=new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST);this.frameID=0;this.isTween=
!0},copy:function(a){ccs.BaseData.prototype.copy.call(this,a);this.duration=a.duration;this.displayIndex=a.displayIndex;this.tweenEasing=a.tweenEasing;this.easingParamNumber=a.easingParamNumber;if(0!=this.easingParamNumber)for(var c=0;c<this.easingParamNumber;c++)this.easingParams[c]=a.easingParams[c];this.blendFunc=a.blendFunc;this.isTween=a.isTween}});
ccs.MovementBoneData=ccs.Class.extend({delay:0,scale:1,duration:0,frameList:null,name:"",ctor:function(){this.delay=0;this.scale=1;this.duration=0;this.frameList=[];this.name=""},init:function(){return!0},addFrameData:function(a){this.frameList.push(a)},getFrameData:function(a){return this.frameList[a]}});ccs.MovementData=function(){this.name="";this.duration=0;this.scale=1;this.durationTween=this.durationTo=0;this.loop=!0;this.tweenEasing=ccs.TweenType.linear;this.movBoneDataDic={}};
ccs.MovementData.prototype.addMovementBoneData=function(a){this.movBoneDataDic[a.name]=a};ccs.MovementData.prototype.getMovementBoneData=function(a){return this.movBoneDataDic[a]};ccs.AnimationData=function(){this.movementDataDic={};this.movementNames=[];this.name=""};ccs.AnimationData.prototype.addMovement=function(a){this.movementDataDic[a.name]=a;this.movementNames.push(a.name)};ccs.AnimationData.prototype.getMovement=function(a){return this.movementDataDic[a]};
ccs.AnimationData.prototype.getMovementCount=function(){return Object.keys(this.movementDataDic).length};ccs.ContourVertex2=function(a,c){this.x=a||0;this.y=c||0};ccs.ContourData=function(){this.vertexList=[]};ccs.ContourData.prototype.init=function(){this.vertexList.length=0;return!0};ccs.ContourData.prototype.addVertex=function(a){this.vertexList.push(a)};ccs.TextureData=function(){this.width=this.height=0;this.pivotY=this.pivotX=0.5;this.name="";this.contourDataList=[]};
ccs.TextureData.prototype.init=function(){this.contourDataList.length=0};ccs.TextureData.prototype.addContourData=function(a){this.contourDataList.push(a)};ccs.TextureData.prototype.getContourData=function(a){return this.contourDataList[a]};ccs.DecorativeDisplay=ccs.Class.extend({_display:null,_colliderDetector:null,_displayData:null,ctor:function(){this._displayData=this._colliderDetector=this._display=null},init:function(){return!0},setDisplay:function(a){this._display=a},getDisplay:function(){return this._display},setColliderDetector:function(a){this._colliderDetector=a},getColliderDetector:function(){return this._colliderDetector},setDisplayData:function(a){this._displayData=a},getDisplayData:function(){return this._displayData},
release:function(){this._colliderDetector=this._displayData=this._display=null}});ccs.DecorativeDisplay.create=function(){var a=new ccs.DecorativeDisplay;return a&&a.init()?a:null};ccs.displayFactory={addDisplay:function(a,c,d){switch(d.displayType){case ccs.DISPLAY_TYPE_SPRITE:this.addSpriteDisplay(a,c,d);break;case ccs.DISPLAY_TYPE_PARTICLE:this.addParticleDisplay(a,c,d);break;case ccs.DISPLAY_TYPE_ARMATURE:this.addArmatureDisplay(a,c,d)}},createDisplay:function(a,c){switch(c.getDisplayData().displayType){case ccs.DISPLAY_TYPE_SPRITE:this.createSpriteDisplay(a,c);break;case ccs.DISPLAY_TYPE_PARTICLE:this.createParticleDisplay(a,c);break;case ccs.DISPLAY_TYPE_ARMATURE:this.createArmatureDisplay(a,
c)}},_helpTransform:{a:1,b:0,c:0,d:1,tx:0,ty:0},updateDisplay:function(a,c,d){var e=a.getDisplayRenderNode();if(e){switch(a.getDisplayRenderNodeType()){case ccs.DISPLAY_TYPE_SPRITE:d&&e.updateArmatureTransform();break;case ccs.DISPLAY_TYPE_PARTICLE:this.updateParticleDisplay(a,e,c);break;case ccs.DISPLAY_TYPE_ARMATURE:this.updateArmatureDisplay(a,e,c);break;default:c=a.getNodeToArmatureTransform(),e.setAdditionalTransform(c)}if((ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT||ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX)&&
d)if(e=a.getDisplayManager().getCurrentDecorativeDisplay(),d=e.getColliderDetector()){c=e.getDisplay();var f=c.nodeToParentTransform(),e=this._helpTransform;e.a=f.a;e.b=f.b;e.c=f.c;e.d=f.d;e.tx=f.tx;e.ty=f.ty;c=cc.pointApplyAffineTransform(c.getAnchorPointInPoints(),e);e.tx=c.x;e.ty=c.y;a=cc.affineTransformConcat(e,a.getArmature().nodeToParentTransform());d.updateTransform(a)}}},addSpriteDisplay:function(a,c,d){var e=new ccs.SpriteDisplayData;e.copy(d);c.setDisplayData(e);this.createSpriteDisplay(a,
c)},createSpriteDisplay:function(a,c){var d=null,e=c.getDisplayData(),d=e.displayName,f=d.lastIndexOf(".");-1!=f&&(d=d.substring(0,f));d=""==d?ccs.Skin.create():ccs.Skin.createWithSpriteFrameName(d+".png");c.setDisplay(d);null!=d&&(d.setBone(a),this.initSpriteDisplay(a,c,e.displayName,d),(f=a.getArmature())&&(f.getArmatureData().dataVersion>=ccs.CONST_VERSION_COMBINED?d.setSkinData(e.skinData):d.setSkinData(a.boneData)))},initSpriteDisplay:function(a,c,d,e){var f=d.lastIndexOf(".");-1!=f&&(d=d.substring(0,
f));(d=ccs.armatureDataManager.getTextureData(d))&&e.setAnchorPoint(cc.p(d.pivotX,d.pivotY));if((ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT||ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX)&&d&&0<d.contourDataList.length)a=ccs.ColliderDetector.create(a),a.addContourDataList(d.contourDataList),c.setColliderDetector(a)},addArmatureDisplay:function(a,c,d){var e=new ccs.ArmatureDisplayData;e.copy(d);c.setDisplayData(e);this.createArmatureDisplay(a,c)},createArmatureDisplay:function(a,c){var d=c.getDisplayData(),d=
ccs.Armature.create(d.displayName,a);c.setDisplay(d)},updateArmatureDisplay:function(a,c,d){c&&(c.sortAllChildren(),c.update(d))},addParticleDisplay:function(a,c,d){var e=new ccs.ParticleDisplayData;e.copy(d);c.setDisplayData(e);this.createParticleDisplay(a,c)},createParticleDisplay:function(a,c){var d=c.getDisplayData(),d=cc.ParticleSystem.create(d.displayName);d.removeFromParent();d.cleanup();a.getArmature()&&d.setParent(a.getArmature());c.setDisplay(d)},updateParticleDisplay:function(a,c,d){var e=
new ccs.BaseData;ccs.TransformHelp.matrixToNode(a.nodeToArmatureTransform(),e);c.setPosition(e.x,e.y);c.setScaleX(e.scaleX);c.setScaleY(e.scaleY);c.update(d)}};ccs.DisplayManager=ccs.Class.extend({_decoDisplayList:null,_currentDecoDisplay:null,_displayRenderNode:null,_displayIndex:null,_forceChangeDisplay:!1,_bone:null,_visible:!0,_displayType:null,ctor:function(){this._decoDisplayList=[];this._displayIndex=this._displayRenderNode=this._currentDecoDisplay=null;this._forceChangeDisplay=!1;this._bone=null;this._visible=!0;this._displayType=ccs.DISPLAY_TYPE_MAX},init:function(a){this._bone=a;this.initDisplayList(a.getBoneData());return!0},addDisplay:function(a,
c){var d,e=this._decoDisplayList;0<=c&&c<e.length?d=e[c]:(d=ccs.DecorativeDisplay.create(),e.push(d));if(a instanceof ccs.DisplayData)cc.displayFactory.addDisplay(this._bone,d,a);else{var f=null;if(a instanceof ccs.Skin){a.setBone(this._bone);f=new ccs.SpriteDisplayData;ccs.displayFactory.initSpriteDisplay(this._bone,d,a.getDisplayName(),a);var g=d.getDisplayData();if(g instanceof ccs.SpriteDisplayData)a.setSkinData(g.skinData),f.skinData=g.skinData;else{for(var g=!1,h=e.length-2;0<=h;h--){var k=
e[h].getDisplayData();if(k instanceof ccs.SpriteDisplayData){g=!0;a.setSkinData(k.skinData);f.skinData=k.skinData;break}}g||a.setSkinData(new ccs.BaseData)}}else a instanceof cc.ParticleSystem?(f=new ccs.ParticleDisplayData,a.removeFromParent(),a.cleanup(),(e=this._bone.getArmature())&&a.setParent(e)):a instanceof ccs.Armature?(f=new ccs.ArmatureDisplayData,f.displayName=a.getName(),a.setParentBone(this._bone)):f=new ccs.DisplayData;d.setDisplay(a);d.setDisplayData(f)}c==this._displayIndex&&(this._displayIndex=
-1,this.changeDisplayWithIndex(c,!1))},_addDisplayOther:function(a,c){var d=null;if(c instanceof ccs.Skin){c.setBone(this._bone);d=new ccs.SpriteDisplayData;d.displayName=c.getDisplayName();ccs.displayFactory.initSpriteDisplay(this._bone,a,c.getDisplayName(),c);var e=a.getDisplayData();if(e instanceof ccs.SpriteDisplayData)c.setSkinData(e.skinData);else{for(var e=!1,f=this._decoDisplayList.length-2;0<=f;f--){var g=this._decoDisplayList[f].getDisplayData();if(g){e=!0;c.setSkinData(g.skinData);d.skinData=
g.skinData;break}}e||c.setSkinData(new ccs.BaseData);c.setSkinData(new ccs.BaseData)}}else c instanceof cc.ParticleSystem?(d=new ccs.ParticleDisplayData,d.displayName=c._plistFile):c instanceof ccs.Armature?(d=new ccs.ArmatureDisplayData,d.displayName=c.getName(),c.setParentBone(this._bone)):d=new ccs.DisplayData;a.setDisplay(c);a.setDisplayData(d)},removeDisplay:function(a){this._decoDisplayList.splice(a,1);a===this._displayIndex&&(this.setCurrentDecorativeDisplay(null),this._displayIndex=-1)},getDecorativeDisplayList:function(){return this._decoDisplayList},
changeDisplayWithIndex:function(a,c){a>=this._decoDisplayList.length?cc.log("the index value is out of range"):(this._forceChangeDisplay=c,this._displayIndex!=a&&(this._displayIndex=a,0>a?this._displayRenderNode&&(this._displayRenderNode.removeFromParent(!0),this.setCurrentDecorativeDisplay(null)):this.setCurrentDecorativeDisplay(this._decoDisplayList[a])))},changeDisplayWithName:function(a,c){for(var d=this._decoDisplayList,e=0;e<d.length;e++)if(d[e].getDisplayData().displayName==a){this.changeDisplayWithIndex(e,
c);break}},setCurrentDecorativeDisplay:function(a){var c=this._currentDecoDisplay;(ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT||ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX)&&c&&c.getColliderDetector()&&c.getColliderDetector().setActive(!1);c=this._currentDecoDisplay=a;(ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT||ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX)&&c&&c.getColliderDetector()&&c.getColliderDetector().setActive(!0);a=!c?null:c.getDisplay();var c=this._displayRenderNode,d=this._bone;c&&(c instanceof ccs.Armature&&
d.setChildArmature(null),c.removeFromParent(!0));(this._displayRenderNode=a)?(a instanceof ccs.Armature?(this._bone.setChildArmature(a),a.setParentBone(this._bone)):a instanceof cc.ParticleSystem&&(a instanceof ccs.Armature?(d.setChildArmature(a),a.setParentBone(d)):a instanceof cc.ParticleSystem&&a.resetSystem()),a.setColor(d.getDisplayedColor()),a.setOpacity(d.getDisplayedOpacity()),this._displayRenderNode.setVisible(this._visible),this._displayType=this._currentDecoDisplay.getDisplayData().displayType):
this._displayType=ccs.DISPLAY_TYPE_MAX},getDisplayRenderNode:function(){return this._displayRenderNode},getDisplayRenderNodeType:function(){return this._displayType},getCurrentDisplayIndex:function(){return this._displayIndex},getCurrentDecorativeDisplay:function(){return this._currentDecoDisplay},getDecorativeDisplayByIndex:function(a){return this._decoDisplayList[a]},initDisplayList:function(a){this._decoDisplayList.length=0;if(a){a=a.displayDataList;for(var c=this._decoDisplayList,d=this._bone,
e=0;e<a.length;e++){var f=a[e],g=ccs.DecorativeDisplay.create();g.setDisplayData(f);ccs.displayFactory.createDisplay(d,g);c.push(g)}}},containPoint:function(a,c){if(!this._visible||0>this._displayIndex)return!1;void 0!==c&&(a=cc.p(a,c));if(this._currentDecoDisplay.getDisplayData().displayType==ccs.DISPLAY_TYPE_SPRITE){var d=this._currentDecoDisplay.getDisplay(),d=d.getChildByTag(0);return ccs.SPRITE_CONTAIN_POINT_WITH_RETURN(d,a)}return!1},setVisible:function(a){this._displayRenderNode&&(this._visible=
a,this._displayRenderNode.setVisible(a))},isVisible:function(){return this._visible},getContentSize:function(){return!this._displayRenderNode?cc.size(0,0):this._displayRenderNode.getContentSize()},getBoundingBox:function(){return!this._displayRenderNode?cc.rect(0,0,0,0):this._displayRenderNode.getBoundingBox()},getAnchorPoint:function(){return!this._displayRenderNode?cc.p(0,0):this._displayRenderNode.getAnchorPoint()},getAnchorPointInPoints:function(){return!this._displayRenderNode?cc.p(0,0):this._displayRenderNode.getAnchorPointInPoints()},
getForceChangeDisplay:function(){return this._forceChangeDisplay},release:function(){this._decoDisplayList=null;this._displayRenderNode&&(this._displayRenderNode.removeFromParent(!0),this._displayRenderNode=null)}});ccs.DisplayManager.create=function(a){var c=new ccs.DisplayManager;return c&&c.init(a)?c:null};ccs.Skin=ccs.Sprite.extend({_skinData:null,bone:null,_skinTransform:null,_displayName:"",_armature:null,_className:"Skin",ctor:function(){cc.Sprite.prototype.ctor.call(this);this.bone=this._skinData=null;this._displayName="";this._skinTransform=cc.affineTransformIdentity();this._armature=null},initWithSpriteFrameName:function(a){if(""==a)return!1;var c=cc.spriteFrameCache.getSpriteFrame(a),d=!0;c?this.initWithSpriteFrame(c):(cc.log("Can't find CCSpriteFrame with %s. Please check your .plist file",
a),d=!1);this._displayName=a;return d},initWithFile:function(a){var c=cc.Sprite.prototype.initWithFile.call(this,a);this._displayName=a;return c},setSkinData:function(a){this._skinData=a;this.setScaleX(a.scaleX);this.setScaleY(a.scaleY);this.setRotationX(cc.radiansToDegrees(a.skewX));this.setRotationY(cc.radiansToDegrees(-a.skewY));this.setPosition(a.x,a.y);a=this.getNodeToParentTransform?this.getNodeToParentTransform():this.nodeToParentTransform();var c=this._skinTransform;c.a=a.a;c.b=a.b;c.c=a.c;
c.d=a.d;c.tx=a.tx;c.ty=a.ty;this.updateArmatureTransform()},getSkinData:function(){return this._skinData},updateArmatureTransform:function(){this._transform=cc.affineTransformConcat(this._skinTransform,this.bone.getNodeToArmatureTransform())},_updateTransformForWebGL:function(){var a=this._quad;if(this._visible){var c=this.getNodeToParentTransform?this.getNodeToParentTransform():this.nodeToParentTransform(),d=this._rect,e=this._offsetPosition.x,f=this._offsetPosition.y,g=e+d.width,h=f+d.height,k=
c.tx,l=c.ty,m=c.a,p=c.b,n=c.d,r=-c.c,c=e*m-f*r+k,d=e*p+f*n+l,q=g*m-f*r+k,f=g*p+f*n+l,s=g*m-h*r+k,g=g*p+h*n+l,k=e*m-h*r+k,e=e*p+h*n+l,h=this._vertexZ;cc.SPRITEBATCHNODE_RENDER_SUBPIXEL||(c|=0,d|=0,q|=0,f|=0,s|=0,g|=0,k|=0,e|=0);this.SET_VERTEX3F(a.bl.vertices,c,d,h);this.SET_VERTEX3F(a.br.vertices,q,f,h);this.SET_VERTEX3F(a.tl.vertices,k,e,h);this.SET_VERTEX3F(a.tr.vertices,s,g,h)}else a.br.vertices=a.tl.vertices=a.tr.vertices=a.bl.vertices={x:0,y:0,z:0};this._textureAtlas&&this._textureAtlas.updateQuad(a,
this._textureAtlas.getTotalQuads());this._quadDirty=!0},SET_VERTEX3F:function(a,c,d,e){a.x=c;a.y=d;a.z=e},RENDER_IN_SUBPIXEL:function(a){return cc.SPRITEBATCHNODE_RENDER_SUBPIXEL?a:Math.ceil(a)},getNodeToWorldTransform:function(){return cc.affineTransformConcat(this._transform,this.bone.getArmature().getNodeToWorldTransform())},getNodeToWorldTransformAR:function(){var a=this._transform;this._anchorPointInPoints=cc.pointApplyAffineTransform(this._anchorPointInPoints,a);a.tx=this._anchorPointInPoints.x;
a.ty=this._anchorPointInPoints.y;return cc.affineTransformConcat(a,this.bone.getArmature().nodeToWorldTransform())},setBone:function(a){this.bone=a;if(a=this.bone.getArmature())this._armature=a},getBone:function(){return this.bone},getDisplayName:function(){return this._displayName}});cc._renderType==cc._RENDER_TYPE_WEBGL&&(ccs.Skin.prototype.updateTransform=ccs.Skin.prototype._updateTransformForWebGL);var _p=ccs.Skin.prototype;cc.defineGetterSetter(_p,"skinData",_p.getSkinData,_p.setSkinData);
cc.defineGetterSetter(_p,"displayName",_p.getDisplayName);_p=null;ccs.Skin.create=function(a,c){var d=arguments.length,e=new ccs.Skin;if(0===d||null==a||""==a){if(e.init())return e}else if("#"==a[0]){if(e&&e.initWithSpriteFrameName(a))return e}else if(e&&e.initWithFile(a,c))return e;return null};ccs.Skin.createWithSpriteFrameName=function(a){var c=new ccs.Skin;return c&&c.initWithSpriteFrameName(a)?c:null};ccs.ANIMATION_TYPE_SINGLE_FRAME=-4;ccs.ANIMATION_TYPE_NO_LOOP=-3;ccs.ANIMATION_TYPE_TO_LOOP_FRONT=-2;ccs.ANIMATION_TYPE_TO_LOOP_BACK=-1;ccs.ANIMATION_TYPE_LOOP_FRONT=0;ccs.ANIMATION_TYPE_LOOP_BACK=1;ccs.ANIMATION_TYPE_MAX=2;
ccs.ProcessBase=ccs.Class.extend({_processScale:1,_isComplete:!0,_isPause:!0,_isPlaying:!1,_currentPercent:0,_rawDuration:0,_loopType:0,_tweenEasing:0,animationInternal:null,_currentFrame:0,_durationTween:0,_nextFrameIndex:0,_curFrameIndex:null,_isLoopBack:!1,ctor:function(){this._processScale=1;this._isPause=this._isComplete=!0;this._isPlaying=!1;this._rawDuration=this._durationTween=this._currentPercent=this._currentFrame=0;this._loopType=ccs.ANIMATION_TYPE_LOOP_BACK;this._tweenEasing=ccs.TweenType.linear;
this.animationInternal=1/60;this._durationTween=this._curFrameIndex=0;this._isLoopBack=!1},pause:function(){this._isPause=!0;this._isPlaying=!1},resume:function(){this._isPause=!1;this._isPlaying=!0},stop:function(){this._isComplete=!0;this._isPlaying=!1},play:function(a,c,d,e){this._isPause=this._isComplete=!1;this._isPlaying=!0;this._currentFrame=0;this._nextFrameIndex=a;this._tweenEasing=e},update:function(a){if(!this._isComplete&&!this._isPause&&!(0>=this._rawDuration||1<a)){var c=void 0===this._nextFrameIndex?
0:this._nextFrameIndex,d=this._currentFrame;0>=c?(this._currentPercent=1,d=0):(d+=this._processScale*(a/this.animationInternal),this._currentPercent=d/c,d=ccs.fmodf(d,c));this._currentFrame=d;this.updateHandler()}},gotoFrame:function(a){var c=this._loopType;c==ccs.ANIMATION_TYPE_NO_LOOP?c=ccs.ANIMATION_TYPE_MAX:c==ccs.ANIMATION_TYPE_TO_LOOP_FRONT&&(c=ccs.ANIMATION_TYPE_LOOP_FRONT);this._loopType=c;this._curFrameIndex=a;this._nextFrameIndex=this._durationTween},getCurrentFrameIndex:function(){return this._curFrameIndex=
(this._rawDuration-1)*this._currentPercent},updateHandler:function(){},isPause:function(){return this._isPause},isComplete:function(){return this._isComplete},getCurrentPercent:function(){return this._currentPercent},getRawDuration:function(){return this._rawDuration},getLoop:function(){return this._loopType},getTweenEasing:function(){return this._tweenEasing},getAnimationInternal:function(){return this.animationInternal},setAnimationInternal:function(a){this.animationInternal=a},getProcessScale:function(){return this._processScale},
setProcessScale:function(a){this._processScale=a},isPlaying:function(){return this._isPlaying}});_p=ccs.ProcessBase.prototype;cc.defineGetterSetter(_p,"currentFrameIndex",_p.getCurrentFrameIndex);cc.defineGetterSetter(_p,"paused",_p.isPause);cc.defineGetterSetter(_p,"completed",_p.isComplete);cc.defineGetterSetter(_p,"currentPercent",_p.getCurrentPercent);cc.defineGetterSetter(_p,"rawDuration",_p.getRawDuration);cc.defineGetterSetter(_p,"loop",_p.getLoop);cc.defineGetterSetter(_p,"tweenEasing",_p.getTweenEasing);
cc.defineGetterSetter(_p,"playing",_p.isPlaying);_p=null;ccs.MovementEventType={start:0,complete:1,loopComplete:2};ccs.AnimationEvent=ccs.Class.extend({_arguments:null,_callFunc:null,_selectorTarget:null,ctor:function(a,c,d){this._data=d;this._callFunc=a;this._selectorTarget=c},call:function(){this._callFunc&&this._callFunc.apply(this._selectorTarget,this._arguments)},setArguments:function(a){this._arguments=a}});ccs.MovementEvent=function(){this.armature=null;this.movementID=this.movementType=""};
ccs.FrameEvent=function(){this.bone=null;this.frameEventName="";this.currentFrameIndex=this.originFrameIndex=0};
ccs.ArmatureAnimation=ccs.ProcessBase.extend({_animationData:null,_movementData:null,_armature:null,_movementID:"",_toIndex:0,_tweenList:null,_speedScale:1,_ignoreFrameEvent:!1,_frameEventQueue:null,_movementEventQueue:null,_movementList:null,_onMovementList:!1,_movementListLoop:!1,_movementIndex:0,_movementListDurationTo:-1,_movementEventCallFunc:null,_frameEventCallFunc:null,_movementEventTarget:null,_frameEventTarget:null,_movementEventListener:null,_frameEventListener:null,ctor:function(){ccs.ProcessBase.prototype.ctor.call(this);
this._tweenList=[];this._movementList=[];this._frameEventQueue=[];this._movementEventQueue=[]},init:function(a){this._armature=a;this._tweenList.length=0;return!0},pause:function(){for(var a=this._tweenList,c=0;c<a.length;c++)a[c].pause();ccs.ProcessBase.prototype.pause.call(this)},resume:function(){for(var a=this._tweenList,c=0;c<a.length;c++)a[c].resume();ccs.ProcessBase.prototype.resume.call(this)},stop:function(){for(var a=this._tweenList,c=0;c<a.length;c++)a[c].stop();a.length=0;ccs.ProcessBase.prototype.stop.call(this)},
setAnimationScale:function(a){return this.setSpeedScale(a)},getAnimationScale:function(){return this.getSpeedScale()},setSpeedScale:function(a){if(a!=this._speedScale){this._speedScale=a;this._processScale=!this._movementData?this._speedScale:this._speedScale*this._movementData.scale;a=this._armature.getBoneDic();for(var c in a){var d=a[c];d.getTween().setProcessScale(this._processScale);d.getChildArmature()&&d.getChildArmature().getAnimation().setProcessScale(this._processScale)}}},getSpeedScale:function(){return this._speedScale},
play:function(a,c,d){cc.assert(this._animationData,"this.animationData can not be null");this._movementData=this._animationData.getMovement(a);cc.assert(this._movementData,"this._movementData can not be null");c=void 0===c?-1:c;d=void 0===d?-1:d;this._rawDuration=this._movementData.duration;this._movementID=a;this._processScale=this._speedScale*this._movementData.scale;c=-1==c?this._movementData.durationTo:c;a=0==this._movementData.durationTween?this._rawDuration:this._movementData.durationTween;
var e=this._movementData.tweenEasing;d=!d||0>d?this._movementData.loop:d;this._onMovementList=!1;ccs.ProcessBase.prototype.play.call(this,c,a,d,e);0==this._rawDuration?this._loopType=ccs.ANIMATION_TYPE_SINGLE_FRAME:(this._loopType=d?ccs.ANIMATION_TYPE_TO_LOOP_FRONT:ccs.ANIMATION_TYPE_NO_LOOP,this._durationTween=a);var f;this._tweenList=[];var g=this._armature.getBoneDic(),h;for(h in g){var k=g[h];f=this._movementData.movBoneDataDic[k.getName()];var l=k.getTween();f&&0<f.frameList.length?(this._tweenList.push(l),
f.duration=this._movementData.duration,l.play(f,c,a,d,e),l.setProcessScale(this._processScale),k.getChildArmature()&&k.getChildArmature().getAnimation().setProcessScale(this._processScale)):k.isIgnoreMovementBoneData()||(k.getDisplayManager().changeDisplayWithIndex(-1,!1),l.stop())}this._armature.update(0)},playByIndex:function(a,c,d,e,f){cc.log("playByIndex is deprecated. Use playWithIndex instead.");this.playWithIndex(a,c,e)},playWithIndex:function(a,c,d){var e=this._animationData.movementNames;
cc.assert(-1<a&&a<e.length);this.play(e[a],c,d)},playWithNames:function(a,c,d){this._movementListLoop=void 0===d?!0:d;this._movementListDurationTo=void 0===c?-1:c;this._onMovementList=!0;this._movementIndex=0;a instanceof Array?this._movementList=a:this._movementList.length=0;this.updateMovementList()},playWithIndexes:function(a,c,d){this._movementList.length=0;this._movementListLoop=void 0===d?!0:d;this._movementListDurationTo=void 0===c?-1:c;this._onMovementList=!0;this._movementIndex=0;c=this._animationData.movementNames;
for(d=0;d<a.length;d++)this._movementList.push(c[a[d]]);this.updateMovementList()},gotoAndPlay:function(a){if(!this._movementData||0>a||a>=this._movementData.duration)cc.log("Please ensure you have played a movement, and the frameIndex is in the range.");else{var c=this._ignoreFrameEvent;this._isPlaying=this._ignoreFrameEvent=!0;this._isComplete=this._isPause=!1;ccs.ProcessBase.prototype.gotoFrame.call(this,a);this._currentPercent=this._curFrameIndex/(this._movementData.duration-1);this._currentFrame=
this._nextFrameIndex*this._currentPercent;for(var d=this._tweenList,e=0;e<d.length;e++)d[e].gotoAndPlay(a);this._armature.update(0);this._ignoreFrameEvent=c}},gotoAndPause:function(a){this.gotoAndPlay(a);this.pause()},getMovementCount:function(){return this._animationData.getMovementCount()},update:function(a){ccs.ProcessBase.prototype.update.call(this,a);for(var c=this._tweenList,d=0;d<c.length;d++)c[d].update(a);for(c=this._frameEventQueue;0<c.length;)a=c.shift(),this._ignoreFrameEvent=!0,this._frameEventCallFunc&&
this._frameEventCallFunc.call(this._frameEventTarget,a.bone,a.frameEventName,a.originFrameIndex,a.currentFrameIndex),this._frameEventListener&&this._frameEventListener(a.bone,a.frameEventName,a.originFrameIndex,a.currentFrameIndex),this._ignoreFrameEvent=!1;for(c=this._movementEventQueue;0<c.length;)a=c.shift(),this._movementEventCallFunc&&this._movementEventCallFunc.call(this._movementEventTarget,a.armature,a.movementType,a.movementID),this._movementEventListener&&this._movementEventListener(a.armature,
a.movementType,a.movementID)},updateHandler:function(){var a=this._currentPercent;if(1<=a){switch(this._loopType){case ccs.ANIMATION_TYPE_NO_LOOP:this._loopType=ccs.ANIMATION_TYPE_MAX;this._currentFrame=(a-1)*this._nextFrameIndex;a=this._currentFrame/this._durationTween;if(1>a){this._nextFrameIndex=this._durationTween;this.movementEvent(this._armature,ccs.MovementEventType.start,this._movementID);break}break;case ccs.ANIMATION_TYPE_MAX:case ccs.ANIMATION_TYPE_SINGLE_FRAME:a=1;this._isComplete=!0;
this._isPlaying=!1;this.movementEvent(this._armature,ccs.MovementEventType.complete,this._movementID);this.updateMovementList();break;case ccs.ANIMATION_TYPE_TO_LOOP_FRONT:this._loopType=ccs.ANIMATION_TYPE_LOOP_FRONT;a=ccs.fmodf(a,1);this._currentFrame=0==this._nextFrameIndex?0:ccs.fmodf(this._currentFrame,this._nextFrameIndex);this._nextFrameIndex=0<this._durationTween?this._durationTween:1;this.movementEvent(this,ccs.MovementEventType.start,this._movementID);break;default:this._currentFrame=ccs.fmodf(this._currentFrame,
this._nextFrameIndex),this._toIndex=0,this.movementEvent(this._armature,ccs.MovementEventType.loopComplete,this._movementID)}this._currentPercent=a}},getCurrentMovementID:function(){return this._isComplete?"":this._movementID},setMovementEventCallFunc:function(a,c){1==arguments.length?this._frameEventListener=c:2==arguments.length&&(this._movementEventTarget=c,this._movementEventCallFunc=a)},setFrameEventCallFunc:function(a,c){1==arguments.length?this._frameEventListener=c:2==arguments.length&&(this._frameEventTarget=
c,this._frameEventCallFunc=a)},setUserObject:function(a){this._userObject=a},frameEvent:function(a,c,d,e){if(this._frameEventTarget&&this._frameEventCallFunc||this._frameEventListener){var f=new ccs.FrameEvent;f.bone=a;f.frameEventName=c;f.originFrameIndex=d;f.currentFrameIndex=e;this._frameEventQueue.push(f)}},movementEvent:function(a,c,d){if(this._movementEventTarget&&this._movementEventCallFunc||this._movementEventListener){var e=new ccs.MovementEvent;e.armature=a;e.movementType=c;e.movementID=
d;this._movementEventQueue.push(e)}},updateMovementList:function(){if(this._onMovementList){var a,c=this._movementList;this._movementListLoop?(a=c[this._movementIndex],this.play(a,a.durationTo,0),this._movementIndex++,this._movementIndex>=c.length&&(this._movementIndex=0)):this._movementIndex<c.length?(a=c[this._movementIndex],this.play(a,a.durationTo,0),this._movementIndex++):this._onMovementList=!1;this._onMovementList=!0}},setAnimationData:function(a){this._animationData!=a&&(this._animationData=
a)},getAnimationData:function(){return this._animationData},getUserObject:function(){return this._userObject},isIgnoreFrameEvent:function(){return this._ignoreFrameEvent}});_p=ccs.ArmatureAnimation.prototype;cc.defineGetterSetter(_p,"speedScale",_p.getSpeedScale,_p.setSpeedScale);cc.defineGetterSetter(_p,"animationScale",_p.getAnimationScale,_p.setAnimationScale);_p=null;ccs.ArmatureAnimation.create=function(a){var c=new ccs.ArmatureAnimation;return c&&c.init(a)?c:null};ccs.Tween=ccs.ProcessBase.extend({_tweenData:null,_to:null,_from:null,_between:null,_movementBoneData:null,_bone:null,_frameTweenEasing:0,_betweenDuration:0,_totalDuration:0,_toIndex:0,_fromIndex:0,_animation:null,_passLastFrame:!1,ctor:function(){ccs.ProcessBase.prototype.ctor.call(this);this._frameTweenEasing=ccs.TweenType.linear},init:function(a){this._from=new ccs.FrameData;this._between=new ccs.FrameData;this._bone=a;this._tweenData=this._bone.getTweenData();this._tweenData.displayIndex=-1;this._animation=
null!=this._bone.getArmature()?this._bone.getArmature().getAnimation():null;return!0},play:function(a,c,d,e,f){ccs.ProcessBase.prototype.play.call(this,c,d,e,f);this._loopType=e?ccs.ANIMATION_TYPE_TO_LOOP_FRONT:ccs.ANIMATION_TYPE_NO_LOOP;this._fromIndex=this._toIndex=this._betweenDuration=this._totalDuration=0;f=a!=this._movementBoneData;this.setMovementBoneData(a);this._rawDuration=this._movementBoneData.duration;a=this._movementBoneData.getFrameData(0);this._tweenData.displayIndex=a.displayIndex;
this._bone.getArmature().getArmatureData().dataVersion>=ccs.CONST_VERSION_COMBINED&&(ccs.TransformHelp.nodeSub(this._tweenData,this._bone.getBoneData()),this._tweenData.scaleX+=1,this._tweenData.scaleY+=1);0==this._rawDuration?(this._loopType=ccs.ANIMATION_TYPE_SINGLE_FRAME,0==c?this.setBetween(a,a):this.setBetween(this._tweenData,a),this._frameTweenEasing=ccs.TweenType.linear):1<this._movementBoneData.frameList.length&&(this._durationTween=d*this._movementBoneData.scale,e&&0!=this._movementBoneData.delay?
this.setBetween(this._tweenData,this.tweenNodeTo(this.updateFrameData(1-this._movementBoneData.delay),this._between)):!f||0==c?this.setBetween(a,a):this.setBetween(this._tweenData,a));this.tweenNodeTo(0)},gotoAndPlay:function(a){ccs.ProcessBase.prototype.gotoFrame.call(this,a);this._fromIndex=this._toIndex=this._betweenDuration=this._totalDuration=0;this._isPlaying=!0;this._isComplete=this._isPause=!1;this._currentPercent=this._curFrameIndex/(this._rawDuration-1);this._currentFrame=this._nextFrameIndex*
this._currentPercent},gotoAndPause:function(a){this.gotoAndPlay(a);this.pause()},updateHandler:function(){var a=this._currentPercent||1,c=this._loopType;if(1<=a)switch(c){case ccs.ANIMATION_TYPE_SINGLE_FRAME:a=1;this._isComplete=!0;this._isPlaying=!1;break;case ccs.ANIMATION_TYPE_NO_LOOP:c=ccs.ANIMATION_TYPE_MAX;a=0>=this._durationTween?1:(a-1)*this._nextFrameIndex/this._durationTween;1<=a?(a=1,this._isComplete=!0,this._isPlaying=!1):(this._nextFrameIndex=this._durationTween,this._currentFrame=a*
this._nextFrameIndex,this._fromIndex=this._toIndex=this._betweenDuration=this._totalDuration=0);break;case ccs.ANIMATION_TYPE_TO_LOOP_FRONT:c=ccs.ANIMATION_TYPE_LOOP_FRONT;this._nextFrameIndex=0<this._durationTween?this._durationTween:1;0!=this._movementBoneData.delay?(this._currentFrame=(1-this._movementBoneData.delay)*this._nextFrameIndex,a=this._currentFrame/this._nextFrameIndex):this._currentFrame=a=0;this._fromIndex=this._toIndex=this._betweenDuration=this._totalDuration=0;break;case ccs.ANIMATION_TYPE_MAX:a=
1;this._isComplete=!0;this._isPlaying=!1;break;default:this._currentFrame=ccs.fmodf(this._currentFrame,this._nextFrameIndex)}1>a&&c<ccs.ANIMATION_TYPE_TO_LOOP_BACK&&(a=Math.sin(a*cc.PI/2));this._currentPercent=a;this._loopType=c;c>ccs.ANIMATION_TYPE_TO_LOOP_BACK&&(a=this.updateFrameData(a));this._frameTweenEasing!=ccs.TweenType.tweenEasingMax&&this.tweenNodeTo(a)},setBetween:function(a,c,d){void 0===d&&(d=!0);0>a.displayIndex&&0<=c.displayIndex?(this._from.copy(c),this._between.subtract(c,c,d)):0>
c.displayIndex&&0<=a.displayIndex?(this._from.copy(a),this._between.subtract(c,c,d)):(this._from.copy(a),this._between.subtract(a,c,d));a.isTween||(this._tweenData.copy(a),this._tweenData.isTween=!0);this.arriveKeyFrame(a)},arriveKeyFrame:function(a){if(a){var c=this._bone,d=c.getDisplayManager(),e=a.displayIndex;d.getForceChangeDisplay()||d.changeDisplayWithIndex(e,!1);this._tweenData.zOrder=a.zOrder;c.updateZOrder();this._bone.setBlendFunc(a.blendFunc);(c=c.getChildArmature())&&""!=a.movement&&
c.getAnimation().play(a.movement)}},tweenNodeTo:function(a,c){c||(c=this._tweenData);var d=this._from,e=this._between;d.isTween||(a=0);c.x=d.x+a*e.x;c.y=d.y+a*e.y;c.scaleX=d.scaleX+a*e.scaleX;c.scaleY=d.scaleY+a*e.scaleY;c.skewX=d.skewX+a*e.skewX;c.skewY=d.skewY+a*e.skewY;this._bone.setTransformDirty(!0);c&&e.isUseColorInfo&&this.tweenColorTo(a,c);return c},tweenColorTo:function(a,c){var d=this._from,e=this._between;c.a=d.a+a*e.a;c.r=d.r+a*e.r;c.g=d.g+a*e.g;c.b=d.b+a*e.b;this._bone.updateColor()},
updateFrameData:function(a){1<a&&0!=this._movementBoneData.delay&&(a=ccs.fmodf(a,1));a*=this._rawDuration-1;var c,d,e=this._totalDuration,f=this._betweenDuration,g=this._toIndex;if(a<e||a>=e+f){var f=this._movementBoneData.frameList,h=f.length;if(a<f[0].frameID)return c=d=f[0],this.setBetween(c,d),this._currentPercent;if(a>=f[h-1].frameID){if(this._passLastFrame)return c=d=f[h-1],this.setBetween(c,d),this._currentPercent;this._passLastFrame=!0}else this._passLastFrame=!1;do if(this._fromIndex=g,c=
f[this._fromIndex],e=c.frameID,g=this._fromIndex+1,g>=h&&(g=0),d=f[g],c.strEvent&&!this._animation.isIgnoreFrameEvent()&&this._animation.frameEvent(this._bone,c.strEvent,c.frameID,a),a==c.frameID||this._passLastFrame&&this._fromIndex==h-1)break;while(a<c.frameID||a>=d.frameID);f=d.frameID-c.frameID;this._frameTweenEasing=c.tweenEasing;this.setBetween(c,d,!1);this._totalDuration=e;this._betweenDuration=f;this._toIndex=g}a=0==f?0:(a-this._totalDuration)/this._betweenDuration;c=this._frameTweenEasing!=
ccs.TweenType.linear?this._frameTweenEasing:this._tweenEasing;c!=ccs.TweenType.tweenEasingMax&&(c!=ccs.TweenType.linear&&!this._passLastFrame)&&(a=ccs.TweenFunction.tweenTo(a,c,this._from.easingParams));return a},setAnimation:function(a){this._animation=a},getAnimation:function(){return this._animation},setMovementBoneData:function(a){this._movementBoneData=a}});_p=ccs.Tween.prototype;cc.defineGetterSetter(_p,"animation",_p.getAnimation,_p.setAnimation);_p=null;
ccs.Tween.create=function(a){var c=new ccs.Tween;return c&&c.init(a)?c:null};ccs.PT_RATIO=32;ccs.ColliderFilter=ccs.Class.extend({_collisionType:0,_group:0,_categoryBits:0,_groupIndex:0,_maskBits:0,ctor:function(a,c){this._collisionType=a||0;this._group=c||0},updateShape:function(a){if(a instanceof cp.Shape)a.collision_type=this._collisionType,a.group=this._group;else if(a instanceof Box2D.b2FilterData){var c=new Box2D.b2FilterData;c.categoryBits=this._categoryBits;c.groupIndex=this._groupIndex;c.maskBits=this._maskBits;a.SetFilterData(c)}}});
ccs.ColliderBody=ccs.Class.extend({shape:null,coutourData:null,colliderFilter:null,_calculatedVertexList:null,ctor:function(a){this.shape=null;this.coutourData=a;this.colliderFilter=new ccs.ColliderFilter;ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX&&(this._calculatedVertexList=[])},getContourData:function(){return this.coutourData},setColliderFilter:function(a){this.colliderFilter=a},getCalculatedVertexList:function(){return this._calculatedVertexList},setB2Fixture:function(a){this._fixture=a},getB2Fixture:function(){return this._fixture},
setShape:function(a){this.shape=a},getShape:function(){return this.shape},setContourData:function(a){this.coutourData=a},getColliderFilter:function(){return this.colliderFilter}});
ccs.ColliderDetector=ccs.Class.extend({_colliderBodyList:null,_bone:null,_body:null,_active:!1,_filter:null,helpPoint:cc.p(0,0),ctor:function(){this._colliderBodyList=[];this._body=this._bone=null;this._active=!1;this._filter=null},init:function(a){this._colliderBodyList.length=0;a&&(this._bone=a);this._filter=new ccs.ColliderFilter;return!0},addContourData:function(a){var c=new ccs.ColliderBody(a);this._colliderBodyList.push(c);if(ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX){c=c.getCalculatedVertexList();
a=a.vertexList;for(var d=0;d<a.length;d++){var e=new ccs.ContourVertex2(0,0);c.push(e)}}},addContourDataList:function(a){for(var c=0;c<a.length;c++)this.addContourData(a[c])},removeContourData:function(a){var c=[],d,e=this._colliderBodyList;for(d=0;d<e.length;d++){var f=e[d];f&&f.getContourData()==a&&c.push(f)}for(d=0;d<c.length;d++)cc.arrayRemoveObject(e,c[d])},removeAll:function(){this._colliderBodyList.length=0},setActive:function(a){if(this._active!=a){this._active=a;a=this._body;var c;if(a)if(c=
null,this._active)for(var d=0;d<this._colliderBodyList.length;d++)c=this._colliderBodyList[d],c=c.getShape(),a.space.addShape(c);else for(d=0;d<this._colliderBodyList.length;d++)c=this._colliderBodyList[d],c=c.getShape(),a.space.removeShape(c)}},getActive:function(){return this._active},getColliderBodyList:function(){return this._colliderBodyList},setColliderFilter:function(a){this._filter=a;for(var c=this._colliderBodyList,d=0;d<c.length;d++){var e=c[d];e.setColliderFilter(a);e.getShape()&&e.getColliderFilter().updateShape(e.getShape())}},
getColliderFilter:function(){return this._filter},updateTransform:function(a){if(this._active)for(var c=null,d=this._body,e=this.helpPoint,f=0;f<this._colliderBodyList.length;f++){var c=this._colliderBodyList[f],g=c.getContourData(),h=null;d&&(h=c.getShape());for(var g=g.vertexList,k=c.getCalculatedVertexList(),c=0;c<g.length;c++){e.x=g[c].x;e.y=g[c].y;e=cc.pointApplyAffineTransform(e,a);if(ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX){var l=cc.p(0,0);l.x=e.x;l.y=e.y;k[c]=l}h&&(h.verts[2*c]=e.x,h.verts[2*
c+1]=e.y)}if(h)for(c=0;c<g.length;c++)k=cp.v.normalize(cp.v.perp(cp.v.sub(h.verts[(c+1)%h.verts.length],h.verts[c]))),h.axes[c].n=k,h.axes[c].d=cp.v.dot(k,h.verts[c])}},setBody:function(a){this._body=a;for(var c=this._colliderBodyList,d=0;d<c.length;d++){a=c[d];for(var e=[],f=a.getContourData().vertexList,g=0;g<f.length;g++){var h=f[g];e.push(h.x);e.push(h.y)}e=new cp.PolyShape(this._body,e,cp.vzero);e.sensor=!0;e.data=this._bone;this._active&&this._body.space.addShape(e);a.setShape(e);a.getColliderFilter().updateShape(e)}},
getBody:function(){return this._body}});_p=ccs.ColliderDetector.prototype;cc.defineGetterSetter(_p,"colliderFilter",_p.getColliderFilter,_p.setColliderFilter);cc.defineGetterSetter(_p,"active",_p.getActive,_p.setActive);cc.defineGetterSetter(_p,"body",_p.getBody,_p.setBody);_p=null;ccs.ColliderDetector.create=function(a){var c=new ccs.ColliderDetector;return c&&c.init(a)?c:null};ccs.Armature=ccs.Node.extend({animation:null,armatureData:null,batchNode:null,_textureAtlas:null,_parentBone:null,_boneDic:null,_topBoneList:null,_armatureIndexDic:null,_offsetPoint:null,version:0,_armatureTransformDirty:!0,_body:null,_blendFunc:null,_className:"Armature",_realAnchorPointInPoints:null,ctor:function(a,c){cc.Node.prototype.ctor.call(this);this._name="";this._topBoneList=[];this._armatureIndexDic={};this._offsetPoint=cc.p(0,0);this._armatureTransformDirty=!0;this._realAnchorPointInPoints=
cc.p(0,0);a&&ccs.Armature.prototype.init.call(this,a,c)},init:function(a,c){cc.Node.prototype.init.call(this);c&&(this._parentBone=c);this.removeAllChildren();this.animation=new ccs.ArmatureAnimation;this.animation.init(this);this._boneDic={};this._topBoneList.length=0;this._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST};this._name=a||"";var d=ccs.armatureDataManager,e;if(""!=a){e=d.getAnimationData(a);cc.assert(e,"AnimationData not exist!");this.animation.setAnimationData(e);d=d.getArmatureData(a);
cc.assert(d,"ArmatureData not exist!");this.armatureData=d;var d=d.getBoneDataDic(),f;for(f in d){var d=this.createBone(String(f)),g=e.getMovement(e.movementNames[0]);if(g&&(g=g.getMovementBoneData(d.getName()))&&!(0>=g.frameList.length))if(g=g.getFrameData(0))d.getTweenData().copy(g),d.changeDisplayWithIndex(g.displayIndex,!1)}this.update(0);this.updateOffsetPoint()}else this._name="new_armature",this.armatureData=ccs.ArmatureData.create(),this.armatureData.name=this._name,e=ccs.AnimationData.create(),
e.name=this._name,d.addArmatureData(this._name,this.armatureData),d.addAnimationData(this._name,e),this.animation.setAnimationData(e);cc._renderType===cc._RENDER_TYPE_WEBGL&&this.setShaderProgram(cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURE_UCOLOR));this.setCascadeOpacityEnabled(!0);this.setCascadeColorEnabled(!0);return!0},createBone:function(a){var c=this.getBone(a);if(c)return c;var c=this.armatureData.getBoneData(a),d=c.parentName,e=null;d?(this.createBone(d),e=ccs.Bone.create(a),this.addBone(e,
d)):(e=ccs.Bone.create(a),this.addBone(e,""));e.setBoneData(c);e.getDisplayManager().changeDisplayWithIndex(-1,!1);return e},addBone:function(a,c){cc.assert(a,"Argument must be non-nil");var d=this._boneDic;a.getName()&&cc.assert(!d[a.getName()],"bone already added. It can't be added again");if(c){var e=d[c];e?e.addChildBone(a):this._topBoneList.push(a)}else this._topBoneList.push(a);a.setArmature(this);d[a.getName()]=a;this.addChild(a)},removeBone:function(a,c){cc.assert(a,"bone must be added to the bone dictionary!");
a.setArmature(null);a.removeFromParent(c);cc.arrayRemoveObject(this._topBoneList,a);delete this._boneDic[a.getName()];this.removeChild(a,!0)},getBone:function(a){return this._boneDic[a]},changeBoneParent:function(a,c){cc.assert(a,"bone must be added to the bone dictionary!");var d=a.getParentBone();d&&(cc.arrayRemoveObject(d.getChildren(),a),a.setParentBone(null));c&&((d=this._boneDic[c])?(d.addChildBone(a),cc.arrayRemoveObject(this._topBoneList,a)):this._topBoneList.push(a))},getBoneDic:function(){return this._boneDic},
updateOffsetPoint:function(){var a=this.getBoundingBox();this.setContentSize(a);var c=this._offsetPoint;c.x=-a.x;c.y=-a.y;0!=a.width&&0!=a.height&&this.setAnchorPoint(c.x/a.width,c.y/a.height)},setAnchorPoint:function(a,c){var d,e;void 0!==c?(d=a,e=c):(d=a.x,e=a.y);var f=this._anchorPoint;if(d!=f.x||e!=f.y){var g=this._contentSize;f.x=d;f.y=e;this._anchorPointInPoints.x=g.width*f.x-this._offsetPoint.x;this._anchorPointInPoints.y=g.height*f.y-this._offsetPoint.y;this._realAnchorPointInPoints.x=g.width*
f.x;this._realAnchorPointInPoints.y=g.height*f.y;this.setNodeDirty()}},_setAnchorX:function(a){this._anchorPoint.x!==a&&(this._anchorPoint.x=a,this._anchorPointInPoints.x=this._contentSize.width*a-this._offsetPoint.x,this._realAnchorPointInPoints.x=this._contentSize.width*a,this.setNodeDirty())},_setAnchorY:function(a){this._anchorPoint.y!==a&&(this._anchorPoint.y=a,this._anchorPointInPoints.y=this._contentSize.height*a-this._offsetPoint.y,this._realAnchorPointInPoints.y=this._contentSize.height*
a,this.setNodeDirty())},getAnchorPointInPoints:function(){return this._realAnchorPointInPoints},setAnimation:function(a){this.animation=a},getAnimation:function(){return this.animation},getArmatureTransformDirty:function(){return this._armatureTransformDirty},update:function(a){this.animation.update(a);for(var c=this._topBoneList,d=0;d<c.length;d++)c[d].update(a);this._armatureTransformDirty=!1},draw:function(a){for(var c=this._children,d=cc.BlendFunc.ALPHA_PREMULTIPLIED,e=cc.BlendFunc.ALPHA_NON_PREMULTIPLIED,
f=0,g=c.length;f<g;f++){var h=c[f];if(h){var k=h.getDisplayRenderNode();if(null!=k)switch(h.getDisplayRenderNodeType()){case ccs.DISPLAY_TYPE_SPRITE:if(k instanceof ccs.Skin)if(cc._renderType===cc._RENDER_TYPE_WEBGL){k.updateTransform();var l=h.getBlendFunc();l.src!=d.src||l.dst!=d.dst?k.setBlendFunc(h.getBlendFunc()):this._blendFunc.src==d.src&&this._blendFunc.dst==d.dst&&!k.getTexture().hasPremultipliedAlpha()?k.setBlendFunc(e):k.setBlendFunc(this._blendFunc);k.draw(a)}else k.visit(a);break;case ccs.DISPLAY_TYPE_ARMATURE:k.draw(a);
break;default:k.visit(a)}}else h instanceof cc.Node&&h.visit(a)}},onEnter:function(){cc.Node.prototype.onEnter.call(this);this.scheduleUpdate()},onExit:function(){cc.Node.prototype.onExit.call(this);this.unscheduleUpdate()},visit:null,_visitForCanvas:function(a){var c=a||cc._renderContext;this._visible&&(c.save(),this.transform(c),this.sortAllChildren(),this.draw(a),this._cacheDirty=!1,this.arrivalOrder=0,c.restore())},_visitForWebGL:function(){if(this._visible){var a=cc._renderContext,c=cc.current_stack;
c.stack.push(c.top);cc.kmMat4Assign(this._stackMatrix,c.top);c.top=this._stackMatrix;this.transform();this.sortAllChildren();this.draw(a);this.arrivalOrder=0;c.top=c.stack.pop()}},getBoundingBox:function(){for(var a,c,d,e=0,f=!0,g=cc.rect(0,0,0,0),h=this._children,k=h.length,l=0;l<k;l++)if(a=h[l])e=a.getDisplayManager().getBoundingBox(),0==e.x&&0==e.y&&0==e.width&&0==e.height||(f?(a=e.x,c=e.y,d=e.x+e.width,e=e.y+e.height,f=!1):(a=e.x<g.x?e.x:g.x,c=e.y<g.y?e.y:g.y,d=e.x+e.width>g.x+g.width?e.x+e.width:
g.x+g.width,e=e.y+e.height>g.y+g.height?e.y+e.height:g.y+g.height),g.x=a,g.y=c,g.width=d-a,g.height=e-c);return cc.rectApplyAffineTransform(g,this.getNodeToParentTransform())},getBoneAtPoint:function(a,c){for(var d=this._children,e=d.length-1;0<=e;e--){var f=d[e];if(f instanceof ccs.Bone&&f.getDisplayManager().containPoint(a,c))return f}return null},setParentBone:function(a){this._parentBone=a;a=this._boneDic;for(var c in a)a[c].setArmature(this)},getParentBone:function(){return this._parentBone},
drawContour:function(){cc._drawingUtil.setDrawColor(255,255,255,255);cc._drawingUtil.setLineWidth(1);var a=this._boneDic,c;for(c in a){var d=a[c].getColliderDetector();if(d)for(var d=d.getColliderBodyList(),e=0;e<d.length;e++){var f=d[e].getCalculatedVertexList();cc._drawingUtil.drawPoly(f,f.length,!0)}}},setBody:function(a){if(this._body!=a){this._body=a;this._body.data=this;var c,d;a=this._children;for(var e=0;e<a.length;e++)if(c=a[e],c instanceof ccs.Bone){c=c.getDisplayManager().getDecorativeDisplayList();
for(var f=0;f<c.length;f++)d=c[f],(d=d.getColliderDetector())&&d.setBody(this._body)}}},getShapeList:function(){return this._body?this._body.shapeList:null},getBody:function(){return this._body},setBlendFunc:function(a){this._blendFunc=a},getBlendFunc:function(){return this._blendFunc},setColliderFilter:function(a){var c=this._boneDic,d;for(d in c)c[d].setColliderFilter(a)},getArmatureData:function(){return this.armatureData},setArmatureData:function(a){this.armatureData=a},getBatchNode:function(){return this.batchNode},
setBatchNode:function(a){this.batchNode=a},getVersion:function(){return this.version},setVersion:function(a){this.version=a}});ccs.Armature.prototype.visit=cc._renderType==cc._RENDER_TYPE_WEBGL?ccs.Armature.prototype._visitForWebGL:ccs.Armature.prototype._visitForCanvas;_p=ccs.Armature.prototype;cc.defineGetterSetter(_p,"parentBone",_p.getParentBone,_p.setParentBone);cc.defineGetterSetter(_p,"body",_p.getBody,_p.setBody);cc.defineGetterSetter(_p,"colliderFilter",null,_p.setColliderFilter);_p=null;
ccs.Armature.create=function(a,c){var d=new ccs.Armature;return d.init(a,c)?d:null};ccs.Bone=ccs.Node.extend({_boneData:null,_armature:null,_childArmature:null,_displayManager:null,ignoreMovementBoneData:!1,_tween:null,_tweenData:null,_parentBone:null,_boneTransformDirty:!1,_worldTransform:null,_blendFunc:0,blendDirty:!1,_worldInfo:null,_armatureParentBone:null,_dataVersion:0,_className:"Bone",ctor:function(){cc.Node.prototype.ctor.call(this);this._displayManager=this._tween=this._boneData=this._childArmature=this._armature=this._parentBone=this._tweenData=null;this.ignoreMovementBoneData=
!1;this._worldTransform=cc.affineTransformMake(1,0,0,1,0,0);this._boneTransformDirty=!0;this._blendFunc=new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST);this.blendDirty=!1;this._armatureParentBone=this._worldInfo=null;this._dataVersion=0},init:function(a){a&&(this._name=a);this._tweenData=new ccs.FrameData;this._tween=new ccs.Tween;this._tween.init(this);this._displayManager=new ccs.DisplayManager;this._displayManager.init(this);this._worldInfo=new ccs.BaseData;this._boneData=new ccs.BaseData;return!0},
setBoneData:function(a){cc.assert(a,"_boneData must not be null");this._boneData!=a&&(this._boneData=a);this.setName(this._boneData.name);this._localZOrder=this._boneData.zOrder;this._displayManager.initDisplayList(a)},getBoneData:function(){return this._boneData},setArmature:function(a){(this._armature=a)?(this._tween.setAnimation(this._armature.getAnimation()),this._dataVersion=this._armature.getArmatureData().dataVersion,this._armatureParentBone=this._armature.getParentBone()):this._armatureParentBone=
null},getArmature:function(){return this._armature},update:function(a){this._parentBone&&(this._boneTransformDirty=this._boneTransformDirty||this._parentBone.isTransformDirty());this._armatureParentBone&&!this._boneTransformDirty&&(this._boneTransformDirty=this._armatureParentBone.isTransformDirty());if(this._boneTransformDirty){var c=this._tweenData;this._dataVersion>=ccs.CONST_VERSION_COMBINED&&(ccs.TransformHelp.nodeConcat(c,this._boneData),c.scaleX-=1,c.scaleY-=1);var d=this._worldInfo;d.copy(c);
d.x=c.x+this._position.x;d.y=c.y+this._position.y;d.scaleX=c.scaleX*this._scaleX;d.scaleY=c.scaleY*this._scaleY;d.skewX=c.skewX+this._skewX+this._rotationX;d.skewY=c.skewY+this._skewY-this._rotationY;this._parentBone?this.applyParentTransform(this._parentBone):this._armatureParentBone&&this.applyParentTransform(this._armatureParentBone);ccs.TransformHelp.nodeToMatrix(d,this._worldTransform);this._armatureParentBone&&(this._worldTransform=cc.affineTransformConcat(this._worldTransform,this._armature.getNodeToParentTransform()))}ccs.displayFactory.updateDisplay(this,
a,this._boneTransformDirty||this._armature.getArmatureTransformDirty());for(c=0;c<this._children.length;c++)this._children[c].update(a);this._boneTransformDirty=!1},applyParentTransform:function(a){var c=this._worldInfo,d=a._worldTransform;a=a._worldInfo;var e=c.x,f=c.y;c.x=e*d.a+f*d.c+a.x;c.y=e*d.b+f*d.d+a.y;c.scaleX*=a.scaleX;c.scaleY*=a.scaleY;c.skewX+=a.skewX;c.skewY+=a.skewY},setBlendFunc:function(a){if(this._blendFunc.src!=a.src||this._blendFunc.dst!=a.dst)this._blendFunc=a,this.blendDirty=
!0},updateDisplayedColor:function(a){this._realColor=cc.color(255,255,255);cc.Node.prototype.updateDisplayedColor.call(this,a)},updateDisplayedOpacity:function(a){this._realOpacity=255;cc.Node.prototype.updateDisplayedOpacity.call(this,a)},updateColor:function(){var a=this._displayManager.getDisplayRenderNode();null!=a&&(a.setColor(cc.color(this._displayedColor.r*this._tweenData.r/255,this._displayedColor.g*this._tweenData.g/255,this._displayedColor.b*this._tweenData.b/255)),a.setOpacity(this._displayedOpacity*
this._tweenData.a/255))},updateZOrder:function(){this._armature.getArmatureData().dataVersion>=ccs.CONST_VERSION_COMBINED?this.setLocalZOrder(this._tweenData.zOrder+this._boneData.zOrder):this.setLocalZOrder(this._tweenData.zOrder)},addChildBone:function(a){cc.assert(a,"Argument must be non-nil");cc.assert(!a.parentBone,"child already added. It can't be added again");0>this._children.indexOf(a)&&(this._children.push(a),a.setParentBone(this))},removeChildBone:function(a,c){if(0<this._children.length&&
-1!=this._children.getIndex(a)){if(c)for(var d=a._children,e=0;e<d.length;e++)a.removeChildBone(d[e],c);a.setParentBone(null);a.getDisplayManager().setCurrentDecorativeDisplay(null);cc.arrayRemoveObject(this._children,a)}},removeFromParent:function(a){this._parentBone&&this._parentBone.removeChildBone(this,a)},setParentBone:function(a){this._parentBone=a},getParentBone:function(){return this._parentBone},setChildArmature:function(a){this._childArmature!=a&&(null==a&&this._childArmature&&this._childArmature.setParentBone(null),
this._childArmature=a)},getChildArmature:function(){return this._childArmature},getTween:function(){return this._tween},setLocalZOrder:function(a){this._localZOrder!=a&&cc.Node.prototype.setLocalZOrder.call(this,a)},getNodeToArmatureTransform:function(){return this._worldTransform},getNodeToWorldTransform:function(){return cc.affineTransformConcat(this._worldTransform,this._armature.getNodeToWorldTransform())},getDisplayRenderNode:function(){return this._displayManager.getDisplayRenderNode()},getDisplayRenderNodeType:function(){return this._displayManager.getDisplayRenderNodeType()},
addDisplay:function(a,c){return this._displayManager.addDisplay(a,c||0)},removeDisplay:function(a){this._displayManager.removeDisplay(a)},changeDisplayByIndex:function(a,c){cc.log("changeDisplayByIndex is deprecated. Use changeDisplayWithIndex instead.");this.changeDisplayWithIndex(a,c)},changeDisplayByName:function(a,c){this.changeDisplayWithName(a,c)},changeDisplayWithIndex:function(a,c){this._displayManager.changeDisplayWithIndex(a,c)},changeDisplayWithName:function(a,c){this._displayManager.changeDisplayWithName(a,
c)},getColliderDetector:function(){var a=this._displayManager.getCurrentDecorativeDisplay();return a&&(a=a.getColliderDetector())?a:null},setColliderFilter:function(a){for(var c=this._displayManager.getDecorativeDisplayList(),d=0;d<c.length;d++){var e=c[d].getColliderDetector();e&&e.setColliderFilter(a)}},getColliderFilter:function(){var a=this.displayManager.getCurrentDecorativeDisplay();return a&&(a=a.getColliderDetector())?a.getColliderFilter():null},setTransformDirty:function(a){this._boneTransformDirty=
a},isTransformDirty:function(){return this._boneTransformDirty},getDisplayManager:function(){return this._displayManager},setIgnoreMovementBoneData:function(a){this._ignoreMovementBoneData=a},isIgnoreMovementBoneData:function(){return this._ignoreMovementBoneData},getBlendFunc:function(){return this._blendFunc},setBlendDirty:function(a){this._blendDirty=a},isBlendDirty:function(){return this._blendDirty},getTweenData:function(){return this._tweenData},getWorldInfo:function(){return this._worldInfo},
getChildrenBone:function(){return this._children},nodeToArmatureTransform:function(){return this.getNodeToArmatureTransform()},nodeToWorldTransform:function(){return this.getNodeToWorldTransform()},getColliderBodyList:function(){var a=this.getColliderDetector();return a?a.getColliderBodyList():null},getIgnoreMovementBoneData:function(){return this.isIgnoreMovementBoneData()}});_p=ccs.Bone.prototype;cc.defineGetterSetter(_p,"boneData",_p.getBoneData,_p.setBoneData);
cc.defineGetterSetter(_p,"armature",_p.getArmature,_p.setArmature);cc.defineGetterSetter(_p,"childArmature",_p.getChildArmature,_p.setChildArmature);cc.defineGetterSetter(_p,"childrenBone",_p.getChildrenBone);cc.defineGetterSetter(_p,"tween",_p.getTween);cc.defineGetterSetter(_p,"tweenData",_p.getTweenData);cc.defineGetterSetter(_p,"colliderFilter",_p.getColliderFilter,_p.setColliderFilter);_p=null;ccs.Bone.create=function(a){var c=new ccs.Bone;return c&&c.init(a)?c:null};ccs.FRAME_TYPE_MOVE=0;ccs.FRAME_TYPE_SCALE=1;ccs.FRAME_TYPE_ROTATE=2;ccs.FRAME_TYPE_TINT=3;ccs.FRAME_TYPE_FADE=4;ccs.FRAME_TYPE_MAX=5;
ccs.FrameEaseType={Custom:-1,Linear:0,Sine_EaseIn:1,Sine_EaseOut:2,Sine_EaseInOut:3,Quad_EaseIn:4,Quad_EaseOut:5,Quad_EaseInOut:6,Cubic_EaseIn:7,Cubic_EaseOut:8,Cubic_EaseInOut:9,Quart_EaseIn:10,Quart_EaseOut:11,Quart_EaseInOut:12,Quint_EaseIn:13,Quint_EaseOut:14,Quint_EaseInOut:15,Expo_EaseIn:16,Expo_EaseOut:17,Expo_EaseInOut:18,Circ_EaseIn:19,Circ_EaseOut:20,Circ_EaseInOut:21,Elastic_EaesIn:22,Elastic_EaesOut:23,Elastic_EaesInOut:24,Back_EaseIn:25,Back_EaseOut:26,Back_EaseInOut:27,Bounce_EaseIn:28,
Bounce_EaseOut:29,Bounce_EaseInOut:30};
ccs.ActionFrame=ccs.Class.extend({frameType:0,easingType:0,frameIndex:0,frameTweenParameter:null,time:0,ctor:function(){this.time=this.frameIndex=this.easingType=this.frameType=0},getAction:function(a){return null},_getEasingAction:function(a){if(null===a)return console.error("Action cannot be null!"),null;var c;switch(this.easingType){case ccs.FrameEaseType.Linear:c=a;break;case ccs.FrameEaseType.Sine_EaseIn:c=a.easing(cc.easeSineIn());break;case ccs.FrameEaseType.Sine_EaseOut:c=a.easing(cc.easeSineOut());
break;case ccs.FrameEaseType.Sine_EaseInOut:c=a.easing(cc.easeSineInOut());break;case ccs.FrameEaseType.Quad_EaseIn:c=a.easing(cc.easeQuadraticActionIn());break;case ccs.FrameEaseType.Quad_EaseOut:c=a.easing(cc.easeQuadraticActionOut());break;case ccs.FrameEaseType.Quad_EaseInOut:c=a.easing(cc.easeQuadraticActionInOut());break;case ccs.FrameEaseType.Cubic_EaseIn:c=a.easing(cc.easeCubicActionIn());break;case ccs.FrameEaseType.Cubic_EaseOut:c=a.easing(cc.easeCubicActionOut());break;case ccs.FrameEaseType.Cubic_EaseInOut:c=
a.easing(cc.easeCubicActionInOut());break;case ccs.FrameEaseType.Quart_EaseIn:c=a.easing(cc.easeQuarticActionIn());break;case ccs.FrameEaseType.Quart_EaseOut:c=a.easing(cc.easeQuarticActionOut());break;case ccs.FrameEaseType.Quart_EaseInOut:c=a.easing(cc.easeQuarticActionInOut());break;case ccs.FrameEaseType.Quint_EaseIn:c=a.easing(cc.easeQuinticActionIn());break;case ccs.FrameEaseType.Quint_EaseOut:c=a.easing(cc.easeQuinticActionOut());break;case ccs.FrameEaseType.Quint_EaseInOut:c=a.easing(cc.easeQuinticActionInOut());
break;case ccs.FrameEaseType.Expo_EaseIn:c=a.easing(cc.easeExponentialIn());break;case ccs.FrameEaseType.Expo_EaseOut:c=a.easing(cc.easeExponentialOut());break;case ccs.FrameEaseType.Expo_EaseInOut:c=a.easing(cc.easeExponentialInOut());break;case ccs.FrameEaseType.Circ_EaseIn:c=a.easing(cc.easeCircleActionIn());break;case ccs.FrameEaseType.Circ_EaseOut:c=a.easing(cc.easeCircleActionOut());break;case ccs.FrameEaseType.Circ_EaseInOut:c=a.easing(cc.easeCircleActionInOut());break;case ccs.FrameEaseType.Elastic_EaesIn:c=
a.easing(cc.easeElasticIn());break;case ccs.FrameEaseType.Elastic_EaesOut:c=a.easing(cc.easeElasticOut());break;case ccs.FrameEaseType.Elastic_EaesInOut:c=a.easing(cc.easeElasticInOut());break;case ccs.FrameEaseType.Back_EaseIn:c=a.easing(cc.easeBackIn());break;case ccs.FrameEaseType.Back_EaseOut:c=a.easing(cc.easeBackOut());break;case ccs.FrameEaseType.Back_EaseInOut:c=a.easing(cc.easeBackInOut());break;case ccs.FrameEaseType.Bounce_EaseIn:c=a.easing(cc.easeBounceIn());break;case ccs.FrameEaseType.Bounce_EaseOut:c=
a.easing(cc.easeBounceOut());break;case ccs.FrameEaseType.Bounce_EaseInOut:c=a.easing(cc.easeBounceInOut())}return c},setEasingParameter:function(a){this._Parameter=[];for(var c=0;c<a.length;c++)this._Parameter.push(a[c])},setEasingType:function(a){this._easingType=a}});
ccs.ActionMoveFrame=ccs.ActionFrame.extend({_position:null,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this);this._position=cc.p(0,0);this.frameType=ccs.FRAME_TYPE_MOVE},setPosition:function(a,c){void 0===c?(this._position.x=a.x,this._position.y=a.y):(this._position.x=a,this._position.y=c)},getPosition:function(){return this._position},getAction:function(a){a=cc.MoveTo.create(a,this._position);a.easingType=this.easingType||ccs.FrameEaseType.Linear;return this._getEasingAction(a)}});
ccs.ActionScaleFrame=ccs.ActionFrame.extend({_scaleX:1,_scaleY:1,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this);this._scaleY=this._scaleX=1;this.frameType=ccs.FRAME_TYPE_SCALE},setScaleX:function(a){this._scaleX=a},getScaleX:function(){return this._scaleX},setScaleY:function(a){this._scaleY=a},getScaleY:function(){return this._scaleY},getAction:function(a){a=cc.ScaleTo.create(a,this._scaleX,this._scaleY);a.easingType=this.easingType||ccs.FrameEaseType.Linear;return this._getEasingAction(a)}});
ccs.ActionRotationFrame=ccs.ActionFrame.extend({_rotation:0,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this);this._rotation=0;this.frameType=ccs.FRAME_TYPE_ROTATE},setRotation:function(a){this._rotation=a},getRotation:function(){return this._rotation},getAction:function(a){a=cc.RotateTo.create(a,this._rotation);a.easingType=this.easingType||ccs.FrameEaseType.Linear;return this._getEasingAction(a)}});
ccs.ActionFadeFrame=ccs.ActionFrame.extend({_opacity:255,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this);this._opacity=255;this.frameType=ccs.FRAME_TYPE_FADE},setOpacity:function(a){this._opacity=a},getOpacity:function(){return this._opacity},getAction:function(a){a=cc.FadeTo.create(a,this._opacity);a.easingType=this.easingType||ccs.FrameEaseType.Linear;return this._getEasingAction(a)}});
ccs.ActionTintFrame=ccs.ActionFrame.extend({_color:null,ctor:function(){ccs.ActionFrame.prototype.ctor.call(this);this._color=cc.color(255,255,255,255);this.frameType=ccs.FRAME_TYPE_TINT},setColor:function(a){var c=this._color;c.r=a.r;c.g=a.g;c.b=a.b},getColor:function(){var a=this._color;return cc.color(a.r,a.g,a.b,a.a)},getAction:function(a){a=cc.TintTo.create(a,this._color.r,this._color.g,this._color.b);a.easingType=this.easingType||ccs.FrameEaseType.Linear;return this._getEasingAction(a)}});ccs.actionManager={_actionDic:{},initWithDictionary:function(a,c,d){var e=a.lastIndexOf("/");a=a.substr(e+1,a.length);c=c.actionlist;for(var e=[],f=0;f<c.length;f++){var g=new ccs.ActionObject;g.initWithDictionary(c[f],d);e.push(g)}this._actionDic[a]=e},getActionByName:function(a,c){var d=this._actionDic[a];if(!d)return null;for(var e=0;e<d.length;e++){var f=d[e];if(c==f.getName())return f}return null},playActionByName:function(a,c,d){(a=this.getActionByName(a,c))&&a.play(d)},releaseActions:function(){this._actionDic=
{}},clear:function(){this._actionDic={}}};ccs.ActionNode=ccs.Class.extend({_currentFrameIndex:0,_destFrameIndex:0,_unitTime:0,_actionTag:0,_bject:null,_actionSpawn:null,_action:null,_frameArray:null,_frameArrayNum:0,ctor:function(){this._destFrameIndex=this._currentFrameIndex=0;this._unitTime=0.1;this._actionTag=0;this._action=this._actionSpawn=this._bject=null;this._frameArray=[];this._frameArrayNum=ccs.FRAME_TYPE_MAX;for(var a=0;a<this._frameArrayNum;a++)this._frameArray.push([])},initWithDictionary:function(a,c){this.setActionTag(a.ActionTag);
for(var d=a.actionframelist,e=0;e<d.length;e++){for(var f=d[e],g=f.tweenType,h=f.tweenParameter,k=[],l=0;l<h;l++)k.push(f.tweenParameter[l]);if(void 0!==f.positionx){var l=f.positionx,m=f.positiony,h=new ccs.ActionMoveFrame;h.setEasingType(g);h.setEasingParameter(k);h.setPosition(l,m);l=this._frameArray[ccs.FRAME_TYPE_MOVE];l.push(h)}void 0!==f.scalex&&(l=f.scalex,m=f.scaley,h=new ccs.ActionScaleFrame,h.setEasingType(g),h.setEasingParameter(k),h.setScaleX(l),h.setScaleY(m),l=this._frameArray[ccs.FRAME_TYPE_SCALE],
l.push(h));void 0!==f.rotation&&(l=f.rotation,h=new ccs.ActionRotationFrame,h.setEasingType(g),h.setEasingParameter(k),h.setRotation(l),l=this._frameArray[ccs.FRAME_TYPE_ROTATE],l.push(h));void 0!==f.opacity&&(l=f.opacity,h=new ccs.ActionFadeFrame,h.setEasingType(g),h.setEasingParameter(k),h.setOpacity(l),l=this._frameArray[ccs.FRAME_TYPE_FADE],l.push(h));void 0!==f.colorr&&(l=f.colorr,m=f.colorg,f=f.colorb,h=new ccs.ActionTintFrame,h.setEasingType(g),h.setEasingParameter(k),h.setColor(cc.color(l,
m,f)),l=this._frameArray[ccs.FRAME_TYPE_TINT],l.push(h))}this.initActionNodeFromRoot(c)},initActionNodeFromRoot:function(a){a instanceof ccui.Widget&&(a=ccui.helper.seekActionWidgetByActionTag(a,this.getActionTag()))&&this.setObject(a)},setUnitTime:function(a){this._unitTime=a;this.refreshActionProperty()},getUnitTime:function(){return this._unitTime},setActionTag:function(a){this._actionTag=a},getActionTag:function(){return this._actionTag},setObject:function(a){this._object=a},getObject:function(){return this._object},
getActionNode:function(){return this._object instanceof cc.Node||this._object instanceof ccui.Widget?this._object:null},insertFrame:function(a,c){null!=c&&this._frameArray[c.frameType].splice(a,0,c)},addFrame:function(a){a&&this._frameArray[a.frameType].push(a)},deleteFrame:function(a){null!=a&&cc.arrayRemoveObject(this._frameArray[a.frameType],a)},clearAllFrame:function(){for(var a=0;a<this._frameArrayNum;a++)this._frameArray[a]=[]},refreshActionProperty:function(){if(null==this._object)return null;
for(var a=[],c=0;c<this._frameArrayNum;c++){var d=this._frameArray[c];if(!(0>=d.length)){for(var e=[],f=0;f<d.length;f++){var g=d[f];if(0!=f){var h=(g.frameIndex-d[f-1].frameIndex)*this.getUnitTime();(g=g.getAction(h))&&e.push(g)}}e&&(d=cc.Sequence.create(e),null!=d&&a.push(d))}}this._action=null;return this._actionSpawn=cc.Spawn.create(a)},playAction:function(a){null==this._object||null==this._actionSpawn||(this._action=a?cc.Sequence.create(this._actionSpawn,a):cc.Sequence.create(this._actionSpawn),
this.runAction())},runAction:function(){var a=this.getActionNode();null!=a&&null!=this._action&&a.runAction(this._action)},stopAction:function(){var a=this.getActionNode();null!=a&&null!=this._action&&(this._action.isDone()||a.stopAction(this._action))},getFirstFrameIndex:function(){for(var a=99999,c=!1,d=0;d<this._frameArrayNum;d++){var e=this._frameArray[d];0>=e.length||(c=!0,e=e[0].frameIndex,a=a>e?e:a)}c||(a=0);return a},getLastFrameIndex:function(){for(var a=-1,c=!1,d=0;d<this._frameArrayNum;d++){var e=
this._frameArray[d];0>=e.length||(c=!0,e=e[e.length-1].frameIndex,a=a<e?e:a)}c||(a=0);return a},updateActionToTimeLine:function(a){for(var c=!1,d=this.getUnitTime(),e=0;e<this._frameArrayNum;e++){var f=this._frameArray[e];if(null!=f)for(var g=0;g<f.length;g++){var h=f[g];if(h.frameIndex*d==a){this.easingToFrame(1,1,h);c=!0;break}else if(h.frameIndex*d>a){0==g?(this.easingToFrame(1,1,h),c=!1):(c=f[g-1],f=(h.frameIndex-c.frameIndex)*d,g=a-c.frameIndex*d,this.easingToFrame(f,1,c),this.easingToFrame(f,
g/f,h),c=!0);break}}}return c},easingToFrame:function(a,c,d){a=d.getAction(a);d=this.getActionNode();null==a||null==d||(a.startWithTarget(d),a.update(c))},isActionDoneOnce:function(){return null==this._action?!0:this._action.isDone()}});ccs.ActionObject=ccs.Class.extend({_actionNodeList:null,_name:"",_loop:!1,_pause:!1,_playing:!1,_unitTime:0,_currentTime:0,_scheduler:null,_fTotalTime:0,ctor:function(){this._actionNodeList=[];this._name="";this._playing=this._pause=this._loop=!1;this._unitTime=0.1;this._fTotalTime=this._currentTime=0;this._scheduler=new cc.Scheduler;cc.director.getScheduler().scheduleUpdateForTarget(this._scheduler,0,!1)},setName:function(a){this._name=a},getName:function(){return this._name},setLoop:function(a){this._loop=
a},getLoop:function(){return this._loop},setUnitTime:function(a){this._unitTime=a;a=this._actionNodeList.length;for(var c=0;c<a;c++)this._actionNodeList[c].setUnitTime(this._unitTime)},getUnitTime:function(){return this._unitTime},getCurrentTime:function(){return this._currentTime},setCurrentTime:function(a){this._currentTime=a},getTotalTime:function(){return this._fTotalTime},isPlaying:function(){return this._playing},initWithDictionary:function(a,c){this.setName(a.name);this.setLoop(a.loop);this.setUnitTime(a.unittime);
for(var d=a.actionnodelist,e=0,f=0;f<d.length;f++){var g=new ccs.ActionNode;g.initWithDictionary(d[f],c);g.setUnitTime(this.getUnitTime());this._actionNodeList.push(g);g=g.getLastFrameIndex()-g.getFirstFrameIndex();g>e&&(e=g)}this._fTotalTime=e*this._unitTime},addActionNode:function(a){a&&(this._actionNodeList.push(a),a.setUnitTime(this._unitTime))},removeActionNode:function(a){null!=a&&cc.arrayRemoveObject(this._actionNodeList,a)},play:function(a){this.stop();this.updateToFrameByTime(0);for(var c=
this._actionNodeList.length,d=0;d<c;d++)this._actionNodeList[d].playAction(a);this._loop&&this._scheduler.scheduleCallbackForTarget(this,this.simulationActionUpdate,0,cc.REPEAT_FOREVER,0,!1)},pause:function(){this._pause=!0},stop:function(){for(var a=0;a<this._actionNodeList.length;a++)this._actionNodeList[a].stopAction();this._scheduler.unscheduleCallbackForTarget(this,this.simulationActionUpdate);this._pause=!1},updateToFrameByTime:function(a){this._currentTime=a;for(var c=0;c<this._actionNodeList.length;c++)this._actionNodeList[c].updateActionToTimeLine(a)},
simulationActionUpdate:function(a){if(this._loop){a=!0;for(var c=this._actionNodeList,d=0;d<c.length;d++)if(!1==c[d].isActionDoneOnce()){a=!1;break}a&&this.play()}}});ccs.ComAttribute=ccs.Component.extend({_jsonDict:null,_filePath:"",ctor:function(){cc.Component.prototype.ctor.call(this);this._jsonDict={};this._filePath="";this._name="CCComAttribute"},init:function(){this._jsonDict={};return!0},setInt:function(a,c){a?this._jsonDict[a]=c:cc.log("Argument must be non-nil")},setDouble:function(a,c){a?this._jsonDict[a]=c:cc.log("Argument must be non-nil")},setFloat:function(a,c){a?this._jsonDict[a]=c:cc.log("Argument must be non-nil")},setBool:function(a,c){a?this._jsonDict[a]=
c:cc.log("Argument must be non-nil")},setString:function(a,c){a?this._jsonDict[a]=c:cc.log("Argument must be non-nil")},setObject:function(a,c){a?this._jsonDict[a]=c:cc.log("Argument must be non-nil")},getInt:function(a){return parseInt(this._jsonDict[a]||0)},getDouble:function(a){return parseFloat(this._jsonDict[a]||0)},getFloat:function(a){return parseFloat(this._jsonDict[a]||0)},getBool:function(a){return Boolean(this._jsonDict[a]||!1)},getString:function(a){return this._jsonDict[a]||""},getObject:function(a){return this._jsonDict[a]},
parse:function(a){this._jsonDict=cc.loader.getRes(a)}});ccs.ComAttribute.create=function(){var a=new ccs.ComAttribute;return a&&a.init()?a:null};ccs.ComAudio=ccs.Component.extend({_filePath:"",_loop:!1,ctor:function(){cc.Component.prototype.ctor.call(this);this._name="Audio"},init:function(){return!0},onEnter:function(){},onExit:function(){this.stopBackgroundMusic(!0);this.stopAllEffects()},end:function(){cc.audioEngine.end()},preloadBackgroundMusic:function(a){cc.loader.load(a)},playBackgroundMusic:function(a,c){a?cc.audioEngine.playMusic(a,c):cc.audioEngine.playMusic(this._filePath,this._loop)},stopBackgroundMusic:function(a){cc.audioEngine.stopMusic(a)},
pauseBackgroundMusic:function(){cc.audioEngine.pauseMusic()},resumeBackgroundMusic:function(){cc.audioEngine.resumeMusic()},rewindBackgroundMusic:function(){cc.audioEngine.rewindMusic()},willPlayBackgroundMusic:function(){return cc.audioEngine.willPlayMusic()},isBackgroundMusicPlaying:function(){return cc.audioEngine.isMusicPlaying()},getBackgroundMusicVolume:function(){return cc.audioEngine.getMusicVolume()},setBackgroundMusicVolume:function(a){cc.audioEngine.setMusicVolume(a)},getEffectsVolume:function(){return cc.audioEngine.getEffectsVolume()},
setEffectsVolume:function(a){cc.audioEngine.setEffectsVolume(a)},playEffect:function(a,c){return a?cc.audioEngine.playEffect(a,c):cc.audioEngine.playEffect(this._filePath,this._loop)},pauseEffect:function(a){cc.audioEngine.pauseEffect(a)},pauseAllEffects:function(){cc.audioEngine.pauseAllEffects()},resumeEffect:function(a){cc.audioEngine.resumeEffect(a)},resumeAllEffects:function(){cc.audioEngine.resumeAllEffects()},stopEffect:function(a){cc.audioEngine.stopEffect(a)},stopAllEffects:function(){cc.audioEngine.stopAllEffects()},
preloadEffect:function(a){cc.loader.getRes(a);this.setFile(a);this.setLoop(!1)},unloadEffect:function(a){cc.audioEngine.unloadEffect(a)},setFile:function(a){this._filePath=a},setLoop:function(a){this._loop=a},getFile:function(){return this._filePath},isLoop:function(){return this._loop}});ccs.ComAudio.create=function(){var a=new ccs.ComAudio;return a&&a.init()?a:null};ccs.ComController=ccs.Component.extend({ctor:function(){cc.Component.prototype.ctor.call(this);this._name="ComController"},init:function(){return!0},onEnter:function(){null!=this._owner&&this._owner.scheduleUpdate()},onExit:function(){},update:function(a){},isEnabled:function(){return this._enabled},setEnabled:function(a){this._enabled=b}});ccs.ComController.create=function(){var a=new ccs.ComController;return a&&a.init()?a:null};ccs.ComRender=ccs.Component.extend({_render:null,ctor:function(a,c){cc.Component.prototype.ctor.call(this);this._render=a;this._name=c;this.isRenderer=!0},onEnter:function(){this._owner&&this._owner.addChild(this._render)},onExit:function(){this._owner&&(this._owner.removeChild(this._render,!0),this._render=null)},getNode:function(){return this._render},setNode:function(a){this._render=a}});ccs.ComRender.create=function(a,c){var d=new ccs.ComRender(a,c);return d&&d.init()?d:null};ccs.objectFactory={_typeMap:{},destroyInstance:function(){this._instance=null},createObject:function(a){var c=null;(a=this._typeMap[a])&&(c="function"==typeof a._fun?new a._fun:a._fun);return c},registerType:function(a){this._typeMap[a._className]=a},createGUI:function(a){var c=null;"Panel"===a?a="Layout":"TextArea"===a?a="Label":"TextButton"===a&&(a="Button");if((a=this._typeMap[a])&&a._fun)c=a._fun;return c},createWidgetReaderProtocol:function(a){var c=null;if((a=this._typeMap[a])&&a._fun)c=a._fun;
return c}};ccs.TInfo=ccs.Class.extend({_className:"",_fun:null,ctor:function(a,c){c?(this._className=a,this._fun=c):(this._className=a._className,this._fun=a._fun);ccs.objectFactory.registerType(this)}});ccs.sendEvent=function(a){a=ccs.triggerManager.get(a);if(null!=a)for(var c=0;c<a.length;c++){var d=a[c];null!=d&&d.detect()&&d.done()}};ccs.registerTriggerClass=function(a,c){new ccs.TInfo(a,c)};ccs.triggerManager={_eventTriggers:{},_triggerObjs:{},_movementDispatches:[],destroyInstance:function(){this.removeAll();this._instance=null},parse:function(a){for(var c=0;c<a.length;++c){var d=a[c],e=ccs.TriggerObj.create();e.serialize(d);for(var d=e.getEvents(),f=0;f<d.length;f++)this.add(d[f],e);this._triggerObjs[e.getId()]=e}},get:function(a){return this._eventTriggers[a]},getTriggerObj:function(a){return this._triggerObjs[a]},add:function(a,c){var d=this._eventTriggers[a];d||(d=[]);-1==d.indexOf(c)&&
(d.push(c),this._eventTriggers[a]=d)},removeAll:function(){for(var a in this._eventTriggers)for(var c=this._eventTriggers[a],d=0;d<c.length;d++)c[d].removeAll();this._eventTriggers={}},remove:function(a,c){if(c)return this._removeObj(a,c);var d=!1,e=this._eventTriggers[a];if(e){for(d=0;d<e.length;d++){var f=e[d];f&&f.removeAll()}delete this._eventTriggers[a];d=!0}return d},_removeObj:function(a,c){var d=!1;do{var e=this._eventTriggers[a];if(e){for(d=0;d<e.length;d++){var f=e[d];if(f&&f==c){f.removeAll();
e.splice(d,1);break}}d=!0}}while(0);return d},removeTriggerObj:function(a){a=this.getTriggerObj(a);if(!a)return!1;for(var c=a.getEvents(),d=0;d<c.length;d++)this.remove(c[d],a);return!0},isEmpty:function(){return!this._eventTriggers||0>=this._eventTriggers.length},addArmatureMovementCallBack:function(a,c,d){if(!(null==a||null==d||null==c)){for(var e,f=!1,g=0;g<this._movementDispatches.length;g++)if((e=this._movementDispatches[g])&&e[0]==a)e.addAnimationEventCallBack(c,d),f=!0;f||(e=new ccs.ArmatureMovementDispatcher,
a.getAnimation().setMovementEventCallFunc(e.animationEvent,e),e.addAnimationEventCallBack(c,d),this._movementDispatches.push([a,e]))}},removeArmatureMovementCallBack:function(a,c,d){if(!(null==a||null==c||null==d))for(var e,f=0;f<this._movementDispatches.length;f++)(e=this._movementDispatches[f])&&e[0]==a&&e.removeAnimationEventCallBack(d,c)},removeArmatureAllMovementCallBack:function(a){if(null!=a)for(var c,d=0;d<this._movementDispatches.length;d++)if((c=this._movementDispatches[d])&&c[0]==a){this._movementDispatches.splice(d,
1);break}},removeAllArmatureMovementCallBack:function(){this._movementDispatches=[]},version:function(){return"1.2.0.0"}};
ccs.ArmatureMovementDispatcher=ccs.Class.extend({_mapEventAnimation:null,ctor:function(){this._mapEventAnimation=[]},animationEvent:function(a,c,d){for(var e,f,g=0;g<this._mapEventAnimation.length;g++)e=this._mapEventAnimation[g],f=e[0],(e=e[1])&&e.call(f,a,c,d)},addAnimationEventCallBack:function(a,c){this._mapEventAnimation.push([c,a])},removeAnimationEventCallBack:function(a,c){for(var d,e=0;e<this._mapEventAnimation.length;e++)d=this._mapEventAnimation[e],d[0]==c&&this._mapEventAnimation.splice(e,
1)}});ccs.BaseTriggerCondition=ccs.Class.extend({ctor:function(){},init:function(){return!0},detect:function(){return!0},serialize:function(a){},removeAll:function(){}});ccs.BaseTriggerAction=ccs.Class.extend({ctor:function(){},init:function(){return!0},done:function(){},serialize:function(a){},removeAll:function(){}});
ccs.TriggerObj=ccs.Class.extend({_cons:null,_acts:null,_id:0,_enable:!0,_vInt:null,ctor:function(){this._id=0;this._enable=!0},init:function(){this._cons=[];this._acts=[];this._vInt=[];return!0},detect:function(){if(!this._enable||0==this._cons.length)return!0;for(var a=!0,c=null,d=0;d<this._cons.length;d++)(c=this._cons[d])&&c.detect&&(a=a&&c.detect());return a},done:function(){if(this._enable&&0!=this._acts.length)for(var a,c=0;c<this._acts.length;c++)(a=this._acts[c])&&a.done&&a.done()},removeAll:function(){for(var a=
null,c=0;c<this._cons.length;c++)(a=this._cons[c])&&a.removeAll();this._cons=[];for(c=0;c<this._acts.length;c++)(a=this._acts[c])&&a.removeAll();this._acts=[]},serialize:function(a){this._id=a.id||0;for(var c=a.conditions||[],d=0;d<c.length;d++){var e=c[d],f=e.classname,g=ccs.objectFactory.createObject(f);g?(g.serialize(e),g.init(),this._cons.push(g)):cc.log("class named classname("+f+") can not implement!")}c=a.actions||[];for(d=0;d<c.length;d++)e=c[d],f=e.classname,(g=ccs.objectFactory.createObject(f))?
(g.serialize(e),g.init(),this._acts.push(g)):cc.log("class named classname("+f+") can not implement!");a=a.events||[];for(d=0;d<a.length;d++)e=a[d],e=e.id,0>e||this._vInt.push(e)},getId:function(){return this._id},setEnable:function(a){this._enable=a},getEvents:function(){return this._vInt}});ccs.TriggerObj.create=function(){var a=new ccs.TriggerObj;return a.init()?a:null};ccs.ButtonReader={getInstance:function(){return ccs.ButtonReader},setPropsFromJsonDictionary:function(a,c){ccs.WidgetReader.setPropsFromJsonDictionary.call(this,a,c);var d=ccs.uiReader.getFilePath(),e=c.scale9Enable;a.setScale9Enabled(e);var f=c.normalData;switch(f.resourceType){case 0:f=f.path;a.loadTextureNormal(f&&""!==f?d+f:null);break;case 1:f=f.path,a.loadTextureNormal(f,1)}f=c.pressedData;switch(f.resourceType){case 0:f=f.path;a.loadTexturePressed(f&&""!==f?d+f:null);break;case 1:f=f.path,
a.loadTexturePressed(f,1)}f=c.disabledData;switch(f.resourceType){case 0:f=f.path;a.loadTextureDisabled(f&&""!==f?d+f:null);break;case 1:f=f.path,a.loadTextureDisabled(f,1)}e&&(a.setCapInsets(cc.rect(c.capInsetsX,c.capInsetsY,c.capInsetsWidth,c.capInsetsHeight)),d=c.scale9Width,e=c.scale9Height,null!=d&&null!=e&&a.setSize(cc.size(d,e)));d=c.text;null!=d&&a.setTitleText(d);a.setTitleColor(cc.color(c.textColorR?c.textColorR:255,c.textColorG?c.textColorG:255,c.textColorB?c.textColorB:255));null!=c.fontSize&&
a.setTitleFontSize(c.fontSize);c.fontName&&a.setTitleFontName(c.fontName);ccs.WidgetReader.setColorPropsFromJsonDictionary.call(this,a,c)}};ccs.CheckBoxReader={getInstance:function(){return ccs.CheckBoxReader},setPropsFromJsonDictionary:function(a,c){ccs.WidgetReader.setPropsFromJsonDictionary.call(this,a,c);var d=c.backGroundBoxData,e=d.resourceType,d=ccs.WidgetReader.getResourcePath(d,"path",e);a.loadTextureBackGround(d,e);var f=c.backGroundBoxSelectedData,g=f.resourceType,f=ccs.WidgetReader.getResourcePath(f,"path",g);f||(g=e,f=d);a.loadTextureBackGroundSelected(f,g);d=c.frontCrossData;e=d.resourceType;d=ccs.WidgetReader.getResourcePath(d,
"path",e);a.loadTextureFrontCross(d,e);f=c.backGroundBoxDisabledData;g=f.resourceType;f=ccs.WidgetReader.getResourcePath(f,"path",g);f||(g=e,f=d);a.loadTextureBackGroundDisabled(f,g);d=c.frontCrossDisabledData;e=d.resourceType;d=ccs.WidgetReader.getResourcePath(d,"path",e);a.loadTextureFrontCrossDisabled(d,e);c.selectedState&&a.setSelectedState(c.selectedState);ccs.WidgetReader.setColorPropsFromJsonDictionary.call(this,a,c)}};ccs.ImageViewReader={getInstance:function(){return ccs.ImageViewReader},setPropsFromJsonDictionary:function(a,c){ccs.WidgetReader.setPropsFromJsonDictionary.call(this,a,c);var d=ccs.uiReader.getFilePath(),e=c.fileNameData;switch(e.resourceType){case 0:(e=e.path)&&""!==e&&a.loadTexture(d+e);break;case 1:e=e.path,a.loadTexture(e,1)}d=!1;c.scale9Enable&&(d=c.scale9Enable);a.setScale9Enabled(d);d&&(d=c.scale9Height,c.scale9Width&&d&&a.setSize(cc.size(c.scale9Width,c.scale9Height)),a.setCapInsets(cc.rect(c.capInsetsX,
c.capInsetsY,c.capInsetsWidth,c.capInsetsHeight)));ccs.WidgetReader.setColorPropsFromJsonDictionary.call(this,a,c)}};ccs.LabelAtlasReader={getInstance:function(){return ccs.LabelAtlasReader},setPropsFromJsonDictionary:function(a,c){ccs.WidgetReader.setPropsFromJsonDictionary.call(this,a,c);var d=ccs.uiReader.getFilePath(),e=c.charMapFileData||c.charMapFile,f=c.itemWidth,g=c.itemHeight,h=c.startCharMap;if(null!=c.stringValue&&e&&null!=f&&null!=g&&null!=h)switch(e=c.charMapFileData,e.resourceType){case 0:a.setProperty(c.stringValue,d+e.path,c.itemWidth,c.itemHeight,c.startCharMap);break;case 1:cc.log("Wrong res type of LabelAtlas!")}ccs.WidgetReader.setColorPropsFromJsonDictionary.call(this,
a,c)}};ccs.LabelBMFontReader={getInstance:function(){return ccs.LabelBMFontReader},setPropsFromJsonDictionary:function(a,c){ccs.WidgetReader.setPropsFromJsonDictionary.call(this,a,c);var d=ccs.uiReader.getFilePath(),e=c.fileNameData;switch(e.resourceType){case 0:a.setFntFile(d+e.path);break;case 1:cc.log("Wrong res type of LabelAtlas!")}a.setString(c.text);ccs.WidgetReader.setColorPropsFromJsonDictionary.call(this,a,c)}};ccs.LabelReader={getInstance:function(){return ccs.LabelReader},setPropsFromJsonDictionary:function(a,c){ccs.WidgetReader.setPropsFromJsonDictionary.call(this,a,c);a.setTouchScaleChangeEnabled(c.touchScaleEnable);a.setString(c.text);null!=c.fontSize&&a.setFontSize(c.fontSize);null!=c.fontName&&a.setFontName(c.fontName);var d=c.areaHeight;null!=c.areaWidth&&null!=d&&(d=cc.size(c.areaWidth,c.areaHeight),a.setTextAreaSize(d));null!=c.hAlignment&&a.setTextHorizontalAlignment(c.hAlignment);null!=c.vAlignment&&
a.setTextVerticalAlignment(c.vAlignment);ccs.WidgetReader.setColorPropsFromJsonDictionary.call(this,a,c)}};ccs.LayoutReader={getInstance:function(){return ccs.LayoutReader},setPropsFromJsonDictionary:function(a,c){ccs.WidgetReader.setPropsFromJsonDictionary.call(this,a,c);var d=ccs.uiReader.getFilePath(),e=0,f=0;c.adaptScreen?(f=cc.director.getWinSize(),e=f.width,f=f.height):(e=c.width,f=c.height);a.setSize(cc.size(e,f));a.setClippingEnabled(c.clipAble);e=c.backGroundScale9Enable;a.setBackGroundImageScale9Enabled(e);var f=c.bgColorR,g=c.bgColorG,h=c.bgColorB,k=c.bgStartColorR,l=c.bgStartColorG,m=c.bgStartColorB,
p=c.bgEndColorR,n=c.bgEndColorG,r=c.bgEndColorB;a.setBackGroundColorVector(cc.p(c.vectorX,c.vectorY));var q=c.bgColorOpacity;a.setBackGroundColorType(c.colorType);a.setBackGroundColor(cc.color(k,l,m),cc.color(p,n,r));a.setBackGroundColor(cc.color(f,g,h));a.setBackGroundColorOpacity(q);if(f=c.backGroundImageData)switch(f.resourceType){case 0:f=f.path;a.setBackGroundImage(f&&""!==f?d+f:null);break;case 1:f=f.path,a.setBackGroundImage(f,1)}e&&a.setBackGroundImageCapInsets(cc.rect(c.capInsetsX,c.capInsetsY,
c.capInsetsWidth,c.capInsetsHeight));a.setLayoutType(c.layoutType);ccs.WidgetReader.setColorPropsFromJsonDictionary.call(this,a,c)}};ccs.ScrollViewReader={getInstance:function(){return ccs.ScrollViewReader},setPropsFromJsonDictionary:function(a,c){ccs.LayoutReader.setPropsFromJsonDictionary.call(this,a,c);a.setInnerContainerSize(cc.size(c.innerWidth||200,c.innerHeight||200));a.setDirection(c.direction||1);a.setBounceEnabled(c.bounceEnable);ccs.WidgetReader.setColorPropsFromJsonDictionary.call(this,a,c)}};ccs.ListViewReader={getInstance:function(){return ccs.ListViewReader},setPropsFromJsonDictionary:function(a,c){ccs.ScrollViewReader.setPropsFromJsonDictionary.call(this,a,c);a.setDirection(c.direction);a.setGravity(c.gravity);a.setItemsMargin(c.itemMargin)}};ccs.LoadingBarReader={getInstance:function(){return ccs.LoadingBarReader},setPropsFromJsonDictionary:function(a,c){ccs.WidgetReader.setPropsFromJsonDictionary.call(this,a,c);var d=ccs.uiReader.getFilePath(),e=c.textureData;switch(e.resourceType){case 0:(e=e.path)&&""!==e&&a.loadTexture(d+e);break;case 1:e=e.path,a.loadTexture(e,1)}d=c.scale9Enable;a.setScale9Enabled(d);d&&(a.setCapInsets(cc.rect(c.capInsetsX,c.capInsetsY,c.capInsetsWidth,c.capInsetsHeight)),a.setSize(cc.size(c.width,c.height)));a.setDirection(c.direction);
a.setPercent(c.percent);ccs.WidgetReader.setColorPropsFromJsonDictionary.call(this,a,c)}};ccs.PageViewReader={instancePageViewReader:null,getInstance:function(){return ccs.PageViewReader},setPropsFromJsonDictionary:function(a,c){ccs.LayoutReader.setPropsFromJsonDictionary.call(this,a,c)}};ccs.SliderReader={getInstance:function(){return ccs.SliderReader},setPropsFromJsonDictionary:function(a,c){ccs.WidgetReader.setPropsFromJsonDictionary.call(this,a,c);var d=ccs.uiReader.getFilePath(),e=c.scale9Enable;a.setScale9Enabled(e);var f=c.length,g=c.barFileNameData,h=g.resourceType,g=g.path;if(null!=c.barFileName){if(e){switch(h){case 0:a.loadBarTexture(g?d+g:null);break;case 1:a.loadBarTexture(g,1)}a.setSize(cc.size(f,a.getContentSize().height))}}else switch(h){case 0:a.loadBarTexture(g?d+
g:null);break;case 1:a.loadBarTexture(g,1)}f=c.ballNormalData;e=f.resourceType;f=f.path;switch(e){case 0:a.loadSlidBallTextureNormal(f?d+f:null);break;case 1:a.loadSlidBallTextureNormal(f,1)}g=c.ballPressedData;h=g.resourceType;g=g.path;null===g&&(h=e,g=f);switch(h){case 0:a.loadSlidBallTexturePressed(g?d+g:null);break;case 1:a.loadSlidBallTexturePressed(g,1)}e=c.ballDisabledData;f=e.path;switch(e.resourceType){case 0:a.loadSlidBallTextureDisabled(f?d+f:null);break;case 1:a.loadSlidBallTextureDisabled(f,
1)}e=c.progressBarData;f=e.path;switch(e.resourceType){case 0:a.loadProgressBarTexture(f?d+f:null);break;case 1:a.loadProgressBarTexture(f,1)}ccs.WidgetReader.setColorPropsFromJsonDictionary.call(this,a,c)}};ccs.TextFieldReader={getInstance:function(){return ccs.TextFieldReader},setPropsFromJsonDictionary:function(a,c){ccs.WidgetReader.setPropsFromJsonDictionary.call(this,a,c);var d=c.placeHolder;d&&a.setPlaceHolder(d);a.setString(c.text);(d=c.fontSize1)&&a.setFontSize(d);(d=c.fontName)&&a.setFontName(d);var d=c.touchSizeWidth,e=c.touchSizeHeight;d&&e&&a.setTouchSize(d,e);d=c.maxLengthEnable;a.setMaxLengthEnabled(d);d&&a.setMaxLength(c.maxLength);d=c.passwordEnable;a.setPasswordEnabled(d);d&&a.setPasswordStyleText(c.passwordStyleText);
d=c.areaWidth;e=c.areaHeight;d&&e&&(d=cc.size(d,e),a.setTextAreaSize(d));(d=c.hAlignment)&&a.setTextHorizontalAlignment(d);(d=c.vAlignment)&&a.setTextVerticalAlignment(d);ccs.WidgetReader.setColorPropsFromJsonDictionary.call(this,a,c)}};ccs.WidgetReaderProtocol=ccs.Class.extend({setPropsFromJsonDictionary:function(a,c){}});ccs.WidgetReader={getInstance:function(){return ccs.WidgetReader},setPropsFromJsonDictionary:function(a,c){var d=c.ignoreSize;null!=d&&a.ignoreContentAdaptWithSize(d);a.setSizeType(c.sizeType);a.setPositionType(c.positionType);a.setSizePercent(cc.p(c.sizePercentX,c.sizePercentY));a.setPositionPercent(cc.p(c.positionPercentX,c.positionPercentY));var e=d=0;c.adaptScreen?(e=cc.director.getWinSize(),d=e.width,e=e.height):(d=c.width,e=c.height);a.setContentSize(d,e);a.setTag(c.tag);a.setActionTag(c.actiontag);
a.setTouchEnabled(c.touchAble);d=c.name;a.setName(d?d:"default");a.setPosition(c.x,c.y);a.setScaleX(c.scaleX||1);a.setScaleY(c.scaleY||1);a.setRotation(c.rotation||0);d=c.visible||!1;null!=d&&a.setVisible(d);a.setLocalZOrder(c.ZOrder);if(null!=c.layoutParameter){d=c.layoutParameter;e=null;switch(d.type){case 1:e=new ccui.LinearLayoutParameter;e.setGravity(d.gravity);break;case 2:var f=e=new ccui.RelativeLayoutParameter;f.setRelativeName(d.relativeName);f.setRelativeToWidgetName(d.relativeToName);
f.setAlign(d.align)}null!=e&&(e.setMargin(d.marginLeft||0,d.marginTop||0,d.marginRight||0,d.marginDown||0),a.setLayoutParameter(e))}},setColorPropsFromJsonDictionary:function(a,c){var d=c.opacity;null!=d&&a.setOpacity(d);var d=c.colorR,e=c.colorG,f=c.colorB;a.setColor(cc.color(null==d?255:d,null==e?255:e,null==f?255:f));ccs.WidgetReader.setAnchorPointForWidget(a,c);a.setFlippedX(c.flipX);a.setFlippedY(c.flipY)},setAnchorPointForWidget:function(a,c){var d=c.anchorPointX,e;e=null!=d?c.anchorPointX:
a.getAnchorPoint().x;var f=c.anchorPointY,g;g=null!=f?c.anchorPointY:a.getAnchorPoint().y;(null!=d||null!=f)&&a.setAnchorPoint(cc.p(e,g))},getResourcePath:function(a,c,d){a=a[c];var e;null!=a&&(0==d?e=ccs.uiReader.getFilePath()+a:1==d?e=a:cc.assert(0,"invalid TextureResType!!!"));return e}};(function(){var a=ccs.objectFactory;a.registerType({_className:"ButtonReader",_fun:ccs.ButtonReader});a.registerType({_className:"CheckBoxReader",_fun:ccs.CheckBoxReader});a.registerType({_className:"SliderReader",_fun:ccs.SliderReader});a.registerType({_className:"ImageViewReader",_fun:ccs.ImageViewReader});a.registerType({_className:"LoadingBarReader",_fun:ccs.LoadingBarReader});a.registerType({_className:"TextAtlasReader",_fun:ccs.LabelAtlasReader});a.registerType({_className:"TextReader",_fun:ccs.LabelReader});
a.registerType({_className:"TextBMFontReader",_fun:ccs.LabelBMFontReader});a.registerType({_className:"TextFieldReader",_fun:ccs.TextFieldReader});a.registerType({_className:"LayoutReader",_fun:ccs.LayoutReader});a.registerType({_className:"PageViewReader",_fun:ccs.PageViewReader});a.registerType({_className:"ScrollViewReader",_fun:ccs.ScrollViewReader});a.registerType({_className:"ListViewReader",_fun:ccs.ListViewReader});a.registerType({_className:"WidgetReader",_fun:ccs.WidgetReader});a.registerType({_className:"Button",
_fun:ccui.Button});a.registerType({_className:"CheckBox",_fun:ccui.CheckBox});a.registerType({_className:"ImageView",_fun:ccui.ImageView});a.registerType({_className:"Text",_fun:ccui.Text});a.registerType({_className:"TextAtlas",_fun:ccui.TextAtlas});a.registerType({_className:"TextBMFont",_fun:ccui.TextBMFont});a.registerType({_className:"LoadingBar",_fun:ccui.LoadingBar});a.registerType({_className:"Slider",_fun:ccui.Slider});a.registerType({_className:"TextField",_fun:ccui.TextField});a.registerType({_className:"Layout",
_fun:ccui.Layout});a.registerType({_className:"ListView",_fun:ccui.ListView});a.registerType({_className:"PageView",_fun:ccui.PageView});a.registerType({_className:"ScrollView",_fun:ccui.ScrollView})})();
ccs.uiReader={_filePath:"",_olderVersion:!1,_fileDesignSizes:{},_mapObject:{},_mapParseSelector:{},getVersionInteger:function(a){if(!a)return 0;var c=a,d=c.length;if(7>d)return 0;var e=c.indexOf("."),f=c.substr(0,e),c=c.substr(e+1,d-1),e=c.indexOf("."),g=c.substr(0,e),c=c.substr(e+1,d-1),e=c.indexOf(".");a=c.substr(0,e);c=c.substr(e+1,d-1);e=c.indexOf(".");c=-1==e?c:c.substr(0,e);f=parseInt(f);g=parseInt(g);a=parseInt(a);c=parseInt(c);return 1E3*f+100*g+10*a+c},storeFileDesignSize:function(a,c){this._fileDesignSizes[a]=
c},getFileDesignSize:function(a){return this._fileDesignSizes[a]},widgetFromJsonFile:function(a){var c=cc.loader.getRes(a);if(!c)throw"Please load the resource first : "+a;var d=cc.path.dirname(a);this._filePath=""==d?d:d+"/";var d=c.version,e=this.getVersionInteger(d);a=(d?250>e?new ccs.WidgetPropertiesReader0250:new ccs.WidgetPropertiesReader0300:new ccs.WidgetPropertiesReader0250).createWidget(c,this._filePath,a);if(!d||250>e)this._olderVersion=!0;return a},clear:function(){this._filePath="";this._olderVersion=
!1;this._fileDesignSizes={}},registerTypeAndCallBack:function(a,c,d,e){var f=ccs.objectFactory;c=new ccs.TInfo(a,c);f.registerType(c);d&&(this._mapObject[a]=d);e&&(this._mapParseSelector[a]=e)},getFilePath:function(){return this._filePath},getParseObjectMap:function(){return this._mapObject},getParseCallBackMap:function(){return this._mapParseSelector}};
ccs.WidgetPropertiesReader=ccs.Class.extend({_filePath:"",createWidget:function(a,c,d){},widgetFromJsonDictionary:function(a){},createGUI:function(a){a=this.getGUIClassName(a);return ccs.objectFactory.createObject(a)},getGUIClassName:function(a){var c=a;"Panel"==a?c="Layout":"TextArea"==a?c="Text":"TextButton"==a?c="Button":"Label"==a?c="Text":"LabelAtlas"==a?c="TextAtlas":"LabelBMFont"==a&&(c="TextBMFont");return c},getWidgetReaderClassName:function(a){"Panel"==a?a="Layout":"TextArea"==a?a="Text":
"TextButton"==a?a="Button":"Label"==a?a="Text":"LabelAtlas"==a?a="TextAtlas":"LabelBMFont"==a&&(a="TextBMFont");return a+"Reader"},getWidgetReaderClassNameFromWidget:function(a){var c;a instanceof ccui.Button?c="ButtonReader":a instanceof ccui.CheckBox?c="CheckBoxReader":a instanceof ccui.ImageView?c="ImageViewReader":a instanceof ccui.TextAtlas?c="TextAtlasReader":a instanceof ccui.TextBMFont?c="TextBMFontReader":a instanceof ccui.Text?c="TextReader":a instanceof ccui.LoadingBar?c="LoadingBarReader":
a instanceof ccui.Slider?c="SliderReader":a instanceof ccui.TextField?c="TextFieldReader":a instanceof ccui.ListView?c="ListViewReader":a instanceof ccui.PageView?c="PageViewReader":a instanceof ccui.ScrollView?c="ScrollViewReader":a instanceof ccui.Layout?c="LayoutReader":a instanceof ccui.Widget&&(c="WidgetReader");return c},createWidgetReaderProtocol:function(a){return ccs.objectFactory.createObject(a)}});
ccs.WidgetPropertiesReader0250=ccs.WidgetPropertiesReader.extend({createWidget:function(a,c,d){this._filePath=""==c?c:cc.path.join(c,"/");for(var e=a.textures,f=0;f<e.length;f++){var g=c,g=g+e[f];cc.spriteFrameCache.addSpriteFrames(g)}c=a.designWidth;e=a.designHeight;0>=c||0>=e?(cc.log("Read design size error!"),f=cc.director.getWinSize(),ccs.uiReader.storeFileDesignSize(d,f)):ccs.uiReader.storeFileDesignSize(d,cc.size(c,e));f=this.widgetFromJsonDictionary(a.widgetTree);g=f.getContentSize();0==g.width&&
0==g.height&&f.setSize(cc.size(c,e));ccs.actionManager.initWithDictionary(d,a.animation,f);return f},widgetFromJsonDictionary:function(a){var c=null,d=a.classname,e=a.options;"Button"==d?(c=ccui.Button.create(),this.setPropsForButtonFromJsonDictionary(c,e)):"CheckBox"==d?(c=ccui.CheckBox.create(),this.setPropsForCheckBoxFromJsonDictionary(c,e)):"Label"==d?(c=ccui.Text.create(),this.setPropsForLabelFromJsonDictionary(c,e)):"LabelAtlas"==d?(c=ccui.TextAtlas.create(),this.setPropsForLabelAtlasFromJsonDictionary(c,
e)):"LoadingBar"==d?(c=ccui.LoadingBar.create(),this.setPropsForLoadingBarFromJsonDictionary(c,e)):"ScrollView"==d?(c=ccui.ScrollView.create(),this.setPropsForScrollViewFromJsonDictionary(c,e)):"TextArea"==d?(c=ccui.Text.create(),this.setPropsForLabelFromJsonDictionary(c,e)):"TextButton"==d?(c=ccui.Button.create(),this.setPropsForButtonFromJsonDictionary(c,e)):"TextField"==d?(c=ccui.TextField.create(),this.setPropsForTextFieldFromJsonDictionary(c,e)):"ImageView"==d?(c=ccui.ImageView.create(),this.setPropsForImageViewFromJsonDictionary(c,
e)):"Panel"==d?(c=ccui.Layout.create(),this.setPropsForLayoutFromJsonDictionary(c,e)):"Slider"==d?(c=ccui.Slider.create(),this.setPropsForSliderFromJsonDictionary(c,e)):"LabelBMFont"==d?(c=ccui.TextBMFont.create(),this.setPropsForLabelBMFontFromJsonDictionary(c,e)):"DragPanel"==d&&(c=ccui.ScrollView.create(),this.setPropsForScrollViewFromJsonDictionary(c,e));a=a.children;for(d=0;d<a.length;d++)(e=this.widgetFromJsonDictionary(a[d]))&&c.addChild(e);return c},setPropsForWidgetFromJsonDictionary:function(a,
c){void 0!==c.ignoreSize&&a.ignoreContentAdaptWithSize(c.ignoreSize);a.setSize(cc.size(c.width,c.height));a.setTag(c.tag);a.setActionTag(c.actiontag);a.setTouchEnabled(c.touchAble);var d=c.name;a.setName(d?d:"default");a.setPosition(cc.p(c.x,c.y));void 0!==c.scaleX&&a.setScaleX(c.scaleX);void 0!==c.scaleY&&a.setScaleY(c.scaleY);void 0!==c.rotation&&a.setRotation(c.rotation);void 0!==c.visible&&a.setVisible(c.visible);a.setLocalZOrder(c.ZOrder)},setPropsForAllWidgetFromJsonDictionary:function(){},
setPropsForAllCustomWidgetFromJsonDictionary:function(){},setColorPropsForWidgetFromJsonDictionary:function(a,c){void 0!==c.opacity&&a.setOpacity(c.opacity);a.setColor(cc.color(void 0!==c.colorR?c.colorR:255,void 0!==c.colorG?c.colorG:255,void 0!==c.colorB?c.colorB:255));var d=void 0!==c.anchorPointX?c.anchorPointX:a.getWidgetType()==ccui.Widget.TYPE_WIDGET?0.5:0,e=void 0!==c.anchorPointY?c.anchorPointY:a.getWidgetType()==ccui.Widget.TYPE_WIDGET?0.5:0;a.setAnchorPoint(d,e);d=c.flipY;a.setFlippedX(c.flipX);
a.setFlippedY(d)},setPropsForButtonFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);var d=c.scale9Enable;a.setScale9Enabled(d);var e=c.normal,f=c.pressed,g=c.disabled,h=e?this._filePath+e:null,k=f?this._filePath+f:null,l=g?this._filePath+g:null,m=c.useMergedTexture;d?(m?a.loadTextures(e,f,g,ccui.Widget.PLIST_TEXTURE):a.loadTextures(h,k,l),void 0!==c.scale9Width&&void 0!==c.scale9Height&&a.setSize(cc.size(c.scale9Width,c.scale9Height))):m?a.loadTextures(e,f,g,ccui.Widget.PLIST_TEXTURE):
a.loadTextures(h,k,l);void 0!==c.text&&(d=c.text||"")&&a.setTitleText(d);void 0!==c.fontSize&&a.setTitleFontSize(c.fontSize);void 0!==c.fontName&&a.setTitleFontName(c.fontName);d=cc.color(void 0!==c.textColorR?c.textColorR:255,void 0!==c.textColorG?c.textColorG:255,void 0!==c.textColorB?c.textColorB:255);a.setTitleColor(d);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForCheckBoxFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);var d=c.backGroundBox,e=c.backGroundBoxSelected,
f=c.frontCross,g=c.backGroundBoxDisabled,h=c.frontCrossDisabled,k=this._filePath,l=d?k+d:null,m=e?k+e:null,p=f?k+f:null,n=g?k+g:null,k=h?k+h:null;c.useMergedTexture?a.loadTextures(d,e,f,g,h,ccui.Widget.PLIST_TEXTURE):a.loadTextures(l,m,p,n,k);a.setSelectedState(c.selectedState||!1);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForImageViewFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);var d=c.fileName,e=c.scale9Enable||!1;a.setScale9Enabled(e);var f=this._filePath,
g=null;d&&(g=f+d);f=c.useMergedTexture;e?(f?a.loadTexture(d,ccui.Widget.PLIST_TEXTURE):a.loadTexture(g),void 0!==c.scale9Width&&void 0!==c.scale9Height&&a.setSize(cc.size(c.scale9Width,c.scale9Height)),a.setCapInsets(cc.rect(c.capInsetsX,c.capInsetsY,c.capInsetsWidth,c.capInsetsHeight))):f?a.loadTexture(d,ccui.Widget.PLIST_TEXTURE):a.loadTexture(g);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForLabelFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);a.setTouchScaleChangeEnabled(c.touchScaleEnable);
a.setString(c.text);void 0!==c.fontSize&&a.setFontSize(c.fontSize);void 0!==c.fontName&&a.setFontName(c.fontName);if(void 0!==c.areaWidth&&void 0!==c.areaHeight){var d=cc.size(c.areaWidth,c.areaHeight);a.setTextAreaSize(d)}c.hAlignment&&a.setTextHorizontalAlignment(c.hAlignment);c.vAlignment&&a.setTextVerticalAlignment(c.vAlignment);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForLabelAtlasFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);var d=void 0!==
c.charMapFile,e=void 0!==c.itemWidth,f=void 0!==c.itemHeight,g=void 0!==c.startCharMap;void 0!==c.stringValue&&(d&&e&&f&&g&&c.charMapFile)&&a.setProperty(c.stringValue,this._filePath+c.charMapFile,c.itemWidth,c.itemHeight,c.startCharMap);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForLayoutFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);!(a instanceof ccui.ScrollView)&&!(a instanceof ccui.ListView)&&a.setClippingEnabled(c.clipAble);var d=c.backGroundScale9Enable;
a.setBackGroundImageScale9Enabled(d);var e=c.bgColorR,f=c.bgColorG,g=c.bgColorB,h=c.bgStartColorR,k=c.bgStartColorG,l=c.bgStartColorB,m=c.bgEndColorR,p=c.bgEndColorG,n=c.bgEndColorB;a.setBackGroundColorVector(cc.p(c.vectorX,c.vectorY));var r=c.bgColorOpacity;a.setBackGroundColorType(c.colorType);a.setBackGroundColor(cc.color(h,k,l),cc.color(m,p,n));a.setBackGroundColor(cc.color(e,f,g));a.setBackGroundColorOpacity(r);f=(e=c.backGroundImage)?this._filePath+e:null;c.useMergedTexture?a.setBackGroundImage(e,
ccui.Widget.PLIST_TEXTURE):a.setBackGroundImage(f);d&&a.setBackGroundImageCapInsets(cc.rect(c.capInsetsX,c.capInsetsY,c.capInsetsWidth,c.capInsetsHeight));this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForScrollViewFromJsonDictionary:function(a,c){this.setPropsForLayoutFromJsonDictionary(a,c);a.setInnerContainerSize(cc.size(c.innerWidth,c.innerHeight));a.setDirection(c.direction);a.setBounceEnabled(c.bounceEnable);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForContainerWidgetFromJsonDictionary:function(a,
c){this.setPropsForWidgetFromJsonDictionary(a,c);(a instanceof ccui.ScrollView||a instanceof ccui.ListView)&&a.setClippingEnabled(c.clipAble);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForSliderFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);var d=c.barTextureScale9Enable||!1;a.setScale9Enabled(d);var e=c.length,f=c.useMergedTexture;if(void 0!==c.barFileName)if(d){var g=(d=c.barFileName)?this._filePath+d:null;f?a.loadBarTexture(d,ccui.Widget.PLIST_TEXTURE):
a.loadBarTexture(g);a.setSize(cc.size(e,a.getContentSize().height))}else g=(d=c.barFileName)?this._filePath+d:null,f?a.loadBarTexture(d,ccui.Widget.PLIST_TEXTURE):a.loadBarTexture(g);var e=c.ballNormal,d=c.ballPressed,g=c.ballDisabled,h=e?this._filePath+e:null,k=d?this._filePath+d:null,l=g?this._filePath+g:null;f?a.loadSlidBallTextures(e,d,g,ccui.Widget.PLIST_TEXTURE):a.loadSlidBallTextures(h,k,l);a.setPercent(c.percent);g=(d=c.progressBarFileName)?this._filePath+d:null;f?a.loadProgressBarTexture(d,
ccui.Widget.PLIST_TEXTURE):a.loadProgressBarTexture(g);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForTextAreaFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);a.setString(c.text);void 0!==c.fontSize&&a.setFontSize(c.fontSize);var d=c.colorR,e=c.colorG,f=c.colorB;a.setColor(cc.color(null==d?255:d,null==e?255:e,null==f?255:f));a.setFontName(c.fontName);void 0!==c.areaWidth&&void 0!==c.areaHeight&&(d=cc.size(c.areaWidth,c.areaHeight),a.setTextAreaSize(d));
c.hAlignment&&a.setTextHorizontalAlignment(c.hAlignment);c.vAlignment&&a.setTextVerticalAlignment(c.vAlignment);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForTextButtonFromJsonDictionary:function(a,c){this.setPropsForButtonFromJsonDictionary(a,c);a.setTitleText(c.text||"");a.setTitleColor(cc.color(void 0!==c.textColorR?c.textColorR:255,void 0!==c.textColorG?c.textColorG:255,void 0!==c.textColorB?c.textColorB:255));void 0!==c.fontSize&&a.setTitleFontSize(c.fontSize);void 0!==c.fontName&&
a.setTitleFontName(c.fontName);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForTextFieldFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);void 0!==c.placeHolder&&a.setPlaceHolder(c.placeHolder);a.setString(c.text);void 0!==c.fontSize&&a.setFontSize(c.fontSize);void 0!==c.fontName&&a.setFontName(c.fontName);void 0!==c.touchSizeWidth&&void 0!==c.touchSizeHeight&&a.setTouchSize(cc.size(c.touchSizeWidth,c.touchSizeHeight));var d=c.maxLengthEnable;a.setMaxLengthEnabled(d);
d&&a.setMaxLength(c.maxLength);d=c.passwordEnable;a.setPasswordEnabled(d);d&&a.setPasswordStyleText(c.passwordStyleText);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForLoadingBarFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);var d=c.texture,e=d?this._filePath+d:null;c.useMergedTexture?a.loadTexture(d,ccui.Widget.PLIST_TEXTURE):a.loadTexture(e);a.setDirection(c.direction);a.setPercent(c.percent);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForListViewFromJsonDictionary:function(a,
c){this.setPropsForLayoutFromJsonDictionary(a,c)},setPropsForPageViewFromJsonDictionary:function(a,c){this.setPropsForLayoutFromJsonDictionary(a,c)},setPropsForLabelBMFontFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);a.setFntFile(this._filePath+c.fileName);a.setString(c.text);this.setColorPropsForWidgetFromJsonDictionary(a,c)}});
ccs.WidgetPropertiesReader0300=ccs.WidgetPropertiesReader.extend({createWidget:function(a,c,d){this._filePath=""==c?c:cc.path.join(c,"/");for(var e=a.textures,f=0;f<e.length;f++){var g=c,g=g+e[f];cc.spriteFrameCache.addSpriteFrames(g)}c=a.designWidth;e=a.designHeight;0>=c||0>=e?(cc.log("Read design size error!"),f=cc.director.getWinSize(),ccs.uiReader.storeFileDesignSize(d,f)):ccs.uiReader.storeFileDesignSize(d,cc.size(c,e));f=this.widgetFromJsonDictionary(a.widgetTree);g=f.getContentSize();0==g.width&&
0==g.height&&f.setSize(cc.size(c,e));ccs.actionManager.initWithDictionary(d,a.animation,f);return f},setPropsForAllWidgetFromJsonDictionary:function(a,c,d){a&&a.setPropsFromJsonDictionary&&a.setPropsFromJsonDictionary(c,d)},setPropsForAllCustomWidgetFromJsonDictionary:function(a,c,d){var e=ccs.uiReader,f=e.getParseObjectMap()[a],e=e.getParseCallBackMap()[a];f&&e&&e(a,c,d)},widgetFromJsonDictionary:function(a){var c=a.classname,d=a.options,e=this.createGUI(c),f=this.getWidgetReaderClassName(c);(f=
this.createWidgetReaderProtocol(f))?this.setPropsForAllWidgetFromJsonDictionary(f,e,d):(f=this.getWidgetReaderClassNameFromWidget(e),(f=ccs.objectFactory.createObject(f))&&e?(this.setPropsForAllWidgetFromJsonDictionary(f,e,d),d=JSON.parse(d.customProperty),this.setPropsForAllCustomWidgetFromJsonDictionary(c,e,d)):cc.log("Widget or WidgetReader doesn't exists!!!  Please check your json file."));a=a.children;for(c=0;c<a.length;c++)if(d=this.widgetFromJsonDictionary(a[c]))if(e instanceof ccui.PageView)e.addPage(d);
else if(e instanceof ccui.ListView)e.pushBackCustomItem(d);else{if(!(e instanceof ccui.Layout)){if(d.getPositionType()==ccui.Widget.POSITION_PERCENT){var f=d.getPositionPercent(),g=e.getAnchorPoint();d.setPositionPercent(cc.p(f.x+g.x,f.y+g.y))}f=e.getAnchorPointInPoints();d.setPosition(cc.p(d.getPositionX()+f.x,d.getPositionY()+f.y))}e.addChild(d)}return e},setPropsForWidgetFromJsonDictionary:function(a,c){var d=c.name;a.setName(d?d:"default");void 0!==c.ignoreSize&&a.ignoreContentAdaptWithSize(c.ignoreSize);
a.setSizeType(c.sizeType);a.setPositionType(c.positionType);a.setSizePercent(cc.p(c.sizePercentX,c.sizePercentY));a.setPositionPercent(cc.p(c.positionPercentX,c.positionPercentY));a.setSize(cc.size(c.width,c.height));a.setTag(c.tag);a.setActionTag(c.actiontag);a.setTouchEnabled(c.touchAble);a.setPosition(cc.p(c.x,c.y));void 0!==c.scaleX&&a.setScaleX(c.scaleX);void 0!==c.scaleY&&a.setScaleY(c.scaleY);void 0!==c.rotation&&a.setRotation(c.rotation);void 0!==c.visible&&a.setVisible(c.visible);a.setLocalZOrder(c.ZOrder);
if(d=c.layoutParameter){var e;switch(d.type){case 1:e=ccui.LinearLayoutParameter.create();e.setGravity(d.gravity);break;case 2:e=ccui.RelativeLayoutParameter.create(),e.setRelativeName(d.relativeName),e.setRelativeToWidgetName(d.relativeToName),e.setAlign(d.align)}e.setMargin(new ccui.Margin(d.marginLeft,d.marginTop,d.marginRight,d.marginDown));a.setLayoutParameter(e)}},setColorPropsForWidgetFromJsonDictionary:function(a,c){void 0!==c.opacity&&a.setOpacity(c.opacity);a.setColor(cc.color(void 0!==
c.colorR?c.colorR:255,void 0!==c.colorG?c.colorG:255,void 0!==c.colorB?c.colorB:255));var d=void 0!==c.anchorPointX?c.anchorPointX:a.getWidgetType()==ccui.Widget.TYPE_WIDGET?0.5:0,e=void 0!==c.anchorPointY?c.anchorPointY:a.getWidgetType()==ccui.Widget.TYPE_WIDGET?0.5:0;a.setAnchorPoint(d,e);d=c.flipY;a.setFlippedX(c.flipX);a.setFlippedY(d)},setPropsForButtonFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);var d=c.scale9Enable;a.setScale9Enabled(d);var e=c.normalData;
switch(e.resourceType){case 0:e=e.path;a.loadTextureNormal(e?this._filePath+e:null);break;case 1:e=e.path,a.loadTextureNormal(e,ccui.Widget.PLIST_TEXTURE)}e=c.pressedData;switch(e.resourceType){case 0:e=e.path;a.loadTexturePressed(e?this._filePath+e:null);break;case 1:e=e.path,a.loadTexturePressed(e,ccui.Widget.PLIST_TEXTURE)}e=c.disabledData;switch(e.resourceType){case 0:e=e.path;a.loadTextureDisabled(e?this._filePath+e:null);break;case 1:e=e.path,a.loadTextureDisabled(e,ccui.Widget.PLIST_TEXTURE)}d&&
(a.setCapInsets(cc.rect(c.capInsetsX,c.capInsetsY,c.capInsetsWidth,c.capInsetsHeight)),void 0!==c.scale9Width&&void 0!==c.scale9Height&&a.setSize(cc.size(c.scale9Width,c.scale9Height)));void 0!==c.text&&(d=c.text||"")&&a.setTitleText(d);void 0!==c.fontSize&&a.setTitleFontSize(c.fontSize);void 0!==c.fontName&&a.setTitleFontName(c.fontName);d=cc.color(void 0!==c.textColorR?c.textColorR:255,void 0!==c.textColorG?c.textColorG:255,void 0!==c.textColorB?c.textColorB:255);a.setTitleColor(d);this.setColorPropsForWidgetFromJsonDictionary(a,
c)},setPropsForCheckBoxFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);var d=c.backGroundBoxData;switch(d.resourceType){case 0:d=d.path;a.loadTextureBackGround(d?this._filePath+d:null);break;case 1:d=d.path,a.loadTextureBackGround(d,ccui.Widget.PLIST_TEXTURE)}d=c.backGroundBoxSelectedData;switch(d.resourceType){case 0:d=d.path;a.loadTextureBackGroundSelected(d?this._filePath+d:null);break;case 1:d=d.path,a.loadTextureBackGroundSelected(d,ccui.Widget.PLIST_TEXTURE)}d=
c.frontCrossData;switch(d.resourceType){case 0:d=d.path;a.loadTextureFrontCross(d?this._filePath+d:null);break;case 1:d=d.path,a.loadTextureFrontCross(d,ccui.Widget.PLIST_TEXTURE)}d=c.backGroundBoxDisabledData;switch(d.resourceType){case 0:d=d.path;a.loadTextureBackGroundDisabled(d?this._filePath+d:null);break;case 1:d=d.path,a.loadTextureBackGroundDisabled(d,ccui.Widget.PLIST_TEXTURE)}switch(c.frontCrossDisabledData.resourceType){case 0:d=c.path;a.loadTextureFrontCrossDisabled(d?this._filePath+d:
null);break;case 1:d=c.path,a.loadTextureFrontCrossDisabled(d,ccui.Widget.PLIST_TEXTURE)}a.setSelectedState(c.selectedState||!1);a.setSelectedState(c,"selectedState");this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForImageViewFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);var d=c.fileNameData;switch(d.resourceType){case 0:var e=this._filePath;(d=d.path)&&a.loadTexture(e+d);break;case 1:d=d.path,a.loadTexture(d,ccui.Widget.PLIST_TEXTURE)}e=c.scale9Enable||
!1;a.setScale9Enabled(e);e&&(void 0!==c.scale9Width&&void 0!==c.scale9Height&&a.setSize(cc.size(c.scale9Width,c.scale9Height)),a.setCapInsets(cc.rect(c.capInsetsX,c.capInsetsY,c.capInsetsWidth,c.capInsetsHeight)));this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForLabelFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);a.setTouchScaleChangeEnabled(c.touchScaleEnable);a.setString(c.text);void 0!==c.fontSize&&a.setFontSize(c.fontSize);void 0!==c.fontName&&a.setFontName(c.fontName);
if(void 0!==c.areaWidth&&void 0!==c.areaHeight){var d=cc.size(c.areaWidth,c.areaHeight);a.setTextAreaSize(d)}c.hAlignment&&a.setTextHorizontalAlignment(c.hAlignment);c.vAlignment&&a.setTextVerticalAlignment(c.vAlignment);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForLabelAtlasFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);var d=void 0!==c.charMapFile,e=void 0!==c.itemWidth,f=void 0!==c.itemHeight,g=void 0!==c.startCharMap;if(void 0!==c.stringValue&&
d&&e&&f&&g)switch(d=c.charMapFileData,d.resourceType){case 0:a.setProperty(c.stringValue,this._filePath+d.path,c.itemWidth,c.itemHeight,c.startCharMap);break;case 1:cc.log("Wrong res type of LabelAtlas!")}this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForLayoutFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);!(a instanceof ccui.ScrollView)&&!(a instanceof ccui.ListView)&&a.setClippingEnabled(c.clipAble);var d=c.backGroundScale9Enable;a.setBackGroundImageScale9Enabled(d);
var e=c.bgColorR,f=c.bgColorG,g=c.bgColorB,h=c.bgStartColorR,k=c.bgStartColorG,l=c.bgStartColorB,m=c.bgEndColorR,p=c.bgEndColorG,n=c.bgEndColorB;a.setBackGroundColorVector(cc.p(c.vectorX,c.vectorY));var r=c.bgColorOpacity;a.setBackGroundColorType(c.colorType);a.setBackGroundColor(cc.color(h,k,l),cc.color(m,p,n));a.setBackGroundColor(cc.color(e,f,g));a.setBackGroundColorOpacity(r);e=c.backGroundImageData||{};switch(e.resourceType){case 0:e=e.path;a.setBackGroundImage(e?this._filePath+e:null);break;
case 1:e=e.path,a.setBackGroundImage(e,ccui.Widget.PLIST_TEXTURE)}d&&a.setBackGroundImageCapInsets(cc.rect(c.capInsetsX,c.capInsetsY,c.capInsetsWidth,c.capInsetsHeight));a.setLayoutType(c.layoutType);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForScrollViewFromJsonDictionary:function(a,c){this.setPropsForLayoutFromJsonDictionary(a,c);a.setInnerContainerSize(cc.size(c.innerWidth,c.innerHeight));a.setDirection(c.direction);a.setBounceEnabled(c.bounceEnable);this.setColorPropsForWidgetFromJsonDictionary(a,
c)},setPropsForSliderFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);var d=c.barTextureScale9Enable||!1;a.setScale9Enabled(d);var e=c.length;if(void 0!==c.barFileName)if(d){var d=c.barFileNameData,f=d.resourceType;switch(f){case 0:d=(d=d.path)?this._filePath+d:null;a.loadBarTexture(d);break;case 1:d=d.path,a.loadBarTexture(d,ccui.Widget.PLIST_TEXTURE)}a.setSize(cc.size(e,a.getContentSize().height))}else switch(d=c.barFileNameData,f=d.resourceType,f){case 0:d=(d=d.path)?
this._filePath+d:null;a.loadBarTexture(d);break;case 1:d=d.path,a.loadBarTexture(d,ccui.Widget.PLIST_TEXTURE)}e=c.ballNormalData;switch(e.resourceType){case 0:e=e.path;a.loadSlidBallTextureNormal(e?this._filePath+e:null);break;case 1:e=e.path,a.loadSlidBallTextureNormal(e,ccui.Widget.PLIST_TEXTURE)}e=c.ballPressedData;switch(e.resourceType){case 0:e=e.path;a.loadSlidBallTexturePressed(e?this._filePath+e:null);break;case 1:e=e.path,a.loadSlidBallTexturePressed(e,ccui.Widget.PLIST_TEXTURE)}e=c.ballDisabledData;
switch(e.resourceType){case 0:e=e.path;a.loadSlidBallTextureDisabled(e?this._filePath+e:null);break;case 1:e=e.path,a.loadSlidBallTextureDisabled(e,ccui.Widget.PLIST_TEXTURE)}e=c.progressBarData;switch(e.resourceType){case 0:d=(d=e.path)?this._filePath+d:null;a.loadProgressBarTexture(d);break;case 1:d=e.path,a.loadProgressBarTexture(d,ccui.Widget.PLIST_TEXTURE)}this.setColorPropsForWidgetFromJsonDictionary(a,c);a.setPercent(c.percent)},setPropsForTextAreaFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,
c);a.setString(c.text);void 0!==c.fontSize&&a.setFontSize(c.fontSize);var d=c.colorR,e=c.colorG,f=c.colorB;a.setColor(cc.color(null==d?255:d,null==e?255:e,null==f?255:f));a.setFontName(c.fontName);void 0!==c.areaWidth&&void 0!==c.areaHeight&&(d=cc.size(c.areaWidth,c.areaHeight),a.setTextAreaSize(d));c.hAlignment&&a.setTextHorizontalAlignment(c.hAlignment);c.vAlignment&&a.setTextVerticalAlignment(c.vAlignment);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForTextButtonFromJsonDictionary:function(a,
c){this.setPropsForButtonFromJsonDictionary(a,c);a.setTitleText(c.text||"");a.setTitleColor(cc.color(void 0!==c.textColorR?c.textColorR:255,void 0!==c.textColorG?c.textColorG:255,void 0!==c.textColorB?c.textColorB:255));void 0!==c.fontSize&&a.setTitleFontSize(c.fontSize);void 0!==c.fontName&&a.setTitleFontName(c.fontName);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForTextFieldFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);void 0!==c.placeHolder&&a.setPlaceHolder(c.placeHolder);
a.setString(c.text);void 0!==c.fontSize&&a.setFontSize(c.fontSize);void 0!==c.fontName&&a.setFontName(c.fontName);void 0!==c.touchSizeWidth&&void 0!==c.touchSizeHeight&&a.setTouchSize(cc.size(c.touchSizeWidth,c.touchSizeHeight));var d=c.maxLengthEnable;a.setMaxLengthEnabled(d);d&&a.setMaxLength(c.maxLength);d=c.passwordEnable;a.setPasswordEnabled(d);d&&a.setPasswordStyleText(c.passwordStyleText);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForLoadingBarFromJsonDictionary:function(a,
c){this.setPropsForWidgetFromJsonDictionary(a,c);var d=c.textureData;switch(d.resourceType){case 0:var e=this._filePath;(d=d.path)&&a.loadTexture(e+d);break;case 1:d=d.path,a.loadTexture(d,ccui.Widget.PLIST_TEXTURE)}e=c.scale9Enable;a.setScale9Enabled(e);e&&(a.setCapInsets(cc.rect(c.capInsetsX,c.capInsetsY,c.capInsetsWidth,c.capInsetsHeight)),a.setSize(cc.size(c.width,c.height)));a.setDirection(c.direction);a.setPercent(c.percent);this.setColorPropsForWidgetFromJsonDictionary(a,c)},setPropsForListViewFromJsonDictionary:function(a,
c){this.setPropsForLayoutFromJsonDictionary(a,c);a.setInnerContainerSize(cc.size(c.innerWidth||0,c.innerHeight||0));a.setDirection(c.direction||0);a.setGravity(c.gravity||0);a.setItemsMargin(c.itemMargin||0)},setPropsForPageViewFromJsonDictionary:function(a,c){this.setPropsForLayoutFromJsonDictionary(a,c)},setPropsForLabelBMFontFromJsonDictionary:function(a,c){this.setPropsForWidgetFromJsonDictionary(a,c);var d=c.fileNameData;switch(d.resourceType){case 0:a.setFntFile(this._filePath+d.path);break;
case 1:cc.log("Wrong res type of LabelAtlas!")}a.setString(c.text);this.setColorPropsForWidgetFromJsonDictionary(a,c)}});ccs.sceneReader={_baseBath:"",_listener:null,_selector:null,_node:null,createNodeWithSceneFile:function(a){this._node=null;this._baseBath=cc.path.dirname(a);var c=cc.loader.getRes(a);if(!c)throw"Please load the resource first : "+a;this._node=this.createObject(c,null);ccs.triggerManager.parse(c.Triggers||[]);return this._node},createObject:function(a,c){var d=a.classname;if("CCNode"==d){var e=null;c?(e=cc.Node.create(),c.addChild(e)):e=cc.Node.create();this.setPropertyFromJsonDict(e,a);for(var f=
a.components,g=0;g<f.length;g++){var h=f[g];if(!h)break;var d=h.classname,k=h.name,l=h.fileData,m="",p="",n=0;null!=l&&(n=void 0!==l.resourceType?l.resourceType:-1,m=cc.path.join(this._baseBath,l.path),p=l.plistFile);var r=cc.path.extname(m);if("CCSprite"==d){d=null;if(0==n){if(".png"!=r)continue;d=cc.Sprite.create(m)}else if(1==n){if(".plist"!=r)continue;p=cc.path.join(this._baseBath,p);m=cc.path.changeExtname(p,".png");cc.spriteFrameCache.addSpriteFrames(p,m);d=cc.Sprite.create("#"+l.path)}else continue;
m=ccs.ComRender.create(d,"CCSprite");null!=k&&m.setName(k);e.addComponent(m);this._callSelector(d,h)}else if("CCTMXTiledMap"==d)l=null,0==n&&".tmx"==r&&(l=cc.TMXTiledMap.create(m),m=ccs.ComRender.create(l,"CCTMXTiledMap"),null!=k&&m.setName(k),e.addComponent(m),this._callSelector(l,h));else if("CCParticleSystemQuad"==d)".plist"==r&&(l=null,0==n?(l=cc.ParticleSystem.create(m),l.setPosition(0,0),m=ccs.ComRender.create(l,"CCParticleSystemQuad"),null!=k&&m.setName(k),e.addComponent(m),this._callSelector(l,
h)):cc.log("unknown resourcetype on CCParticleSystemQuad!"));else if("CCArmature"==d)0==n&&((n=cc.loader.getRes(m))||cc.log("Please load the resource [%s] first!",m),n=n.armature_data[0].name,ccs.armatureDataManager.addArmatureFileInfo(m),n=ccs.Armature.create(n),m=ccs.ComRender.create(n,"CCArmature"),null!=k&&m.setName(k),e.addComponent(m),(k=h.selectedactionname)&&n.getAnimation()&&n.getAnimation().play(k),this._callSelector(n,h));else if("CCComAudio"==d){var q=null;0==n&&(q=ccs.ComAudio.create(),
q.preloadEffect(m),k&&q.setName(k),e.addComponent(q),this._callSelector(q,h))}else"CCComAttribute"==d?(l=null,0==n?(l=ccs.ComAttribute.create(),""!=m&&l.parse(m),k&&l.setName(k),e.addComponent(l),this._callSelector(l,h)):cc.log("unknown resourcetype on CCComAttribute!")):"CCBackgroundAudio"==d?r&&0==n&&(q=ccs.ComAudio.create(),q.preloadBackgroundMusic(m),q.setFile(m),n=Boolean(h.loop||0),q.setLoop(n),k&&q.setName(k),e.addComponent(q),q.playBackgroundMusic(m,n),this._callSelector(q,h)):"GUIComponent"==
d&&(m=ccs.uiReader.widgetFromJsonFile(m),m=ccs.ComRender.create(m,"GUIComponent"),null!=k&&m.setName(k),e.addComponent(m),this._callSelector(q,h))}f=a.gameobjects;for(g=0;g<f.length;g++){h=f[g];if(!h)break;this.createObject(h,e)}return e}return null},nodeByTag:function(a,c){if(null==a)return null;for(var d=null,e=a.getChildren(),f=0;f<e.length&&!((d=e[f])&&d.getTag()==c)&&!(d=this.nodeByTag(d,c));f++);return d},getNodeByTag:function(a){return null==this._node?null:this._node.getTag()==a?this._node:
this.nodeByTag(this._node,a)},setPropertyFromJsonDict:function(a,c){a.setPosition("undefined"===typeof c.x?0:c.x,"undefined"===typeof c.y?0:c.y);a.setVisible(Boolean("undefined"===typeof c.visible?1:c.visible));a.setTag("undefined"===typeof c.objecttag?-1:c.objecttag);a.setLocalZOrder("undefined"===typeof c.zorder?0:c.zorder);var d="undefined"===typeof c.scaley?1:c.scaley;a.setScaleX("undefined"===typeof c.scalex?1:c.scalex);a.setScaleY(d);a.setRotation("undefined"===typeof c.rotation?0:c.rotation)},
setTarget:function(a,c){this._listener=c;this._selector=a},_callSelector:function(a,c){this._selector&&this._selector.call(this._listener,a,c)},version:function(){return"1.2.0.0"},clear:function(){ccs.triggerManager.removeAll();cc.audioEngine.end()}};